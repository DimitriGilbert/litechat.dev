var VK=Object.defineProperty;var HK=(e,t,n)=>t in e?VK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Me=(e,t,n)=>HK(e,typeof t!="symbol"?t+"":t,n);function GK(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ni(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A2={exports:{}},Dg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c4;function KK(){if(c4)return Dg;c4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,s,i){var a=null;if(i!==void 0&&(a=""+i),s.key!==void 0&&(a=""+s.key),"key"in s){i={};for(var o in s)o!=="key"&&(i[o]=s[o])}else i=s;return s=i.ref,{$$typeof:e,type:r,key:a,ref:s!==void 0?s:null,props:i}}return Dg.Fragment=t,Dg.jsx=n,Dg.jsxs=n,Dg}var u4;function WK(){return u4||(u4=1,A2.exports=KK()),A2.exports}var p=WK(),R2={exports:{}};function ZK(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T8={exports:{}},Ss=T8.exports={},gl,yl;function Ak(){throw new Error("setTimeout has not been defined")}function Rk(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?gl=setTimeout:gl=Ak}catch{gl=Ak}try{typeof clearTimeout=="function"?yl=clearTimeout:yl=Rk}catch{yl=Rk}})();function A8(e){if(gl===setTimeout)return setTimeout(e,0);if((gl===Ak||!gl)&&setTimeout)return gl=setTimeout,setTimeout(e,0);try{return gl(e,0)}catch{try{return gl.call(null,e,0)}catch{return gl.call(this,e,0)}}}function YK(e){if(yl===clearTimeout)return clearTimeout(e);if((yl===Rk||!yl)&&clearTimeout)return yl=clearTimeout,clearTimeout(e);try{return yl(e)}catch{try{return yl.call(null,e)}catch{return yl.call(this,e)}}}var vc=[],mp=!1,df,bw=-1;function XK(){!mp||!df||(mp=!1,df.length?vc=df.concat(vc):bw=-1,vc.length&&R8())}function R8(){if(!mp){var e=A8(XK);mp=!0;for(var t=vc.length;t;){for(df=vc,vc=[];++bw<t;)df&&df[bw].run();bw=-1,t=vc.length}df=null,mp=!1,YK(e)}}Ss.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];vc.push(new N8(e,t)),vc.length===1&&!mp&&A8(R8)};function N8(e,t){this.fun=e,this.array=t}N8.prototype.run=function(){this.fun.apply(null,this.array)};Ss.title="browser";Ss.browser=!0;Ss.env={};Ss.argv=[];Ss.version="";Ss.versions={};function qc(){}Ss.on=qc;Ss.addListener=qc;Ss.once=qc;Ss.off=qc;Ss.removeListener=qc;Ss.removeAllListeners=qc;Ss.emit=qc;Ss.prependListener=qc;Ss.prependOnceListener=qc;Ss.listeners=function(e){return[]};Ss.binding=function(e){throw new Error("process.binding is not supported")};Ss.cwd=function(){return"/"};Ss.chdir=function(e){throw new Error("process.chdir is not supported")};Ss.umask=function(){return 0};var JK=T8.exports;const vs=ZK(JK);var Bn={},d4;function QK(){if(d4)return Bn;d4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(Z){return Z===null||typeof Z!="object"?null:(Z=h&&Z[h]||Z["@@iterator"],typeof Z=="function"?Z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(Z,ee,Q){this.props=Z,this.context=ee,this.refs=b,this.updater=Q||g}w.prototype.isReactComponent={},w.prototype.setState=function(Z,ee){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ee,"setState")},w.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function x(){}x.prototype=w.prototype;function _(Z,ee,Q){this.props=Z,this.context=ee,this.refs=b,this.updater=Q||g}var E=_.prototype=new x;E.constructor=_,v(E,w.prototype),E.isPureReactComponent=!0;var k=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function M(Z,ee,Q,he,Se,ce){return Q=ce.ref,{$$typeof:e,type:Z,key:ee,ref:Q!==void 0?Q:null,props:ce}}function I(Z,ee){return M(Z.type,ee,void 0,void 0,void 0,Z.props)}function O(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===e}function P(Z){var ee={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(Q){return ee[Q]})}var U=/\/+/g;function j(Z,ee){return typeof Z=="object"&&Z!==null&&Z.key!=null?P(""+Z.key):ee.toString(36)}function V(){}function $(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(V,V):(Z.status="pending",Z.then(function(ee){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ee)},function(ee){Z.status==="pending"&&(Z.status="rejected",Z.reason=ee)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function re(Z,ee,Q,he,Se){var ce=typeof Z;(ce==="undefined"||ce==="boolean")&&(Z=null);var je=!1;if(Z===null)je=!0;else switch(ce){case"bigint":case"string":case"number":je=!0;break;case"object":switch(Z.$$typeof){case e:case t:je=!0;break;case d:return je=Z._init,re(je(Z._payload),ee,Q,he,Se)}}if(je)return Se=Se(Z),je=he===""?"."+j(Z,0):he,k(Se)?(Q="",je!=null&&(Q=je.replace(U,"$&/")+"/"),re(Se,ee,Q,"",function(xe){return xe})):Se!=null&&(O(Se)&&(Se=I(Se,Q+(Se.key==null||Z&&Z.key===Se.key?"":(""+Se.key).replace(U,"$&/")+"/")+je)),ee.push(Se)),1;je=0;var De=he===""?".":he+":";if(k(Z))for(var Re=0;Re<Z.length;Re++)he=Z[Re],ce=De+j(he,Re),je+=re(he,ee,Q,ce,Se);else if(Re=m(Z),typeof Re=="function")for(Z=Re.call(Z),Re=0;!(he=Z.next()).done;)he=he.value,ce=De+j(he,Re++),je+=re(he,ee,Q,ce,Se);else if(ce==="object"){if(typeof Z.then=="function")return re($(Z),ee,Q,he,Se);throw ee=String(Z),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return je}function J(Z,ee,Q){if(Z==null)return Z;var he=[],Se=0;return re(Z,he,"","",function(ce){return ee.call(Q,ce,Se++)}),he}function te(Z){if(Z._status===-1){var ee=Z._result;ee=ee(),ee.then(function(Q){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=Q)},function(Q){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=Q)}),Z._status===-1&&(Z._status=0,Z._result=ee)}if(Z._status===1)return Z._result.default;throw Z._result}var X=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ee))return}else if(typeof vs=="object"&&typeof vs.emit=="function"){vs.emit("uncaughtException",Z);return}console.error(Z)};function ie(){}return Bn.Children={map:J,forEach:function(Z,ee,Q){J(Z,function(){ee.apply(this,arguments)},Q)},count:function(Z){var ee=0;return J(Z,function(){ee++}),ee},toArray:function(Z){return J(Z,function(ee){return ee})||[]},only:function(Z){if(!O(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Bn.Component=w,Bn.Fragment=n,Bn.Profiler=s,Bn.PureComponent=_,Bn.StrictMode=r,Bn.Suspense=l,Bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Bn.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return T.H.useMemoCache(Z)}},Bn.cache=function(Z){return function(){return Z.apply(null,arguments)}},Bn.cloneElement=function(Z,ee,Q){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var he=v({},Z.props),Se=Z.key,ce=void 0;if(ee!=null)for(je in ee.ref!==void 0&&(ce=void 0),ee.key!==void 0&&(Se=""+ee.key),ee)!R.call(ee,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&ee.ref===void 0||(he[je]=ee[je]);var je=arguments.length-2;if(je===1)he.children=Q;else if(1<je){for(var De=Array(je),Re=0;Re<je;Re++)De[Re]=arguments[Re+2];he.children=De}return M(Z.type,Se,void 0,void 0,ce,he)},Bn.createContext=function(Z){return Z={$$typeof:a,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:i,_context:Z},Z},Bn.createElement=function(Z,ee,Q){var he,Se={},ce=null;if(ee!=null)for(he in ee.key!==void 0&&(ce=""+ee.key),ee)R.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Se[he]=ee[he]);var je=arguments.length-2;if(je===1)Se.children=Q;else if(1<je){for(var De=Array(je),Re=0;Re<je;Re++)De[Re]=arguments[Re+2];Se.children=De}if(Z&&Z.defaultProps)for(he in je=Z.defaultProps,je)Se[he]===void 0&&(Se[he]=je[he]);return M(Z,ce,void 0,void 0,null,Se)},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function(Z){return{$$typeof:o,render:Z}},Bn.isValidElement=O,Bn.lazy=function(Z){return{$$typeof:d,_payload:{_status:-1,_result:Z},_init:te}},Bn.memo=function(Z,ee){return{$$typeof:c,type:Z,compare:ee===void 0?null:ee}},Bn.startTransition=function(Z){var ee=T.T,Q={};T.T=Q;try{var he=Z(),Se=T.S;Se!==null&&Se(Q,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ie,X)}catch(ce){X(ce)}finally{T.T=ee}},Bn.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Bn.use=function(Z){return T.H.use(Z)},Bn.useActionState=function(Z,ee,Q){return T.H.useActionState(Z,ee,Q)},Bn.useCallback=function(Z,ee){return T.H.useCallback(Z,ee)},Bn.useContext=function(Z){return T.H.useContext(Z)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function(Z,ee){return T.H.useDeferredValue(Z,ee)},Bn.useEffect=function(Z,ee,Q){var he=T.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(Z,ee)},Bn.useId=function(){return T.H.useId()},Bn.useImperativeHandle=function(Z,ee,Q){return T.H.useImperativeHandle(Z,ee,Q)},Bn.useInsertionEffect=function(Z,ee){return T.H.useInsertionEffect(Z,ee)},Bn.useLayoutEffect=function(Z,ee){return T.H.useLayoutEffect(Z,ee)},Bn.useMemo=function(Z,ee){return T.H.useMemo(Z,ee)},Bn.useOptimistic=function(Z,ee){return T.H.useOptimistic(Z,ee)},Bn.useReducer=function(Z,ee,Q){return T.H.useReducer(Z,ee,Q)},Bn.useRef=function(Z){return T.H.useRef(Z)},Bn.useState=function(Z){return T.H.useState(Z)},Bn.useSyncExternalStore=function(Z,ee,Q){return T.H.useSyncExternalStore(Z,ee,Q)},Bn.useTransition=function(){return T.H.useTransition()},Bn.version="19.1.0",Bn}var f4;function yA(){return f4||(f4=1,R2.exports=QK()),R2.exports}var C=yA();const yt=Ni(C),I8=GK({__proto__:null,default:yt},[C]);var N2={exports:{}},Og={},I2={exports:{}},j2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h4;function eW(){return h4||(h4=1,function(e){function t(J,te){var X=J.length;J.push(te);e:for(;0<X;){var ie=X-1>>>1,Z=J[ie];if(0<s(Z,te))J[ie]=te,J[X]=Z,X=ie;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var te=J[0],X=J.pop();if(X!==te){J[0]=X;e:for(var ie=0,Z=J.length,ee=Z>>>1;ie<ee;){var Q=2*(ie+1)-1,he=J[Q],Se=Q+1,ce=J[Se];if(0>s(he,X))Se<Z&&0>s(ce,he)?(J[ie]=ce,J[Se]=X,ie=Se):(J[ie]=he,J[Q]=X,ie=Q);else if(Se<Z&&0>s(ce,X))J[ie]=ce,J[Se]=X,ie=Se;else break e}}return te}function s(J,te){var X=J.sortIndex-te.sortIndex;return X!==0?X:J.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,h=null,m=3,g=!1,v=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function k(J){for(var te=n(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=J)r(c),te.sortIndex=te.expirationTime,t(l,te);else break;te=n(c)}}function T(J){if(b=!1,k(J),!v)if(n(l)!==null)v=!0,R||(R=!0,j());else{var te=n(c);te!==null&&re(T,te.startTime-J)}}var R=!1,M=-1,I=5,O=-1;function P(){return w?!0:!(e.unstable_now()-O<I)}function U(){if(w=!1,R){var J=e.unstable_now();O=J;var te=!0;try{e:{v=!1,b&&(b=!1,_(M),M=-1),g=!0;var X=m;try{t:{for(k(J),h=n(l);h!==null&&!(h.expirationTime>J&&P());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,m=h.priorityLevel;var Z=ie(h.expirationTime<=J);if(J=e.unstable_now(),typeof Z=="function"){h.callback=Z,k(J),te=!0;break t}h===n(l)&&r(l),k(J)}else r(l);h=n(l)}if(h!==null)te=!0;else{var ee=n(c);ee!==null&&re(T,ee.startTime-J),te=!1}}break e}finally{h=null,m=X,g=!1}te=void 0}}finally{te?j():R=!1}}}var j;if(typeof E=="function")j=function(){E(U)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=U,j=function(){$.postMessage(null)}}else j=function(){x(U,0)};function re(J,te){M=x(function(){J(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(J){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var X=m;m=te;try{return J()}finally{m=X}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(J,te){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var X=m;m=J;try{return te()}finally{m=X}},e.unstable_scheduleCallback=function(J,te,X){var ie=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ie+X:ie):X=ie,J){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=X+Z,J={id:d++,callback:te,priorityLevel:J,startTime:X,expirationTime:Z,sortIndex:-1},X>ie?(J.sortIndex=X,t(c,J),n(l)===null&&J===n(c)&&(b?(_(M),M=-1):b=!0,re(T,X-ie))):(J.sortIndex=Z,t(l,J),v||g||(v=!0,R||(R=!0,j()))),J},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(J){var te=m;return function(){var X=m;m=te;try{return J.apply(this,arguments)}finally{m=X}}}}(j2)),j2}var p4;function tW(){return p4||(p4=1,I2.exports=eW()),I2.exports}var M2={exports:{}},xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4;function nW(){if(m4)return xi;m4=1;var e=yA();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xi.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(l,c,null,d)},xi.flushSync=function(l){var c=a.T,d=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=c,r.p=d,r.d.f()}},xi.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},xi.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},xi.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},xi.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},xi.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},xi.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},xi.requestFormReset=function(l){r.d.r(l)},xi.unstable_batchedUpdates=function(l,c){return l(c)},xi.useFormState=function(l,c,d){return a.H.useFormState(l,c,d)},xi.useFormStatus=function(){return a.H.useHostTransitionStatus()},xi.version="19.1.0",xi}var g4;function j8(){if(g4)return M2.exports;g4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),M2.exports=nW(),M2.exports}var y4;function rW(){if(y4)return Og;y4=1;var e=tW(),t=yA(),n=j8();function r(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function a(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(i(u)!==u)throw Error(r(188))}function l(u){var f=u.alternate;if(!f){if(f=i(u),f===null)throw Error(r(188));return f!==u?null:u}for(var y=u,S=f;;){var N=y.return;if(N===null)break;var B=N.alternate;if(B===null){if(S=N.return,S!==null){y=S;continue}break}if(N.child===B.child){for(B=N.child;B;){if(B===y)return o(N),u;if(B===S)return o(N),f;B=B.sibling}throw Error(r(188))}if(y.return!==S.return)y=N,S=B;else{for(var le=!1,Ce=N.child;Ce;){if(Ce===y){le=!0,y=N,S=B;break}if(Ce===S){le=!0,S=N,y=B;break}Ce=Ce.sibling}if(!le){for(Ce=B.child;Ce;){if(Ce===y){le=!0,y=B,S=N;break}if(Ce===S){le=!0,S=B,y=N;break}Ce=Ce.sibling}if(!le)throw Error(r(189))}}if(y.alternate!==S)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function j(u){return u===null||typeof u!="object"?null:(u=U&&u[U]||u["@@iterator"],typeof u=="function"?u:null)}var V=Symbol.for("react.client.reference");function $(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===V?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList";case O:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case E:return(u.displayName||"Context")+".Provider";case _:return(u._context.displayName||"Context")+".Consumer";case k:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case M:return f=u.displayName||null,f!==null?f:$(u.type)||"Memo";case I:f=u._payload,u=u._init;try{return $(u(f))}catch{}}return null}var re=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ie=[],Z=-1;function ee(u){return{current:u}}function Q(u){0>Z||(u.current=ie[Z],ie[Z]=null,Z--)}function he(u,f){Z++,ie[Z]=u.current,u.current=f}var Se=ee(null),ce=ee(null),je=ee(null),De=ee(null);function Re(u,f){switch(he(je,f),he(ce,u),he(Se,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?Fj(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=Fj(f),u=Lj(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}Q(Se),he(Se,u)}function xe(){Q(Se),Q(ce),Q(je)}function Fe(u){u.memoizedState!==null&&he(De,u);var f=Se.current,y=Lj(f,u.type);f!==y&&(he(ce,u),he(Se,y))}function st(u){ce.current===u&&(Q(Se),Q(ce)),De.current===u&&(Q(De),Rg._currentValue=X)}var He=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,H=e.unstable_cancelCallback,ue=e.unstable_shouldYield,ke=e.unstable_requestPaint,ae=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,ne=e.unstable_ImmediatePriority,Ee=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,Te=e.unstable_LowPriority,Xe=e.unstable_IdlePriority,St=e.log,dt=e.unstable_setDisableYieldValue,It=null,Vt=null;function Dt(u){if(typeof St=="function"&&dt(u),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(It,u)}catch{}}var Kt=Math.clz32?Math.clz32:K,be=Math.log,D=Math.LN2;function K(u){return u>>>=0,u===0?32:31-(be(u)/D|0)|0}var pe=256,Oe=4194304;function ve(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Ae(u,f,y){var S=u.pendingLanes;if(S===0)return 0;var N=0,B=u.suspendedLanes,le=u.pingedLanes;u=u.warmLanes;var Ce=S&134217727;return Ce!==0?(S=Ce&~B,S!==0?N=ve(S):(le&=Ce,le!==0?N=ve(le):y||(y=Ce&~u,y!==0&&(N=ve(y))))):(Ce=S&~B,Ce!==0?N=ve(Ce):le!==0?N=ve(le):y||(y=S&~u,y!==0&&(N=ve(y)))),N===0?0:f!==0&&f!==N&&(f&B)===0&&(B=N&-N,y=f&-f,B>=y||B===32&&(y&4194048)!==0)?f:N}function de(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function ht(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var u=pe;return pe<<=1,(pe&4194048)===0&&(pe=256),u}function L(){var u=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),u}function Be(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function rt(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ye(u,f,y,S,N,B){var le=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var Ce=u.entanglements,qe=u.expirationTimes,ft=u.hiddenUpdates;for(y=le&~y;0<y;){var Tt=31-Kt(y),jt=1<<Tt;Ce[Tt]=0,qe[Tt]=-1;var gt=ft[Tt];if(gt!==null)for(ft[Tt]=null,Tt=0;Tt<gt.length;Tt++){var vt=gt[Tt];vt!==null&&(vt.lane&=-536870913)}y&=~jt}S!==0&&we(u,S,0),B!==0&&N===0&&u.tag!==0&&(u.suspendedLanes|=B&~(le&~f))}function we(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var S=31-Kt(f);u.entangledLanes|=f,u.entanglements[S]=u.entanglements[S]|1073741824|y&4194090}function Ue(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var S=31-Kt(y),N=1<<S;N&f|u[S]&f&&(u[S]|=f),y&=~N}}function Et(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function me(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function G(){var u=te.p;return u!==0?u:(u=window.event,u===void 0?32:r4(u.type))}function q(u,f){var y=te.p;try{return te.p=u,f()}finally{te.p=y}}var W=Math.random().toString(36).slice(2),ge="__reactFiber$"+W,Ie="__reactProps$"+W,Ge="__reactContainer$"+W,bt="__reactEvents$"+W,Wt="__reactListeners$"+W,yn="__reactHandles$"+W,Ht="__reactResources$"+W,Xt="__reactMarker$"+W;function an(u){delete u[ge],delete u[Ie],delete u[bt],delete u[Wt],delete u[yn]}function $n(u){var f=u[ge];if(f)return f;for(var y=u.parentNode;y;){if(f=y[Ge]||y[ge]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(u=Uj(u);u!==null;){if(y=u[ge])return y;u=Uj(u)}return f}u=y,y=u.parentNode}return null}function tr(u){if(u=u[ge]||u[Ge]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function jr(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(r(33))}function Mr(u){var f=u[Ht];return f||(f=u[Ht]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Vn(u){u[Xt]=!0}var Mi=new Set,Wo={};function Zo(u,f){Yo(u,f),Yo(u+"Capture",f)}function Yo(u,f){for(Wo[u]=f,u=0;u<f.length;u++)Mi.add(f[u])}var rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},Ma={};function kb(u){return He.call(Ma,u)?!0:He.call(Xo,u)?!1:rs.test(u)?Ma[u]=!0:(Xo[u]=!0,!1)}function mo(u,f,y){if(kb(f))if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+y)}}function zl(u,f,y){if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+y)}}function ma(u,f,y,S){if(S===null)u.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(f,y,""+S)}}var Ad,Jo;function Ul(u){if(Ad===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);Ad=f&&f[1]||"",Jo=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ad+u+Jo}var Wc=!1;function nh(u,f){if(!u||Wc)return"";Wc=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch(vt){var gt=vt}Reflect.construct(u,[],jt)}else{try{jt.call()}catch(vt){gt=vt}u.call(jt.prototype)}}else{try{throw Error()}catch(vt){gt=vt}(jt=u())&&typeof jt.catch=="function"&&jt.catch(function(){})}}catch(vt){if(vt&&gt&&typeof vt.stack=="string")return[vt.stack,gt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=S.DetermineComponentFrameRoot(),le=B[0],Ce=B[1];if(le&&Ce){var qe=le.split(`
`),ft=Ce.split(`
`);for(N=S=0;S<qe.length&&!qe[S].includes("DetermineComponentFrameRoot");)S++;for(;N<ft.length&&!ft[N].includes("DetermineComponentFrameRoot");)N++;if(S===qe.length||N===ft.length)for(S=qe.length-1,N=ft.length-1;1<=S&&0<=N&&qe[S]!==ft[N];)N--;for(;1<=S&&0<=N;S--,N--)if(qe[S]!==ft[N]){if(S!==1||N!==1)do if(S--,N--,0>N||qe[S]!==ft[N]){var Tt=`
`+qe[S].replace(" at new "," at ");return u.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",u.displayName)),Tt}while(1<=S&&0<=N);break}}}finally{Wc=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?Ul(y):""}function nr(u){switch(u.tag){case 26:case 27:case 5:return Ul(u.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 15:return nh(u.type,!1);case 11:return nh(u.type.render,!1);case 1:return nh(u.type,!0);case 31:return Ul("Activity");default:return""}}function Im(u){try{var f="";do f+=nr(u),u=u.return;while(u);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Di(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function jm(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Br(u){var f=jm(u)?"checked":"value",y=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),S=""+u[f];if(!u.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var N=y.get,B=y.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return N.call(this)},set:function(le){S=""+le,B.call(this,le)}}),Object.defineProperty(u,f,{enumerable:y.enumerable}),{getValue:function(){return S},setValue:function(le){S=""+le},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Qo(u){u._valueTracker||(u._valueTracker=Br(u))}function Zc(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var y=f.getValue(),S="";return u&&(S=jm(u)?u.checked?"true":"false":u.value),u=S,u!==y?(f.setValue(u),!0):!1}function go(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Mm=/[\n"\\]/g;function yi(u){return u.replace(Mm,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Yc(u,f,y,S,N,B,le,Ce){u.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?u.type=le:u.removeAttribute("type"),f!=null?le==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+Di(f)):u.value!==""+Di(f)&&(u.value=""+Di(f)):le!=="submit"&&le!=="reset"||u.removeAttribute("value"),f!=null?Xc(u,le,Di(f)):y!=null?Xc(u,le,Di(y)):S!=null&&u.removeAttribute("value"),N==null&&B!=null&&(u.defaultChecked=!!B),N!=null&&(u.checked=N&&typeof N!="function"&&typeof N!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?u.name=""+Di(Ce):u.removeAttribute("name")}function Dm(u,f,y,S,N,B,le,Ce){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(u.type=B),f!=null||y!=null){if(!(B!=="submit"&&B!=="reset"||f!=null))return;y=y!=null?""+Di(y):"",f=f!=null?""+Di(f):y,Ce||f===u.value||(u.value=f),u.defaultValue=f}S=S??N,S=typeof S!="function"&&typeof S!="symbol"&&!!S,u.checked=Ce?u.checked:!!S,u.defaultChecked=!!S,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(u.name=le)}function Xc(u,f,y){f==="number"&&go(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function ql(u,f,y,S){if(u=u.options,f){f={};for(var N=0;N<y.length;N++)f["$"+y[N]]=!0;for(y=0;y<u.length;y++)N=f.hasOwnProperty("$"+u[y].value),u[y].selected!==N&&(u[y].selected=N),N&&S&&(u[y].defaultSelected=!0)}else{for(y=""+Di(y),f=null,N=0;N<u.length;N++){if(u[N].value===y){u[N].selected=!0,S&&(u[N].defaultSelected=!0);return}f!==null||u[N].disabled||(f=u[N])}f!==null&&(f.selected=!0)}}function Jc(u,f,y){if(f!=null&&(f=""+Di(f),f!==u.value&&(u.value=f),y==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=y!=null?""+Di(y):""}function Om(u,f,y,S){if(f==null){if(S!=null){if(y!=null)throw Error(r(92));if(re(S)){if(1<S.length)throw Error(r(93));S=S[0]}y=S}y==null&&(y=""),f=y}y=Di(f),u.defaultValue=y,S=u.textContent,S===y&&S!==""&&S!==null&&(u.value=S)}function Qc(u,f){if(f){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=f;return}}u.textContent=f}var dr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rh(u,f,y){var S=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":S?u.setProperty(f,y):typeof y!="number"||y===0||dr.has(f)?f==="float"?u.cssFloat=y:u[f]=(""+y).trim():u[f]=y+"px"}function Tb(u,f,y){if(f!=null&&typeof f!="object")throw Error(r(62));if(u=u.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?u.setProperty(S,""):S==="float"?u.cssFloat="":u[S]="");for(var N in f)S=f[N],f.hasOwnProperty(N)&&y[N]!==S&&rh(u,N,S)}else for(var B in f)f.hasOwnProperty(B)&&rh(u,B,f[B])}function Pm(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(u){return eu.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Da=null;function sh(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Hl=null,Wr=null;function ga(u){var f=tr(u);if(f&&(u=f.stateNode)){var y=u[Ie]||null;e:switch(u=f.stateNode,f.type){case"input":if(Yc(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+yi(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var S=y[f];if(S!==u&&S.form===u.form){var N=S[Ie]||null;if(!N)throw Error(r(90));Yc(S,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(f=0;f<y.length;f++)S=y[f],S.form===u.form&&Zc(S)}break e;case"textarea":Jc(u,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&ql(u,!!y.multiple,f,!1)}}}var Gl=!1;function tu(u,f,y){if(Gl)return u(f,y);Gl=!0;try{var S=u(f);return S}finally{if(Gl=!1,(Hl!==null||Wr!==null)&&(mv(),Hl&&(f=Hl,u=Wr,Wr=Hl=null,ga(f),u)))for(f=0;f<u.length;f++)ga(u[f])}}function Kl(u,f){var y=u.stateNode;if(y===null)return null;var S=y[Ie]||null;if(S===null)return null;y=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(u=u.type,S=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!S;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(r(231,f,typeof y));return y}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fm=!1;if(zs)try{var bi={};Object.defineProperty(bi,"passive",{get:function(){Fm=!0}}),window.addEventListener("test",bi,bi),window.removeEventListener("test",bi,bi)}catch{Fm=!1}var Oa=null,ih=null,nu=null;function ru(){if(nu)return nu;var u,f=ih,y=f.length,S,N="value"in Oa?Oa.value:Oa.textContent,B=N.length;for(u=0;u<y&&f[u]===N[u];u++);var le=y-u;for(S=1;S<=le&&f[y-S]===N[B-S];S++);return nu=N.slice(u,1<S?1-S:void 0)}function su(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Rd(){return!0}function Ab(){return!1}function Es(u){function f(y,S,N,B,le){this._reactName=y,this._targetInst=N,this.type=S,this.nativeEvent=B,this.target=le,this.currentTarget=null;for(var Ce in u)u.hasOwnProperty(Ce)&&(y=u[Ce],this[Ce]=y?y(B):B[Ce]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?Rd:Ab,this.isPropagationStopped=Ab,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Rd)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Rd)},persist:function(){},isPersistent:Rd}),f}var Wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ah=Es(Wl),el=d({},Wl,{view:0,detail:0}),oh=Es(el),Nd,Lm,Id,lh=d({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Id&&(Id&&u.type==="mousemove"?(Nd=u.screenX-Id.screenX,Lm=u.screenY-Id.screenY):Lm=Nd=0,Id=u),Nd)},movementY:function(u){return"movementY"in u?u.movementY:Lm}}),ch=Es(lh),$m=d({},lh,{dataTransfer:0}),Rb=Es($m),uh=d({},el,{relatedTarget:0}),iu=Es(uh),dh=d({},Wl,{animationName:0,elapsedTime:0,pseudoElement:0}),Nb=Es(dh),U_=d({},Wl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),fh=Es(U_),Bm=d({},Wl,{data:0}),hh=Es(Bm),zm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Us={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jd(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=Us[u])?!!f[u]:!1}function Zl(){return jd}var Ib=d({},el,{key:function(u){if(u.key){var f=zm[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=su(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Um[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(u){return u.type==="keypress"?su(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?su(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),ph=Es(Ib),jb=d({},lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qm=Es(jb),mh=d({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),Vm=Es(mh),Yl=d({},Wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hm=Es(Yl),Gm=d({},lh,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),gh=Es(Gm),Km=d({},Wl,{newState:0,oldState:0}),Mb=Es(Km),q_=[9,13,27,32],Md=zs&&"CompositionEvent"in window,tl=null;zs&&"documentMode"in document&&(tl=document.documentMode);var V_=zs&&"TextEvent"in window&&!tl,yh=zs&&(!Md||tl&&8<tl&&11>=tl),bh=" ",Db=!1;function Wm(u,f){switch(u){case"keyup":return q_.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ob(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Xl=!1;function Pb(u,f){switch(u){case"compositionend":return Ob(f);case"keypress":return f.which!==32?null:(Db=!0,bh);case"textInput":return u=f.data,u===bh&&Db?null:u;default:return null}}function H_(u,f){if(Xl)return u==="compositionend"||!Md&&Wm(u,f)?(u=ru(),nu=ih=Oa=null,Xl=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return yh&&f.locale!=="ko"?null:f.data;default:return null}}var Fb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vh(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!Fb[u.type]:f==="textarea"}function Zm(u,f,y,S){Hl?Wr?Wr.push(S):Wr=[S]:Hl=S,f=xv(f,"onChange"),0<f.length&&(y=new ah("onChange","change",null,y,S),u.push({event:y,listeners:f}))}var au=null,Dd=null;function G_(u){jj(u,0)}function wh(u){var f=jr(u);if(Zc(f))return u}function Od(u,f){if(u==="change")return f}var Pa=!1;if(zs){var Zr;if(zs){var ou="oninput"in document;if(!ou){var Pi=document.createElement("div");Pi.setAttribute("oninput","return;"),ou=typeof Pi.oninput=="function"}Zr=ou}else Zr=!1;Pa=Zr&&(!document.documentMode||9<document.documentMode)}function Lb(){au&&(au.detachEvent("onpropertychange",xh),Dd=au=null)}function xh(u){if(u.propertyName==="value"&&wh(Dd)){var f=[];Zm(f,Dd,u,sh(u)),tu(G_,f)}}function $b(u,f,y){u==="focusin"?(Lb(),au=f,Dd=y,au.attachEvent("onpropertychange",xh)):u==="focusout"&&Lb()}function Jl(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return wh(Dd)}function Ym(u,f){if(u==="click")return wh(f)}function lu(u,f){if(u==="input"||u==="change")return wh(f)}function nl(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var vi=typeof Object.is=="function"?Object.is:nl;function A(u,f){if(vi(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var N=y[S];if(!He.call(f,N)||!vi(u[N],f[N]))return!1}return!0}function F(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Y(u,f){var y=F(u);u=0;for(var S;y;){if(y.nodeType===3){if(S=u+y.textContent.length,u<=f&&S>=f)return{node:y,offset:f-u};u=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=F(y)}}function se(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?se(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function fe(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=go(u.document);f instanceof u.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)u=f.contentWindow;else break;f=go(u.document)}return f}function _e(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var Pe=zs&&"documentMode"in document&&11>=document.documentMode,$e=null,Ye=null,Qe=null,it=!1;function Ke(u,f,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;it||$e==null||$e!==go(S)||(S=$e,"selectionStart"in S&&_e(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Qe&&A(Qe,S)||(Qe=S,S=xv(Ye,"onSelect"),0<S.length&&(f=new ah("onSelect","select",null,f,y),u.push({event:f,listeners:S}),f.target=$e)))}function ot(u,f){var y={};return y[u.toLowerCase()]=f.toLowerCase(),y["Webkit"+u]="webkit"+f,y["Moz"+u]="moz"+f,y}var Ze={animationend:ot("Animation","AnimationEnd"),animationiteration:ot("Animation","AnimationIteration"),animationstart:ot("Animation","AnimationStart"),transitionrun:ot("Transition","TransitionRun"),transitionstart:ot("Transition","TransitionStart"),transitioncancel:ot("Transition","TransitionCancel"),transitionend:ot("Transition","TransitionEnd")},nt={},lt={};zs&&(lt=document.createElement("div").style,"AnimationEvent"in window||(delete Ze.animationend.animation,delete Ze.animationiteration.animation,delete Ze.animationstart.animation),"TransitionEvent"in window||delete Ze.transitionend.transition);function et(u){if(nt[u])return nt[u];if(!Ze[u])return u;var f=Ze[u],y;for(y in f)if(f.hasOwnProperty(y)&&y in lt)return nt[u]=f[y];return u}var pt=et("animationend"),xt=et("animationiteration"),_t=et("animationstart"),kt=et("transitionrun"),Bt=et("transitionstart"),Zt=et("transitioncancel"),Ft=et("transitionend"),qt=new Map,Yt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yt.push("scrollEnd");function Lt(u,f){qt.set(u,f),Zo(f,[u])}var tn=new WeakMap;function mn(u,f){if(typeof u=="object"&&u!==null){var y=tn.get(u);return y!==void 0?y:(f={value:u,source:f,stack:Im(f)},tn.set(u,f),f)}return{value:u,source:f,stack:Im(f)}}var bn=[],Mn=0,oi=0;function Cn(){for(var u=Mn,f=oi=Mn=0;f<u;){var y=bn[f];bn[f++]=null;var S=bn[f];bn[f++]=null;var N=bn[f];bn[f++]=null;var B=bn[f];if(bn[f++]=null,S!==null&&N!==null){var le=S.pending;le===null?N.next=N:(N.next=le.next,le.next=N),S.pending=N}B!==0&&qs(y,N,B)}}function ps(u,f,y,S){bn[Mn++]=u,bn[Mn++]=f,bn[Mn++]=y,bn[Mn++]=S,oi|=S,u.lanes|=S,u=u.alternate,u!==null&&(u.lanes|=S)}function Cs(u,f,y,S){return ps(u,f,y,S),Fa(u)}function yo(u,f){return ps(u,null,null,f),Fa(u)}function qs(u,f,y){u.lanes|=y;var S=u.alternate;S!==null&&(S.lanes|=y);for(var N=!1,B=u.return;B!==null;)B.childLanes|=y,S=B.alternate,S!==null&&(S.childLanes|=y),B.tag===22&&(u=B.stateNode,u===null||u._visibility&1||(N=!0)),u=B,B=B.return;return u.tag===3?(B=u.stateNode,N&&f!==null&&(N=31-Kt(y),u=B.hiddenUpdates,S=u[N],S===null?u[N]=[f]:S.push(f),f.lane=y|536870912),B):null}function Fa(u){if(50<xg)throw xg=0,JS=null,Error(r(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var rl={};function RG(u,f,y,S){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(u,f,y,S){return new RG(u,f,y,S)}function K_(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Ql(u,f){var y=u.alternate;return y===null?(y=ya(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function yI(u,f){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function Bb(u,f,y,S,N,B){var le=0;if(S=u,typeof u=="function")K_(u)&&(le=1);else if(typeof u=="string")le=IK(u,y,Se.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case O:return u=ya(31,y,f,N),u.elementType=O,u.lanes=B,u;case v:return Pd(y.children,N,B,f);case b:le=8,N|=24;break;case w:return u=ya(12,y,f,N|2),u.elementType=w,u.lanes=B,u;case T:return u=ya(13,y,f,N),u.elementType=T,u.lanes=B,u;case R:return u=ya(19,y,f,N),u.elementType=R,u.lanes=B,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case x:case E:le=10;break e;case _:le=9;break e;case k:le=11;break e;case M:le=14;break e;case I:le=16,S=null;break e}le=29,y=Error(r(130,u===null?"null":typeof u,"")),S=null}return f=ya(le,y,f,N),f.elementType=u,f.type=S,f.lanes=B,f}function Pd(u,f,y,S){return u=ya(7,u,S,f),u.lanes=y,u}function W_(u,f,y){return u=ya(6,u,null,f),u.lanes=y,u}function Z_(u,f,y){return f=ya(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var _h=[],Sh=0,zb=null,Ub=0,La=[],$a=0,Fd=null,ec=1,tc="";function Ld(u,f){_h[Sh++]=Ub,_h[Sh++]=zb,zb=u,Ub=f}function bI(u,f,y){La[$a++]=ec,La[$a++]=tc,La[$a++]=Fd,Fd=u;var S=ec;u=tc;var N=32-Kt(S)-1;S&=~(1<<N),y+=1;var B=32-Kt(f)+N;if(30<B){var le=N-N%5;B=(S&(1<<le)-1).toString(32),S>>=le,N-=le,ec=1<<32-Kt(f)+N|y<<N|S,tc=B+u}else ec=1<<B|y<<N|S,tc=u}function Y_(u){u.return!==null&&(Ld(u,1),bI(u,1,0))}function X_(u){for(;u===zb;)zb=_h[--Sh],_h[Sh]=null,Ub=_h[--Sh],_h[Sh]=null;for(;u===Fd;)Fd=La[--$a],La[$a]=null,tc=La[--$a],La[$a]=null,ec=La[--$a],La[$a]=null}var Fi=null,cs=null,wr=!1,$d=null,sl=!1,J_=Error(r(519));function Bd(u){var f=Error(r(418,""));throw Qm(mn(f,u)),J_}function vI(u){var f=u.stateNode,y=u.type,S=u.memoizedProps;switch(f[ge]=u,f[Ie]=S,y){case"dialog":sr("cancel",f),sr("close",f);break;case"iframe":case"object":case"embed":sr("load",f);break;case"video":case"audio":for(y=0;y<Sg.length;y++)sr(Sg[y],f);break;case"source":sr("error",f);break;case"img":case"image":case"link":sr("error",f),sr("load",f);break;case"details":sr("toggle",f);break;case"input":sr("invalid",f),Dm(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Qo(f);break;case"select":sr("invalid",f);break;case"textarea":sr("invalid",f),Om(f,S.value,S.defaultValue,S.children),Qo(f)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||S.suppressHydrationWarning===!0||Pj(f.textContent,y)?(S.popover!=null&&(sr("beforetoggle",f),sr("toggle",f)),S.onScroll!=null&&sr("scroll",f),S.onScrollEnd!=null&&sr("scrollend",f),S.onClick!=null&&(f.onclick=_v),f=!0):f=!1,f||Bd(u)}function wI(u){for(Fi=u.return;Fi;)switch(Fi.tag){case 5:case 13:sl=!1;return;case 27:case 3:sl=!0;return;default:Fi=Fi.return}}function Xm(u){if(u!==Fi)return!1;if(!wr)return wI(u),wr=!0,!1;var f=u.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||p2(u.type,u.memoizedProps)),y=!y),y&&cs&&Bd(u),wI(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(y=u.data,y==="/$"){if(f===0){cs=vo(u.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++;u=u.nextSibling}cs=null}}else f===27?(f=cs,Eu(u.type)?(u=b2,b2=null,cs=u):cs=f):cs=Fi?vo(u.stateNode.nextSibling):null;return!0}function Jm(){cs=Fi=null,wr=!1}function xI(){var u=$d;return u!==null&&(Qi===null?Qi=u:Qi.push.apply(Qi,u),$d=null),u}function Qm(u){$d===null?$d=[u]:$d.push(u)}var Q_=ee(null),zd=null,nc=null;function cu(u,f,y){he(Q_,f._currentValue),f._currentValue=y}function rc(u){u._currentValue=Q_.current,Q(Q_)}function eS(u,f,y){for(;u!==null;){var S=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),u===y)break;u=u.return}}function tS(u,f,y,S){var N=u.child;for(N!==null&&(N.return=u);N!==null;){var B=N.dependencies;if(B!==null){var le=N.child;B=B.firstContext;e:for(;B!==null;){var Ce=B;B=N;for(var qe=0;qe<f.length;qe++)if(Ce.context===f[qe]){B.lanes|=y,Ce=B.alternate,Ce!==null&&(Ce.lanes|=y),eS(B.return,y,u),S||(le=null);break e}B=Ce.next}}else if(N.tag===18){if(le=N.return,le===null)throw Error(r(341));le.lanes|=y,B=le.alternate,B!==null&&(B.lanes|=y),eS(le,y,u),le=null}else le=N.child;if(le!==null)le.return=N;else for(le=N;le!==null;){if(le===u){le=null;break}if(N=le.sibling,N!==null){N.return=le.return,le=N;break}le=le.return}N=le}}function eg(u,f,y,S){u=null;for(var N=f,B=!1;N!==null;){if(!B){if((N.flags&524288)!==0)B=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var le=N.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var Ce=N.type;vi(N.pendingProps.value,le.value)||(u!==null?u.push(Ce):u=[Ce])}}else if(N===De.current){if(le=N.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(u!==null?u.push(Rg):u=[Rg])}N=N.return}u!==null&&tS(f,u,y,S),f.flags|=262144}function qb(u){for(u=u.firstContext;u!==null;){if(!vi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Ud(u){zd=u,nc=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function wi(u){return _I(zd,u)}function Vb(u,f){return zd===null&&Ud(u),_I(u,f)}function _I(u,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},nc===null){if(u===null)throw Error(r(308));nc=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else nc=nc.next=f;return y}var NG=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,S){u.push(S)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},IG=e.unstable_scheduleCallback,jG=e.unstable_NormalPriority,Ms={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nS(){return{controller:new NG,data:new Map,refCount:0}}function tg(u){u.refCount--,u.refCount===0&&IG(jG,function(){u.controller.abort()})}var ng=null,rS=0,Eh=0,Ch=null;function MG(u,f){if(ng===null){var y=ng=[];rS=0,Eh=i2(),Ch={status:"pending",value:void 0,then:function(S){y.push(S)}}}return rS++,f.then(SI,SI),f}function SI(){if(--rS===0&&ng!==null){Ch!==null&&(Ch.status="fulfilled");var u=ng;ng=null,Eh=0,Ch=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function DG(u,f){var y=[],S={status:"pending",value:null,reason:null,then:function(N){y.push(N)}};return u.then(function(){S.status="fulfilled",S.value=f;for(var N=0;N<y.length;N++)(0,y[N])(f)},function(N){for(S.status="rejected",S.reason=N,N=0;N<y.length;N++)(0,y[N])(void 0)}),S}var EI=J.S;J.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&MG(u,f),EI!==null&&EI(u,f)};var qd=ee(null);function sS(){var u=qd.current;return u!==null?u:Hr.pooledCache}function Hb(u,f){f===null?he(qd,qd.current):he(qd,f.pool)}function CI(){var u=sS();return u===null?null:{parent:Ms._currentValue,pool:u}}var rg=Error(r(460)),kI=Error(r(474)),Gb=Error(r(542)),iS={then:function(){}};function TI(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Kb(){}function AI(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then(Kb,Kb),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,NI(u),u;default:if(typeof f.status=="string")f.then(Kb,Kb);else{if(u=Hr,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=f,u.status="pending",u.then(function(S){if(f.status==="pending"){var N=f;N.status="fulfilled",N.value=S}},function(S){if(f.status==="pending"){var N=f;N.status="rejected",N.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,NI(u),u}throw sg=f,rg}}var sg=null;function RI(){if(sg===null)throw Error(r(459));var u=sg;return sg=null,u}function NI(u){if(u===rg||u===Gb)throw Error(r(483))}var uu=!1;function aS(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oS(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function du(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function fu(u,f,y){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,(Tr&2)!==0){var N=S.pending;return N===null?f.next=f:(f.next=N.next,N.next=f),S.pending=f,f=Fa(u),qs(u,null,y),f}return ps(u,S,f,y),Fa(u)}function ig(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var S=f.lanes;S&=u.pendingLanes,y|=S,f.lanes=y,Ue(u,y)}}function lS(u,f){var y=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var N=null,B=null;if(y=y.firstBaseUpdate,y!==null){do{var le={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};B===null?N=B=le:B=B.next=le,y=y.next}while(y!==null);B===null?N=B=f:B=B.next=f}else N=B=f;y={baseState:S.baseState,firstBaseUpdate:N,lastBaseUpdate:B,shared:S.shared,callbacks:S.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}var cS=!1;function ag(){if(cS){var u=Ch;if(u!==null)throw u}}function og(u,f,y,S){cS=!1;var N=u.updateQueue;uu=!1;var B=N.firstBaseUpdate,le=N.lastBaseUpdate,Ce=N.shared.pending;if(Ce!==null){N.shared.pending=null;var qe=Ce,ft=qe.next;qe.next=null,le===null?B=ft:le.next=ft,le=qe;var Tt=u.alternate;Tt!==null&&(Tt=Tt.updateQueue,Ce=Tt.lastBaseUpdate,Ce!==le&&(Ce===null?Tt.firstBaseUpdate=ft:Ce.next=ft,Tt.lastBaseUpdate=qe))}if(B!==null){var jt=N.baseState;le=0,Tt=ft=qe=null,Ce=B;do{var gt=Ce.lane&-536870913,vt=gt!==Ce.lane;if(vt?(fr&gt)===gt:(S&gt)===gt){gt!==0&&gt===Eh&&(cS=!0),Tt!==null&&(Tt=Tt.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var kn=u,vn=Ce;gt=f;var Pr=y;switch(vn.tag){case 1:if(kn=vn.payload,typeof kn=="function"){jt=kn.call(Pr,jt,gt);break e}jt=kn;break e;case 3:kn.flags=kn.flags&-65537|128;case 0:if(kn=vn.payload,gt=typeof kn=="function"?kn.call(Pr,jt,gt):kn,gt==null)break e;jt=d({},jt,gt);break e;case 2:uu=!0}}gt=Ce.callback,gt!==null&&(u.flags|=64,vt&&(u.flags|=8192),vt=N.callbacks,vt===null?N.callbacks=[gt]:vt.push(gt))}else vt={lane:gt,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Tt===null?(ft=Tt=vt,qe=jt):Tt=Tt.next=vt,le|=gt;if(Ce=Ce.next,Ce===null){if(Ce=N.shared.pending,Ce===null)break;vt=Ce,Ce=vt.next,vt.next=null,N.lastBaseUpdate=vt,N.shared.pending=null}}while(!0);Tt===null&&(qe=jt),N.baseState=qe,N.firstBaseUpdate=ft,N.lastBaseUpdate=Tt,B===null&&(N.shared.lanes=0),wu|=le,u.lanes=le,u.memoizedState=jt}}function II(u,f){if(typeof u!="function")throw Error(r(191,u));u.call(f)}function jI(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)II(y[u],f)}var kh=ee(null),Wb=ee(0);function MI(u,f){u=uc,he(Wb,u),he(kh,f),uc=u|f.baseLanes}function uS(){he(Wb,uc),he(kh,kh.current)}function dS(){uc=Wb.current,Q(kh),Q(Wb)}var hu=0,Xn=null,Dr=null,ks=null,Zb=!1,Th=!1,Vd=!1,Yb=0,lg=0,Ah=null,OG=0;function ms(){throw Error(r(321))}function fS(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!vi(u[y],f[y]))return!1;return!0}function hS(u,f,y,S,N,B){return hu=B,Xn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,J.H=u===null||u.memoizedState===null?g3:y3,Vd=!1,B=y(S,N),Vd=!1,Th&&(B=OI(f,y,S,N)),DI(u),B}function DI(u){J.H=nv;var f=Dr!==null&&Dr.next!==null;if(hu=0,ks=Dr=Xn=null,Zb=!1,lg=0,Ah=null,f)throw Error(r(300));u===null||Vs||(u=u.dependencies,u!==null&&qb(u)&&(Vs=!0))}function OI(u,f,y,S){Xn=u;var N=0;do{if(Th&&(Ah=null),lg=0,Th=!1,25<=N)throw Error(r(301));if(N+=1,ks=Dr=null,u.updateQueue!=null){var B=u.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}J.H=UG,B=f(y,S)}while(Th);return B}function PG(){var u=J.H,f=u.useState()[0];return f=typeof f.then=="function"?cg(f):f,u=u.useState()[0],(Dr!==null?Dr.memoizedState:null)!==u&&(Xn.flags|=1024),f}function pS(){var u=Yb!==0;return Yb=0,u}function mS(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function gS(u){if(Zb){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Zb=!1}hu=0,ks=Dr=Xn=null,Th=!1,lg=Yb=0,Ah=null}function Xi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ks===null?Xn.memoizedState=ks=u:ks=ks.next=u,ks}function Ts(){if(Dr===null){var u=Xn.alternate;u=u!==null?u.memoizedState:null}else u=Dr.next;var f=ks===null?Xn.memoizedState:ks.next;if(f!==null)ks=f,Dr=u;else{if(u===null)throw Xn.alternate===null?Error(r(467)):Error(r(310));Dr=u,u={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},ks===null?Xn.memoizedState=ks=u:ks=ks.next=u}return ks}function yS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cg(u){var f=lg;return lg+=1,Ah===null&&(Ah=[]),u=AI(Ah,u,f),f=Xn,(ks===null?f.memoizedState:ks.next)===null&&(f=f.alternate,J.H=f===null||f.memoizedState===null?g3:y3),u}function Xb(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return cg(u);if(u.$$typeof===E)return wi(u)}throw Error(r(438,String(u)))}function bS(u){var f=null,y=Xn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=Xn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(N){return N.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=yS(),Xn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),S=0;S<u;S++)y[S]=P;return f.index++,y}function sc(u,f){return typeof f=="function"?f(u):f}function Jb(u){var f=Ts();return vS(f,Dr,u)}function vS(u,f,y){var S=u.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=y;var N=u.baseQueue,B=S.pending;if(B!==null){if(N!==null){var le=N.next;N.next=B.next,B.next=le}f.baseQueue=N=B,S.pending=null}if(B=u.baseState,N===null)u.memoizedState=B;else{f=N.next;var Ce=le=null,qe=null,ft=f,Tt=!1;do{var jt=ft.lane&-536870913;if(jt!==ft.lane?(fr&jt)===jt:(hu&jt)===jt){var gt=ft.revertLane;if(gt===0)qe!==null&&(qe=qe.next={lane:0,revertLane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),jt===Eh&&(Tt=!0);else if((hu&gt)===gt){ft=ft.next,gt===Eh&&(Tt=!0);continue}else jt={lane:0,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},qe===null?(Ce=qe=jt,le=B):qe=qe.next=jt,Xn.lanes|=gt,wu|=gt;jt=ft.action,Vd&&y(B,jt),B=ft.hasEagerState?ft.eagerState:y(B,jt)}else gt={lane:jt,revertLane:ft.revertLane,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null},qe===null?(Ce=qe=gt,le=B):qe=qe.next=gt,Xn.lanes|=jt,wu|=jt;ft=ft.next}while(ft!==null&&ft!==f);if(qe===null?le=B:qe.next=Ce,!vi(B,u.memoizedState)&&(Vs=!0,Tt&&(y=Ch,y!==null)))throw y;u.memoizedState=B,u.baseState=le,u.baseQueue=qe,S.lastRenderedState=B}return N===null&&(S.lanes=0),[u.memoizedState,S.dispatch]}function wS(u){var f=Ts(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=u;var S=y.dispatch,N=y.pending,B=f.memoizedState;if(N!==null){y.pending=null;var le=N=N.next;do B=u(B,le.action),le=le.next;while(le!==N);vi(B,f.memoizedState)||(Vs=!0),f.memoizedState=B,f.baseQueue===null&&(f.baseState=B),y.lastRenderedState=B}return[B,S]}function PI(u,f,y){var S=Xn,N=Ts(),B=wr;if(B){if(y===void 0)throw Error(r(407));y=y()}else y=f();var le=!vi((Dr||N).memoizedState,y);le&&(N.memoizedState=y,Vs=!0),N=N.queue;var Ce=$I.bind(null,S,N,u);if(ug(2048,8,Ce,[u]),N.getSnapshot!==f||le||ks!==null&&ks.memoizedState.tag&1){if(S.flags|=2048,Rh(9,Qb(),LI.bind(null,S,N,y,f),null),Hr===null)throw Error(r(349));B||(hu&124)!==0||FI(S,f,y)}return y}function FI(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=Xn.updateQueue,f===null?(f=yS(),Xn.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function LI(u,f,y,S){f.value=y,f.getSnapshot=S,BI(f)&&zI(u)}function $I(u,f,y){return y(function(){BI(f)&&zI(u)})}function BI(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!vi(u,y)}catch{return!0}}function zI(u){var f=yo(u,2);f!==null&&_a(f,u,2)}function xS(u){var f=Xi();if(typeof u=="function"){var y=u;if(u=y(),Vd){Dt(!0);try{y()}finally{Dt(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:u},f}function UI(u,f,y,S){return u.baseState=y,vS(u,Dr,typeof S=="function"?S:sc)}function FG(u,f,y,S,N){if(tv(u))throw Error(r(485));if(u=f.action,u!==null){var B={payload:N,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){B.listeners.push(le)}};J.T!==null?y(!0):B.isTransition=!1,S(B),y=f.pending,y===null?(B.next=f.pending=B,qI(f,B)):(B.next=y.next,f.pending=y.next=B)}}function qI(u,f){var y=f.action,S=f.payload,N=u.state;if(f.isTransition){var B=J.T,le={};J.T=le;try{var Ce=y(N,S),qe=J.S;qe!==null&&qe(le,Ce),VI(u,f,Ce)}catch(ft){_S(u,f,ft)}finally{J.T=B}}else try{B=y(N,S),VI(u,f,B)}catch(ft){_S(u,f,ft)}}function VI(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){HI(u,f,S)},function(S){return _S(u,f,S)}):HI(u,f,y)}function HI(u,f,y){f.status="fulfilled",f.value=y,GI(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,qI(u,y)))}function _S(u,f,y){var S=u.pending;if(u.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,GI(f),f=f.next;while(f!==S)}u.action=null}function GI(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function KI(u,f){return f}function WI(u,f){if(wr){var y=Hr.formState;if(y!==null){e:{var S=Xn;if(wr){if(cs){t:{for(var N=cs,B=sl;N.nodeType!==8;){if(!B){N=null;break t}if(N=vo(N.nextSibling),N===null){N=null;break t}}B=N.data,N=B==="F!"||B==="F"?N:null}if(N){cs=vo(N.nextSibling),S=N.data==="F!";break e}}Bd(S)}S=!1}S&&(f=y[0])}}return y=Xi(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:KI,lastRenderedState:f},y.queue=S,y=h3.bind(null,Xn,S),S.dispatch=y,S=xS(!1),B=TS.bind(null,Xn,!1,S.queue),S=Xi(),N={state:f,dispatch:null,action:u,pending:null},S.queue=N,y=FG.bind(null,Xn,N,B,y),N.dispatch=y,S.memoizedState=u,[f,y,!1]}function ZI(u){var f=Ts();return YI(f,Dr,u)}function YI(u,f,y){if(f=vS(u,f,KI)[0],u=Jb(sc)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=cg(f)}catch(le){throw le===rg?Gb:le}else S=f;f=Ts();var N=f.queue,B=N.dispatch;return y!==f.memoizedState&&(Xn.flags|=2048,Rh(9,Qb(),LG.bind(null,N,y),null)),[S,B,u]}function LG(u,f){u.action=f}function XI(u){var f=Ts(),y=Dr;if(y!==null)return YI(f,y,u);Ts(),f=f.memoizedState,y=Ts();var S=y.queue.dispatch;return y.memoizedState=u,[f,S,!1]}function Rh(u,f,y,S){return u={tag:u,create:y,deps:S,inst:f,next:null},f=Xn.updateQueue,f===null&&(f=yS(),Xn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(S=y.next,y.next=u,u.next=S,f.lastEffect=u),u}function Qb(){return{destroy:void 0,resource:void 0}}function JI(){return Ts().memoizedState}function ev(u,f,y,S){var N=Xi();S=S===void 0?null:S,Xn.flags|=u,N.memoizedState=Rh(1|f,Qb(),y,S)}function ug(u,f,y,S){var N=Ts();S=S===void 0?null:S;var B=N.memoizedState.inst;Dr!==null&&S!==null&&fS(S,Dr.memoizedState.deps)?N.memoizedState=Rh(f,B,y,S):(Xn.flags|=u,N.memoizedState=Rh(1|f,B,y,S))}function QI(u,f){ev(8390656,8,u,f)}function e3(u,f){ug(2048,8,u,f)}function t3(u,f){return ug(4,2,u,f)}function n3(u,f){return ug(4,4,u,f)}function r3(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function s3(u,f,y){y=y!=null?y.concat([u]):null,ug(4,4,r3.bind(null,f,u),y)}function SS(){}function i3(u,f){var y=Ts();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&fS(f,S[1])?S[0]:(y.memoizedState=[u,f],u)}function a3(u,f){var y=Ts();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&fS(f,S[1]))return S[0];if(S=u(),Vd){Dt(!0);try{u()}finally{Dt(!1)}}return y.memoizedState=[S,f],S}function ES(u,f,y){return y===void 0||(hu&1073741824)!==0?u.memoizedState=f:(u.memoizedState=y,u=cj(),Xn.lanes|=u,wu|=u,y)}function o3(u,f,y,S){return vi(y,f)?y:kh.current!==null?(u=ES(u,y,S),vi(u,f)||(Vs=!0),u):(hu&42)===0?(Vs=!0,u.memoizedState=y):(u=cj(),Xn.lanes|=u,wu|=u,f)}function l3(u,f,y,S,N){var B=te.p;te.p=B!==0&&8>B?B:8;var le=J.T,Ce={};J.T=Ce,TS(u,!1,f,y);try{var qe=N(),ft=J.S;if(ft!==null&&ft(Ce,qe),qe!==null&&typeof qe=="object"&&typeof qe.then=="function"){var Tt=DG(qe,S);dg(u,f,Tt,xa(u))}else dg(u,f,S,xa(u))}catch(jt){dg(u,f,{then:function(){},status:"rejected",reason:jt},xa())}finally{te.p=B,J.T=le}}function $G(){}function CS(u,f,y,S){if(u.tag!==5)throw Error(r(476));var N=c3(u).queue;l3(u,N,f,X,y===null?$G:function(){return u3(u),y(S)})}function c3(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:X},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function u3(u){var f=c3(u).next.queue;dg(u,f,{},xa())}function kS(){return wi(Rg)}function d3(){return Ts().memoizedState}function f3(){return Ts().memoizedState}function BG(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=xa();u=du(y);var S=fu(f,u,y);S!==null&&(_a(S,f,y),ig(S,f,y)),f={cache:nS()},u.payload=f;return}f=f.return}}function zG(u,f,y){var S=xa();y={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},tv(u)?p3(f,y):(y=Cs(u,f,y,S),y!==null&&(_a(y,u,S),m3(y,f,S)))}function h3(u,f,y){var S=xa();dg(u,f,y,S)}function dg(u,f,y,S){var N={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(tv(u))p3(f,N);else{var B=u.alternate;if(u.lanes===0&&(B===null||B.lanes===0)&&(B=f.lastRenderedReducer,B!==null))try{var le=f.lastRenderedState,Ce=B(le,y);if(N.hasEagerState=!0,N.eagerState=Ce,vi(Ce,le))return ps(u,f,N,0),Hr===null&&Cn(),!1}catch{}finally{}if(y=Cs(u,f,N,S),y!==null)return _a(y,u,S),m3(y,f,S),!0}return!1}function TS(u,f,y,S){if(S={lane:2,revertLane:i2(),action:S,hasEagerState:!1,eagerState:null,next:null},tv(u)){if(f)throw Error(r(479))}else f=Cs(u,y,S,2),f!==null&&_a(f,u,2)}function tv(u){var f=u.alternate;return u===Xn||f!==null&&f===Xn}function p3(u,f){Th=Zb=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function m3(u,f,y){if((y&4194048)!==0){var S=f.lanes;S&=u.pendingLanes,y|=S,f.lanes=y,Ue(u,y)}}var nv={readContext:wi,use:Xb,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useLayoutEffect:ms,useInsertionEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useSyncExternalStore:ms,useId:ms,useHostTransitionStatus:ms,useFormState:ms,useActionState:ms,useOptimistic:ms,useMemoCache:ms,useCacheRefresh:ms},g3={readContext:wi,use:Xb,useCallback:function(u,f){return Xi().memoizedState=[u,f===void 0?null:f],u},useContext:wi,useEffect:QI,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,ev(4194308,4,r3.bind(null,f,u),y)},useLayoutEffect:function(u,f){return ev(4194308,4,u,f)},useInsertionEffect:function(u,f){ev(4,2,u,f)},useMemo:function(u,f){var y=Xi();f=f===void 0?null:f;var S=u();if(Vd){Dt(!0);try{u()}finally{Dt(!1)}}return y.memoizedState=[S,f],S},useReducer:function(u,f,y){var S=Xi();if(y!==void 0){var N=y(f);if(Vd){Dt(!0);try{y(f)}finally{Dt(!1)}}}else N=f;return S.memoizedState=S.baseState=N,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:N},S.queue=u,u=u.dispatch=zG.bind(null,Xn,u),[S.memoizedState,u]},useRef:function(u){var f=Xi();return u={current:u},f.memoizedState=u},useState:function(u){u=xS(u);var f=u.queue,y=h3.bind(null,Xn,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:SS,useDeferredValue:function(u,f){var y=Xi();return ES(y,u,f)},useTransition:function(){var u=xS(!1);return u=l3.bind(null,Xn,u.queue,!0,!1),Xi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var S=Xn,N=Xi();if(wr){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),Hr===null)throw Error(r(349));(fr&124)!==0||FI(S,f,y)}N.memoizedState=y;var B={value:y,getSnapshot:f};return N.queue=B,QI($I.bind(null,S,B,u),[u]),S.flags|=2048,Rh(9,Qb(),LI.bind(null,S,B,y,f),null),y},useId:function(){var u=Xi(),f=Hr.identifierPrefix;if(wr){var y=tc,S=ec;y=(S&~(1<<32-Kt(S)-1)).toString(32)+y,f=""+f+"R"+y,y=Yb++,0<y&&(f+="H"+y.toString(32)),f+=""}else y=OG++,f=""+f+"r"+y.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:kS,useFormState:WI,useActionState:WI,useOptimistic:function(u){var f=Xi();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=TS.bind(null,Xn,!0,y),y.dispatch=f,[u,f]},useMemoCache:bS,useCacheRefresh:function(){return Xi().memoizedState=BG.bind(null,Xn)}},y3={readContext:wi,use:Xb,useCallback:i3,useContext:wi,useEffect:e3,useImperativeHandle:s3,useInsertionEffect:t3,useLayoutEffect:n3,useMemo:a3,useReducer:Jb,useRef:JI,useState:function(){return Jb(sc)},useDebugValue:SS,useDeferredValue:function(u,f){var y=Ts();return o3(y,Dr.memoizedState,u,f)},useTransition:function(){var u=Jb(sc)[0],f=Ts().memoizedState;return[typeof u=="boolean"?u:cg(u),f]},useSyncExternalStore:PI,useId:d3,useHostTransitionStatus:kS,useFormState:ZI,useActionState:ZI,useOptimistic:function(u,f){var y=Ts();return UI(y,Dr,u,f)},useMemoCache:bS,useCacheRefresh:f3},UG={readContext:wi,use:Xb,useCallback:i3,useContext:wi,useEffect:e3,useImperativeHandle:s3,useInsertionEffect:t3,useLayoutEffect:n3,useMemo:a3,useReducer:wS,useRef:JI,useState:function(){return wS(sc)},useDebugValue:SS,useDeferredValue:function(u,f){var y=Ts();return Dr===null?ES(y,u,f):o3(y,Dr.memoizedState,u,f)},useTransition:function(){var u=wS(sc)[0],f=Ts().memoizedState;return[typeof u=="boolean"?u:cg(u),f]},useSyncExternalStore:PI,useId:d3,useHostTransitionStatus:kS,useFormState:XI,useActionState:XI,useOptimistic:function(u,f){var y=Ts();return Dr!==null?UI(y,Dr,u,f):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:bS,useCacheRefresh:f3},Nh=null,fg=0;function rv(u){var f=fg;return fg+=1,Nh===null&&(Nh=[]),AI(Nh,u,f)}function hg(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function sv(u,f){throw f.$$typeof===h?Error(r(525)):(u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function b3(u){var f=u._init;return f(u._payload)}function v3(u){function f(at,Je){if(u){var ut=at.deletions;ut===null?(at.deletions=[Je],at.flags|=16):ut.push(Je)}}function y(at,Je){if(!u)return null;for(;Je!==null;)f(at,Je),Je=Je.sibling;return null}function S(at){for(var Je=new Map;at!==null;)at.key!==null?Je.set(at.key,at):Je.set(at.index,at),at=at.sibling;return Je}function N(at,Je){return at=Ql(at,Je),at.index=0,at.sibling=null,at}function B(at,Je,ut){return at.index=ut,u?(ut=at.alternate,ut!==null?(ut=ut.index,ut<Je?(at.flags|=67108866,Je):ut):(at.flags|=67108866,Je)):(at.flags|=1048576,Je)}function le(at){return u&&at.alternate===null&&(at.flags|=67108866),at}function Ce(at,Je,ut,Rt){return Je===null||Je.tag!==6?(Je=W_(ut,at.mode,Rt),Je.return=at,Je):(Je=N(Je,ut),Je.return=at,Je)}function qe(at,Je,ut,Rt){var on=ut.type;return on===v?Tt(at,Je,ut.props.children,Rt,ut.key):Je!==null&&(Je.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===I&&b3(on)===Je.type)?(Je=N(Je,ut.props),hg(Je,ut),Je.return=at,Je):(Je=Bb(ut.type,ut.key,ut.props,null,at.mode,Rt),hg(Je,ut),Je.return=at,Je)}function ft(at,Je,ut,Rt){return Je===null||Je.tag!==4||Je.stateNode.containerInfo!==ut.containerInfo||Je.stateNode.implementation!==ut.implementation?(Je=Z_(ut,at.mode,Rt),Je.return=at,Je):(Je=N(Je,ut.children||[]),Je.return=at,Je)}function Tt(at,Je,ut,Rt,on){return Je===null||Je.tag!==7?(Je=Pd(ut,at.mode,Rt,on),Je.return=at,Je):(Je=N(Je,ut),Je.return=at,Je)}function jt(at,Je,ut){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return Je=W_(""+Je,at.mode,ut),Je.return=at,Je;if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case m:return ut=Bb(Je.type,Je.key,Je.props,null,at.mode,ut),hg(ut,Je),ut.return=at,ut;case g:return Je=Z_(Je,at.mode,ut),Je.return=at,Je;case I:var Rt=Je._init;return Je=Rt(Je._payload),jt(at,Je,ut)}if(re(Je)||j(Je))return Je=Pd(Je,at.mode,ut,null),Je.return=at,Je;if(typeof Je.then=="function")return jt(at,rv(Je),ut);if(Je.$$typeof===E)return jt(at,Vb(at,Je),ut);sv(at,Je)}return null}function gt(at,Je,ut,Rt){var on=Je!==null?Je.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return on!==null?null:Ce(at,Je,""+ut,Rt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case m:return ut.key===on?qe(at,Je,ut,Rt):null;case g:return ut.key===on?ft(at,Je,ut,Rt):null;case I:return on=ut._init,ut=on(ut._payload),gt(at,Je,ut,Rt)}if(re(ut)||j(ut))return on!==null?null:Tt(at,Je,ut,Rt,null);if(typeof ut.then=="function")return gt(at,Je,rv(ut),Rt);if(ut.$$typeof===E)return gt(at,Je,Vb(at,ut),Rt);sv(at,ut)}return null}function vt(at,Je,ut,Rt,on){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return at=at.get(ut)||null,Ce(Je,at,""+Rt,on);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case m:return at=at.get(Rt.key===null?ut:Rt.key)||null,qe(Je,at,Rt,on);case g:return at=at.get(Rt.key===null?ut:Rt.key)||null,ft(Je,at,Rt,on);case I:var er=Rt._init;return Rt=er(Rt._payload),vt(at,Je,ut,Rt,on)}if(re(Rt)||j(Rt))return at=at.get(ut)||null,Tt(Je,at,Rt,on,null);if(typeof Rt.then=="function")return vt(at,Je,ut,rv(Rt),on);if(Rt.$$typeof===E)return vt(at,Je,ut,Vb(Je,Rt),on);sv(Je,Rt)}return null}function kn(at,Je,ut,Rt){for(var on=null,er=null,hn=Je,_n=Je=0,Gs=null;hn!==null&&_n<ut.length;_n++){hn.index>_n?(Gs=hn,hn=null):Gs=hn.sibling;var br=gt(at,hn,ut[_n],Rt);if(br===null){hn===null&&(hn=Gs);break}u&&hn&&br.alternate===null&&f(at,hn),Je=B(br,Je,_n),er===null?on=br:er.sibling=br,er=br,hn=Gs}if(_n===ut.length)return y(at,hn),wr&&Ld(at,_n),on;if(hn===null){for(;_n<ut.length;_n++)hn=jt(at,ut[_n],Rt),hn!==null&&(Je=B(hn,Je,_n),er===null?on=hn:er.sibling=hn,er=hn);return wr&&Ld(at,_n),on}for(hn=S(hn);_n<ut.length;_n++)Gs=vt(hn,at,_n,ut[_n],Rt),Gs!==null&&(u&&Gs.alternate!==null&&hn.delete(Gs.key===null?_n:Gs.key),Je=B(Gs,Je,_n),er===null?on=Gs:er.sibling=Gs,er=Gs);return u&&hn.forEach(function(Ru){return f(at,Ru)}),wr&&Ld(at,_n),on}function vn(at,Je,ut,Rt){if(ut==null)throw Error(r(151));for(var on=null,er=null,hn=Je,_n=Je=0,Gs=null,br=ut.next();hn!==null&&!br.done;_n++,br=ut.next()){hn.index>_n?(Gs=hn,hn=null):Gs=hn.sibling;var Ru=gt(at,hn,br.value,Rt);if(Ru===null){hn===null&&(hn=Gs);break}u&&hn&&Ru.alternate===null&&f(at,hn),Je=B(Ru,Je,_n),er===null?on=Ru:er.sibling=Ru,er=Ru,hn=Gs}if(br.done)return y(at,hn),wr&&Ld(at,_n),on;if(hn===null){for(;!br.done;_n++,br=ut.next())br=jt(at,br.value,Rt),br!==null&&(Je=B(br,Je,_n),er===null?on=br:er.sibling=br,er=br);return wr&&Ld(at,_n),on}for(hn=S(hn);!br.done;_n++,br=ut.next())br=vt(hn,at,_n,br.value,Rt),br!==null&&(u&&br.alternate!==null&&hn.delete(br.key===null?_n:br.key),Je=B(br,Je,_n),er===null?on=br:er.sibling=br,er=br);return u&&hn.forEach(function(qK){return f(at,qK)}),wr&&Ld(at,_n),on}function Pr(at,Je,ut,Rt){if(typeof ut=="object"&&ut!==null&&ut.type===v&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case m:e:{for(var on=ut.key;Je!==null;){if(Je.key===on){if(on=ut.type,on===v){if(Je.tag===7){y(at,Je.sibling),Rt=N(Je,ut.props.children),Rt.return=at,at=Rt;break e}}else if(Je.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===I&&b3(on)===Je.type){y(at,Je.sibling),Rt=N(Je,ut.props),hg(Rt,ut),Rt.return=at,at=Rt;break e}y(at,Je);break}else f(at,Je);Je=Je.sibling}ut.type===v?(Rt=Pd(ut.props.children,at.mode,Rt,ut.key),Rt.return=at,at=Rt):(Rt=Bb(ut.type,ut.key,ut.props,null,at.mode,Rt),hg(Rt,ut),Rt.return=at,at=Rt)}return le(at);case g:e:{for(on=ut.key;Je!==null;){if(Je.key===on)if(Je.tag===4&&Je.stateNode.containerInfo===ut.containerInfo&&Je.stateNode.implementation===ut.implementation){y(at,Je.sibling),Rt=N(Je,ut.children||[]),Rt.return=at,at=Rt;break e}else{y(at,Je);break}else f(at,Je);Je=Je.sibling}Rt=Z_(ut,at.mode,Rt),Rt.return=at,at=Rt}return le(at);case I:return on=ut._init,ut=on(ut._payload),Pr(at,Je,ut,Rt)}if(re(ut))return kn(at,Je,ut,Rt);if(j(ut)){if(on=j(ut),typeof on!="function")throw Error(r(150));return ut=on.call(ut),vn(at,Je,ut,Rt)}if(typeof ut.then=="function")return Pr(at,Je,rv(ut),Rt);if(ut.$$typeof===E)return Pr(at,Je,Vb(at,ut),Rt);sv(at,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,Je!==null&&Je.tag===6?(y(at,Je.sibling),Rt=N(Je,ut),Rt.return=at,at=Rt):(y(at,Je),Rt=W_(ut,at.mode,Rt),Rt.return=at,at=Rt),le(at)):y(at,Je)}return function(at,Je,ut,Rt){try{fg=0;var on=Pr(at,Je,ut,Rt);return Nh=null,on}catch(hn){if(hn===rg||hn===Gb)throw hn;var er=ya(29,hn,null,at.mode);return er.lanes=Rt,er.return=at,er}finally{}}}var Ih=v3(!0),w3=v3(!1),Ba=ee(null),il=null;function pu(u){var f=u.alternate;he(Ds,Ds.current&1),he(Ba,u),il===null&&(f===null||kh.current!==null||f.memoizedState!==null)&&(il=u)}function x3(u){if(u.tag===22){if(he(Ds,Ds.current),he(Ba,u),il===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(il=u)}}else mu()}function mu(){he(Ds,Ds.current),he(Ba,Ba.current)}function ic(u){Q(Ba),il===u&&(il=null),Q(Ds)}var Ds=ee(0);function iv(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y2(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function AS(u,f,y,S){f=u.memoizedState,y=y(S,f),y=y==null?f:d({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var RS={enqueueSetState:function(u,f,y){u=u._reactInternals;var S=xa(),N=du(S);N.payload=f,y!=null&&(N.callback=y),f=fu(u,N,S),f!==null&&(_a(f,u,S),ig(f,u,S))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var S=xa(),N=du(S);N.tag=1,N.payload=f,y!=null&&(N.callback=y),f=fu(u,N,S),f!==null&&(_a(f,u,S),ig(f,u,S))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=xa(),S=du(y);S.tag=2,f!=null&&(S.callback=f),f=fu(u,S,y),f!==null&&(_a(f,u,y),ig(f,u,y))}};function _3(u,f,y,S,N,B,le){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,B,le):f.prototype&&f.prototype.isPureReactComponent?!A(y,S)||!A(N,B):!0}function S3(u,f,y,S){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==u&&RS.enqueueReplaceState(f,f.state,null)}function Hd(u,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(u=u.defaultProps){y===f&&(y=d({},y));for(var N in u)y[N]===void 0&&(y[N]=u[N])}return y}var av=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof vs=="object"&&typeof vs.emit=="function"){vs.emit("uncaughtException",u);return}console.error(u)};function E3(u){av(u)}function C3(u){console.error(u)}function k3(u){av(u)}function ov(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function T3(u,f,y){try{var S=u.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function NS(u,f,y){return y=du(y),y.tag=3,y.payload={element:null},y.callback=function(){ov(u,f)},y}function A3(u){return u=du(u),u.tag=3,u}function R3(u,f,y,S){var N=y.type.getDerivedStateFromError;if(typeof N=="function"){var B=S.value;u.payload=function(){return N(B)},u.callback=function(){T3(f,y,S)}}var le=y.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(u.callback=function(){T3(f,y,S),typeof N!="function"&&(xu===null?xu=new Set([this]):xu.add(this));var Ce=S.stack;this.componentDidCatch(S.value,{componentStack:Ce!==null?Ce:""})})}function qG(u,f,y,S,N){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&eg(f,y,N,!0),y=Ba.current,y!==null){switch(y.tag){case 13:return il===null?e2():y.alternate===null&&us===0&&(us=3),y.flags&=-257,y.flags|=65536,y.lanes=N,S===iS?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),n2(u,S,N)),!1;case 22:return y.flags|=65536,S===iS?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),n2(u,S,N)),!1}throw Error(r(435,y.tag))}return n2(u,S,N),e2(),!1}if(wr)return f=Ba.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=N,S!==J_&&(u=Error(r(422),{cause:S}),Qm(mn(u,y)))):(S!==J_&&(f=Error(r(423),{cause:S}),Qm(mn(f,y))),u=u.current.alternate,u.flags|=65536,N&=-N,u.lanes|=N,S=mn(S,y),N=NS(u.stateNode,S,N),lS(u,N),us!==4&&(us=2)),!1;var B=Error(r(520),{cause:S});if(B=mn(B,y),wg===null?wg=[B]:wg.push(B),us!==4&&(us=2),f===null)return!0;S=mn(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=N&-N,y.lanes|=u,u=NS(y.stateNode,S,u),lS(y,u),!1;case 1:if(f=y.type,B=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(xu===null||!xu.has(B))))return y.flags|=65536,N&=-N,y.lanes|=N,N=A3(N),R3(N,u,y,S),lS(y,N),!1}y=y.return}while(y!==null);return!1}var N3=Error(r(461)),Vs=!1;function li(u,f,y,S){f.child=u===null?w3(f,null,y,S):Ih(f,u.child,y,S)}function I3(u,f,y,S,N){y=y.render;var B=f.ref;if("ref"in S){var le={};for(var Ce in S)Ce!=="ref"&&(le[Ce]=S[Ce])}else le=S;return Ud(f),S=hS(u,f,y,le,B,N),Ce=pS(),u!==null&&!Vs?(mS(u,f,N),ac(u,f,N)):(wr&&Ce&&Y_(f),f.flags|=1,li(u,f,S,N),f.child)}function j3(u,f,y,S,N){if(u===null){var B=y.type;return typeof B=="function"&&!K_(B)&&B.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=B,M3(u,f,B,S,N)):(u=Bb(y.type,null,S,f,f.mode,N),u.ref=f.ref,u.return=f,f.child=u)}if(B=u.child,!LS(u,N)){var le=B.memoizedProps;if(y=y.compare,y=y!==null?y:A,y(le,S)&&u.ref===f.ref)return ac(u,f,N)}return f.flags|=1,u=Ql(B,S),u.ref=f.ref,u.return=f,f.child=u}function M3(u,f,y,S,N){if(u!==null){var B=u.memoizedProps;if(A(B,S)&&u.ref===f.ref)if(Vs=!1,f.pendingProps=S=B,LS(u,N))(u.flags&131072)!==0&&(Vs=!0);else return f.lanes=u.lanes,ac(u,f,N)}return IS(u,f,y,S,N)}function D3(u,f,y){var S=f.pendingProps,N=S.children,B=u!==null?u.memoizedState:null;if(S.mode==="hidden"){if((f.flags&128)!==0){if(S=B!==null?B.baseLanes|y:y,u!==null){for(N=f.child=u.child,B=0;N!==null;)B=B|N.lanes|N.childLanes,N=N.sibling;f.childLanes=B&~S}else f.childLanes=0,f.child=null;return O3(u,f,S,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Hb(f,B!==null?B.cachePool:null),B!==null?MI(f,B):uS(),x3(f);else return f.lanes=f.childLanes=536870912,O3(u,f,B!==null?B.baseLanes|y:y,y)}else B!==null?(Hb(f,B.cachePool),MI(f,B),mu(),f.memoizedState=null):(u!==null&&Hb(f,null),uS(),mu());return li(u,f,N,y),f.child}function O3(u,f,y,S){var N=sS();return N=N===null?null:{parent:Ms._currentValue,pool:N},f.memoizedState={baseLanes:y,cachePool:N},u!==null&&Hb(f,null),uS(),x3(f),u!==null&&eg(u,f,S,!0),null}function lv(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(u===null||u.ref!==y)&&(f.flags|=4194816)}}function IS(u,f,y,S,N){return Ud(f),y=hS(u,f,y,S,void 0,N),S=pS(),u!==null&&!Vs?(mS(u,f,N),ac(u,f,N)):(wr&&S&&Y_(f),f.flags|=1,li(u,f,y,N),f.child)}function P3(u,f,y,S,N,B){return Ud(f),f.updateQueue=null,y=OI(f,S,y,N),DI(u),S=pS(),u!==null&&!Vs?(mS(u,f,B),ac(u,f,B)):(wr&&S&&Y_(f),f.flags|=1,li(u,f,y,B),f.child)}function F3(u,f,y,S,N){if(Ud(f),f.stateNode===null){var B=rl,le=y.contextType;typeof le=="object"&&le!==null&&(B=wi(le)),B=new y(S,B),f.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=RS,f.stateNode=B,B._reactInternals=f,B=f.stateNode,B.props=S,B.state=f.memoizedState,B.refs={},aS(f),le=y.contextType,B.context=typeof le=="object"&&le!==null?wi(le):rl,B.state=f.memoizedState,le=y.getDerivedStateFromProps,typeof le=="function"&&(AS(f,y,le,S),B.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(le=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),le!==B.state&&RS.enqueueReplaceState(B,B.state,null),og(f,S,B,N),ag(),B.state=f.memoizedState),typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(u===null){B=f.stateNode;var Ce=f.memoizedProps,qe=Hd(y,Ce);B.props=qe;var ft=B.context,Tt=y.contextType;le=rl,typeof Tt=="object"&&Tt!==null&&(le=wi(Tt));var jt=y.getDerivedStateFromProps;Tt=typeof jt=="function"||typeof B.getSnapshotBeforeUpdate=="function",Ce=f.pendingProps!==Ce,Tt||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Ce||ft!==le)&&S3(f,B,S,le),uu=!1;var gt=f.memoizedState;B.state=gt,og(f,S,B,N),ag(),ft=f.memoizedState,Ce||gt!==ft||uu?(typeof jt=="function"&&(AS(f,y,jt,S),ft=f.memoizedState),(qe=uu||_3(f,y,qe,S,gt,ft,le))?(Tt||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(f.flags|=4194308)):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=ft),B.props=S,B.state=ft,B.context=le,S=qe):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{B=f.stateNode,oS(u,f),le=f.memoizedProps,Tt=Hd(y,le),B.props=Tt,jt=f.pendingProps,gt=B.context,ft=y.contextType,qe=rl,typeof ft=="object"&&ft!==null&&(qe=wi(ft)),Ce=y.getDerivedStateFromProps,(ft=typeof Ce=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(le!==jt||gt!==qe)&&S3(f,B,S,qe),uu=!1,gt=f.memoizedState,B.state=gt,og(f,S,B,N),ag();var vt=f.memoizedState;le!==jt||gt!==vt||uu||u!==null&&u.dependencies!==null&&qb(u.dependencies)?(typeof Ce=="function"&&(AS(f,y,Ce,S),vt=f.memoizedState),(Tt=uu||_3(f,y,Tt,S,gt,vt,qe)||u!==null&&u.dependencies!==null&&qb(u.dependencies))?(ft||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(S,vt,qe),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(S,vt,qe)),typeof B.componentDidUpdate=="function"&&(f.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof B.componentDidUpdate!="function"||le===u.memoizedProps&&gt===u.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||le===u.memoizedProps&&gt===u.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=vt),B.props=S,B.state=vt,B.context=qe,S=Tt):(typeof B.componentDidUpdate!="function"||le===u.memoizedProps&&gt===u.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||le===u.memoizedProps&&gt===u.memoizedState||(f.flags|=1024),S=!1)}return B=S,lv(u,f),S=(f.flags&128)!==0,B||S?(B=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:B.render(),f.flags|=1,u!==null&&S?(f.child=Ih(f,u.child,null,N),f.child=Ih(f,null,y,N)):li(u,f,y,N),f.memoizedState=B.state,u=f.child):u=ac(u,f,N),u}function L3(u,f,y,S){return Jm(),f.flags|=256,li(u,f,y,S),f.child}var jS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function MS(u){return{baseLanes:u,cachePool:CI()}}function DS(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=za),u}function $3(u,f,y){var S=f.pendingProps,N=!1,B=(f.flags&128)!==0,le;if((le=B)||(le=u!==null&&u.memoizedState===null?!1:(Ds.current&2)!==0),le&&(N=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,u===null){if(wr){if(N?pu(f):mu(),wr){var Ce=cs,qe;if(qe=Ce){e:{for(qe=Ce,Ce=sl;qe.nodeType!==8;){if(!Ce){Ce=null;break e}if(qe=vo(qe.nextSibling),qe===null){Ce=null;break e}}Ce=qe}Ce!==null?(f.memoizedState={dehydrated:Ce,treeContext:Fd!==null?{id:ec,overflow:tc}:null,retryLane:536870912,hydrationErrors:null},qe=ya(18,null,null,0),qe.stateNode=Ce,qe.return=f,f.child=qe,Fi=f,cs=null,qe=!0):qe=!1}qe||Bd(f)}if(Ce=f.memoizedState,Ce!==null&&(Ce=Ce.dehydrated,Ce!==null))return y2(Ce)?f.lanes=32:f.lanes=536870912,null;ic(f)}return Ce=S.children,S=S.fallback,N?(mu(),N=f.mode,Ce=cv({mode:"hidden",children:Ce},N),S=Pd(S,N,y,null),Ce.return=f,S.return=f,Ce.sibling=S,f.child=Ce,N=f.child,N.memoizedState=MS(y),N.childLanes=DS(u,le,y),f.memoizedState=jS,S):(pu(f),OS(f,Ce))}if(qe=u.memoizedState,qe!==null&&(Ce=qe.dehydrated,Ce!==null)){if(B)f.flags&256?(pu(f),f.flags&=-257,f=PS(u,f,y)):f.memoizedState!==null?(mu(),f.child=u.child,f.flags|=128,f=null):(mu(),N=S.fallback,Ce=f.mode,S=cv({mode:"visible",children:S.children},Ce),N=Pd(N,Ce,y,null),N.flags|=2,S.return=f,N.return=f,S.sibling=N,f.child=S,Ih(f,u.child,null,y),S=f.child,S.memoizedState=MS(y),S.childLanes=DS(u,le,y),f.memoizedState=jS,f=N);else if(pu(f),y2(Ce)){if(le=Ce.nextSibling&&Ce.nextSibling.dataset,le)var ft=le.dgst;le=ft,S=Error(r(419)),S.stack="",S.digest=le,Qm({value:S,source:null,stack:null}),f=PS(u,f,y)}else if(Vs||eg(u,f,y,!1),le=(y&u.childLanes)!==0,Vs||le){if(le=Hr,le!==null&&(S=y&-y,S=(S&42)!==0?1:Et(S),S=(S&(le.suspendedLanes|y))!==0?0:S,S!==0&&S!==qe.retryLane))throw qe.retryLane=S,yo(u,S),_a(le,u,S),N3;Ce.data==="$?"||e2(),f=PS(u,f,y)}else Ce.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=qe.treeContext,cs=vo(Ce.nextSibling),Fi=f,wr=!0,$d=null,sl=!1,u!==null&&(La[$a++]=ec,La[$a++]=tc,La[$a++]=Fd,ec=u.id,tc=u.overflow,Fd=f),f=OS(f,S.children),f.flags|=4096);return f}return N?(mu(),N=S.fallback,Ce=f.mode,qe=u.child,ft=qe.sibling,S=Ql(qe,{mode:"hidden",children:S.children}),S.subtreeFlags=qe.subtreeFlags&65011712,ft!==null?N=Ql(ft,N):(N=Pd(N,Ce,y,null),N.flags|=2),N.return=f,S.return=f,S.sibling=N,f.child=S,S=N,N=f.child,Ce=u.child.memoizedState,Ce===null?Ce=MS(y):(qe=Ce.cachePool,qe!==null?(ft=Ms._currentValue,qe=qe.parent!==ft?{parent:ft,pool:ft}:qe):qe=CI(),Ce={baseLanes:Ce.baseLanes|y,cachePool:qe}),N.memoizedState=Ce,N.childLanes=DS(u,le,y),f.memoizedState=jS,S):(pu(f),y=u.child,u=y.sibling,y=Ql(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,u!==null&&(le=f.deletions,le===null?(f.deletions=[u],f.flags|=16):le.push(u)),f.child=y,f.memoizedState=null,y)}function OS(u,f){return f=cv({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function cv(u,f){return u=ya(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function PS(u,f,y){return Ih(f,u.child,null,y),u=OS(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function B3(u,f,y){u.lanes|=f;var S=u.alternate;S!==null&&(S.lanes|=f),eS(u.return,f,y)}function FS(u,f,y,S,N){var B=u.memoizedState;B===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:N}:(B.isBackwards=f,B.rendering=null,B.renderingStartTime=0,B.last=S,B.tail=y,B.tailMode=N)}function z3(u,f,y){var S=f.pendingProps,N=S.revealOrder,B=S.tail;if(li(u,f,S.children,y),S=Ds.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&B3(u,y,f);else if(u.tag===19)B3(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}switch(he(Ds,S),N){case"forwards":for(y=f.child,N=null;y!==null;)u=y.alternate,u!==null&&iv(u)===null&&(N=y),y=y.sibling;y=N,y===null?(N=f.child,f.child=null):(N=y.sibling,y.sibling=null),FS(f,!1,N,y,B);break;case"backwards":for(y=null,N=f.child,f.child=null;N!==null;){if(u=N.alternate,u!==null&&iv(u)===null){f.child=N;break}u=N.sibling,N.sibling=y,y=N,N=u}FS(f,!0,y,null,B);break;case"together":FS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ac(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),wu|=f.lanes,(y&f.childLanes)===0)if(u!==null){if(eg(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,y=Ql(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=Ql(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function LS(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&qb(u)))}function VG(u,f,y){switch(f.tag){case 3:Re(f,f.stateNode.containerInfo),cu(f,Ms,u.memoizedState.cache),Jm();break;case 27:case 5:Fe(f);break;case 4:Re(f,f.stateNode.containerInfo);break;case 10:cu(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(pu(f),f.flags|=128,null):(y&f.child.childLanes)!==0?$3(u,f,y):(pu(f),u=ac(u,f,y),u!==null?u.sibling:null);pu(f);break;case 19:var N=(u.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||(eg(u,f,y,!1),S=(y&f.childLanes)!==0),N){if(S)return z3(u,f,y);f.flags|=128}if(N=f.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),he(Ds,Ds.current),S)break;return null;case 22:case 23:return f.lanes=0,D3(u,f,y);case 24:cu(f,Ms,u.memoizedState.cache)}return ac(u,f,y)}function U3(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)Vs=!0;else{if(!LS(u,y)&&(f.flags&128)===0)return Vs=!1,VG(u,f,y);Vs=(u.flags&131072)!==0}else Vs=!1,wr&&(f.flags&1048576)!==0&&bI(f,Ub,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var S=f.elementType,N=S._init;if(S=N(S._payload),f.type=S,typeof S=="function")K_(S)?(u=Hd(S,u),f.tag=1,f=F3(null,f,S,u,y)):(f.tag=0,f=IS(null,f,S,u,y));else{if(S!=null){if(N=S.$$typeof,N===k){f.tag=11,f=I3(null,f,S,u,y);break e}else if(N===M){f.tag=14,f=j3(null,f,S,u,y);break e}}throw f=$(S)||S,Error(r(306,f,""))}}return f;case 0:return IS(u,f,f.type,f.pendingProps,y);case 1:return S=f.type,N=Hd(S,f.pendingProps),F3(u,f,S,N,y);case 3:e:{if(Re(f,f.stateNode.containerInfo),u===null)throw Error(r(387));S=f.pendingProps;var B=f.memoizedState;N=B.element,oS(u,f),og(f,S,null,y);var le=f.memoizedState;if(S=le.cache,cu(f,Ms,S),S!==B.cache&&tS(f,[Ms],y,!0),ag(),S=le.element,B.isDehydrated)if(B={element:S,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=B,f.memoizedState=B,f.flags&256){f=L3(u,f,S,y);break e}else if(S!==N){N=mn(Error(r(424)),f),Qm(N),f=L3(u,f,S,y);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(cs=vo(u.firstChild),Fi=f,wr=!0,$d=null,sl=!0,y=w3(f,null,S,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Jm(),S===N){f=ac(u,f,y);break e}li(u,f,S,y)}f=f.child}return f;case 26:return lv(u,f),u===null?(y=Gj(f.type,null,f.pendingProps,null))?f.memoizedState=y:wr||(y=f.type,u=f.pendingProps,S=Sv(je.current).createElement(y),S[ge]=f,S[Ie]=u,ui(S,y,u),Vn(S),f.stateNode=S):f.memoizedState=Gj(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Fe(f),u===null&&wr&&(S=f.stateNode=qj(f.type,f.pendingProps,je.current),Fi=f,sl=!0,N=cs,Eu(f.type)?(b2=N,cs=vo(S.firstChild)):cs=N),li(u,f,f.pendingProps.children,y),lv(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&wr&&((N=S=cs)&&(S=bK(S,f.type,f.pendingProps,sl),S!==null?(f.stateNode=S,Fi=f,cs=vo(S.firstChild),sl=!1,N=!0):N=!1),N||Bd(f)),Fe(f),N=f.type,B=f.pendingProps,le=u!==null?u.memoizedProps:null,S=B.children,p2(N,B)?S=null:le!==null&&p2(N,le)&&(f.flags|=32),f.memoizedState!==null&&(N=hS(u,f,PG,null,null,y),Rg._currentValue=N),lv(u,f),li(u,f,S,y),f.child;case 6:return u===null&&wr&&((u=y=cs)&&(y=vK(y,f.pendingProps,sl),y!==null?(f.stateNode=y,Fi=f,cs=null,u=!0):u=!1),u||Bd(f)),null;case 13:return $3(u,f,y);case 4:return Re(f,f.stateNode.containerInfo),S=f.pendingProps,u===null?f.child=Ih(f,null,S,y):li(u,f,S,y),f.child;case 11:return I3(u,f,f.type,f.pendingProps,y);case 7:return li(u,f,f.pendingProps,y),f.child;case 8:return li(u,f,f.pendingProps.children,y),f.child;case 12:return li(u,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,cu(f,f.type,S.value),li(u,f,S.children,y),f.child;case 9:return N=f.type._context,S=f.pendingProps.children,Ud(f),N=wi(N),S=S(N),f.flags|=1,li(u,f,S,y),f.child;case 14:return j3(u,f,f.type,f.pendingProps,y);case 15:return M3(u,f,f.type,f.pendingProps,y);case 19:return z3(u,f,y);case 31:return S=f.pendingProps,y=f.mode,S={mode:S.mode,children:S.children},u===null?(y=cv(S,y),y.ref=f.ref,f.child=y,y.return=f,f=y):(y=Ql(u.child,S),y.ref=f.ref,f.child=y,y.return=f,f=y),f;case 22:return D3(u,f,y);case 24:return Ud(f),S=wi(Ms),u===null?(N=sS(),N===null&&(N=Hr,B=nS(),N.pooledCache=B,B.refCount++,B!==null&&(N.pooledCacheLanes|=y),N=B),f.memoizedState={parent:S,cache:N},aS(f),cu(f,Ms,N)):((u.lanes&y)!==0&&(oS(u,f),og(f,null,null,y),ag()),N=u.memoizedState,B=f.memoizedState,N.parent!==S?(N={parent:S,cache:S},f.memoizedState=N,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=N),cu(f,Ms,S)):(S=B.cache,cu(f,Ms,S),S!==N.cache&&tS(f,[Ms],y,!0))),li(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function oc(u){u.flags|=4}function q3(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!Xj(f)){if(f=Ba.current,f!==null&&((fr&4194048)===fr?il!==null:(fr&62914560)!==fr&&(fr&536870912)===0||f!==il))throw sg=iS,kI;u.flags|=8192}}function uv(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?L():536870912,u.lanes|=f,Oh|=f)}function pg(u,f){if(!wr)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function ss(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,S=0;if(f)for(var N=u.child;N!==null;)y|=N.lanes|N.childLanes,S|=N.subtreeFlags&65011712,S|=N.flags&65011712,N.return=u,N=N.sibling;else for(N=u.child;N!==null;)y|=N.lanes|N.childLanes,S|=N.subtreeFlags,S|=N.flags,N.return=u,N=N.sibling;return u.subtreeFlags|=S,u.childLanes=y,f}function HG(u,f,y){var S=f.pendingProps;switch(X_(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ss(f),null;case 1:return ss(f),null;case 3:return y=f.stateNode,S=null,u!==null&&(S=u.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),rc(Ms),xe(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(Xm(f)?oc(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,xI())),ss(f),null;case 26:return y=f.memoizedState,u===null?(oc(f),y!==null?(ss(f),q3(f,y)):(ss(f),f.flags&=-16777217)):y?y!==u.memoizedState?(oc(f),ss(f),q3(f,y)):(ss(f),f.flags&=-16777217):(u.memoizedProps!==S&&oc(f),ss(f),f.flags&=-16777217),null;case 27:st(f),y=je.current;var N=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==S&&oc(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return ss(f),null}u=Se.current,Xm(f)?vI(f):(u=qj(N,S,y),f.stateNode=u,oc(f))}return ss(f),null;case 5:if(st(f),y=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==S&&oc(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return ss(f),null}if(u=Se.current,Xm(f))vI(f);else{switch(N=Sv(je.current),u){case 1:u=N.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:u=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":u=N.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":u=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":u=N.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof S.is=="string"?N.createElement("select",{is:S.is}):N.createElement("select"),S.multiple?u.multiple=!0:S.size&&(u.size=S.size);break;default:u=typeof S.is=="string"?N.createElement(y,{is:S.is}):N.createElement(y)}}u[ge]=f,u[Ie]=S;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)u.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=u;e:switch(ui(u,y,S),y){case"button":case"input":case"select":case"textarea":u=!!S.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&oc(f)}}return ss(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==S&&oc(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(r(166));if(u=je.current,Xm(f)){if(u=f.stateNode,y=f.memoizedProps,S=null,N=Fi,N!==null)switch(N.tag){case 27:case 5:S=N.memoizedProps}u[ge]=f,u=!!(u.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||Pj(u.nodeValue,y)),u||Bd(f)}else u=Sv(u).createTextNode(S),u[ge]=f,f.stateNode=u}return ss(f),null;case 13:if(S=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(N=Xm(f),S!==null&&S.dehydrated!==null){if(u===null){if(!N)throw Error(r(318));if(N=f.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[ge]=f}else Jm(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ss(f),N=!1}else N=xI(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=N),N=!0;if(!N)return f.flags&256?(ic(f),f):(ic(f),null)}if(ic(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=S!==null,u=u!==null&&u.memoizedState!==null,y){S=f.child,N=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(N=S.alternate.memoizedState.cachePool.pool);var B=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(B=S.memoizedState.cachePool.pool),B!==N&&(S.flags|=2048)}return y!==u&&y&&(f.child.flags|=8192),uv(f,f.updateQueue),ss(f),null;case 4:return xe(),u===null&&c2(f.stateNode.containerInfo),ss(f),null;case 10:return rc(f.type),ss(f),null;case 19:if(Q(Ds),N=f.memoizedState,N===null)return ss(f),null;if(S=(f.flags&128)!==0,B=N.rendering,B===null)if(S)pg(N,!1);else{if(us!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(B=iv(u),B!==null){for(f.flags|=128,pg(N,!1),u=B.updateQueue,f.updateQueue=u,uv(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)yI(y,u),y=y.sibling;return he(Ds,Ds.current&1|2),f.child}u=u.sibling}N.tail!==null&&ae()>hv&&(f.flags|=128,S=!0,pg(N,!1),f.lanes=4194304)}else{if(!S)if(u=iv(B),u!==null){if(f.flags|=128,S=!0,u=u.updateQueue,f.updateQueue=u,uv(f,u),pg(N,!0),N.tail===null&&N.tailMode==="hidden"&&!B.alternate&&!wr)return ss(f),null}else 2*ae()-N.renderingStartTime>hv&&y!==536870912&&(f.flags|=128,S=!0,pg(N,!1),f.lanes=4194304);N.isBackwards?(B.sibling=f.child,f.child=B):(u=N.last,u!==null?u.sibling=B:f.child=B,N.last=B)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=ae(),f.sibling=null,u=Ds.current,he(Ds,S?u&1|2:u&1),f):(ss(f),null);case 22:case 23:return ic(f),dS(),S=f.memoizedState!==null,u!==null?u.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(y&536870912)!==0&&(f.flags&128)===0&&(ss(f),f.subtreeFlags&6&&(f.flags|=8192)):ss(f),y=f.updateQueue,y!==null&&uv(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),u!==null&&Q(qd),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),rc(Ms),ss(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function GG(u,f){switch(X_(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return rc(Ms),xe(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return st(f),null;case 13:if(ic(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Jm()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return Q(Ds),null;case 4:return xe(),null;case 10:return rc(f.type),null;case 22:case 23:return ic(f),dS(),u!==null&&Q(qd),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return rc(Ms),null;case 25:return null;default:return null}}function V3(u,f){switch(X_(f),f.tag){case 3:rc(Ms),xe();break;case 26:case 27:case 5:st(f);break;case 4:xe();break;case 13:ic(f);break;case 19:Q(Ds);break;case 10:rc(f.type);break;case 22:case 23:ic(f),dS(),u!==null&&Q(qd);break;case 24:rc(Ms)}}function mg(u,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var N=S.next;y=N;do{if((y.tag&u)===u){S=void 0;var B=y.create,le=y.inst;S=B(),le.destroy=S}y=y.next}while(y!==N)}}catch(Ce){zr(f,f.return,Ce)}}function gu(u,f,y){try{var S=f.updateQueue,N=S!==null?S.lastEffect:null;if(N!==null){var B=N.next;S=B;do{if((S.tag&u)===u){var le=S.inst,Ce=le.destroy;if(Ce!==void 0){le.destroy=void 0,N=f;var qe=y,ft=Ce;try{ft()}catch(Tt){zr(N,qe,Tt)}}}S=S.next}while(S!==B)}}catch(Tt){zr(f,f.return,Tt)}}function H3(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{jI(f,y)}catch(S){zr(u,u.return,S)}}}function G3(u,f,y){y.props=Hd(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(S){zr(u,f,S)}}function gg(u,f){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var S=u.stateNode;break;case 30:S=u.stateNode;break;default:S=u.stateNode}typeof y=="function"?u.refCleanup=y(S):y.current=S}}catch(N){zr(u,f,N)}}function al(u,f){var y=u.ref,S=u.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(N){zr(u,f,N)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(N){zr(u,f,N)}else y.current=null}function K3(u){var f=u.type,y=u.memoizedProps,S=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(N){zr(u,u.return,N)}}function $S(u,f,y){try{var S=u.stateNode;hK(S,u.type,y,f),S[Ie]=f}catch(N){zr(u,u.return,N)}}function W3(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Eu(u.type)||u.tag===4}function BS(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||W3(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Eu(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function zS(u,f,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(u),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=_v));else if(S!==4&&(S===27&&Eu(u.type)&&(y=u.stateNode,f=null),u=u.child,u!==null))for(zS(u,f,y),u=u.sibling;u!==null;)zS(u,f,y),u=u.sibling}function dv(u,f,y){var S=u.tag;if(S===5||S===6)u=u.stateNode,f?y.insertBefore(u,f):y.appendChild(u);else if(S!==4&&(S===27&&Eu(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(dv(u,f,y),u=u.sibling;u!==null;)dv(u,f,y),u=u.sibling}function Z3(u){var f=u.stateNode,y=u.memoizedProps;try{for(var S=u.type,N=f.attributes;N.length;)f.removeAttributeNode(N[0]);ui(f,S,y),f[ge]=u,f[Ie]=y}catch(B){zr(u,u.return,B)}}var lc=!1,gs=!1,US=!1,Y3=typeof WeakSet=="function"?WeakSet:Set,Hs=null;function KG(u,f){if(u=u.containerInfo,f2=Rv,u=fe(u),_e(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var N=S.anchorOffset,B=S.focusNode;S=S.focusOffset;try{y.nodeType,B.nodeType}catch{y=null;break e}var le=0,Ce=-1,qe=-1,ft=0,Tt=0,jt=u,gt=null;t:for(;;){for(var vt;jt!==y||N!==0&&jt.nodeType!==3||(Ce=le+N),jt!==B||S!==0&&jt.nodeType!==3||(qe=le+S),jt.nodeType===3&&(le+=jt.nodeValue.length),(vt=jt.firstChild)!==null;)gt=jt,jt=vt;for(;;){if(jt===u)break t;if(gt===y&&++ft===N&&(Ce=le),gt===B&&++Tt===S&&(qe=le),(vt=jt.nextSibling)!==null)break;jt=gt,gt=jt.parentNode}jt=vt}y=Ce===-1||qe===-1?null:{start:Ce,end:qe}}else y=null}y=y||{start:0,end:0}}else y=null;for(h2={focusedElem:u,selectionRange:y},Rv=!1,Hs=f;Hs!==null;)if(f=Hs,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Hs=u;else for(;Hs!==null;){switch(f=Hs,B=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&B!==null){u=void 0,y=f,N=B.memoizedProps,B=B.memoizedState,S=y.stateNode;try{var kn=Hd(y.type,N,y.elementType===y.type);u=S.getSnapshotBeforeUpdate(kn,B),S.__reactInternalSnapshotBeforeUpdate=u}catch(vn){zr(y,y.return,vn)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,y=u.nodeType,y===9)g2(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":g2(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=f.sibling,u!==null){u.return=f.return,Hs=u;break}Hs=f.return}}function X3(u,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:yu(u,y),S&4&&mg(5,y);break;case 1:if(yu(u,y),S&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(le){zr(y,y.return,le)}else{var N=Hd(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(N,f,u.__reactInternalSnapshotBeforeUpdate)}catch(le){zr(y,y.return,le)}}S&64&&H3(y),S&512&&gg(y,y.return);break;case 3:if(yu(u,y),S&64&&(u=y.updateQueue,u!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{jI(u,f)}catch(le){zr(y,y.return,le)}}break;case 27:f===null&&S&4&&Z3(y);case 26:case 5:yu(u,y),f===null&&S&4&&K3(y),S&512&&gg(y,y.return);break;case 12:yu(u,y);break;case 13:yu(u,y),S&4&&ej(u,y),S&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=nK.bind(null,y),wK(u,y))));break;case 22:if(S=y.memoizedState!==null||lc,!S){f=f!==null&&f.memoizedState!==null||gs,N=lc;var B=gs;lc=S,(gs=f)&&!B?bu(u,y,(y.subtreeFlags&8772)!==0):yu(u,y),lc=N,gs=B}break;case 30:break;default:yu(u,y)}}function J3(u){var f=u.alternate;f!==null&&(u.alternate=null,J3(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&an(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Qr=null,Ji=!1;function cc(u,f,y){for(y=y.child;y!==null;)Q3(u,f,y),y=y.sibling}function Q3(u,f,y){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(It,y)}catch{}switch(y.tag){case 26:gs||al(y,f),cc(u,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:gs||al(y,f);var S=Qr,N=Ji;Eu(y.type)&&(Qr=y.stateNode,Ji=!1),cc(u,f,y),Cg(y.stateNode),Qr=S,Ji=N;break;case 5:gs||al(y,f);case 6:if(S=Qr,N=Ji,Qr=null,cc(u,f,y),Qr=S,Ji=N,Qr!==null)if(Ji)try{(Qr.nodeType===9?Qr.body:Qr.nodeName==="HTML"?Qr.ownerDocument.body:Qr).removeChild(y.stateNode)}catch(B){zr(y,f,B)}else try{Qr.removeChild(y.stateNode)}catch(B){zr(y,f,B)}break;case 18:Qr!==null&&(Ji?(u=Qr,zj(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),Mg(u)):zj(Qr,y.stateNode));break;case 4:S=Qr,N=Ji,Qr=y.stateNode.containerInfo,Ji=!0,cc(u,f,y),Qr=S,Ji=N;break;case 0:case 11:case 14:case 15:gs||gu(2,y,f),gs||gu(4,y,f),cc(u,f,y);break;case 1:gs||(al(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&G3(y,f,S)),cc(u,f,y);break;case 21:cc(u,f,y);break;case 22:gs=(S=gs)||y.memoizedState!==null,cc(u,f,y),gs=S;break;default:cc(u,f,y)}}function ej(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Mg(u)}catch(y){zr(f,f.return,y)}}function WG(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new Y3),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new Y3),f;default:throw Error(r(435,u.tag))}}function qS(u,f){var y=WG(u);f.forEach(function(S){var N=rK.bind(null,u,S);y.has(S)||(y.add(S),S.then(N,N))})}function ba(u,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var N=y[S],B=u,le=f,Ce=le;e:for(;Ce!==null;){switch(Ce.tag){case 27:if(Eu(Ce.type)){Qr=Ce.stateNode,Ji=!1;break e}break;case 5:Qr=Ce.stateNode,Ji=!1;break e;case 3:case 4:Qr=Ce.stateNode.containerInfo,Ji=!0;break e}Ce=Ce.return}if(Qr===null)throw Error(r(160));Q3(B,le,N),Qr=null,Ji=!1,B=N.alternate,B!==null&&(B.return=null),N.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)tj(f,u),f=f.sibling}var bo=null;function tj(u,f){var y=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ba(f,u),va(u),S&4&&(gu(3,u,u.return),mg(3,u),gu(5,u,u.return));break;case 1:ba(f,u),va(u),S&512&&(gs||y===null||al(y,y.return)),S&64&&lc&&(u=u.updateQueue,u!==null&&(S=u.callbacks,S!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var N=bo;if(ba(f,u),va(u),S&512&&(gs||y===null||al(y,y.return)),S&4){var B=y!==null?y.memoizedState:null;if(S=u.memoizedState,y===null)if(S===null)if(u.stateNode===null){e:{S=u.type,y=u.memoizedProps,N=N.ownerDocument||N;t:switch(S){case"title":B=N.getElementsByTagName("title")[0],(!B||B[Xt]||B[ge]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=N.createElement(S),N.head.insertBefore(B,N.querySelector("head > title"))),ui(B,S,y),B[ge]=u,Vn(B),S=B;break e;case"link":var le=Zj("link","href",N).get(S+(y.href||""));if(le){for(var Ce=0;Ce<le.length;Ce++)if(B=le[Ce],B.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&B.getAttribute("rel")===(y.rel==null?null:y.rel)&&B.getAttribute("title")===(y.title==null?null:y.title)&&B.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){le.splice(Ce,1);break t}}B=N.createElement(S),ui(B,S,y),N.head.appendChild(B);break;case"meta":if(le=Zj("meta","content",N).get(S+(y.content||""))){for(Ce=0;Ce<le.length;Ce++)if(B=le[Ce],B.getAttribute("content")===(y.content==null?null:""+y.content)&&B.getAttribute("name")===(y.name==null?null:y.name)&&B.getAttribute("property")===(y.property==null?null:y.property)&&B.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&B.getAttribute("charset")===(y.charSet==null?null:y.charSet)){le.splice(Ce,1);break t}}B=N.createElement(S),ui(B,S,y),N.head.appendChild(B);break;default:throw Error(r(468,S))}B[ge]=u,Vn(B),S=B}u.stateNode=S}else Yj(N,u.type,u.stateNode);else u.stateNode=Wj(N,S,u.memoizedProps);else B!==S?(B===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):B.count--,S===null?Yj(N,u.type,u.stateNode):Wj(N,S,u.memoizedProps)):S===null&&u.stateNode!==null&&$S(u,u.memoizedProps,y.memoizedProps)}break;case 27:ba(f,u),va(u),S&512&&(gs||y===null||al(y,y.return)),y!==null&&S&4&&$S(u,u.memoizedProps,y.memoizedProps);break;case 5:if(ba(f,u),va(u),S&512&&(gs||y===null||al(y,y.return)),u.flags&32){N=u.stateNode;try{Qc(N,"")}catch(vt){zr(u,u.return,vt)}}S&4&&u.stateNode!=null&&(N=u.memoizedProps,$S(u,N,y!==null?y.memoizedProps:N)),S&1024&&(US=!0);break;case 6:if(ba(f,u),va(u),S&4){if(u.stateNode===null)throw Error(r(162));S=u.memoizedProps,y=u.stateNode;try{y.nodeValue=S}catch(vt){zr(u,u.return,vt)}}break;case 3:if(kv=null,N=bo,bo=Ev(f.containerInfo),ba(f,u),bo=N,va(u),S&4&&y!==null&&y.memoizedState.isDehydrated)try{Mg(f.containerInfo)}catch(vt){zr(u,u.return,vt)}US&&(US=!1,nj(u));break;case 4:S=bo,bo=Ev(u.stateNode.containerInfo),ba(f,u),va(u),bo=S;break;case 12:ba(f,u),va(u);break;case 13:ba(f,u),va(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(ZS=ae()),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,qS(u,S)));break;case 22:N=u.memoizedState!==null;var qe=y!==null&&y.memoizedState!==null,ft=lc,Tt=gs;if(lc=ft||N,gs=Tt||qe,ba(f,u),gs=Tt,lc=ft,va(u),S&8192)e:for(f=u.stateNode,f._visibility=N?f._visibility&-2:f._visibility|1,N&&(y===null||qe||lc||gs||Gd(u)),y=null,f=u;;){if(f.tag===5||f.tag===26){if(y===null){qe=y=f;try{if(B=qe.stateNode,N)le=B.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{Ce=qe.stateNode;var jt=qe.memoizedProps.style,gt=jt!=null&&jt.hasOwnProperty("display")?jt.display:null;Ce.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(vt){zr(qe,qe.return,vt)}}}else if(f.tag===6){if(y===null){qe=f;try{qe.stateNode.nodeValue=N?"":qe.memoizedProps}catch(vt){zr(qe,qe.return,vt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=u.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,qS(u,y))));break;case 19:ba(f,u),va(u),S&4&&(S=u.updateQueue,S!==null&&(u.updateQueue=null,qS(u,S)));break;case 30:break;case 21:break;default:ba(f,u),va(u)}}function va(u){var f=u.flags;if(f&2){try{for(var y,S=u.return;S!==null;){if(W3(S)){y=S;break}S=S.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var N=y.stateNode,B=BS(u);dv(u,B,N);break;case 5:var le=y.stateNode;y.flags&32&&(Qc(le,""),y.flags&=-33);var Ce=BS(u);dv(u,Ce,le);break;case 3:case 4:var qe=y.stateNode.containerInfo,ft=BS(u);zS(u,ft,qe);break;default:throw Error(r(161))}}catch(Tt){zr(u,u.return,Tt)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function nj(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;nj(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function yu(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)X3(u,f.alternate,f),f=f.sibling}function Gd(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:gu(4,f,f.return),Gd(f);break;case 1:al(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&G3(f,f.return,y),Gd(f);break;case 27:Cg(f.stateNode);case 26:case 5:al(f,f.return),Gd(f);break;case 22:f.memoizedState===null&&Gd(f);break;case 30:Gd(f);break;default:Gd(f)}u=u.sibling}}function bu(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,N=u,B=f,le=B.flags;switch(B.tag){case 0:case 11:case 15:bu(N,B,y),mg(4,B);break;case 1:if(bu(N,B,y),S=B,N=S.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(ft){zr(S,S.return,ft)}if(S=B,N=S.updateQueue,N!==null){var Ce=S.stateNode;try{var qe=N.shared.hiddenCallbacks;if(qe!==null)for(N.shared.hiddenCallbacks=null,N=0;N<qe.length;N++)II(qe[N],Ce)}catch(ft){zr(S,S.return,ft)}}y&&le&64&&H3(B),gg(B,B.return);break;case 27:Z3(B);case 26:case 5:bu(N,B,y),y&&S===null&&le&4&&K3(B),gg(B,B.return);break;case 12:bu(N,B,y);break;case 13:bu(N,B,y),y&&le&4&&ej(N,B);break;case 22:B.memoizedState===null&&bu(N,B,y),gg(B,B.return);break;case 30:break;default:bu(N,B,y)}f=f.sibling}}function VS(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&tg(y))}function HS(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&tg(u))}function ol(u,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)rj(u,f,y,S),f=f.sibling}function rj(u,f,y,S){var N=f.flags;switch(f.tag){case 0:case 11:case 15:ol(u,f,y,S),N&2048&&mg(9,f);break;case 1:ol(u,f,y,S);break;case 3:ol(u,f,y,S),N&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&tg(u)));break;case 12:if(N&2048){ol(u,f,y,S),u=f.stateNode;try{var B=f.memoizedProps,le=B.id,Ce=B.onPostCommit;typeof Ce=="function"&&Ce(le,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(qe){zr(f,f.return,qe)}}else ol(u,f,y,S);break;case 13:ol(u,f,y,S);break;case 23:break;case 22:B=f.stateNode,le=f.alternate,f.memoizedState!==null?B._visibility&2?ol(u,f,y,S):yg(u,f):B._visibility&2?ol(u,f,y,S):(B._visibility|=2,jh(u,f,y,S,(f.subtreeFlags&10256)!==0)),N&2048&&VS(le,f);break;case 24:ol(u,f,y,S),N&2048&&HS(f.alternate,f);break;default:ol(u,f,y,S)}}function jh(u,f,y,S,N){for(N=N&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var B=u,le=f,Ce=y,qe=S,ft=le.flags;switch(le.tag){case 0:case 11:case 15:jh(B,le,Ce,qe,N),mg(8,le);break;case 23:break;case 22:var Tt=le.stateNode;le.memoizedState!==null?Tt._visibility&2?jh(B,le,Ce,qe,N):yg(B,le):(Tt._visibility|=2,jh(B,le,Ce,qe,N)),N&&ft&2048&&VS(le.alternate,le);break;case 24:jh(B,le,Ce,qe,N),N&&ft&2048&&HS(le.alternate,le);break;default:jh(B,le,Ce,qe,N)}f=f.sibling}}function yg(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,S=f,N=S.flags;switch(S.tag){case 22:yg(y,S),N&2048&&VS(S.alternate,S);break;case 24:yg(y,S),N&2048&&HS(S.alternate,S);break;default:yg(y,S)}f=f.sibling}}var bg=8192;function Mh(u){if(u.subtreeFlags&bg)for(u=u.child;u!==null;)sj(u),u=u.sibling}function sj(u){switch(u.tag){case 26:Mh(u),u.flags&bg&&u.memoizedState!==null&&MK(bo,u.memoizedState,u.memoizedProps);break;case 5:Mh(u);break;case 3:case 4:var f=bo;bo=Ev(u.stateNode.containerInfo),Mh(u),bo=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=bg,bg=16777216,Mh(u),bg=f):Mh(u));break;default:Mh(u)}}function ij(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function vg(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Hs=S,oj(S,u)}ij(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)aj(u),u=u.sibling}function aj(u){switch(u.tag){case 0:case 11:case 15:vg(u),u.flags&2048&&gu(9,u,u.return);break;case 3:vg(u);break;case 12:vg(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,fv(u)):vg(u);break;default:vg(u)}}function fv(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Hs=S,oj(S,u)}ij(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:gu(8,f,f.return),fv(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,fv(f));break;default:fv(f)}u=u.sibling}}function oj(u,f){for(;Hs!==null;){var y=Hs;switch(y.tag){case 0:case 11:case 15:gu(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:tg(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Hs=S;else e:for(y=u;Hs!==null;){S=Hs;var N=S.sibling,B=S.return;if(J3(S),S===y){Hs=null;break e}if(N!==null){N.return=B,Hs=N;break e}Hs=B}}}var ZG={getCacheForType:function(u){var f=wi(Ms),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y}},YG=typeof WeakMap=="function"?WeakMap:Map,Tr=0,Hr=null,rr=null,fr=0,Ar=0,wa=null,vu=!1,Dh=!1,GS=!1,uc=0,us=0,wu=0,Kd=0,KS=0,za=0,Oh=0,wg=null,Qi=null,WS=!1,ZS=0,hv=1/0,pv=null,xu=null,ci=0,_u=null,Ph=null,Fh=0,YS=0,XS=null,lj=null,xg=0,JS=null;function xa(){if((Tr&2)!==0&&fr!==0)return fr&-fr;if(J.T!==null){var u=Eh;return u!==0?u:i2()}return G()}function cj(){za===0&&(za=(fr&536870912)===0||wr?wt():536870912);var u=Ba.current;return u!==null&&(u.flags|=32),za}function _a(u,f,y){(u===Hr&&(Ar===2||Ar===9)||u.cancelPendingCommit!==null)&&(Lh(u,0),Su(u,fr,za,!1)),rt(u,y),((Tr&2)===0||u!==Hr)&&(u===Hr&&((Tr&2)===0&&(Kd|=y),us===4&&Su(u,fr,za,!1)),ll(u))}function uj(u,f,y){if((Tr&6)!==0)throw Error(r(327));var S=!y&&(f&124)===0&&(f&u.expiredLanes)===0||de(u,f),N=S?QG(u,f):t2(u,f,!0),B=S;do{if(N===0){Dh&&!S&&Su(u,f,0,!1);break}else{if(y=u.current.alternate,B&&!XG(y)){N=t2(u,f,!1),B=!1;continue}if(N===2){if(B=f,u.errorRecoveryDisabledLanes&B)var le=0;else le=u.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var Ce=u;N=wg;var qe=Ce.current.memoizedState.isDehydrated;if(qe&&(Lh(Ce,le).flags|=256),le=t2(Ce,le,!1),le!==2){if(GS&&!qe){Ce.errorRecoveryDisabledLanes|=B,Kd|=B,N=4;break e}B=Qi,Qi=N,B!==null&&(Qi===null?Qi=B:Qi.push.apply(Qi,B))}N=le}if(B=!1,N!==2)continue}}if(N===1){Lh(u,0),Su(u,f,0,!0);break}e:{switch(S=u,B=N,B){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Su(S,f,za,!vu);break e;case 2:Qi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(N=ZS+300-ae(),10<N)){if(Su(S,f,za,!vu),Ae(S,0,!0)!==0)break e;S.timeoutHandle=$j(dj.bind(null,S,y,Qi,pv,WS,f,za,Kd,Oh,vu,B,2,-0,0),N);break e}dj(S,y,Qi,pv,WS,f,za,Kd,Oh,vu,B,0,-0,0)}}break}while(!0);ll(u)}function dj(u,f,y,S,N,B,le,Ce,qe,ft,Tt,jt,gt,vt){if(u.timeoutHandle=-1,jt=f.subtreeFlags,(jt&8192||(jt&16785408)===16785408)&&(Ag={stylesheets:null,count:0,unsuspend:jK},sj(f),jt=DK(),jt!==null)){u.cancelPendingCommit=jt(bj.bind(null,u,f,B,y,S,N,le,Ce,qe,Tt,1,gt,vt)),Su(u,B,le,!ft);return}bj(u,f,B,y,S,N,le,Ce,qe)}function XG(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var N=y[S],B=N.getSnapshot;N=N.value;try{if(!vi(B(),N))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Su(u,f,y,S){f&=~KS,f&=~Kd,u.suspendedLanes|=f,u.pingedLanes&=~f,S&&(u.warmLanes|=f),S=u.expirationTimes;for(var N=f;0<N;){var B=31-Kt(N),le=1<<B;S[B]=-1,N&=~le}y!==0&&we(u,y,f)}function mv(){return(Tr&6)===0?(_g(0),!1):!0}function QS(){if(rr!==null){if(Ar===0)var u=rr.return;else u=rr,nc=zd=null,gS(u),Nh=null,fg=0,u=rr;for(;u!==null;)V3(u.alternate,u),u=u.return;rr=null}}function Lh(u,f){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,mK(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),QS(),Hr=u,rr=y=Ql(u.current,null),fr=f,Ar=0,wa=null,vu=!1,Dh=de(u,f),GS=!1,Oh=za=KS=Kd=wu=us=0,Qi=wg=null,WS=!1,(f&8)!==0&&(f|=f&32);var S=u.entangledLanes;if(S!==0)for(u=u.entanglements,S&=f;0<S;){var N=31-Kt(S),B=1<<N;f|=u[N],S&=~B}return uc=f,Cn(),y}function fj(u,f){Xn=null,J.H=nv,f===rg||f===Gb?(f=RI(),Ar=3):f===kI?(f=RI(),Ar=4):Ar=f===N3?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,wa=f,rr===null&&(us=1,ov(u,mn(f,u.current)))}function hj(){var u=J.H;return J.H=nv,u===null?nv:u}function pj(){var u=J.A;return J.A=ZG,u}function e2(){us=4,vu||(fr&4194048)!==fr&&Ba.current!==null||(Dh=!0),(wu&134217727)===0&&(Kd&134217727)===0||Hr===null||Su(Hr,fr,za,!1)}function t2(u,f,y){var S=Tr;Tr|=2;var N=hj(),B=pj();(Hr!==u||fr!==f)&&(pv=null,Lh(u,f)),f=!1;var le=us;e:do try{if(Ar!==0&&rr!==null){var Ce=rr,qe=wa;switch(Ar){case 8:QS(),le=6;break e;case 3:case 2:case 9:case 6:Ba.current===null&&(f=!0);var ft=Ar;if(Ar=0,wa=null,$h(u,Ce,qe,ft),y&&Dh){le=0;break e}break;default:ft=Ar,Ar=0,wa=null,$h(u,Ce,qe,ft)}}JG(),le=us;break}catch(Tt){fj(u,Tt)}while(!0);return f&&u.shellSuspendCounter++,nc=zd=null,Tr=S,J.H=N,J.A=B,rr===null&&(Hr=null,fr=0,Cn()),le}function JG(){for(;rr!==null;)mj(rr)}function QG(u,f){var y=Tr;Tr|=2;var S=hj(),N=pj();Hr!==u||fr!==f?(pv=null,hv=ae()+500,Lh(u,f)):Dh=de(u,f);e:do try{if(Ar!==0&&rr!==null){f=rr;var B=wa;t:switch(Ar){case 1:Ar=0,wa=null,$h(u,f,B,1);break;case 2:case 9:if(TI(B)){Ar=0,wa=null,gj(f);break}f=function(){Ar!==2&&Ar!==9||Hr!==u||(Ar=7),ll(u)},B.then(f,f);break e;case 3:Ar=7;break e;case 4:Ar=5;break e;case 7:TI(B)?(Ar=0,wa=null,gj(f)):(Ar=0,wa=null,$h(u,f,B,7));break;case 5:var le=null;switch(rr.tag){case 26:le=rr.memoizedState;case 5:case 27:var Ce=rr;if(!le||Xj(le)){Ar=0,wa=null;var qe=Ce.sibling;if(qe!==null)rr=qe;else{var ft=Ce.return;ft!==null?(rr=ft,gv(ft)):rr=null}break t}}Ar=0,wa=null,$h(u,f,B,5);break;case 6:Ar=0,wa=null,$h(u,f,B,6);break;case 8:QS(),us=6;break e;default:throw Error(r(462))}}eK();break}catch(Tt){fj(u,Tt)}while(!0);return nc=zd=null,J.H=S,J.A=N,Tr=y,rr!==null?0:(Hr=null,fr=0,Cn(),us)}function eK(){for(;rr!==null&&!ue();)mj(rr)}function mj(u){var f=U3(u.alternate,u,uc);u.memoizedProps=u.pendingProps,f===null?gv(u):rr=f}function gj(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=P3(y,f,f.pendingProps,f.type,void 0,fr);break;case 11:f=P3(y,f,f.pendingProps,f.type.render,f.ref,fr);break;case 5:gS(f);default:V3(y,f),f=rr=yI(f,uc),f=U3(y,f,uc)}u.memoizedProps=u.pendingProps,f===null?gv(u):rr=f}function $h(u,f,y,S){nc=zd=null,gS(f),Nh=null,fg=0;var N=f.return;try{if(qG(u,N,f,y,fr)){us=1,ov(u,mn(y,u.current)),rr=null;return}}catch(B){if(N!==null)throw rr=N,B;us=1,ov(u,mn(y,u.current)),rr=null;return}f.flags&32768?(wr||S===1?u=!0:Dh||(fr&536870912)!==0?u=!1:(vu=u=!0,(S===2||S===9||S===3||S===6)&&(S=Ba.current,S!==null&&S.tag===13&&(S.flags|=16384))),yj(f,u)):gv(f)}function gv(u){var f=u;do{if((f.flags&32768)!==0){yj(f,vu);return}u=f.return;var y=HG(f.alternate,f,uc);if(y!==null){rr=y;return}if(f=f.sibling,f!==null){rr=f;return}rr=f=u}while(f!==null);us===0&&(us=5)}function yj(u,f){do{var y=GG(u.alternate,u);if(y!==null){y.flags&=32767,rr=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){rr=u;return}rr=u=y}while(u!==null);us=6,rr=null}function bj(u,f,y,S,N,B,le,Ce,qe){u.cancelPendingCommit=null;do yv();while(ci!==0);if((Tr&6)!==0)throw Error(r(327));if(f!==null){if(f===u.current)throw Error(r(177));if(B=f.lanes|f.childLanes,B|=oi,ye(u,y,B,le,Ce,qe),u===Hr&&(rr=Hr=null,fr=0),Ph=f,_u=u,Fh=y,YS=B,XS=N,lj=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,sK(Le,function(){return Sj(),null})):(u.callbackNode=null,u.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=J.T,J.T=null,N=te.p,te.p=2,le=Tr,Tr|=4;try{KG(u,f,y)}finally{Tr=le,te.p=N,J.T=S}}ci=1,vj(),wj(),xj()}}function vj(){if(ci===1){ci=0;var u=_u,f=Ph,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=J.T,J.T=null;var S=te.p;te.p=2;var N=Tr;Tr|=4;try{tj(f,u);var B=h2,le=fe(u.containerInfo),Ce=B.focusedElem,qe=B.selectionRange;if(le!==Ce&&Ce&&Ce.ownerDocument&&se(Ce.ownerDocument.documentElement,Ce)){if(qe!==null&&_e(Ce)){var ft=qe.start,Tt=qe.end;if(Tt===void 0&&(Tt=ft),"selectionStart"in Ce)Ce.selectionStart=ft,Ce.selectionEnd=Math.min(Tt,Ce.value.length);else{var jt=Ce.ownerDocument||document,gt=jt&&jt.defaultView||window;if(gt.getSelection){var vt=gt.getSelection(),kn=Ce.textContent.length,vn=Math.min(qe.start,kn),Pr=qe.end===void 0?vn:Math.min(qe.end,kn);!vt.extend&&vn>Pr&&(le=Pr,Pr=vn,vn=le);var at=Y(Ce,vn),Je=Y(Ce,Pr);if(at&&Je&&(vt.rangeCount!==1||vt.anchorNode!==at.node||vt.anchorOffset!==at.offset||vt.focusNode!==Je.node||vt.focusOffset!==Je.offset)){var ut=jt.createRange();ut.setStart(at.node,at.offset),vt.removeAllRanges(),vn>Pr?(vt.addRange(ut),vt.extend(Je.node,Je.offset)):(ut.setEnd(Je.node,Je.offset),vt.addRange(ut))}}}}for(jt=[],vt=Ce;vt=vt.parentNode;)vt.nodeType===1&&jt.push({element:vt,left:vt.scrollLeft,top:vt.scrollTop});for(typeof Ce.focus=="function"&&Ce.focus(),Ce=0;Ce<jt.length;Ce++){var Rt=jt[Ce];Rt.element.scrollLeft=Rt.left,Rt.element.scrollTop=Rt.top}}Rv=!!f2,h2=f2=null}finally{Tr=N,te.p=S,J.T=y}}u.current=f,ci=2}}function wj(){if(ci===2){ci=0;var u=_u,f=Ph,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=J.T,J.T=null;var S=te.p;te.p=2;var N=Tr;Tr|=4;try{X3(u,f.alternate,f)}finally{Tr=N,te.p=S,J.T=y}}ci=3}}function xj(){if(ci===4||ci===3){ci=0,ke();var u=_u,f=Ph,y=Fh,S=lj;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ci=5:(ci=0,Ph=_u=null,_j(u,u.pendingLanes));var N=u.pendingLanes;if(N===0&&(xu=null),me(y),f=f.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(It,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=J.T,N=te.p,te.p=2,J.T=null;try{for(var B=u.onRecoverableError,le=0;le<S.length;le++){var Ce=S[le];B(Ce.value,{componentStack:Ce.stack})}}finally{J.T=f,te.p=N}}(Fh&3)!==0&&yv(),ll(u),N=u.pendingLanes,(y&4194090)!==0&&(N&42)!==0?u===JS?xg++:(xg=0,JS=u):xg=0,_g(0)}}function _j(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,tg(f)))}function yv(u){return vj(),wj(),xj(),Sj()}function Sj(){if(ci!==5)return!1;var u=_u,f=YS;YS=0;var y=me(Fh),S=J.T,N=te.p;try{te.p=32>y?32:y,J.T=null,y=XS,XS=null;var B=_u,le=Fh;if(ci=0,Ph=_u=null,Fh=0,(Tr&6)!==0)throw Error(r(331));var Ce=Tr;if(Tr|=4,aj(B.current),rj(B,B.current,le,y),Tr=Ce,_g(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(It,B)}catch{}return!0}finally{te.p=N,J.T=S,_j(u,f)}}function Ej(u,f,y){f=mn(y,f),f=NS(u.stateNode,f,2),u=fu(u,f,2),u!==null&&(rt(u,2),ll(u))}function zr(u,f,y){if(u.tag===3)Ej(u,u,y);else for(;f!==null;){if(f.tag===3){Ej(f,u,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(xu===null||!xu.has(S))){u=mn(y,u),y=A3(2),S=fu(f,y,2),S!==null&&(R3(y,S,f,u),rt(S,2),ll(S));break}}f=f.return}}function n2(u,f,y){var S=u.pingCache;if(S===null){S=u.pingCache=new YG;var N=new Set;S.set(f,N)}else N=S.get(f),N===void 0&&(N=new Set,S.set(f,N));N.has(y)||(GS=!0,N.add(y),u=tK.bind(null,u,f,y),f.then(u,u))}function tK(u,f,y){var S=u.pingCache;S!==null&&S.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,Hr===u&&(fr&y)===y&&(us===4||us===3&&(fr&62914560)===fr&&300>ae()-ZS?(Tr&2)===0&&Lh(u,0):KS|=y,Oh===fr&&(Oh=0)),ll(u)}function Cj(u,f){f===0&&(f=L()),u=yo(u,f),u!==null&&(rt(u,f),ll(u))}function nK(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),Cj(u,y)}function rK(u,f){var y=0;switch(u.tag){case 13:var S=u.stateNode,N=u.memoizedState;N!==null&&(y=N.retryLane);break;case 19:S=u.stateNode;break;case 22:S=u.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(f),Cj(u,y)}function sK(u,f){return Ne(u,f)}var bv=null,Bh=null,r2=!1,vv=!1,s2=!1,Wd=0;function ll(u){u!==Bh&&u.next===null&&(Bh===null?bv=Bh=u:Bh=Bh.next=u),vv=!0,r2||(r2=!0,aK())}function _g(u,f){if(!s2&&vv){s2=!0;do for(var y=!1,S=bv;S!==null;){if(u!==0){var N=S.pendingLanes;if(N===0)var B=0;else{var le=S.suspendedLanes,Ce=S.pingedLanes;B=(1<<31-Kt(42|u)+1)-1,B&=N&~(le&~Ce),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(y=!0,Rj(S,B))}else B=fr,B=Ae(S,S===Hr?B:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(B&3)===0||de(S,B)||(y=!0,Rj(S,B));S=S.next}while(y);s2=!1}}function iK(){kj()}function kj(){vv=r2=!1;var u=0;Wd!==0&&(pK()&&(u=Wd),Wd=0);for(var f=ae(),y=null,S=bv;S!==null;){var N=S.next,B=Tj(S,f);B===0?(S.next=null,y===null?bv=N:y.next=N,N===null&&(Bh=y)):(y=S,(u!==0||(B&3)!==0)&&(vv=!0)),S=N}_g(u)}function Tj(u,f){for(var y=u.suspendedLanes,S=u.pingedLanes,N=u.expirationTimes,B=u.pendingLanes&-62914561;0<B;){var le=31-Kt(B),Ce=1<<le,qe=N[le];qe===-1?((Ce&y)===0||(Ce&S)!==0)&&(N[le]=ht(Ce,f)):qe<=f&&(u.expiredLanes|=Ce),B&=~Ce}if(f=Hr,y=fr,y=Ae(u,u===f?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S=u.callbackNode,y===0||u===f&&(Ar===2||Ar===9)||u.cancelPendingCommit!==null)return S!==null&&S!==null&&H(S),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||de(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(S!==null&&H(S),me(y)){case 2:case 8:y=Ee;break;case 32:y=Le;break;case 268435456:y=Xe;break;default:y=Le}return S=Aj.bind(null,u),y=Ne(y,S),u.callbackPriority=f,u.callbackNode=y,f}return S!==null&&S!==null&&H(S),u.callbackPriority=2,u.callbackNode=null,2}function Aj(u,f){if(ci!==0&&ci!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(yv()&&u.callbackNode!==y)return null;var S=fr;return S=Ae(u,u===Hr?S:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),S===0?null:(uj(u,S,f),Tj(u,ae()),u.callbackNode!=null&&u.callbackNode===y?Aj.bind(null,u):null)}function Rj(u,f){if(yv())return null;uj(u,f,!0)}function aK(){gK(function(){(Tr&6)!==0?Ne(ne,iK):kj()})}function i2(){return Wd===0&&(Wd=wt()),Wd}function Nj(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Vl(""+u)}function Ij(u,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,u.id&&y.setAttribute("form",u.id),f.parentNode.insertBefore(y,f),u=new FormData(u),y.parentNode.removeChild(y),u}function oK(u,f,y,S,N){if(f==="submit"&&y&&y.stateNode===N){var B=Nj((N[Ie]||null).action),le=S.submitter;le&&(f=(f=le[Ie]||null)?Nj(f.formAction):le.getAttribute("formAction"),f!==null&&(B=f,le=null));var Ce=new ah("action","action",null,S,N);u.push({event:Ce,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Wd!==0){var qe=le?Ij(N,le):new FormData(N);CS(y,{pending:!0,data:qe,method:N.method,action:B},null,qe)}}else typeof B=="function"&&(Ce.preventDefault(),qe=le?Ij(N,le):new FormData(N),CS(y,{pending:!0,data:qe,method:N.method,action:B},B,qe))},currentTarget:N}]})}}for(var a2=0;a2<Yt.length;a2++){var o2=Yt[a2],lK=o2.toLowerCase(),cK=o2[0].toUpperCase()+o2.slice(1);Lt(lK,"on"+cK)}Lt(pt,"onAnimationEnd"),Lt(xt,"onAnimationIteration"),Lt(_t,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(kt,"onTransitionRun"),Lt(Bt,"onTransitionStart"),Lt(Zt,"onTransitionCancel"),Lt(Ft,"onTransitionEnd"),Yo("onMouseEnter",["mouseout","mouseover"]),Yo("onMouseLeave",["mouseout","mouseover"]),Yo("onPointerEnter",["pointerout","pointerover"]),Yo("onPointerLeave",["pointerout","pointerover"]),Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sg));function jj(u,f){f=(f&4)!==0;for(var y=0;y<u.length;y++){var S=u[y],N=S.event;S=S.listeners;e:{var B=void 0;if(f)for(var le=S.length-1;0<=le;le--){var Ce=S[le],qe=Ce.instance,ft=Ce.currentTarget;if(Ce=Ce.listener,qe!==B&&N.isPropagationStopped())break e;B=Ce,N.currentTarget=ft;try{B(N)}catch(Tt){av(Tt)}N.currentTarget=null,B=qe}else for(le=0;le<S.length;le++){if(Ce=S[le],qe=Ce.instance,ft=Ce.currentTarget,Ce=Ce.listener,qe!==B&&N.isPropagationStopped())break e;B=Ce,N.currentTarget=ft;try{B(N)}catch(Tt){av(Tt)}N.currentTarget=null,B=qe}}}}function sr(u,f){var y=f[bt];y===void 0&&(y=f[bt]=new Set);var S=u+"__bubble";y.has(S)||(Mj(f,u,2,!1),y.add(S))}function l2(u,f,y){var S=0;f&&(S|=4),Mj(y,u,S,f)}var wv="_reactListening"+Math.random().toString(36).slice(2);function c2(u){if(!u[wv]){u[wv]=!0,Mi.forEach(function(y){y!=="selectionchange"&&(uK.has(y)||l2(y,!1,u),l2(y,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[wv]||(f[wv]=!0,l2("selectionchange",!1,f))}}function Mj(u,f,y,S){switch(r4(f)){case 2:var N=FK;break;case 8:N=LK;break;default:N=S2}y=N.bind(null,f,y,u),N=void 0,!Fm||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(N=!0),S?N!==void 0?u.addEventListener(f,y,{capture:!0,passive:N}):u.addEventListener(f,y,!0):N!==void 0?u.addEventListener(f,y,{passive:N}):u.addEventListener(f,y,!1)}function u2(u,f,y,S,N){var B=S;if((f&1)===0&&(f&2)===0&&S!==null)e:for(;;){if(S===null)return;var le=S.tag;if(le===3||le===4){var Ce=S.stateNode.containerInfo;if(Ce===N)break;if(le===4)for(le=S.return;le!==null;){var qe=le.tag;if((qe===3||qe===4)&&le.stateNode.containerInfo===N)return;le=le.return}for(;Ce!==null;){if(le=$n(Ce),le===null)return;if(qe=le.tag,qe===5||qe===6||qe===26||qe===27){S=B=le;continue e}Ce=Ce.parentNode}}S=S.return}tu(function(){var ft=B,Tt=sh(y),jt=[];e:{var gt=qt.get(u);if(gt!==void 0){var vt=ah,kn=u;switch(u){case"keypress":if(su(y)===0)break e;case"keydown":case"keyup":vt=ph;break;case"focusin":kn="focus",vt=iu;break;case"focusout":kn="blur",vt=iu;break;case"beforeblur":case"afterblur":vt=iu;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=ch;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=Rb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=Vm;break;case pt:case xt:case _t:vt=Nb;break;case Ft:vt=Hm;break;case"scroll":case"scrollend":vt=oh;break;case"wheel":vt=gh;break;case"copy":case"cut":case"paste":vt=fh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=qm;break;case"toggle":case"beforetoggle":vt=Mb}var vn=(f&4)!==0,Pr=!vn&&(u==="scroll"||u==="scrollend"),at=vn?gt!==null?gt+"Capture":null:gt;vn=[];for(var Je=ft,ut;Je!==null;){var Rt=Je;if(ut=Rt.stateNode,Rt=Rt.tag,Rt!==5&&Rt!==26&&Rt!==27||ut===null||at===null||(Rt=Kl(Je,at),Rt!=null&&vn.push(Eg(Je,Rt,ut))),Pr)break;Je=Je.return}0<vn.length&&(gt=new vt(gt,kn,null,y,Tt),jt.push({event:gt,listeners:vn}))}}if((f&7)===0){e:{if(gt=u==="mouseover"||u==="pointerover",vt=u==="mouseout"||u==="pointerout",gt&&y!==Da&&(kn=y.relatedTarget||y.fromElement)&&($n(kn)||kn[Ge]))break e;if((vt||gt)&&(gt=Tt.window===Tt?Tt:(gt=Tt.ownerDocument)?gt.defaultView||gt.parentWindow:window,vt?(kn=y.relatedTarget||y.toElement,vt=ft,kn=kn?$n(kn):null,kn!==null&&(Pr=i(kn),vn=kn.tag,kn!==Pr||vn!==5&&vn!==27&&vn!==6)&&(kn=null)):(vt=null,kn=ft),vt!==kn)){if(vn=ch,Rt="onMouseLeave",at="onMouseEnter",Je="mouse",(u==="pointerout"||u==="pointerover")&&(vn=qm,Rt="onPointerLeave",at="onPointerEnter",Je="pointer"),Pr=vt==null?gt:jr(vt),ut=kn==null?gt:jr(kn),gt=new vn(Rt,Je+"leave",vt,y,Tt),gt.target=Pr,gt.relatedTarget=ut,Rt=null,$n(Tt)===ft&&(vn=new vn(at,Je+"enter",kn,y,Tt),vn.target=ut,vn.relatedTarget=Pr,Rt=vn),Pr=Rt,vt&&kn)t:{for(vn=vt,at=kn,Je=0,ut=vn;ut;ut=zh(ut))Je++;for(ut=0,Rt=at;Rt;Rt=zh(Rt))ut++;for(;0<Je-ut;)vn=zh(vn),Je--;for(;0<ut-Je;)at=zh(at),ut--;for(;Je--;){if(vn===at||at!==null&&vn===at.alternate)break t;vn=zh(vn),at=zh(at)}vn=null}else vn=null;vt!==null&&Dj(jt,gt,vt,vn,!1),kn!==null&&Pr!==null&&Dj(jt,Pr,kn,vn,!0)}}e:{if(gt=ft?jr(ft):window,vt=gt.nodeName&&gt.nodeName.toLowerCase(),vt==="select"||vt==="input"&&gt.type==="file")var on=Od;else if(vh(gt))if(Pa)on=lu;else{on=Jl;var er=$b}else vt=gt.nodeName,!vt||vt.toLowerCase()!=="input"||gt.type!=="checkbox"&&gt.type!=="radio"?ft&&Pm(ft.elementType)&&(on=Od):on=Ym;if(on&&(on=on(u,ft))){Zm(jt,on,y,Tt);break e}er&&er(u,gt,ft),u==="focusout"&&ft&&gt.type==="number"&&ft.memoizedProps.value!=null&&Xc(gt,"number",gt.value)}switch(er=ft?jr(ft):window,u){case"focusin":(vh(er)||er.contentEditable==="true")&&($e=er,Ye=ft,Qe=null);break;case"focusout":Qe=Ye=$e=null;break;case"mousedown":it=!0;break;case"contextmenu":case"mouseup":case"dragend":it=!1,Ke(jt,y,Tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ke(jt,y,Tt)}var hn;if(Md)e:{switch(u){case"compositionstart":var _n="onCompositionStart";break e;case"compositionend":_n="onCompositionEnd";break e;case"compositionupdate":_n="onCompositionUpdate";break e}_n=void 0}else Xl?Wm(u,y)&&(_n="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(_n="onCompositionStart");_n&&(yh&&y.locale!=="ko"&&(Xl||_n!=="onCompositionStart"?_n==="onCompositionEnd"&&Xl&&(hn=ru()):(Oa=Tt,ih="value"in Oa?Oa.value:Oa.textContent,Xl=!0)),er=xv(ft,_n),0<er.length&&(_n=new hh(_n,u,null,y,Tt),jt.push({event:_n,listeners:er}),hn?_n.data=hn:(hn=Ob(y),hn!==null&&(_n.data=hn)))),(hn=V_?Pb(u,y):H_(u,y))&&(_n=xv(ft,"onBeforeInput"),0<_n.length&&(er=new hh("onBeforeInput","beforeinput",null,y,Tt),jt.push({event:er,listeners:_n}),er.data=hn)),oK(jt,u,ft,y,Tt)}jj(jt,f)})}function Eg(u,f,y){return{instance:u,listener:f,currentTarget:y}}function xv(u,f){for(var y=f+"Capture",S=[];u!==null;){var N=u,B=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||B===null||(N=Kl(u,y),N!=null&&S.unshift(Eg(u,N,B)),N=Kl(u,f),N!=null&&S.push(Eg(u,N,B))),u.tag===3)return S;u=u.return}return[]}function zh(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Dj(u,f,y,S,N){for(var B=f._reactName,le=[];y!==null&&y!==S;){var Ce=y,qe=Ce.alternate,ft=Ce.stateNode;if(Ce=Ce.tag,qe!==null&&qe===S)break;Ce!==5&&Ce!==26&&Ce!==27||ft===null||(qe=ft,N?(ft=Kl(y,B),ft!=null&&le.unshift(Eg(y,ft,qe))):N||(ft=Kl(y,B),ft!=null&&le.push(Eg(y,ft,qe)))),y=y.return}le.length!==0&&u.push({event:f,listeners:le})}var dK=/\r\n?/g,fK=/\u0000|\uFFFD/g;function Oj(u){return(typeof u=="string"?u:""+u).replace(dK,`
`).replace(fK,"")}function Pj(u,f){return f=Oj(f),Oj(u)===f}function _v(){}function Or(u,f,y,S,N,B){switch(y){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||Qc(u,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&Qc(u,""+S);break;case"className":zl(u,"class",S);break;case"tabIndex":zl(u,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":zl(u,y,S);break;case"style":Tb(u,S,B);break;case"data":if(f!=="object"){zl(u,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||y!=="href")){u.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=Vl(""+S),u.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(y==="formAction"?(f!=="input"&&Or(u,f,"name",N.name,N,null),Or(u,f,"formEncType",N.formEncType,N,null),Or(u,f,"formMethod",N.formMethod,N,null),Or(u,f,"formTarget",N.formTarget,N,null)):(Or(u,f,"encType",N.encType,N,null),Or(u,f,"method",N.method,N,null),Or(u,f,"target",N.target,N,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){u.removeAttribute(y);break}S=Vl(""+S),u.setAttribute(y,S);break;case"onClick":S!=null&&(u.onclick=_v);break;case"onScroll":S!=null&&sr("scroll",u);break;case"onScrollEnd":S!=null&&sr("scrollend",u);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(N.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"multiple":u.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":u.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){u.removeAttribute("xlink:href");break}y=Vl(""+S),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""+S):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":S===!0?u.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?u.setAttribute(y,S):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?u.setAttribute(y,S):u.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?u.removeAttribute(y):u.setAttribute(y,S);break;case"popover":sr("beforetoggle",u),sr("toggle",u),mo(u,"popover",S);break;case"xlinkActuate":ma(u,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":ma(u,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":ma(u,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":ma(u,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":ma(u,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":ma(u,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":ma(u,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":ma(u,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":ma(u,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":mo(u,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Oi.get(y)||y,mo(u,y,S))}}function d2(u,f,y,S,N,B){switch(y){case"style":Tb(u,S,B);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(N.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"children":typeof S=="string"?Qc(u,S):(typeof S=="number"||typeof S=="bigint")&&Qc(u,""+S);break;case"onScroll":S!=null&&sr("scroll",u);break;case"onScrollEnd":S!=null&&sr("scrollend",u);break;case"onClick":S!=null&&(u.onclick=_v);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wo.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(N=y.endsWith("Capture"),f=y.slice(2,N?y.length-7:void 0),B=u[Ie]||null,B=B!=null?B[y]:null,typeof B=="function"&&u.removeEventListener(f,B,N),typeof S=="function")){typeof B!="function"&&B!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(f,S,N);break e}y in u?u[y]=S:S===!0?u.setAttribute(y,""):mo(u,y,S)}}}function ui(u,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":sr("error",u),sr("load",u);var S=!1,N=!1,B;for(B in y)if(y.hasOwnProperty(B)){var le=y[B];if(le!=null)switch(B){case"src":S=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Or(u,f,B,le,y,null)}}N&&Or(u,f,"srcSet",y.srcSet,y,null),S&&Or(u,f,"src",y.src,y,null);return;case"input":sr("invalid",u);var Ce=B=le=N=null,qe=null,ft=null;for(S in y)if(y.hasOwnProperty(S)){var Tt=y[S];if(Tt!=null)switch(S){case"name":N=Tt;break;case"type":le=Tt;break;case"checked":qe=Tt;break;case"defaultChecked":ft=Tt;break;case"value":B=Tt;break;case"defaultValue":Ce=Tt;break;case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(r(137,f));break;default:Or(u,f,S,Tt,y,null)}}Dm(u,B,Ce,qe,ft,le,N,!1),Qo(u);return;case"select":sr("invalid",u),S=le=B=null;for(N in y)if(y.hasOwnProperty(N)&&(Ce=y[N],Ce!=null))switch(N){case"value":B=Ce;break;case"defaultValue":le=Ce;break;case"multiple":S=Ce;default:Or(u,f,N,Ce,y,null)}f=B,y=le,u.multiple=!!S,f!=null?ql(u,!!S,f,!1):y!=null&&ql(u,!!S,y,!0);return;case"textarea":sr("invalid",u),B=N=S=null;for(le in y)if(y.hasOwnProperty(le)&&(Ce=y[le],Ce!=null))switch(le){case"value":S=Ce;break;case"defaultValue":N=Ce;break;case"children":B=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(91));break;default:Or(u,f,le,Ce,y,null)}Om(u,S,N,B),Qo(u);return;case"option":for(qe in y)if(y.hasOwnProperty(qe)&&(S=y[qe],S!=null))switch(qe){case"selected":u.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Or(u,f,qe,S,y,null)}return;case"dialog":sr("beforetoggle",u),sr("toggle",u),sr("cancel",u),sr("close",u);break;case"iframe":case"object":sr("load",u);break;case"video":case"audio":for(S=0;S<Sg.length;S++)sr(Sg[S],u);break;case"image":sr("error",u),sr("load",u);break;case"details":sr("toggle",u);break;case"embed":case"source":case"link":sr("error",u),sr("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ft in y)if(y.hasOwnProperty(ft)&&(S=y[ft],S!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Or(u,f,ft,S,y,null)}return;default:if(Pm(f)){for(Tt in y)y.hasOwnProperty(Tt)&&(S=y[Tt],S!==void 0&&d2(u,f,Tt,S,y,void 0));return}}for(Ce in y)y.hasOwnProperty(Ce)&&(S=y[Ce],S!=null&&Or(u,f,Ce,S,y,null))}function hK(u,f,y,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,B=null,le=null,Ce=null,qe=null,ft=null,Tt=null;for(vt in y){var jt=y[vt];if(y.hasOwnProperty(vt)&&jt!=null)switch(vt){case"checked":break;case"value":break;case"defaultValue":qe=jt;default:S.hasOwnProperty(vt)||Or(u,f,vt,null,S,jt)}}for(var gt in S){var vt=S[gt];if(jt=y[gt],S.hasOwnProperty(gt)&&(vt!=null||jt!=null))switch(gt){case"type":B=vt;break;case"name":N=vt;break;case"checked":ft=vt;break;case"defaultChecked":Tt=vt;break;case"value":le=vt;break;case"defaultValue":Ce=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(r(137,f));break;default:vt!==jt&&Or(u,f,gt,vt,S,jt)}}Yc(u,le,Ce,qe,ft,Tt,B,N);return;case"select":vt=le=Ce=gt=null;for(B in y)if(qe=y[B],y.hasOwnProperty(B)&&qe!=null)switch(B){case"value":break;case"multiple":vt=qe;default:S.hasOwnProperty(B)||Or(u,f,B,null,S,qe)}for(N in S)if(B=S[N],qe=y[N],S.hasOwnProperty(N)&&(B!=null||qe!=null))switch(N){case"value":gt=B;break;case"defaultValue":Ce=B;break;case"multiple":le=B;default:B!==qe&&Or(u,f,N,B,S,qe)}f=Ce,y=le,S=vt,gt!=null?ql(u,!!y,gt,!1):!!S!=!!y&&(f!=null?ql(u,!!y,f,!0):ql(u,!!y,y?[]:"",!1));return;case"textarea":vt=gt=null;for(Ce in y)if(N=y[Ce],y.hasOwnProperty(Ce)&&N!=null&&!S.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:Or(u,f,Ce,null,S,N)}for(le in S)if(N=S[le],B=y[le],S.hasOwnProperty(le)&&(N!=null||B!=null))switch(le){case"value":gt=N;break;case"defaultValue":vt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==B&&Or(u,f,le,N,S,B)}Jc(u,gt,vt);return;case"option":for(var kn in y)if(gt=y[kn],y.hasOwnProperty(kn)&&gt!=null&&!S.hasOwnProperty(kn))switch(kn){case"selected":u.selected=!1;break;default:Or(u,f,kn,null,S,gt)}for(qe in S)if(gt=S[qe],vt=y[qe],S.hasOwnProperty(qe)&&gt!==vt&&(gt!=null||vt!=null))switch(qe){case"selected":u.selected=gt&&typeof gt!="function"&&typeof gt!="symbol";break;default:Or(u,f,qe,gt,S,vt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vn in y)gt=y[vn],y.hasOwnProperty(vn)&&gt!=null&&!S.hasOwnProperty(vn)&&Or(u,f,vn,null,S,gt);for(ft in S)if(gt=S[ft],vt=y[ft],S.hasOwnProperty(ft)&&gt!==vt&&(gt!=null||vt!=null))switch(ft){case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(r(137,f));break;default:Or(u,f,ft,gt,S,vt)}return;default:if(Pm(f)){for(var Pr in y)gt=y[Pr],y.hasOwnProperty(Pr)&&gt!==void 0&&!S.hasOwnProperty(Pr)&&d2(u,f,Pr,void 0,S,gt);for(Tt in S)gt=S[Tt],vt=y[Tt],!S.hasOwnProperty(Tt)||gt===vt||gt===void 0&&vt===void 0||d2(u,f,Tt,gt,S,vt);return}}for(var at in y)gt=y[at],y.hasOwnProperty(at)&&gt!=null&&!S.hasOwnProperty(at)&&Or(u,f,at,null,S,gt);for(jt in S)gt=S[jt],vt=y[jt],!S.hasOwnProperty(jt)||gt===vt||gt==null&&vt==null||Or(u,f,jt,gt,S,vt)}var f2=null,h2=null;function Sv(u){return u.nodeType===9?u:u.ownerDocument}function Fj(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lj(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function p2(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var m2=null;function pK(){var u=window.event;return u&&u.type==="popstate"?u===m2?!1:(m2=u,!0):(m2=null,!1)}var $j=typeof setTimeout=="function"?setTimeout:void 0,mK=typeof clearTimeout=="function"?clearTimeout:void 0,Bj=typeof Promise=="function"?Promise:void 0,gK=typeof queueMicrotask=="function"?queueMicrotask:typeof Bj<"u"?function(u){return Bj.resolve(null).then(u).catch(yK)}:$j;function yK(u){setTimeout(function(){throw u})}function Eu(u){return u==="head"}function zj(u,f){var y=f,S=0,N=0;do{var B=y.nextSibling;if(u.removeChild(y),B&&B.nodeType===8)if(y=B.data,y==="/$"){if(0<S&&8>S){y=S;var le=u.ownerDocument;if(y&1&&Cg(le.documentElement),y&2&&Cg(le.body),y&4)for(y=le.head,Cg(y),le=y.firstChild;le;){var Ce=le.nextSibling,qe=le.nodeName;le[Xt]||qe==="SCRIPT"||qe==="STYLE"||qe==="LINK"&&le.rel.toLowerCase()==="stylesheet"||y.removeChild(le),le=Ce}}if(N===0){u.removeChild(B),Mg(f);return}N--}else y==="$"||y==="$?"||y==="$!"?N++:S=y.charCodeAt(0)-48;else S=0;y=B}while(y);Mg(f)}function g2(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":g2(y),an(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function bK(u,f,y,S){for(;u.nodeType===1;){var N=y;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(S){if(!u[Xt])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(B=u.getAttribute("rel"),B==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(B!==N.rel||u.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||u.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||u.getAttribute("title")!==(N.title==null?null:N.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(B=u.getAttribute("src"),(B!==(N.src==null?null:N.src)||u.getAttribute("type")!==(N.type==null?null:N.type)||u.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&B&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var B=N.name==null?null:""+N.name;if(N.type==="hidden"&&u.getAttribute("name")===B)return u}else return u;if(u=vo(u.nextSibling),u===null)break}return null}function vK(u,f,y){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=vo(u.nextSibling),u===null))return null;return u}function y2(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function wK(u,f){var y=u.ownerDocument;if(u.data!=="$?"||y.readyState==="complete")f();else{var S=function(){f(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),u._reactRetry=S}}function vo(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var b2=null;function Uj(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return u;f--}else y==="/$"&&f++}u=u.previousSibling}return null}function qj(u,f,y){switch(f=Sv(y),u){case"html":if(u=f.documentElement,!u)throw Error(r(452));return u;case"head":if(u=f.head,!u)throw Error(r(453));return u;case"body":if(u=f.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function Cg(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);an(u)}var Ua=new Map,Vj=new Set;function Ev(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var dc=te.d;te.d={f:xK,r:_K,D:SK,C:EK,L:CK,m:kK,X:AK,S:TK,M:RK};function xK(){var u=dc.f(),f=mv();return u||f}function _K(u){var f=tr(u);f!==null&&f.tag===5&&f.type==="form"?u3(f):dc.r(u)}var Uh=typeof document>"u"?null:document;function Hj(u,f,y){var S=Uh;if(S&&typeof f=="string"&&f){var N=yi(f);N='link[rel="'+u+'"][href="'+N+'"]',typeof y=="string"&&(N+='[crossorigin="'+y+'"]'),Vj.has(N)||(Vj.add(N),u={rel:u,crossOrigin:y,href:f},S.querySelector(N)===null&&(f=S.createElement("link"),ui(f,"link",u),Vn(f),S.head.appendChild(f)))}}function SK(u){dc.D(u),Hj("dns-prefetch",u,null)}function EK(u,f){dc.C(u,f),Hj("preconnect",u,f)}function CK(u,f,y){dc.L(u,f,y);var S=Uh;if(S&&u&&f){var N='link[rel="preload"][as="'+yi(f)+'"]';f==="image"&&y&&y.imageSrcSet?(N+='[imagesrcset="'+yi(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(N+='[imagesizes="'+yi(y.imageSizes)+'"]')):N+='[href="'+yi(u)+'"]';var B=N;switch(f){case"style":B=qh(u);break;case"script":B=Vh(u)}Ua.has(B)||(u=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:u,as:f},y),Ua.set(B,u),S.querySelector(N)!==null||f==="style"&&S.querySelector(kg(B))||f==="script"&&S.querySelector(Tg(B))||(f=S.createElement("link"),ui(f,"link",u),Vn(f),S.head.appendChild(f)))}}function kK(u,f){dc.m(u,f);var y=Uh;if(y&&u){var S=f&&typeof f.as=="string"?f.as:"script",N='link[rel="modulepreload"][as="'+yi(S)+'"][href="'+yi(u)+'"]',B=N;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=Vh(u)}if(!Ua.has(B)&&(u=d({rel:"modulepreload",href:u},f),Ua.set(B,u),y.querySelector(N)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Tg(B)))return}S=y.createElement("link"),ui(S,"link",u),Vn(S),y.head.appendChild(S)}}}function TK(u,f,y){dc.S(u,f,y);var S=Uh;if(S&&u){var N=Mr(S).hoistableStyles,B=qh(u);f=f||"default";var le=N.get(B);if(!le){var Ce={loading:0,preload:null};if(le=S.querySelector(kg(B)))Ce.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},y),(y=Ua.get(B))&&v2(u,y);var qe=le=S.createElement("link");Vn(qe),ui(qe,"link",u),qe._p=new Promise(function(ft,Tt){qe.onload=ft,qe.onerror=Tt}),qe.addEventListener("load",function(){Ce.loading|=1}),qe.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,Cv(le,f,S)}le={type:"stylesheet",instance:le,count:1,state:Ce},N.set(B,le)}}}function AK(u,f){dc.X(u,f);var y=Uh;if(y&&u){var S=Mr(y).hoistableScripts,N=Vh(u),B=S.get(N);B||(B=y.querySelector(Tg(N)),B||(u=d({src:u,async:!0},f),(f=Ua.get(N))&&w2(u,f),B=y.createElement("script"),Vn(B),ui(B,"link",u),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(N,B))}}function RK(u,f){dc.M(u,f);var y=Uh;if(y&&u){var S=Mr(y).hoistableScripts,N=Vh(u),B=S.get(N);B||(B=y.querySelector(Tg(N)),B||(u=d({src:u,async:!0,type:"module"},f),(f=Ua.get(N))&&w2(u,f),B=y.createElement("script"),Vn(B),ui(B,"link",u),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(N,B))}}function Gj(u,f,y,S){var N=(N=je.current)?Ev(N):null;if(!N)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=qh(y.href),y=Mr(N).hoistableStyles,S=y.get(f),S||(S={type:"style",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=qh(y.href);var B=Mr(N).hoistableStyles,le=B.get(u);if(le||(N=N.ownerDocument||N,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(u,le),(B=N.querySelector(kg(u)))&&!B._p&&(le.instance=B,le.state.loading=5),Ua.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Ua.set(u,y),B||NK(N,u,y,le.state))),f&&S===null)throw Error(r(528,""));return le}if(f&&S!==null)throw Error(r(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Vh(y),y=Mr(N).hoistableScripts,S=y.get(f),S||(S={type:"script",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function qh(u){return'href="'+yi(u)+'"'}function kg(u){return'link[rel="stylesheet"]['+u+"]"}function Kj(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function NK(u,f,y,S){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=u.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),ui(f,"link",y),Vn(f),u.head.appendChild(f))}function Vh(u){return'[src="'+yi(u)+'"]'}function Tg(u){return"script[async]"+u}function Wj(u,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var S=u.querySelector('style[data-href~="'+yi(y.href)+'"]');if(S)return f.instance=S,Vn(S),S;var N=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(u.ownerDocument||u).createElement("style"),Vn(S),ui(S,"style",N),Cv(S,y.precedence,u),f.instance=S;case"stylesheet":N=qh(y.href);var B=u.querySelector(kg(N));if(B)return f.state.loading|=4,f.instance=B,Vn(B),B;S=Kj(y),(N=Ua.get(N))&&v2(S,N),B=(u.ownerDocument||u).createElement("link"),Vn(B);var le=B;return le._p=new Promise(function(Ce,qe){le.onload=Ce,le.onerror=qe}),ui(B,"link",S),f.state.loading|=4,Cv(B,y.precedence,u),f.instance=B;case"script":return B=Vh(y.src),(N=u.querySelector(Tg(B)))?(f.instance=N,Vn(N),N):(S=y,(N=Ua.get(B))&&(S=d({},y),w2(S,N)),u=u.ownerDocument||u,N=u.createElement("script"),Vn(N),ui(N,"link",S),u.head.appendChild(N),f.instance=N);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,Cv(S,y.precedence,u));return f.instance}function Cv(u,f,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=S.length?S[S.length-1]:null,B=N,le=0;le<S.length;le++){var Ce=S[le];if(Ce.dataset.precedence===f)B=Ce;else if(B!==N)break}B?B.parentNode.insertBefore(u,B.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(u,f.firstChild))}function v2(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function w2(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var kv=null;function Zj(u,f,y){if(kv===null){var S=new Map,N=kv=new Map;N.set(y,S)}else N=kv,S=N.get(y),S||(S=new Map,N.set(y,S));if(S.has(u))return S;for(S.set(u,null),y=y.getElementsByTagName(u),N=0;N<y.length;N++){var B=y[N];if(!(B[Xt]||B[ge]||u==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var le=B.getAttribute(f)||"";le=u+le;var Ce=S.get(le);Ce?Ce.push(B):S.set(le,[B])}}return S}function Yj(u,f,y){u=u.ownerDocument||u,u.head.insertBefore(y,f==="title"?u.querySelector("head > title"):null)}function IK(u,f,y){if(y===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function Xj(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Ag=null;function jK(){}function MK(u,f,y){if(Ag===null)throw Error(r(475));var S=Ag;if(f.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var N=qh(y.href),B=u.querySelector(kg(N));if(B){u=B._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(S.count++,S=Tv.bind(S),u.then(S,S)),f.state.loading|=4,f.instance=B,Vn(B);return}B=u.ownerDocument||u,y=Kj(y),(N=Ua.get(N))&&v2(y,N),B=B.createElement("link"),Vn(B);var le=B;le._p=new Promise(function(Ce,qe){le.onload=Ce,le.onerror=qe}),ui(B,"link",y),f.instance=B}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(S.count++,f=Tv.bind(S),u.addEventListener("load",f),u.addEventListener("error",f))}}function DK(){if(Ag===null)throw Error(r(475));var u=Ag;return u.stylesheets&&u.count===0&&x2(u,u.stylesheets),0<u.count?function(f){var y=setTimeout(function(){if(u.stylesheets&&x2(u,u.stylesheets),u.unsuspend){var S=u.unsuspend;u.unsuspend=null,S()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(y)}}:null}function Tv(){if(this.count--,this.count===0){if(this.stylesheets)x2(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Av=null;function x2(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Av=new Map,f.forEach(OK,u),Av=null,Tv.call(u))}function OK(u,f){if(!(f.state.loading&4)){var y=Av.get(u);if(y)var S=y.get(null);else{y=new Map,Av.set(u,y);for(var N=u.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<N.length;B++){var le=N[B];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(y.set(le.dataset.precedence,le),S=le)}S&&y.set(null,S)}N=f.instance,le=N.getAttribute("data-precedence"),B=y.get(le)||S,B===S&&y.set(null,N),y.set(le,N),this.count++,S=Tv.bind(this),N.addEventListener("load",S),N.addEventListener("error",S),B?B.parentNode.insertBefore(N,B.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(N,u.firstChild)),f.state.loading|=4}}var Rg={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function PK(u,f,y,S,N,B,le,Ce){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=S,this.onUncaughtError=N,this.onCaughtError=B,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ce,this.incompleteTransitions=new Map}function Jj(u,f,y,S,N,B,le,Ce,qe,ft,Tt,jt){return u=new PK(u,f,y,le,Ce,qe,ft,jt),f=1,B===!0&&(f|=24),B=ya(3,null,null,f),u.current=B,B.stateNode=u,f=nS(),f.refCount++,u.pooledCache=f,f.refCount++,B.memoizedState={element:S,isDehydrated:y,cache:f},aS(B),u}function Qj(u){return u?(u=rl,u):rl}function e4(u,f,y,S,N,B){N=Qj(N),S.context===null?S.context=N:S.pendingContext=N,S=du(f),S.payload={element:y},B=B===void 0?null:B,B!==null&&(S.callback=B),y=fu(u,S,f),y!==null&&(_a(y,u,f),ig(y,u,f))}function t4(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function _2(u,f){t4(u,f),(u=u.alternate)&&t4(u,f)}function n4(u){if(u.tag===13){var f=yo(u,67108864);f!==null&&_a(f,u,67108864),_2(u,67108864)}}var Rv=!0;function FK(u,f,y,S){var N=J.T;J.T=null;var B=te.p;try{te.p=2,S2(u,f,y,S)}finally{te.p=B,J.T=N}}function LK(u,f,y,S){var N=J.T;J.T=null;var B=te.p;try{te.p=8,S2(u,f,y,S)}finally{te.p=B,J.T=N}}function S2(u,f,y,S){if(Rv){var N=E2(S);if(N===null)u2(u,f,S,Nv,y),s4(u,S);else if(BK(N,u,f,y,S))S.stopPropagation();else if(s4(u,S),f&4&&-1<$K.indexOf(u)){for(;N!==null;){var B=tr(N);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var le=ve(B.pendingLanes);if(le!==0){var Ce=B;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;le;){var qe=1<<31-Kt(le);Ce.entanglements[1]|=qe,le&=~qe}ll(B),(Tr&6)===0&&(hv=ae()+500,_g(0))}}break;case 13:Ce=yo(B,2),Ce!==null&&_a(Ce,B,2),mv(),_2(B,2)}if(B=E2(S),B===null&&u2(u,f,S,Nv,y),B===N)break;N=B}N!==null&&S.stopPropagation()}else u2(u,f,S,null,y)}}function E2(u){return u=sh(u),C2(u)}var Nv=null;function C2(u){if(Nv=null,u=$n(u),u!==null){var f=i(u);if(f===null)u=null;else{var y=f.tag;if(y===13){if(u=a(f),u!==null)return u;u=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return Nv=u,null}function r4(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case ne:return 2;case Ee:return 8;case Le:case Te:return 32;case Xe:return 268435456;default:return 32}default:return 32}}var k2=!1,Cu=null,ku=null,Tu=null,Ng=new Map,Ig=new Map,Au=[],$K="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s4(u,f){switch(u){case"focusin":case"focusout":Cu=null;break;case"dragenter":case"dragleave":ku=null;break;case"mouseover":case"mouseout":Tu=null;break;case"pointerover":case"pointerout":Ng.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ig.delete(f.pointerId)}}function jg(u,f,y,S,N,B){return u===null||u.nativeEvent!==B?(u={blockedOn:f,domEventName:y,eventSystemFlags:S,nativeEvent:B,targetContainers:[N]},f!==null&&(f=tr(f),f!==null&&n4(f)),u):(u.eventSystemFlags|=S,f=u.targetContainers,N!==null&&f.indexOf(N)===-1&&f.push(N),u)}function BK(u,f,y,S,N){switch(f){case"focusin":return Cu=jg(Cu,u,f,y,S,N),!0;case"dragenter":return ku=jg(ku,u,f,y,S,N),!0;case"mouseover":return Tu=jg(Tu,u,f,y,S,N),!0;case"pointerover":var B=N.pointerId;return Ng.set(B,jg(Ng.get(B)||null,u,f,y,S,N)),!0;case"gotpointercapture":return B=N.pointerId,Ig.set(B,jg(Ig.get(B)||null,u,f,y,S,N)),!0}return!1}function i4(u){var f=$n(u.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=a(y),f!==null){u.blockedOn=f,q(u.priority,function(){if(y.tag===13){var S=xa();S=Et(S);var N=yo(y,S);N!==null&&_a(N,y,S),_2(y,S)}});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Iv(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var y=E2(u.nativeEvent);if(y===null){y=u.nativeEvent;var S=new y.constructor(y.type,y);Da=S,y.target.dispatchEvent(S),Da=null}else return f=tr(y),f!==null&&n4(f),u.blockedOn=y,!1;f.shift()}return!0}function a4(u,f,y){Iv(u)&&y.delete(f)}function zK(){k2=!1,Cu!==null&&Iv(Cu)&&(Cu=null),ku!==null&&Iv(ku)&&(ku=null),Tu!==null&&Iv(Tu)&&(Tu=null),Ng.forEach(a4),Ig.forEach(a4)}function jv(u,f){u.blockedOn===f&&(u.blockedOn=null,k2||(k2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zK)))}var Mv=null;function o4(u){Mv!==u&&(Mv=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Mv===u&&(Mv=null);for(var f=0;f<u.length;f+=3){var y=u[f],S=u[f+1],N=u[f+2];if(typeof S!="function"){if(C2(S||y)===null)continue;break}var B=tr(y);B!==null&&(u.splice(f,3),f-=3,CS(B,{pending:!0,data:N,method:y.method,action:S},S,N))}}))}function Mg(u){function f(qe){return jv(qe,u)}Cu!==null&&jv(Cu,u),ku!==null&&jv(ku,u),Tu!==null&&jv(Tu,u),Ng.forEach(f),Ig.forEach(f);for(var y=0;y<Au.length;y++){var S=Au[y];S.blockedOn===u&&(S.blockedOn=null)}for(;0<Au.length&&(y=Au[0],y.blockedOn===null);)i4(y),y.blockedOn===null&&Au.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var N=y[S],B=y[S+1],le=N[Ie]||null;if(typeof B=="function")le||o4(y);else if(le){var Ce=null;if(B&&B.hasAttribute("formAction")){if(N=B,le=B[Ie]||null)Ce=le.formAction;else if(C2(N)!==null)continue}else Ce=le.action;typeof Ce=="function"?y[S+1]=Ce:(y.splice(S,3),S-=3),o4(y)}}}function T2(u){this._internalRoot=u}Dv.prototype.render=T2.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(r(409));var y=f.current,S=xa();e4(y,S,u,f,null,null)},Dv.prototype.unmount=T2.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;e4(u.current,2,null,u,null,null),mv(),f[Ge]=null}};function Dv(u){this._internalRoot=u}Dv.prototype.unstable_scheduleHydration=function(u){if(u){var f=G();u={blockedOn:null,target:u,priority:f};for(var y=0;y<Au.length&&f!==0&&f<Au[y].priority;y++);Au.splice(y,0,u),y===0&&i4(u)}};var l4=t.version;if(l4!=="19.1.0")throw Error(r(527,l4,"19.1.0"));te.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var UK={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ov=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ov.isDisabled&&Ov.supportsFiber)try{It=Ov.inject(UK),Vt=Ov}catch{}}return Og.createRoot=function(u,f){if(!s(u))throw Error(r(299));var y=!1,S="",N=E3,B=C3,le=k3,Ce=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&(B=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Ce=f.unstable_transitionCallbacks)),f=Jj(u,1,!1,null,null,y,S,N,B,le,Ce,null),u[Ge]=f.current,c2(u),new T2(f)},Og.hydrateRoot=function(u,f,y){if(!s(u))throw Error(r(299));var S=!1,N="",B=E3,le=C3,Ce=k3,qe=null,ft=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(N=y.identifierPrefix),y.onUncaughtError!==void 0&&(B=y.onUncaughtError),y.onCaughtError!==void 0&&(le=y.onCaughtError),y.onRecoverableError!==void 0&&(Ce=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(qe=y.unstable_transitionCallbacks),y.formState!==void 0&&(ft=y.formState)),f=Jj(u,1,!0,f,y??null,S,N,B,le,Ce,qe,ft),f.context=Qj(null),y=f.current,S=xa(),S=Et(S),N=du(S),N.callback=null,fu(y,N,S),y=S,f.current.lanes=y,rt(f,y),ll(f),u[Ge]=f.current,c2(u),new Dv(f)},Og.version="19.1.0",Og}var b4;function sW(){if(b4)return N2.exports;b4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),N2.exports=rW(),N2.exports}var iW=sW();const aW=Ni(iW);function v4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Rc(...e){return t=>{let n=!1;const r=e.map(s=>{const i=v4(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():v4(e[s],null)}}}}function In(...e){return C.useCallback(Rc(...e),e)}function Uu(e){const t=oW(e),n=C.forwardRef((r,s)=>{const{children:i,...a}=r,o=C.Children.toArray(i),l=o.find(cW);if(l){const c=l.props.children,d=o.map(h=>h===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:h);return p.jsx(t,{...a,ref:s,children:C.isValidElement(c)?C.cloneElement(c,void 0,d):null})}return p.jsx(t,{...a,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var M8=Uu("Slot");function oW(e){const t=C.forwardRef((n,r)=>{const{children:s,...i}=n;if(C.isValidElement(s)){const a=dW(s),o=uW(i,s.props);return s.type!==C.Fragment&&(o.ref=r?Rc(r,a):a),C.cloneElement(s,o)}return C.Children.count(s)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var D8=Symbol("radix.slottable");function lW(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=D8,t}function cW(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===D8}function uW(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...o)=>{i(...o),s(...o)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function dW(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function O8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=O8(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function P8(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=O8(e))&&(r&&(r+=" "),r+=t);return r}const w4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,x4=P8,bA=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return x4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const m=w4(d)||w4(h);return s[c][m]}),o=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(v=>{let[b,w]=v;return Array.isArray(w)?w.includes({...i,...o}[b]):{...i,...o}[b]===w})?[...c,h,m]:c},[]);return x4(e,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},vA="-",fW=e=>{const t=pW(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const o=a.split(vA);return o[0]===""&&o.length!==1&&o.shift(),F8(o,t)||hW(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},F8=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?F8(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(vA);return(a=t.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},_4=/^\[(.+)\]$/,hW=e=>{if(_4.test(e)){const t=_4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},pW=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)Nk(n[s],r,s,t);return r},Nk=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:S4(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(mW(s)){Nk(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Nk(a,S4(t,i),n,r)})})},S4=(e,t)=>{let n=e;return t.split(vA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},mW=e=>e.isThemeGetter,gW=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},Ik="!",jk=":",yW=jk.length,bW=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let a=0,o=0,l=0,c;for(let v=0;v<s.length;v++){let b=s[v];if(a===0&&o===0){if(b===jk){i.push(s.slice(l,v)),l=v+yW;continue}if(b==="/"){c=v;continue}}b==="["?a++:b==="]"?a--:b==="("?o++:b===")"&&o--}const d=i.length===0?s:s.substring(l),h=vW(d),m=h!==d,g=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const s=t+jk,i=r;r=a=>a.startsWith(s)?i(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},vW=e=>e.endsWith(Ik)?e.substring(0,e.length-1):e.startsWith(Ik)?e.substring(1):e,wW=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(a=>{a[0]==="["||t[a]?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s}},xW=e=>({cache:gW(e.cacheSize),parseClassName:bW(e),sortModifiers:wW(e),...fW(e)}),_W=/\s+/,SW=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,a=[],o=e.trim().split(_W);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let w=!!b,x=r(w?v.substring(0,b):v);if(!x){if(!w){l=d+(l.length>0?" "+l:l);continue}if(x=r(v),!x){l=d+(l.length>0?" "+l:l);continue}w=!1}const _=i(m).join(":"),E=g?_+Ik:_,k=E+x;if(a.includes(k))continue;a.push(k);const T=s(x,w);for(let R=0;R<T.length;++R){const M=T[R];a.push(E+M)}l=d+(l.length>0?" "+l:l)}return l};function EW(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=L8(t))&&(r&&(r+=" "),r+=n);return r}const L8=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=L8(e[r]))&&(n&&(n+=" "),n+=t);return n};function CW(e,...t){let n,r,s,i=a;function a(l){const c=t.reduce((d,h)=>h(d),e());return n=xW(c),r=n.cache.get,s=n.cache.set,i=o,o(l)}function o(l){const c=r(l);if(c)return c;const d=SW(l,n);return s(l,d),d}return function(){return i(EW.apply(null,arguments))}}const Os=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},$8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,B8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kW=/^\d+\/\d+$/,TW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AW=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,RW=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,NW=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IW=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hh=e=>kW.test(e),Jn=e=>!!e&&!Number.isNaN(Number(e)),Nu=e=>!!e&&Number.isInteger(Number(e)),D2=e=>e.endsWith("%")&&Jn(e.slice(0,-1)),fc=e=>TW.test(e),jW=()=>!0,MW=e=>AW.test(e)&&!RW.test(e),z8=()=>!1,DW=e=>NW.test(e),OW=e=>IW.test(e),PW=e=>!ln(e)&&!cn(e),FW=e=>Zp(e,V8,z8),ln=e=>$8.test(e),Zd=e=>Zp(e,H8,MW),O2=e=>Zp(e,UW,Jn),E4=e=>Zp(e,U8,z8),LW=e=>Zp(e,q8,OW),Pv=e=>Zp(e,G8,DW),cn=e=>B8.test(e),Pg=e=>Yp(e,H8),$W=e=>Yp(e,qW),C4=e=>Yp(e,U8),BW=e=>Yp(e,V8),zW=e=>Yp(e,q8),Fv=e=>Yp(e,G8,!0),Zp=(e,t,n)=>{const r=$8.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Yp=(e,t,n=!1)=>{const r=B8.exec(e);return r?r[1]?t(r[1]):n:!1},U8=e=>e==="position"||e==="percentage",q8=e=>e==="image"||e==="url",V8=e=>e==="length"||e==="size"||e==="bg-size",H8=e=>e==="length",UW=e=>e==="number",qW=e=>e==="family-name",G8=e=>e==="shadow",VW=()=>{const e=Os("color"),t=Os("font"),n=Os("text"),r=Os("font-weight"),s=Os("tracking"),i=Os("leading"),a=Os("breakpoint"),o=Os("container"),l=Os("spacing"),c=Os("radius"),d=Os("shadow"),h=Os("inset-shadow"),m=Os("text-shadow"),g=Os("drop-shadow"),v=Os("blur"),b=Os("perspective"),w=Os("aspect"),x=Os("ease"),_=Os("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...k(),cn,ln],R=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],I=()=>[cn,ln,l],O=()=>[Hh,"full","auto",...I()],P=()=>[Nu,"none","subgrid",cn,ln],U=()=>["auto",{span:["full",Nu,cn,ln]},Nu,cn,ln],j=()=>[Nu,"auto",cn,ln],V=()=>["auto","min","max","fr",cn,ln],$=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...I()],te=()=>[Hh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],X=()=>[e,cn,ln],ie=()=>[...k(),C4,E4,{position:[cn,ln]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ee=()=>["auto","cover","contain",BW,FW,{size:[cn,ln]}],Q=()=>[D2,Pg,Zd],he=()=>["","none","full",c,cn,ln],Se=()=>["",Jn,Pg,Zd],ce=()=>["solid","dashed","dotted","double"],je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],De=()=>[Jn,D2,C4,E4],Re=()=>["","none",v,cn,ln],xe=()=>["none",Jn,cn,ln],Fe=()=>["none",Jn,cn,ln],st=()=>[Jn,cn,ln],He=()=>[Hh,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fc],breakpoint:[fc],color:[jW],container:[fc],"drop-shadow":[fc],ease:["in","out","in-out"],font:[PW],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fc],shadow:[fc],spacing:["px",Jn],text:[fc],"text-shadow":[fc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Hh,ln,cn,w]}],container:["container"],columns:[{columns:[Jn,ln,cn,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Nu,"auto",cn,ln]}],basis:[{basis:[Hh,"full","auto",o,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Jn,Hh,"auto","initial","none",ln]}],grow:[{grow:["",Jn,cn,ln]}],shrink:[{shrink:["",Jn,cn,ln]}],order:[{order:[Nu,"first","last","none",cn,ln]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...$(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...$()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":$()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[o,"screen",...te()]}],"min-w":[{"min-w":[o,"screen","none",...te()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...te()]}],h:[{h:["screen",...te()]}],"min-h":[{"min-h":["screen","none",...te()]}],"max-h":[{"max-h":["screen",...te()]}],"font-size":[{text:["base",n,Pg,Zd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,cn,O2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",D2,ln]}],"font-family":[{font:[$W,ln,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,cn,ln]}],"line-clamp":[{"line-clamp":[Jn,"none",cn,O2]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",cn,ln]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",cn,ln]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Jn,"from-font","auto",cn,Zd]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Jn,"auto",cn,ln]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",cn,ln]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",cn,ln]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nu,cn,ln],radial:["",cn,ln],conic:[Nu,cn,ln]},zW,LW]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:Se()}],"border-w-x":[{"border-x":Se()}],"border-w-y":[{"border-y":Se()}],"border-w-s":[{"border-s":Se()}],"border-w-e":[{"border-e":Se()}],"border-w-t":[{"border-t":Se()}],"border-w-r":[{"border-r":Se()}],"border-w-b":[{"border-b":Se()}],"border-w-l":[{"border-l":Se()}],"divide-x":[{"divide-x":Se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Jn,cn,ln]}],"outline-w":[{outline:["",Jn,Pg,Zd]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,Fv,Pv]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,Fv,Pv]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:Se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Jn,Zd]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":Se()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",m,Fv,Pv]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Jn,cn,ln]}],"mix-blend":[{"mix-blend":[...je(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":je()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Jn]}],"mask-image-linear-from-pos":[{"mask-linear-from":De()}],"mask-image-linear-to-pos":[{"mask-linear-to":De()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":De()}],"mask-image-t-to-pos":[{"mask-t-to":De()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":De()}],"mask-image-r-to-pos":[{"mask-r-to":De()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":De()}],"mask-image-b-to-pos":[{"mask-b-to":De()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":De()}],"mask-image-l-to-pos":[{"mask-l-to":De()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":De()}],"mask-image-x-to-pos":[{"mask-x-to":De()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":De()}],"mask-image-y-to-pos":[{"mask-y-to":De()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[cn,ln]}],"mask-image-radial-from-pos":[{"mask-radial-from":De()}],"mask-image-radial-to-pos":[{"mask-radial-to":De()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[Jn]}],"mask-image-conic-from-pos":[{"mask-conic-from":De()}],"mask-image-conic-to-pos":[{"mask-conic-to":De()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",cn,ln]}],filter:[{filter:["","none",cn,ln]}],blur:[{blur:Re()}],brightness:[{brightness:[Jn,cn,ln]}],contrast:[{contrast:[Jn,cn,ln]}],"drop-shadow":[{"drop-shadow":["","none",g,Fv,Pv]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Jn,cn,ln]}],"hue-rotate":[{"hue-rotate":[Jn,cn,ln]}],invert:[{invert:["",Jn,cn,ln]}],saturate:[{saturate:[Jn,cn,ln]}],sepia:[{sepia:["",Jn,cn,ln]}],"backdrop-filter":[{"backdrop-filter":["","none",cn,ln]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Jn,cn,ln]}],"backdrop-contrast":[{"backdrop-contrast":[Jn,cn,ln]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Jn,cn,ln]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Jn,cn,ln]}],"backdrop-invert":[{"backdrop-invert":["",Jn,cn,ln]}],"backdrop-opacity":[{"backdrop-opacity":[Jn,cn,ln]}],"backdrop-saturate":[{"backdrop-saturate":[Jn,cn,ln]}],"backdrop-sepia":[{"backdrop-sepia":["",Jn,cn,ln]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",cn,ln]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Jn,"initial",cn,ln]}],ease:[{ease:["linear","initial",x,cn,ln]}],delay:[{delay:[Jn,cn,ln]}],animate:[{animate:["none",_,cn,ln]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,cn,ln]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:st()}],"skew-x":[{"skew-x":st()}],"skew-y":[{"skew-y":st()}],transform:[{transform:[cn,ln,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:He()}],"translate-x":[{"translate-x":He()}],"translate-y":[{"translate-y":He()}],"translate-z":[{"translate-z":He()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",cn,ln]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",cn,ln]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Jn,Pg,Zd,O2]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},HW=CW(VW);function mt(...e){return HW(P8(e))}const GW=bA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function At({className:e,variant:t,size:n,asChild:r=!1,...s}){const i=r?M8:"button";return p.jsx(i,{"data-slot":"button",className:mt(GW({variant:t,size:n,className:e})),...s})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WW=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),k4=e=>{const t=WW(e);return t.charAt(0).toUpperCase()+t.slice(1)},K8=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},l)=>C.createElement("svg",{ref:l,...ZW,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:K8("lucide",s),...o},[...a.map(([c,d])=>C.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=(e,t)=>{const n=C.forwardRef(({className:r,...s},i)=>C.createElement(YW,{ref:i,iconNode:t,className:K8(`lucide-${KW(k4(e))}`,`lucide-${e}`,r),...s}));return n.displayName=k4(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],JW=Gt("archive",XW);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],W8=Gt("arrow-down",QW);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],tZ=Gt("arrow-right",eZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],rZ=Gt("arrow-up",nZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],iZ=Gt("ban",sZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Z8=Gt("bot",aZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Al=Gt("brain-circuit",oZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ni=Gt("check",lZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Po=Gt("chevron-down",cZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Y8=Gt("chevron-right",uZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Nc=Gt("chevron-up",dZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],e1=Gt("chevrons-up-down",fZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],pZ=Gt("chevrons-up",hZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ic=Gt("circle-alert",mZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],t1=Gt("circle-check",gZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bZ=Gt("circle",yZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Ep=Gt("clipboard",vZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],xZ=Gt("clock",wZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Z=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],X8=Gt("cloud-upload",_Z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],J8=Gt("code",SZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],CZ=Gt("cog",EZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],TZ=Gt("coins",kZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],RZ=Gt("copy",AZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],IZ=Gt("dollar-sign",NZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],yf=Gt("download",jZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],DZ=Gt("ellipsis-vertical",MZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],PZ=Gt("file-archive",OZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],LZ=Gt("file-down",FZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Z=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],BZ=Gt("file-json",$Z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],UZ=Gt("file-question",zZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],VZ=Gt("file-text",qZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],GZ=Gt("file-up",HZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Q8=Gt("file",KZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],e5=Gt("folder-git",WZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],wA=Gt("folder-plus",ZZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],T4=Gt("folder-tree",YZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],JZ=Gt("folder-up",XZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],xf=Gt("folder",QZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],n1=Gt("funnel",eY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],qu=Gt("git-branch",tY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],t5=Gt("git-commit-horizontal",nY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],n5=Gt("git-merge",rY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],xA=Gt("git-pull-request",sY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],aY=Gt("grip-vertical",iY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],_A=Gt("hard-drive",oY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],cY=Gt("house",lY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],_f=Gt("image",uY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],SA=Gt("info",dY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],p0=Gt("key",fY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fn=Gt("loader-circle",hY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],mY=Gt("menu",pY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],yY=Gt("message-square-plus",gY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Mk=Gt("message-square",bY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],wY=Gt("music",vY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],_Y=Gt("palette",xY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],EY=Gt("panel-left-close",SY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],kY=Gt("panel-right-close",CY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],EA=Gt("paperclip",TY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ny=Gt("pen",AY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pf=Gt("plus",RY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],A4=Gt("puzzle",NY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],r1=Gt("refresh-cw",IY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],MY=Gt("rocket",jY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],CA=Gt("rotate-ccw",DY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ff=Gt("save",OY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Qs=Gt("search",PY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],LY=Gt("send-horizontal",FY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Mw=Gt("server",$Y);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dk=Gt("settings",BY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],R4=Gt("shield-alert",zY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],qY=Gt("sliders-horizontal",UY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],r5=Gt("sparkles",VY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],t0=Gt("square-pen",HY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],KY=Gt("square",GY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ZY=Gt("star",WY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],Ok=Gt("tags",YY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],JY=Gt("text",XY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],oa=Gt("trash-2",QY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kA=Gt("triangle-alert",eX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],nX=Gt("upload",tX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sX=Gt("user",rX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],N4=Gt("users",iX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],oX=Gt("video",aX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Sf=Gt("wrench",lX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qi=Gt("x",cX);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],dX=Gt("zap",uX),I4=({controls:e,area:t,className:n})=>{const r=e.filter(s=>t==="trigger"?!!s.triggerRenderer:!!s.renderer);return r.length===0?null:p.jsx("div",{className:mt(n),children:r.map(s=>{var a,o;const i=t==="trigger"?(a=s.triggerRenderer)==null?void 0:a.call(s):(o=s.renderer)==null?void 0:o.call(s);return i?p.jsx(yt.Fragment,{children:i},s.id):null})})},j4=e=>{let t;const n=new Set,r=(c,d)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},s=()=>t,o={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(r,s,o);return o},fX=e=>e?j4(e):j4,hX=e=>e;function pX(e,t=hX){const n=yt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return yt.useDebugValue(n),n}const M4=e=>{const t=fX(e),n=r=>pX(t,r);return Object.assign(n,t),n},lo=e=>e?M4(e):M4;var s5=Symbol.for("immer-nothing"),D4=Symbol.for("immer-draftable"),Er=Symbol.for("immer-state");function Qa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cp=Object.getPrototypeOf;function kp(e){return!!e&&!!e[Er]}function jc(e){var t;return e?i5(e)||Array.isArray(e)||!!e[D4]||!!((t=e.constructor)!=null&&t[D4])||i1(e)||a1(e):!1}var mX=Object.prototype.constructor.toString();function i5(e){if(!e||typeof e!="object")return!1;const t=Cp(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===mX}function m0(e,t){s1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function s1(e){const t=e[Er];return t?t.type_:Array.isArray(e)?1:i1(e)?2:a1(e)?3:0}function Pk(e,t){return s1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function a5(e,t,n){const r=s1(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function gX(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function i1(e){return e instanceof Map}function a1(e){return e instanceof Set}function Zs(e){return e.copy_||e.base_}function Fk(e,t){if(i1(e))return new Map(e);if(a1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=i5(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Er];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Cp(e),r)}else{const r=Cp(e);if(r!==null&&n)return{...e};const s=Object.create(r);return Object.assign(s,e)}}function TA(e,t=!1){return o1(e)||kp(e)||!jc(e)||(s1(e)>1&&(e.set=e.add=e.clear=e.delete=yX),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>TA(r,!0))),e}function yX(){Qa(2)}function o1(e){return Object.isFrozen(e)}var Lk={};function Ef(e){const t=Lk[e];return t||Qa(0,e),t}function bX(e,t){Lk[e]||(Lk[e]=t)}var g0;function Dw(){return g0}function vX(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function O4(e,t){t&&(Ef("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $k(e){Bk(e),e.drafts_.forEach(wX),e.drafts_=null}function Bk(e){e===g0&&(g0=e.parent_)}function P4(e){return g0=vX(g0,e)}function wX(e){const t=e[Er];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function F4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Er].modified_&&($k(t),Qa(4)),jc(e)&&(e=Ow(t,e),t.parent_||Pw(t,e)),t.patches_&&Ef("Patches").generateReplacementPatches_(n[Er].base_,e,t.patches_,t.inversePatches_)):e=Ow(t,n,[]),$k(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==s5?e:void 0}function Ow(e,t,n){if(o1(t))return t;const r=t[Er];if(!r)return m0(t,(s,i)=>L4(e,r,t,s,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Pw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,a=!1;r.type_===3&&(i=new Set(s),s.clear(),a=!0),m0(i,(o,l)=>L4(e,r,s,o,l,n,a)),Pw(e,s,!1),n&&e.patches_&&Ef("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function L4(e,t,n,r,s,i,a){if(kp(s)){const o=i&&t&&t.type_!==3&&!Pk(t.assigned_,r)?i.concat(r):void 0,l=Ow(e,s,o);if(a5(n,r,l),kp(l))e.canAutoFreeze_=!1;else return}else a&&n.add(s);if(jc(s)&&!o1(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ow(e,s),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Pw(e,s)}}function Pw(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&TA(t,n)}function xX(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Dw(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=AA;n&&(s=[r],i=y0);const{revoke:a,proxy:o}=Proxy.revocable(s,i);return r.draft_=o,r.revoke_=a,o}var AA={get(e,t){if(t===Er)return e;const n=Zs(e);if(!Pk(n,t))return _X(e,n,t);const r=n[t];return e.finalized_||!jc(r)?r:r===P2(e.base_,t)?(F2(e),e.copy_[t]=b0(r,e)):r},has(e,t){return t in Zs(e)},ownKeys(e){return Reflect.ownKeys(Zs(e))},set(e,t,n){const r=o5(Zs(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=P2(Zs(e),t),i=s==null?void 0:s[Er];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(gX(n,s)&&(n!==void 0||Pk(e.base_,t)))return!0;F2(e),mc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return P2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,F2(e),mc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Zs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Qa(11)},getPrototypeOf(e){return Cp(e.base_)},setPrototypeOf(){Qa(12)}},y0={};m0(AA,(e,t)=>{y0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});y0.deleteProperty=function(e,t){return y0.set.call(this,e,t,void 0)};y0.set=function(e,t,n){return AA.set.call(this,e[0],t,n,e[0])};function P2(e,t){const n=e[Er];return(n?Zs(n):e)[t]}function _X(e,t,n){var s;const r=o5(t,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(e.draft_):void 0}function o5(e,t){if(!(t in e))return;let n=Cp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Cp(n)}}function mc(e){e.modified_||(e.modified_=!0,e.parent_&&mc(e.parent_))}function F2(e){e.copy_||(e.copy_=Fk(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var SX=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const a=this;return function(l=i,...c){return a.produce(l,d=>n.call(this,d,...c))}}typeof n!="function"&&Qa(6),r!==void 0&&typeof r!="function"&&Qa(7);let s;if(jc(t)){const i=P4(this),a=b0(t,void 0);let o=!0;try{s=n(a),o=!1}finally{o?$k(i):Bk(i)}return O4(i,r),F4(s,i)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===s5&&(s=void 0),this.autoFreeze_&&TA(s,!0),r){const i=[],a=[];Ef("Patches").generateReplacementPatches_(t,s,i,a),r(i,a)}return s}else Qa(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...o)=>this.produceWithPatches(a,l=>t(l,...o));let r,s;return[this.produce(t,n,(a,o)=>{r=a,s=o}),r,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jc(e)||Qa(8),kp(e)&&(e=EX(e));const t=P4(this),n=b0(e,void 0);return n[Er].isManual_=!0,Bk(t),n}finishDraft(e,t){const n=e&&e[Er];(!n||!n.isManual_)&&Qa(9);const{scope_:r}=n;return O4(r,t),F4(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=Ef("Patches").applyPatches_;return kp(e)?r(e,t):this.produce(e,s=>r(s,t))}};function b0(e,t){const n=i1(e)?Ef("MapSet").proxyMap_(e,t):a1(e)?Ef("MapSet").proxySet_(e,t):xX(e,t);return(t?t.scope_:Dw()).drafts_.push(n),n}function EX(e){return kp(e)||Qa(10,e),l5(e)}function l5(e){if(!jc(e)||o1(e))return e;const t=e[Er];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Fk(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Fk(e,!0);return m0(n,(r,s)=>{a5(n,r,l5(s))}),t&&(t.finalized_=!1),n}function CX(){class e extends Map{constructor(l,c){super(),this[Er]={type_:2,parent_:c,scope_:c?c.scope_:Dw(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Zs(this[Er]).size}has(l){return Zs(this[Er]).has(l)}set(l,c){const d=this[Er];return a(d),(!Zs(d).has(l)||Zs(d).get(l)!==c)&&(n(d),mc(d),d.assigned_.set(l,!0),d.copy_.set(l,c),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const c=this[Er];return a(c),n(c),mc(c),c.base_.has(l)?c.assigned_.set(l,!1):c.assigned_.delete(l),c.copy_.delete(l),!0}clear(){const l=this[Er];a(l),Zs(l).size&&(n(l),mc(l),l.assigned_=new Map,m0(l.base_,c=>{l.assigned_.set(c,!1)}),l.copy_.clear())}forEach(l,c){const d=this[Er];Zs(d).forEach((h,m,g)=>{l.call(c,this.get(m),m,this)})}get(l){const c=this[Er];a(c);const d=Zs(c).get(l);if(c.finalized_||!jc(d)||d!==c.base_.get(l))return d;const h=b0(d,c);return n(c),c.copy_.set(l,h),h}keys(){return Zs(this[Er]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=l.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=l.next();if(c.done)return c;const d=this.get(c.value);return{done:!1,value:[c.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,c){super(),this[Er]={type_:3,parent_:c,scope_:c?c.scope_:Dw(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Zs(this[Er]).size}has(l){const c=this[Er];return a(c),c.copy_?!!(c.copy_.has(l)||c.drafts_.has(l)&&c.copy_.has(c.drafts_.get(l))):c.base_.has(l)}add(l){const c=this[Er];return a(c),this.has(l)||(i(c),mc(c),c.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const c=this[Er];return a(c),i(c),mc(c),c.copy_.delete(l)||(c.drafts_.has(l)?c.copy_.delete(c.drafts_.get(l)):!1)}clear(){const l=this[Er];a(l),Zs(l).size&&(i(l),mc(l),l.copy_.clear())}values(){const l=this[Er];return a(l),i(l),l.copy_.values()}entries(){const l=this[Er];return a(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,c){const d=this.values();let h=d.next();for(;!h.done;)l.call(c,h.value,h.value,this),h=d.next()}}function s(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(jc(l)){const c=b0(l,o);o.drafts_.set(l,c),o.copy_.add(c)}else o.copy_.add(l)}))}function a(o){o.revoked_&&Qa(3,JSON.stringify(Zs(o)))}bX("MapSet",{proxyMap_:t,proxySet_:s})}var Ia=new SX,kX=Ia.produce;Ia.produceWithPatches.bind(Ia);Ia.setAutoFreeze.bind(Ia);Ia.setUseStrictShallowCopy.bind(Ia);Ia.applyPatches.bind(Ia);Ia.createDraft.bind(Ia);Ia.finishDraft.bind(Ia);const TX=e=>(t,n,r)=>(r.setState=(s,i,...a)=>{const o=typeof s=="function"?kX(s):s;return t(o,i,...a)},e(r.setState,n,r)),co=TX;function AX(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(s){s(n)}),(r=e.get("*"))&&r.slice().map(function(s){s(t,n)})}}}const We=AX(),xr={promptControlsChanged:"control.registry.prompt.controls.changed",chatControlsChanged:"control.registry.chat.controls.changed",middlewareChanged:"control.registry.middleware.changed",toolsChanged:"control.registry.tools.changed",modalProvidersChanged:"control.registry.modal.providers.changed",registerPromptControlRequest:"control.registry.register.prompt.control.request",unregisterPromptControlRequest:"control.registry.unregister.prompt.control.request",registerChatControlRequest:"control.registry.register.chat.control.request",unregisterChatControlRequest:"control.registry.unregister.chat.control.request",registerMiddlewareRequest:"control.registry.register.middleware.request",unregisterMiddlewareRequest:"control.registry.unregister.middleware.request",registerToolRequest:"control.registry.register.tool.request",unregisterToolRequest:"control.registry.unregister.tool.request",registerModalProviderRequest:"control.registry.register.modal.provider.request",unregisterModalProviderRequest:"control.registry.unregister.modal.provider.request"},dd=lo(co((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},modalProviders:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),We.emit(xr.promptControlsChanged,{controls:t().promptControls}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)}),We.emit(xr.promptControlsChanged,{controls:t().promptControls})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),We.emit(xr.chatControlsChanged,{controls:t().chatControls}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)}),We.emit(xr.chatControlsChanged,{controls:t().chatControls})},registerMiddleware:(n,r,s,i=0)=>{const a={modId:r,callback:s,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(a),o.middlewareRegistry[n].sort((l,c)=>(l.order??0)-(c.order??0))}),We.emit(xr.middlewareChanged,{middleware:t().middlewareRegistry}),()=>t().unregisterMiddleware(n,r,s)},unregisterMiddleware:(n,r,s)=>{e(i=>{var a;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===s)),((a=i.middlewareRegistry[n])==null?void 0:a.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)}),We.emit(xr.middlewareChanged,{middleware:t().middlewareRegistry})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((s,i)=>(s.order??0)-(i.order??0)))},registerTool:(n,r,s,i)=>(e(a=>{a.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${a.tools[r].modId}". Overwriting with registration from mod "${n}".`),a.tools[r]={definition:s,implementation:i,modId:n}}),We.emit(xr.toolsChanged,{tools:t().tools}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)}),We.emit(xr.toolsChanged,{tools:t().tools})},getRegisteredTools:()=>Object.freeze({...t().tools}),registerModalProvider:(n,r)=>(e(s=>{s.modalProviders[n]&&console.warn(`ControlRegistryStore: ModalProvider with ID "${n}" already registered. Overwriting.`),s.modalProviders[n]=r}),We.emit(xr.modalProvidersChanged,{providers:t().modalProviders}),()=>t().unregisterModalProvider(n)),unregisterModalProvider:n=>{e(r=>{r.modalProviders[n]?delete r.modalProviders[n]:console.warn(`ControlRegistryStore: ModalProvider with ID "${n}" not found for unregistration.`)}),We.emit(xr.modalProvidersChanged,{providers:t().modalProviders})},getRegisteredActionHandlers:()=>{const n="controlRegistryStore",r=t();return[{eventName:xr.registerPromptControlRequest,handler:s=>{r.registerPromptControl(s.control)},storeId:n},{eventName:xr.unregisterPromptControlRequest,handler:s=>{r.unregisterPromptControl(s.id)},storeId:n},{eventName:xr.registerChatControlRequest,handler:s=>{r.registerChatControl(s.control)},storeId:n},{eventName:xr.unregisterChatControlRequest,handler:s=>{r.unregisterChatControl(s.id)},storeId:n},{eventName:xr.registerMiddlewareRequest,handler:s=>{r.registerMiddleware(s.hookName,s.modId,s.callback,s.order)},storeId:n},{eventName:xr.unregisterMiddlewareRequest,handler:s=>{r.unregisterMiddleware(s.hookName,s.modId,s.callback)},storeId:n},{eventName:xr.registerToolRequest,handler:s=>{r.registerTool(s.modId,s.toolName,s.definition,s.implementation)},storeId:n},{eventName:xr.unregisterToolRequest,handler:s=>{r.unregisterTool(s.toolName)},storeId:n},{eventName:xr.registerModalProviderRequest,handler:s=>{r.registerModalProvider(s.modalId,s.provider)},storeId:n},{eventName:xr.unregisterModalProviderRequest,handler:s=>{r.unregisterModalProvider(s.modalId)},storeId:n}]}})));var vw={exports:{}},RX=vw.exports,$4;function NX(){return $4||($4=1,function(e,t){(function(n,r){e.exports=r()})(RX,function(){var n=function(A,F){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,se){Y.__proto__=se}||function(Y,se){for(var fe in se)Object.prototype.hasOwnProperty.call(se,fe)&&(Y[fe]=se[fe])})(A,F)},r=function(){return(r=Object.assign||function(A){for(var F,Y=1,se=arguments.length;Y<se;Y++)for(var fe in F=arguments[Y])Object.prototype.hasOwnProperty.call(F,fe)&&(A[fe]=F[fe]);return A}).apply(this,arguments)};function s(A,F,Y){for(var se,fe=0,_e=F.length;fe<_e;fe++)!se&&fe in F||((se=se||Array.prototype.slice.call(F,0,fe))[fe]=F[fe]);return A.concat(se||Array.prototype.slice.call(F))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:uf,a=Object.keys,o=Array.isArray;function l(A,F){return typeof F!="object"||a(F).forEach(function(Y){A[Y]=F[Y]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,F){return d.call(A,F)}function m(A,F){typeof F=="function"&&(F=F(c(A))),(typeof Reflect>"u"?a:Reflect.ownKeys)(F).forEach(function(Y){v(A,Y,F[Y])})}var g=Object.defineProperty;function v(A,F,Y,se){g(A,F,l(Y&&h(Y,"get")&&typeof Y.get=="function"?{get:Y.get,set:Y.set,configurable:!0}:{value:Y,configurable:!0,writable:!0},se))}function b(A){return{from:function(F){return A.prototype=Object.create(F.prototype),v(A.prototype,"constructor",A),{extend:m.bind(null,A.prototype)}}}}var w=Object.getOwnPropertyDescriptor,x=[].slice;function _(A,F,Y){return x.call(A,F,Y)}function E(A,F){return F(A)}function k(A){if(!A)throw new Error("Assertion Failed")}function T(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function R(A,F){if(typeof F=="string"&&h(A,F))return A[F];if(!F)return A;if(typeof F!="string"){for(var Y=[],se=0,fe=F.length;se<fe;++se){var _e=R(A,F[se]);Y.push(_e)}return Y}var Pe=F.indexOf(".");if(Pe!==-1){var $e=A[F.substr(0,Pe)];return $e==null?void 0:R($e,F.substr(Pe+1))}}function M(A,F,Y){if(A&&F!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof F!="string"&&"length"in F){k(typeof Y!="string"&&"length"in Y);for(var se=0,fe=F.length;se<fe;++se)M(A,F[se],Y[se])}else{var _e,Pe,$e=F.indexOf(".");$e!==-1?(_e=F.substr(0,$e),(Pe=F.substr($e+1))===""?Y===void 0?o(A)&&!isNaN(parseInt(_e))?A.splice(_e,1):delete A[_e]:A[_e]=Y:M($e=!($e=A[_e])||!h(A,_e)?A[_e]={}:$e,Pe,Y)):Y===void 0?o(A)&&!isNaN(parseInt(F))?A.splice(F,1):delete A[F]:A[F]=Y}}function I(A){var F,Y={};for(F in A)h(A,F)&&(Y[F]=A[F]);return Y}var O=[].concat;function P(A){return O.apply([],A)}var It="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(P([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(F){return F+A+"Array"})}))).filter(function(A){return i[A]}),U=new Set(It.map(function(A){return i[A]})),j=null;function V(A){return j=new WeakMap,A=function F(Y){if(!Y||typeof Y!="object")return Y;var se=j.get(Y);if(se)return se;if(o(Y)){se=[],j.set(Y,se);for(var fe=0,_e=Y.length;fe<_e;++fe)se.push(F(Y[fe]))}else if(U.has(Y.constructor))se=Y;else{var Pe,$e=c(Y);for(Pe in se=$e===Object.prototype?{}:Object.create($e),j.set(Y,se),Y)h(Y,Pe)&&(se[Pe]=F(Y[Pe]))}return se}(A),j=null,A}var $={}.toString;function re(A){return $.call(A).slice(8,-1)}var J=typeof Symbol<"u"?Symbol.iterator:"@@iterator",te=typeof J=="symbol"?function(A){var F;return A!=null&&(F=A[J])&&F.apply(A)}:function(){return null};function X(A,F){return F=A.indexOf(F),0<=F&&A.splice(F,1),0<=F}var ie={};function Z(A){var F,Y,se,fe;if(arguments.length===1){if(o(A))return A.slice();if(this===ie&&typeof A=="string")return[A];if(fe=te(A)){for(Y=[];!(se=fe.next()).done;)Y.push(se.value);return Y}if(A==null)return[A];if(typeof(F=A.length)!="number")return[A];for(Y=new Array(F);F--;)Y[F]=A[F];return Y}for(F=arguments.length,Y=new Array(F);F--;)Y[F]=arguments[F];return Y}var ee=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},dt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(dt),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function he(A,F){this.name=A,this.message=F}function Se(A,F){return A+". Errors: "+Object.keys(F).map(function(Y){return F[Y].toString()}).filter(function(Y,se,fe){return fe.indexOf(Y)===se}).join(`
`)}function ce(A,F,Y,se){this.failures=F,this.failedKeys=se,this.successCount=Y,this.message=Se(A,F)}function je(A,F){this.name="BulkError",this.failures=Object.keys(F).map(function(Y){return F[Y]}),this.failuresByPos=F,this.message=Se(A,this.failures)}b(he).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ce).from(he),b(je).from(he);var De=Pi.reduce(function(A,F){return A[F]=F+"Error",A},{}),Re=he,xe=Pi.reduce(function(A,F){var Y=F+"Error";function se(fe,_e){this.name=Y,fe?typeof fe=="string"?(this.message="".concat(fe).concat(_e?`
 `+_e:""),this.inner=_e||null):typeof fe=="object"&&(this.message="".concat(fe.name," ").concat(fe.message),this.inner=fe):(this.message=Q[F]||Y,this.inner=null)}return b(se).from(Re),A[F]=se,A},{});xe.Syntax=SyntaxError,xe.Type=TypeError,xe.Range=RangeError;var Fe=dt.reduce(function(A,F){return A[F+"Error"]=xe[F],A},{}),st=Pi.reduce(function(A,F){return["Syntax","Type","Range"].indexOf(F)===-1&&(A[F+"Error"]=xe[F]),A},{});function He(){}function Ne(A){return A}function H(A,F){return A==null||A===Ne?F:function(Y){return F(A(Y))}}function ue(A,F){return function(){A.apply(this,arguments),F.apply(this,arguments)}}function ke(A,F){return A===He?F:function(){var Y=A.apply(this,arguments);Y!==void 0&&(arguments[0]=Y);var se=this.onsuccess,fe=this.onerror;this.onsuccess=null,this.onerror=null;var _e=F.apply(this,arguments);return se&&(this.onsuccess=this.onsuccess?ue(se,this.onsuccess):se),fe&&(this.onerror=this.onerror?ue(fe,this.onerror):fe),_e!==void 0?_e:Y}}function ae(A,F){return A===He?F:function(){A.apply(this,arguments);var Y=this.onsuccess,se=this.onerror;this.onsuccess=this.onerror=null,F.apply(this,arguments),Y&&(this.onsuccess=this.onsuccess?ue(Y,this.onsuccess):Y),se&&(this.onerror=this.onerror?ue(se,this.onerror):se)}}function oe(A,F){return A===He?F:function(Y){var se=A.apply(this,arguments);l(Y,se);var fe=this.onsuccess,_e=this.onerror;return this.onsuccess=null,this.onerror=null,Y=F.apply(this,arguments),fe&&(this.onsuccess=this.onsuccess?ue(fe,this.onsuccess):fe),_e&&(this.onerror=this.onerror?ue(_e,this.onerror):_e),se===void 0?Y===void 0?void 0:Y:l(se,Y)}}function ne(A,F){return A===He?F:function(){return F.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function Ee(A,F){return A===He?F:function(){var Y=A.apply(this,arguments);if(Y&&typeof Y.then=="function"){for(var se=this,fe=arguments.length,_e=new Array(fe);fe--;)_e[fe]=arguments[fe];return Y.then(function(){return F.apply(se,_e)})}return F.apply(this,arguments)}}st.ModifyError=ce,st.DexieError=he,st.BulkError=je;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Te(A){Le=A}var Xe={},St=100,It=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,c(A),A];var F=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[F,c(F),A]}(),dt=It[0],Pi=It[1],It=It[2],Pi=Pi&&Pi.then,Vt=dt&&dt.constructor,Dt=!!It,Kt=function(A,F){de.push([A,F]),D&&(queueMicrotask(me),D=!1)},be=!0,D=!0,K=[],pe=[],Oe=Ne,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:He,pgp:!1,env:{},finalize:He},Ae=ve,de=[],ht=0,wt=[];function L(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var F=this._PSD=Ae;if(typeof A!="function"){if(A!==Xe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ye(this,this._value))}this._state=null,this._value=null,++F.ref,function Y(se,fe){try{fe(function(_e){if(se._state===null){if(_e===se)throw new TypeError("A promise cannot be resolved with itself.");var Pe=se._lib&&G();_e&&typeof _e.then=="function"?Y(se,function($e,Ye){_e instanceof L?_e._then($e,Ye):_e.then($e,Ye)}):(se._state=!0,se._value=_e,we(se)),Pe&&q()}},ye.bind(null,se))}catch(_e){ye(se,_e)}}(this,A)}var Be={get:function(){var A=Ae,F=Ht;function Y(se,fe){var _e=this,Pe=!A.global&&(A!==Ae||F!==Ht),$e=Pe&&!tr(),Ye=new L(function(Qe,it){Ue(_e,new rt(Zo(se,A,Pe,$e),Zo(fe,A,Pe,$e),Qe,it,A))});return this._consoleTask&&(Ye._consoleTask=this._consoleTask),Ye}return Y.prototype=Xe,Y},set:function(A){v(this,"then",A&&A.prototype===Xe?Be:{get:function(){return A},set:Be.set})}};function rt(A,F,Y,se,fe){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof F=="function"?F:null,this.resolve=Y,this.reject=se,this.psd=fe}function ye(A,F){var Y,se;pe.push(F),A._state===null&&(Y=A._lib&&G(),F=Oe(F),A._state=!1,A._value=F,se=A,K.some(function(fe){return fe._value===se._value})||K.push(se),we(A),Y&&q())}function we(A){var F=A._listeners;A._listeners=[];for(var Y=0,se=F.length;Y<se;++Y)Ue(A,F[Y]);var fe=A._PSD;--fe.ref||fe.finalize(),ht===0&&(++ht,Kt(function(){--ht==0&&W()},[]))}function Ue(A,F){if(A._state!==null){var Y=A._state?F.onFulfilled:F.onRejected;if(Y===null)return(A._state?F.resolve:F.reject)(A._value);++F.psd.ref,++ht,Kt(Et,[Y,A,F])}else A._listeners.push(F)}function Et(A,F,Y){try{var se,fe=F._value;!F._state&&pe.length&&(pe=[]),se=Le&&F._consoleTask?F._consoleTask.run(function(){return A(fe)}):A(fe),F._state||pe.indexOf(fe)!==-1||function(_e){for(var Pe=K.length;Pe;)if(K[--Pe]._value===_e._value)return K.splice(Pe,1)}(F),Y.resolve(se)}catch(_e){Y.reject(_e)}finally{--ht==0&&W(),--Y.psd.ref||Y.psd.finalize()}}function me(){Wo(ve,function(){G()&&q()})}function G(){var A=be;return D=be=!1,A}function q(){var A,F,Y;do for(;0<de.length;)for(A=de,de=[],Y=A.length,F=0;F<Y;++F){var se=A[F];se[0].apply(null,se[1])}while(0<de.length);D=be=!0}function W(){var A=K;K=[],A.forEach(function(se){se._PSD.onunhandled.call(null,se._value,se)});for(var F=wt.slice(0),Y=F.length;Y;)F[--Y]()}function ge(A){return new L(Xe,!1,A)}function Ie(A,F){var Y=Ae;return function(){var se=G(),fe=Ae;try{return Vn(Y,!0),A.apply(this,arguments)}catch(_e){F&&F(_e)}finally{Vn(fe,!1),se&&q()}}}m(L.prototype,{then:Be,_then:function(A,F){Ue(this,new rt(null,null,A,F,Ae))},catch:function(A){if(arguments.length===1)return this.then(null,A);var F=A,Y=arguments[1];return typeof F=="function"?this.then(null,function(se){return(se instanceof F?Y:ge)(se)}):this.then(null,function(se){return(se&&se.name===F?Y:ge)(se)})},finally:function(A){return this.then(function(F){return L.resolve(A()).then(function(){return F})},function(F){return L.resolve(A()).then(function(){return ge(F)})})},timeout:function(A,F){var Y=this;return A<1/0?new L(function(se,fe){var _e=setTimeout(function(){return fe(new xe.Timeout(F))},A);Y.then(se,fe).finally(clearTimeout.bind(null,_e))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(L.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=Mi(),m(L,{all:function(){var A=Z.apply(null,arguments).map(jr);return new L(function(F,Y){A.length===0&&F([]);var se=A.length;A.forEach(function(fe,_e){return L.resolve(fe).then(function(Pe){A[_e]=Pe,--se||F(A)},Y)})})},resolve:function(A){return A instanceof L?A:A&&typeof A.then=="function"?new L(function(F,Y){A.then(F,Y)}):new L(Xe,!0,A)},reject:ge,race:function(){var A=Z.apply(null,arguments).map(jr);return new L(function(F,Y){A.map(function(se){return L.resolve(se).then(F,Y)})})},PSD:{get:function(){return Ae},set:function(A){return Ae=A}},totalEchoes:{get:function(){return Ht}},newPSD:an,usePSD:Wo,scheduler:{get:function(){return Kt},set:function(A){Kt=A}},rejectionMapper:{get:function(){return Oe},set:function(A){Oe=A}},follow:function(A,F){return new L(function(Y,se){return an(function(fe,_e){var Pe=Ae;Pe.unhandleds=[],Pe.onunhandled=_e,Pe.finalize=ue(function(){var $e,Ye=this;$e=function(){Ye.unhandleds.length===0?fe():_e(Ye.unhandleds[0])},wt.push(function Qe(){$e(),wt.splice(wt.indexOf(Qe),1)}),++ht,Kt(function(){--ht==0&&W()},[])},Pe.finalize),A()},F,Y,se)})}}),Vt&&(Vt.allSettled&&v(L,"allSettled",function(){var A=Z.apply(null,arguments).map(jr);return new L(function(F){A.length===0&&F([]);var Y=A.length,se=new Array(Y);A.forEach(function(fe,_e){return L.resolve(fe).then(function(Pe){return se[_e]={status:"fulfilled",value:Pe}},function(Pe){return se[_e]={status:"rejected",reason:Pe}}).then(function(){return--Y||F(se)})})})}),Vt.any&&typeof AggregateError<"u"&&v(L,"any",function(){var A=Z.apply(null,arguments).map(jr);return new L(function(F,Y){A.length===0&&Y(new AggregateError([]));var se=A.length,fe=new Array(se);A.forEach(function(_e,Pe){return L.resolve(_e).then(function($e){return F($e)},function($e){fe[Pe]=$e,--se||Y(new AggregateError(fe))})})})}),Vt.withResolvers&&(L.withResolvers=Vt.withResolvers));var Ge={awaits:0,echoes:0,id:0},bt=0,Wt=[],yn=0,Ht=0,Xt=0;function an(A,F,Y,se){var fe=Ae,_e=Object.create(fe);return _e.parent=fe,_e.ref=0,_e.global=!1,_e.id=++Xt,ve.env,_e.env=Dt?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject}:{},F&&l(_e,F),++fe.ref,_e.finalize=function(){--this.parent.ref||this.parent.finalize()},se=Wo(_e,A,Y,se),_e.ref===0&&_e.finalize(),se}function $n(){return Ge.id||(Ge.id=++bt),++Ge.awaits,Ge.echoes+=St,Ge.id}function tr(){return!!Ge.awaits&&(--Ge.awaits==0&&(Ge.id=0),Ge.echoes=Ge.awaits*St,!0)}function jr(A){return Ge.echoes&&A&&A.constructor===Vt?($n(),A.then(function(F){return tr(),F},function(F){return tr(),rs(F)})):A}function Mr(){var A=Wt[Wt.length-1];Wt.pop(),Vn(A,!1)}function Vn(A,F){var Y,se=Ae;(F?!Ge.echoes||yn++&&A===Ae:!yn||--yn&&A===Ae)||queueMicrotask(F?(function(fe){++Ht,Ge.echoes&&--Ge.echoes!=0||(Ge.echoes=Ge.awaits=Ge.id=0),Wt.push(Ae),Vn(fe,!0)}).bind(null,A):Mr),A!==Ae&&(Ae=A,se===ve&&(ve.env=Mi()),Dt&&(Y=ve.env.Promise,F=A.env,(se.global||A.global)&&(Object.defineProperty(i,"Promise",F.PromiseProp),Y.all=F.all,Y.race=F.race,Y.resolve=F.resolve,Y.reject=F.reject,F.allSettled&&(Y.allSettled=F.allSettled),F.any&&(Y.any=F.any))))}function Mi(){var A=i.Promise;return Dt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function Wo(A,F,Y,se,fe){var _e=Ae;try{return Vn(A,!0),F(Y,se,fe)}finally{Vn(_e,!1)}}function Zo(A,F,Y,se){return typeof A!="function"?A:function(){var fe=Ae;Y&&$n(),Vn(F,!0);try{return A.apply(this,arguments)}finally{Vn(fe,!1),se&&queueMicrotask(tr)}}}function Yo(A){Promise===Vt&&Ge.echoes===0?yn===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+Pi).indexOf("[native code]")===-1&&($n=tr=He);var rs=L.reject,Xo="",Ma="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kb="String expected.",mo=[],zl="__dbnames",ma="readonly",Ad="readwrite";function Jo(A,F){return A?F?function(){return A.apply(this,arguments)&&F.apply(this,arguments)}:A:F}var Ul={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wc(A){return typeof A!="string"||/\./.test(A)?function(F){return F}:function(F){return F[A]===void 0&&A in F&&delete(F=V(F))[A],F}}function nh(){throw xe.Type()}function nr(A,F){try{var Y=Im(A),se=Im(F);if(Y!==se)return Y==="Array"?1:se==="Array"?-1:Y==="binary"?1:se==="binary"?-1:Y==="string"?1:se==="string"?-1:Y==="Date"?1:se!=="Date"?NaN:-1;switch(Y){case"number":case"Date":case"string":return F<A?1:A<F?-1:0;case"binary":return function(fe,_e){for(var Pe=fe.length,$e=_e.length,Ye=Pe<$e?Pe:$e,Qe=0;Qe<Ye;++Qe)if(fe[Qe]!==_e[Qe])return fe[Qe]<_e[Qe]?-1:1;return Pe===$e?0:Pe<$e?-1:1}(Di(A),Di(F));case"Array":return function(fe,_e){for(var Pe=fe.length,$e=_e.length,Ye=Pe<$e?Pe:$e,Qe=0;Qe<Ye;++Qe){var it=nr(fe[Qe],_e[Qe]);if(it!==0)return it}return Pe===$e?0:Pe<$e?-1:1}(A,F)}}catch{}return NaN}function Im(A){var F=typeof A;return F!="object"?F:ArrayBuffer.isView(A)?"binary":(A=re(A),A==="ArrayBuffer"?"binary":A)}function Di(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var jm=(Br.prototype._trans=function(A,F,Y){var se=this._tx||Ae.trans,fe=this.name,_e=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function Pe(Qe,it,Ke){if(!Ke.schema[fe])throw new xe.NotFound("Table "+fe+" not part of transaction");return F(Ke.idbtrans,Ke)}var $e=G();try{var Ye=se&&se.db._novip===this.db._novip?se===Ae.trans?se._promise(A,Pe,Y):an(function(){return se._promise(A,Pe,Y)},{trans:se,transless:Ae.transless||Ae}):function Qe(it,Ke,ot,Ze){if(it.idbdb&&(it._state.openComplete||Ae.letThrough||it._vip)){var nt=it._createTransaction(Ke,ot,it._dbSchema);try{nt.create(),it._state.PR1398_maxLoop=3}catch(lt){return lt.name===De.InvalidState&&it.isOpen()&&0<--it._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),it.close({disableAutoOpen:!1}),it.open().then(function(){return Qe(it,Ke,ot,Ze)})):rs(lt)}return nt._promise(Ke,function(lt,et){return an(function(){return Ae.trans=nt,Ze(lt,et,nt)})}).then(function(lt){if(Ke==="readwrite")try{nt.idbtrans.commit()}catch{}return Ke==="readonly"?lt:nt._completion.then(function(){return lt})})}if(it._state.openComplete)return rs(new xe.DatabaseClosed(it._state.dbOpenError));if(!it._state.isBeingOpened){if(!it._state.autoOpen)return rs(new xe.DatabaseClosed);it.open().catch(He)}return it._state.dbReadyPromise.then(function(){return Qe(it,Ke,ot,Ze)})}(this.db,A,[this.name],Pe);return _e&&(Ye._consoleTask=_e,Ye=Ye.catch(function(Qe){return console.trace(Qe),rs(Qe)})),Ye}finally{$e&&q()}},Br.prototype.get=function(A,F){var Y=this;return A&&A.constructor===Object?this.where(A).first(F):A==null?rs(new xe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(se){return Y.core.get({trans:se,key:A}).then(function(fe){return Y.hook.reading.fire(fe)})}).then(F)},Br.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var F=a(A);if(F.length===1)return this.where(F[0]).equals(A[F[0]]);var Y=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&F.every(function(Qe){return 0<=$e.keyPath.indexOf(Qe)})){for(var Ye=0;Ye<F.length;++Ye)if(F.indexOf($e.keyPath[Ye])===-1)return!1;return!0}return!1}).sort(function($e,Ye){return $e.keyPath.length-Ye.keyPath.length})[0];if(Y&&this.db._maxKey!==Xo){var _e=Y.keyPath.slice(0,F.length);return this.where(_e).equals(_e.map(function(Ye){return A[Ye]}))}!Y&&Le&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(F.join("+"),"]"));var se=this.schema.idxByName;function fe($e,Ye){return nr($e,Ye)===0}var Pe=F.reduce(function(Ke,Ye){var Qe=Ke[0],it=Ke[1],Ke=se[Ye],ot=A[Ye];return[Qe||Ke,Qe||!Ke?Jo(it,Ke&&Ke.multi?function(Ze){return Ze=R(Ze,Ye),o(Ze)&&Ze.some(function(nt){return fe(ot,nt)})}:function(Ze){return fe(ot,R(Ze,Ye))}):it]},[null,null]),_e=Pe[0],Pe=Pe[1];return _e?this.where(_e.name).equals(A[_e.keyPath]).filter(Pe):Y?this.filter(Pe):this.where(F).equals("")},Br.prototype.filter=function(A){return this.toCollection().and(A)},Br.prototype.count=function(A){return this.toCollection().count(A)},Br.prototype.offset=function(A){return this.toCollection().offset(A)},Br.prototype.limit=function(A){return this.toCollection().limit(A)},Br.prototype.each=function(A){return this.toCollection().each(A)},Br.prototype.toArray=function(A){return this.toCollection().toArray(A)},Br.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Br.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},Br.prototype.reverse=function(){return this.toCollection().reverse()},Br.prototype.mapToClass=function(A){var F,Y=this.db,se=this.name;function fe(){return F!==null&&F.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof nh&&(function(Ye,Qe){if(typeof Qe!="function"&&Qe!==null)throw new TypeError("Class extends value "+String(Qe)+" is not a constructor or null");function it(){this.constructor=Ye}n(Ye,Qe),Ye.prototype=Qe===null?Object.create(Qe):(it.prototype=Qe.prototype,new it)}(fe,F=A),Object.defineProperty(fe.prototype,"db",{get:function(){return Y},enumerable:!1,configurable:!0}),fe.prototype.table=function(){return se},A=fe);for(var _e=new Set,Pe=A.prototype;Pe;Pe=c(Pe))Object.getOwnPropertyNames(Pe).forEach(function(Ye){return _e.add(Ye)});function $e(Ye){if(!Ye)return Ye;var Qe,it=Object.create(A.prototype);for(Qe in Ye)if(!_e.has(Qe))try{it[Qe]=Ye[Qe]}catch{}return it}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},Br.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},Br.prototype.add=function(A,F){var Y=this,se=this.schema.primKey,fe=se.auto,_e=se.keyPath,Pe=A;return _e&&fe&&(Pe=Wc(_e)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"add",keys:F!=null?[F]:null,values:[Pe]})}).then(function($e){return $e.numFailures?L.reject($e.failures[0]):$e.lastResult}).then(function($e){if(_e)try{M(A,_e,$e)}catch{}return $e})},Br.prototype.update=function(A,F){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(F):(A=R(A,this.schema.primKey.keyPath),A===void 0?rs(new xe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(F))},Br.prototype.put=function(A,F){var Y=this,se=this.schema.primKey,fe=se.auto,_e=se.keyPath,Pe=A;return _e&&fe&&(Pe=Wc(_e)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"put",values:[Pe],keys:F!=null?[F]:null})}).then(function($e){return $e.numFailures?L.reject($e.failures[0]):$e.lastResult}).then(function($e){if(_e)try{M(A,_e,$e)}catch{}return $e})},Br.prototype.delete=function(A){var F=this;return this._trans("readwrite",function(Y){return F.core.mutate({trans:Y,type:"delete",keys:[A]})}).then(function(Y){return Y.numFailures?L.reject(Y.failures[0]):void 0})},Br.prototype.clear=function(){var A=this;return this._trans("readwrite",function(F){return A.core.mutate({trans:F,type:"deleteRange",range:Ul})}).then(function(F){return F.numFailures?L.reject(F.failures[0]):void 0})},Br.prototype.bulkGet=function(A){var F=this;return this._trans("readonly",function(Y){return F.core.getMany({keys:A,trans:Y}).then(function(se){return se.map(function(fe){return F.hook.reading.fire(fe)})})})},Br.prototype.bulkAdd=function(A,F,Y){var se=this,fe=Array.isArray(F)?F:void 0,_e=(Y=Y||(fe?void 0:F))?Y.allKeys:void 0;return this._trans("readwrite",function(Pe){var Qe=se.schema.primKey,$e=Qe.auto,Qe=Qe.keyPath;if(Qe&&fe)throw new xe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(fe&&fe.length!==A.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var Ye=A.length,Qe=Qe&&$e?A.map(Wc(Qe)):A;return se.core.mutate({trans:Pe,type:"add",keys:fe,values:Qe,wantResults:_e}).then(function(nt){var Ke=nt.numFailures,ot=nt.results,Ze=nt.lastResult,nt=nt.failures;if(Ke===0)return _e?ot:Ze;throw new je("".concat(se.name,".bulkAdd(): ").concat(Ke," of ").concat(Ye," operations failed"),nt)})})},Br.prototype.bulkPut=function(A,F,Y){var se=this,fe=Array.isArray(F)?F:void 0,_e=(Y=Y||(fe?void 0:F))?Y.allKeys:void 0;return this._trans("readwrite",function(Pe){var Qe=se.schema.primKey,$e=Qe.auto,Qe=Qe.keyPath;if(Qe&&fe)throw new xe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(fe&&fe.length!==A.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var Ye=A.length,Qe=Qe&&$e?A.map(Wc(Qe)):A;return se.core.mutate({trans:Pe,type:"put",keys:fe,values:Qe,wantResults:_e}).then(function(nt){var Ke=nt.numFailures,ot=nt.results,Ze=nt.lastResult,nt=nt.failures;if(Ke===0)return _e?ot:Ze;throw new je("".concat(se.name,".bulkPut(): ").concat(Ke," of ").concat(Ye," operations failed"),nt)})})},Br.prototype.bulkUpdate=function(A){var F=this,Y=this.core,se=A.map(function(Pe){return Pe.key}),fe=A.map(function(Pe){return Pe.changes}),_e=[];return this._trans("readwrite",function(Pe){return Y.getMany({trans:Pe,keys:se,cache:"clone"}).then(function($e){var Ye=[],Qe=[];A.forEach(function(Ke,ot){var Ze=Ke.key,nt=Ke.changes,lt=$e[ot];if(lt){for(var et=0,pt=Object.keys(nt);et<pt.length;et++){var xt=pt[et],_t=nt[xt];if(xt===F.schema.primKey.keyPath){if(nr(_t,Ze)!==0)throw new xe.Constraint("Cannot update primary key in bulkUpdate()")}else M(lt,xt,_t)}_e.push(ot),Ye.push(Ze),Qe.push(lt)}});var it=Ye.length;return Y.mutate({trans:Pe,type:"put",keys:Ye,values:Qe,updates:{keys:se,changeSpecs:fe}}).then(function(Ke){var ot=Ke.numFailures,Ze=Ke.failures;if(ot===0)return it;for(var nt=0,lt=Object.keys(Ze);nt<lt.length;nt++){var et,pt=lt[nt],xt=_e[Number(pt)];xt!=null&&(et=Ze[pt],delete Ze[pt],Ze[xt]=et)}throw new je("".concat(F.name,".bulkUpdate(): ").concat(ot," of ").concat(it," operations failed"),Ze)})})})},Br.prototype.bulkDelete=function(A){var F=this,Y=A.length;return this._trans("readwrite",function(se){return F.core.mutate({trans:se,type:"delete",keys:A})}).then(function(Pe){var fe=Pe.numFailures,_e=Pe.lastResult,Pe=Pe.failures;if(fe===0)return _e;throw new je("".concat(F.name,".bulkDelete(): ").concat(fe," of ").concat(Y," operations failed"),Pe)})},Br);function Br(){}function Qo(A){function F(Pe,$e){if($e){for(var Ye=arguments.length,Qe=new Array(Ye-1);--Ye;)Qe[Ye-1]=arguments[Ye];return Y[Pe].subscribe.apply(null,Qe),A}if(typeof Pe=="string")return Y[Pe]}var Y={};F.addEventType=_e;for(var se=1,fe=arguments.length;se<fe;++se)_e(arguments[se]);return F;function _e(Pe,$e,Ye){if(typeof Pe!="object"){var Qe;$e=$e||ne;var it={subscribers:[],fire:Ye=Ye||He,subscribe:function(Ke){it.subscribers.indexOf(Ke)===-1&&(it.subscribers.push(Ke),it.fire=$e(it.fire,Ke))},unsubscribe:function(Ke){it.subscribers=it.subscribers.filter(function(ot){return ot!==Ke}),it.fire=it.subscribers.reduce($e,Ye)}};return Y[Pe]=F[Pe]=it}a(Qe=Pe).forEach(function(Ke){var ot=Qe[Ke];if(o(ot))_e(Ke,Qe[Ke][0],Qe[Ke][1]);else{if(ot!=="asap")throw new xe.InvalidArgument("Invalid event config");var Ze=_e(Ke,Ne,function(){for(var nt=arguments.length,lt=new Array(nt);nt--;)lt[nt]=arguments[nt];Ze.subscribers.forEach(function(et){T(function(){et.apply(null,lt)})})})}})}}function Zc(A,F){return b(F).from({prototype:A}),F}function go(A,F){return!(A.filter||A.algorithm||A.or)&&(F?A.justLimit:!A.replayFilter)}function Mm(A,F){A.filter=Jo(A.filter,F)}function yi(A,F,Y){var se=A.replayFilter;A.replayFilter=se?function(){return Jo(se(),F())}:F,A.justLimit=Y&&!se}function Yc(A,F){if(A.isPrimKey)return F.primaryKey;var Y=F.getIndexByKeyPath(A.index);if(!Y)throw new xe.Schema("KeyPath "+A.index+" on object store "+F.name+" is not indexed");return Y}function Dm(A,F,Y){var se=Yc(A,F.schema);return F.openCursor({trans:Y,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:se,range:A.range}})}function Xc(A,F,Y,se){var fe=A.replayFilter?Jo(A.filter,A.replayFilter()):A.filter;if(A.or){var _e={},Pe=function($e,Ye,Qe){var it,Ke;fe&&!fe(Ye,Qe,function(ot){return Ye.stop(ot)},function(ot){return Ye.fail(ot)})||((Ke=""+(it=Ye.primaryKey))=="[object ArrayBuffer]"&&(Ke=""+new Uint8Array(it)),h(_e,Ke)||(_e[Ke]=!0,F($e,Ye,Qe)))};return Promise.all([A.or._iterate(Pe,Y),ql(Dm(A,se,Y),A.algorithm,Pe,!A.keysOnly&&A.valueMapper)])}return ql(Dm(A,se,Y),Jo(A.algorithm,fe),F,!A.keysOnly&&A.valueMapper)}function ql(A,F,Y,se){var fe=Ie(se?function(_e,Pe,$e){return Y(se(_e),Pe,$e)}:Y);return A.then(function(_e){if(_e)return _e.start(function(){var Pe=function(){return _e.continue()};F&&!F(_e,function($e){return Pe=$e},function($e){_e.stop($e),Pe=He},function($e){_e.fail($e),Pe=He})||fe(_e.value,_e,function($e){return Pe=$e}),Pe()})})}var Jc=(Om.prototype.execute=function(A){var F=this["@@propmod"];if(F.add!==void 0){var Y=F.add;if(o(Y))return s(s([],o(A)?A:[],!0),Y).sort();if(typeof Y=="number")return(Number(A)||0)+Y;if(typeof Y=="bigint")try{return BigInt(A)+Y}catch{return BigInt(0)+Y}throw new TypeError("Invalid term ".concat(Y))}if(F.remove!==void 0){var se=F.remove;if(o(se))return o(A)?A.filter(function(fe){return!se.includes(fe)}).sort():[];if(typeof se=="number")return Number(A)-se;if(typeof se=="bigint")try{return BigInt(A)-se}catch{return BigInt(0)-se}throw new TypeError("Invalid subtrahend ".concat(se))}return Y=(Y=F.replacePrefix)===null||Y===void 0?void 0:Y[0],Y&&typeof A=="string"&&A.startsWith(Y)?F.replacePrefix[1]+A.substring(Y.length):A},Om);function Om(A){this["@@propmod"]=A}var Qc=(dr.prototype._read=function(A,F){var Y=this._ctx;return Y.error?Y.table._trans(null,rs.bind(null,Y.error)):Y.table._trans("readonly",A).then(F)},dr.prototype._write=function(A){var F=this._ctx;return F.error?F.table._trans(null,rs.bind(null,F.error)):F.table._trans("readwrite",A,"locked")},dr.prototype._addAlgorithm=function(A){var F=this._ctx;F.algorithm=Jo(F.algorithm,A)},dr.prototype._iterate=function(A,F){return Xc(this._ctx,A,F,this._ctx.table.core)},dr.prototype.clone=function(A){var F=Object.create(this.constructor.prototype),Y=Object.create(this._ctx);return A&&l(Y,A),F._ctx=Y,F},dr.prototype.raw=function(){return this._ctx.valueMapper=null,this},dr.prototype.each=function(A){var F=this._ctx;return this._read(function(Y){return Xc(F,A,Y,F.table.core)})},dr.prototype.count=function(A){var F=this;return this._read(function(Y){var se=F._ctx,fe=se.table.core;if(go(se,!0))return fe.count({trans:Y,query:{index:Yc(se,fe.schema),range:se.range}}).then(function(Pe){return Math.min(Pe,se.limit)});var _e=0;return Xc(se,function(){return++_e,!1},Y,fe).then(function(){return _e})}).then(A)},dr.prototype.sortBy=function(A,F){var Y=A.split(".").reverse(),se=Y[0],fe=Y.length-1;function _e(Ye,Qe){return Qe?_e(Ye[Y[Qe]],Qe-1):Ye[se]}var Pe=this._ctx.dir==="next"?1:-1;function $e(Ye,Qe){return nr(_e(Ye,fe),_e(Qe,fe))*Pe}return this.toArray(function(Ye){return Ye.sort($e)}).then(F)},dr.prototype.toArray=function(A){var F=this;return this._read(function(Y){var se=F._ctx;if(se.dir==="next"&&go(se,!0)&&0<se.limit){var fe=se.valueMapper,_e=Yc(se,se.table.core.schema);return se.table.core.query({trans:Y,limit:se.limit,values:!0,query:{index:_e,range:se.range}}).then(function($e){return $e=$e.result,fe?$e.map(fe):$e})}var Pe=[];return Xc(se,function($e){return Pe.push($e)},Y,se.table.core).then(function(){return Pe})},A)},dr.prototype.offset=function(A){var F=this._ctx;return A<=0||(F.offset+=A,go(F)?yi(F,function(){var Y=A;return function(se,fe){return Y===0||(Y===1?--Y:fe(function(){se.advance(Y),Y=0}),!1)}}):yi(F,function(){var Y=A;return function(){return--Y<0}})),this},dr.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),yi(this._ctx,function(){var F=A;return function(Y,se,fe){return--F<=0&&se(fe),0<=F}},!0),this},dr.prototype.until=function(A,F){return Mm(this._ctx,function(Y,se,fe){return!A(Y.value)||(se(fe),F)}),this},dr.prototype.first=function(A){return this.limit(1).toArray(function(F){return F[0]}).then(A)},dr.prototype.last=function(A){return this.reverse().first(A)},dr.prototype.filter=function(A){var F;return Mm(this._ctx,function(Y){return A(Y.value)}),(F=this._ctx).isMatch=Jo(F.isMatch,A),this},dr.prototype.and=function(A){return this.filter(A)},dr.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},dr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dr.prototype.desc=function(){return this.reverse()},dr.prototype.eachKey=function(A){var F=this._ctx;return F.keysOnly=!F.isMatch,this.each(function(Y,se){A(se.key,se)})},dr.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},dr.prototype.eachPrimaryKey=function(A){var F=this._ctx;return F.keysOnly=!F.isMatch,this.each(function(Y,se){A(se.primaryKey,se)})},dr.prototype.keys=function(A){var F=this._ctx;F.keysOnly=!F.isMatch;var Y=[];return this.each(function(se,fe){Y.push(fe.key)}).then(function(){return Y}).then(A)},dr.prototype.primaryKeys=function(A){var F=this._ctx;if(F.dir==="next"&&go(F,!0)&&0<F.limit)return this._read(function(se){var fe=Yc(F,F.table.core.schema);return F.table.core.query({trans:se,values:!1,limit:F.limit,query:{index:fe,range:F.range}})}).then(function(se){return se.result}).then(A);F.keysOnly=!F.isMatch;var Y=[];return this.each(function(se,fe){Y.push(fe.primaryKey)}).then(function(){return Y}).then(A)},dr.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},dr.prototype.firstKey=function(A){return this.limit(1).keys(function(F){return F[0]}).then(A)},dr.prototype.lastKey=function(A){return this.reverse().firstKey(A)},dr.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var F={};return Mm(this._ctx,function(fe){var se=fe.primaryKey.toString(),fe=h(F,se);return F[se]=!0,!fe}),this},dr.prototype.modify=function(A){var F=this,Y=this._ctx;return this._write(function(se){var fe,_e,Pe;Pe=typeof A=="function"?A:(fe=a(A),_e=fe.length,function(et){for(var pt=!1,xt=0;xt<_e;++xt){var _t=fe[xt],kt=A[_t],Bt=R(et,_t);kt instanceof Jc?(M(et,_t,kt.execute(Bt)),pt=!0):Bt!==kt&&(M(et,_t,kt),pt=!0)}return pt});var $e=Y.table.core,Ke=$e.schema.primaryKey,Ye=Ke.outbound,Qe=Ke.extractKey,it=200,Ke=F.db._options.modifyChunkSize;Ke&&(it=typeof Ke=="object"?Ke[$e.name]||Ke["*"]||200:Ke);function ot(et,_t){var xt=_t.failures,_t=_t.numFailures;nt+=et-_t;for(var kt=0,Bt=a(xt);kt<Bt.length;kt++){var Zt=Bt[kt];Ze.push(xt[Zt])}}var Ze=[],nt=0,lt=[];return F.clone().primaryKeys().then(function(et){function pt(_t){var kt=Math.min(it,et.length-_t);return $e.getMany({trans:se,keys:et.slice(_t,_t+kt),cache:"immutable"}).then(function(Bt){for(var Zt=[],Ft=[],qt=Ye?[]:null,Yt=[],Lt=0;Lt<kt;++Lt){var tn=Bt[Lt],mn={value:V(tn),primKey:et[_t+Lt]};Pe.call(mn,mn.value,mn)!==!1&&(mn.value==null?Yt.push(et[_t+Lt]):Ye||nr(Qe(tn),Qe(mn.value))===0?(Ft.push(mn.value),Ye&&qt.push(et[_t+Lt])):(Yt.push(et[_t+Lt]),Zt.push(mn.value)))}return Promise.resolve(0<Zt.length&&$e.mutate({trans:se,type:"add",values:Zt}).then(function(bn){for(var Mn in bn.failures)Yt.splice(parseInt(Mn),1);ot(Zt.length,bn)})).then(function(){return(0<Ft.length||xt&&typeof A=="object")&&$e.mutate({trans:se,type:"put",keys:qt,values:Ft,criteria:xt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<_t}).then(function(bn){return ot(Ft.length,bn)})}).then(function(){return(0<Yt.length||xt&&A===rh)&&$e.mutate({trans:se,type:"delete",keys:Yt,criteria:xt,isAdditionalChunk:0<_t}).then(function(bn){return ot(Yt.length,bn)})}).then(function(){return et.length>_t+kt&&pt(_t+it)})})}var xt=go(Y)&&Y.limit===1/0&&(typeof A!="function"||A===rh)&&{index:Y.index,range:Y.range};return pt(0).then(function(){if(0<Ze.length)throw new ce("Error modifying one or more objects",Ze,nt,lt);return et.length})})})},dr.prototype.delete=function(){var A=this._ctx,F=A.range;return go(A)&&(A.isPrimKey||F.type===3)?this._write(function(Y){var se=A.table.core.schema.primaryKey,fe=F;return A.table.core.count({trans:Y,query:{index:se,range:fe}}).then(function(_e){return A.table.core.mutate({trans:Y,type:"deleteRange",range:fe}).then(function(Pe){var $e=Pe.failures;if(Pe.lastResult,Pe.results,Pe=Pe.numFailures,Pe)throw new ce("Could not delete some values",Object.keys($e).map(function(Ye){return $e[Ye]}),_e-Pe);return _e-Pe})})}):this.modify(rh)},dr);function dr(){}var rh=function(A,F){return F.value=null};function Tb(A,F){return A<F?-1:A===F?0:1}function Pm(A,F){return F<A?-1:A===F?0:1}function Oi(A,F,Y){return A=A instanceof Hl?new A.Collection(A):A,A._ctx.error=new(Y||TypeError)(F),A}function eu(A){return new A.Collection(A,function(){return sh("")}).limit(0)}function Vl(A,F,Y,se){var fe,_e,Pe,$e,Ye,Qe,it,Ke=Y.length;if(!Y.every(function(nt){return typeof nt=="string"}))return Oi(A,kb);function ot(nt){fe=nt==="next"?function(et){return et.toUpperCase()}:function(et){return et.toLowerCase()},_e=nt==="next"?function(et){return et.toLowerCase()}:function(et){return et.toUpperCase()},Pe=nt==="next"?Tb:Pm;var lt=Y.map(function(et){return{lower:_e(et),upper:fe(et)}}).sort(function(et,pt){return Pe(et.lower,pt.lower)});$e=lt.map(function(et){return et.upper}),Ye=lt.map(function(et){return et.lower}),it=(Qe=nt)==="next"?"":se}ot("next"),A=new A.Collection(A,function(){return Da($e[0],Ye[Ke-1]+se)}),A._ondirectionchange=function(nt){ot(nt)};var Ze=0;return A._addAlgorithm(function(nt,lt,et){var pt=nt.key;if(typeof pt!="string")return!1;var xt=_e(pt);if(F(xt,Ye,Ze))return!0;for(var _t=null,kt=Ze;kt<Ke;++kt){var Bt=function(Zt,Ft,qt,Yt,Lt,tn){for(var mn=Math.min(Zt.length,Yt.length),bn=-1,Mn=0;Mn<mn;++Mn){var oi=Ft[Mn];if(oi!==Yt[Mn])return Lt(Zt[Mn],qt[Mn])<0?Zt.substr(0,Mn)+qt[Mn]+qt.substr(Mn+1):Lt(Zt[Mn],Yt[Mn])<0?Zt.substr(0,Mn)+Yt[Mn]+qt.substr(Mn+1):0<=bn?Zt.substr(0,bn)+Ft[bn]+qt.substr(bn+1):null;Lt(Zt[Mn],oi)<0&&(bn=Mn)}return mn<Yt.length&&tn==="next"?Zt+qt.substr(Zt.length):mn<Zt.length&&tn==="prev"?Zt.substr(0,qt.length):bn<0?null:Zt.substr(0,bn)+Yt[bn]+qt.substr(bn+1)}(pt,xt,$e[kt],Ye[kt],Pe,Qe);Bt===null&&_t===null?Ze=kt+1:(_t===null||0<Pe(_t,Bt))&&(_t=Bt)}return lt(_t!==null?function(){nt.continue(_t+it)}:et),!1}),A}function Da(A,F,Y,se){return{type:2,lower:A,upper:F,lowerOpen:Y,upperOpen:se}}function sh(A){return{type:1,lower:A,upper:A}}var Hl=(Object.defineProperty(Wr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Wr.prototype.between=function(A,F,Y,se){Y=Y!==!1,se=se===!0;try{return 0<this._cmp(A,F)||this._cmp(A,F)===0&&(Y||se)&&(!Y||!se)?eu(this):new this.Collection(this,function(){return Da(A,F,!Y,!se)})}catch{return Oi(this,Ma)}},Wr.prototype.equals=function(A){return A==null?Oi(this,Ma):new this.Collection(this,function(){return sh(A)})},Wr.prototype.above=function(A){return A==null?Oi(this,Ma):new this.Collection(this,function(){return Da(A,void 0,!0)})},Wr.prototype.aboveOrEqual=function(A){return A==null?Oi(this,Ma):new this.Collection(this,function(){return Da(A,void 0,!1)})},Wr.prototype.below=function(A){return A==null?Oi(this,Ma):new this.Collection(this,function(){return Da(void 0,A,!1,!0)})},Wr.prototype.belowOrEqual=function(A){return A==null?Oi(this,Ma):new this.Collection(this,function(){return Da(void 0,A)})},Wr.prototype.startsWith=function(A){return typeof A!="string"?Oi(this,kb):this.between(A,A+Xo,!0,!0)},Wr.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):Vl(this,function(F,Y){return F.indexOf(Y[0])===0},[A],Xo)},Wr.prototype.equalsIgnoreCase=function(A){return Vl(this,function(F,Y){return F===Y[0]},[A],"")},Wr.prototype.anyOfIgnoreCase=function(){var A=Z.apply(ie,arguments);return A.length===0?eu(this):Vl(this,function(F,Y){return Y.indexOf(F)!==-1},A,"")},Wr.prototype.startsWithAnyOfIgnoreCase=function(){var A=Z.apply(ie,arguments);return A.length===0?eu(this):Vl(this,function(F,Y){return Y.some(function(se){return F.indexOf(se)===0})},A,Xo)},Wr.prototype.anyOf=function(){var A=this,F=Z.apply(ie,arguments),Y=this._cmp;try{F.sort(Y)}catch{return Oi(this,Ma)}if(F.length===0)return eu(this);var se=new this.Collection(this,function(){return Da(F[0],F[F.length-1])});se._ondirectionchange=function(_e){Y=_e==="next"?A._ascending:A._descending,F.sort(Y)};var fe=0;return se._addAlgorithm(function(_e,Pe,$e){for(var Ye=_e.key;0<Y(Ye,F[fe]);)if(++fe===F.length)return Pe($e),!1;return Y(Ye,F[fe])===0||(Pe(function(){_e.continue(F[fe])}),!1)}),se},Wr.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Wr.prototype.noneOf=function(){var A=Z.apply(ie,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return Oi(this,Ma)}var F=A.reduce(function(Y,se){return Y?Y.concat([[Y[Y.length-1][1],se]]):[[-1/0,se]]},null);return F.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(F,{includeLowers:!1,includeUppers:!1})},Wr.prototype.inAnyRange=function(pt,F){var Y=this,se=this._cmp,fe=this._ascending,_e=this._descending,Pe=this._min,$e=this._max;if(pt.length===0)return eu(this);if(!pt.every(function(xt){return xt[0]!==void 0&&xt[1]!==void 0&&fe(xt[0],xt[1])<=0}))return Oi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",xe.InvalidArgument);var Ye=!F||F.includeLowers!==!1,Qe=F&&F.includeUppers===!0,it,Ke=fe;function ot(xt,_t){return Ke(xt[0],_t[0])}try{(it=pt.reduce(function(xt,_t){for(var kt=0,Bt=xt.length;kt<Bt;++kt){var Zt=xt[kt];if(se(_t[0],Zt[1])<0&&0<se(_t[1],Zt[0])){Zt[0]=Pe(Zt[0],_t[0]),Zt[1]=$e(Zt[1],_t[1]);break}}return kt===Bt&&xt.push(_t),xt},[])).sort(ot)}catch{return Oi(this,Ma)}var Ze=0,nt=Qe?function(xt){return 0<fe(xt,it[Ze][1])}:function(xt){return 0<=fe(xt,it[Ze][1])},lt=Ye?function(xt){return 0<_e(xt,it[Ze][0])}:function(xt){return 0<=_e(xt,it[Ze][0])},et=nt,pt=new this.Collection(this,function(){return Da(it[0][0],it[it.length-1][1],!Ye,!Qe)});return pt._ondirectionchange=function(xt){Ke=xt==="next"?(et=nt,fe):(et=lt,_e),it.sort(ot)},pt._addAlgorithm(function(xt,_t,kt){for(var Bt,Zt=xt.key;et(Zt);)if(++Ze===it.length)return _t(kt),!1;return!nt(Bt=Zt)&&!lt(Bt)||(Y._cmp(Zt,it[Ze][1])===0||Y._cmp(Zt,it[Ze][0])===0||_t(function(){Ke===fe?xt.continue(it[Ze][0]):xt.continue(it[Ze][1])}),!1)}),pt},Wr.prototype.startsWithAnyOf=function(){var A=Z.apply(ie,arguments);return A.every(function(F){return typeof F=="string"})?A.length===0?eu(this):this.inAnyRange(A.map(function(F){return[F,F+Xo]})):Oi(this,"startsWithAnyOf() only works with strings")},Wr);function Wr(){}function ga(A){return Ie(function(F){return Gl(F),A(F.target.error),!1})}function Gl(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var tu="storagemutated",Kl="x-storagemutated-1",zs=Qo(null,tu),Fm=(bi.prototype._lock=function(){return k(!Ae.global),++this._reculock,this._reculock!==1||Ae.global||(Ae.lockOwnerFor=this),this},bi.prototype._unlock=function(){if(k(!Ae.global),--this._reculock==0)for(Ae.global||(Ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{Wo(A[1],A[0])}catch{}}return this},bi.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},bi.prototype.create=function(A){var F=this;if(!this.mode)return this;var Y=this.db.idbdb,se=this.db._state.dbOpenError;if(k(!this.idbtrans),!A&&!Y)switch(se&&se.name){case"DatabaseClosedError":throw new xe.DatabaseClosed(se);case"MissingAPIError":throw new xe.MissingAPI(se.message,se);default:throw new xe.OpenFailed(se)}if(!this.active)throw new xe.TransactionInactive;return k(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||Y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ie(function(fe){Gl(fe),F._reject(A.error)}),A.onabort=Ie(function(fe){Gl(fe),F.active&&F._reject(new xe.Abort(A.error)),F.active=!1,F.on("abort").fire(fe)}),A.oncomplete=Ie(function(){F.active=!1,F._resolve(),"mutatedParts"in A&&zs.storagemutated.fire(A.mutatedParts)}),this},bi.prototype._promise=function(A,F,Y){var se=this;if(A==="readwrite"&&this.mode!=="readwrite")return rs(new xe.ReadOnly("Transaction is readonly"));if(!this.active)return rs(new xe.TransactionInactive);if(this._locked())return new L(function(_e,Pe){se._blockedFuncs.push([function(){se._promise(A,F,Y).then(_e,Pe)},Ae])});if(Y)return an(function(){var _e=new L(function(Pe,$e){se._lock();var Ye=F(Pe,$e,se);Ye&&Ye.then&&Ye.then(Pe,$e)});return _e.finally(function(){return se._unlock()}),_e._lib=!0,_e});var fe=new L(function(_e,Pe){var $e=F(_e,Pe,se);$e&&$e.then&&$e.then(_e,Pe)});return fe._lib=!0,fe},bi.prototype._root=function(){return this.parent?this.parent._root():this},bi.prototype.waitFor=function(A){var F,Y=this._root(),se=L.resolve(A);Y._waitingFor?Y._waitingFor=Y._waitingFor.then(function(){return se}):(Y._waitingFor=se,Y._waitingQueue=[],F=Y.idbtrans.objectStore(Y.storeNames[0]),function _e(){for(++Y._spinCount;Y._waitingQueue.length;)Y._waitingQueue.shift()();Y._waitingFor&&(F.get(-1/0).onsuccess=_e)}());var fe=Y._waitingFor;return new L(function(_e,Pe){se.then(function($e){return Y._waitingQueue.push(Ie(_e.bind(null,$e)))},function($e){return Y._waitingQueue.push(Ie(Pe.bind(null,$e)))}).finally(function(){Y._waitingFor===fe&&(Y._waitingFor=null)})})},bi.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new xe.Abort))},bi.prototype.table=function(A){var F=this._memoizedTables||(this._memoizedTables={});if(h(F,A))return F[A];var Y=this.schema[A];if(!Y)throw new xe.NotFound("Table "+A+" not part of transaction");return Y=new this.db.Table(A,Y,this),Y.core=this.db.core.table(A),F[A]=Y},bi);function bi(){}function Oa(A,F,Y,se,fe,_e,Pe){return{name:A,keyPath:F,unique:Y,multi:se,auto:fe,compound:_e,src:(Y&&!Pe?"&":"")+(se?"*":"")+(fe?"++":"")+ih(F)}}function ih(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function nu(A,F,Y){return{name:A,primKey:F,indexes:Y,mappedClass:null,idxByName:(se=function(fe){return[fe.name,fe]},Y.reduce(function(fe,_e,Pe){return Pe=se(_e,Pe),Pe&&(fe[Pe[0]]=Pe[1]),fe},{}))};var se}var ru=function(A){try{return A.only([[]]),ru=function(){return[[]]},[[]]}catch{return ru=function(){return Xo},Xo}};function su(A){return A==null?function(){}:typeof A=="string"?(F=A).split(".").length===1?function(Y){return Y[F]}:function(Y){return R(Y,F)}:function(Y){return R(Y,A)};var F}function Rd(A){return[].slice.call(A)}var Ab=0;function Es(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function Wl(A,F,Ye){function se(et){if(et.type===3)return null;if(et.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ze=et.lower,nt=et.upper,lt=et.lowerOpen,et=et.upperOpen;return Ze===void 0?nt===void 0?null:F.upperBound(nt,!!et):nt===void 0?F.lowerBound(Ze,!!lt):F.bound(Ze,nt,!!lt,!!et)}function fe(ot){var Ze,nt=ot.name;return{name:nt,schema:ot,mutate:function(lt){var et=lt.trans,pt=lt.type,xt=lt.keys,_t=lt.values,kt=lt.range;return new Promise(function(Bt,Zt){Bt=Ie(Bt);var Ft=et.objectStore(nt),qt=Ft.keyPath==null,Yt=pt==="put"||pt==="add";if(!Yt&&pt!=="delete"&&pt!=="deleteRange")throw new Error("Invalid operation type: "+pt);var Lt,tn=(xt||_t||{length:1}).length;if(xt&&_t&&xt.length!==_t.length)throw new Error("Given keys array must have same length as given values array.");if(tn===0)return Bt({numFailures:0,failures:{},results:[],lastResult:void 0});function mn(qs){++oi,Gl(qs)}var bn=[],Mn=[],oi=0;if(pt==="deleteRange"){if(kt.type===4)return Bt({numFailures:oi,failures:Mn,results:[],lastResult:void 0});kt.type===3?bn.push(Lt=Ft.clear()):bn.push(Lt=Ft.delete(se(kt)))}else{var qt=Yt?qt?[_t,xt]:[_t,null]:[xt,null],Cn=qt[0],ps=qt[1];if(Yt)for(var Cs=0;Cs<tn;++Cs)bn.push(Lt=ps&&ps[Cs]!==void 0?Ft[pt](Cn[Cs],ps[Cs]):Ft[pt](Cn[Cs])),Lt.onerror=mn;else for(Cs=0;Cs<tn;++Cs)bn.push(Lt=Ft[pt](Cn[Cs])),Lt.onerror=mn}function yo(qs){qs=qs.target.result,bn.forEach(function(Fa,rl){return Fa.error!=null&&(Mn[rl]=Fa.error)}),Bt({numFailures:oi,failures:Mn,results:pt==="delete"?xt:bn.map(function(Fa){return Fa.result}),lastResult:qs})}Lt.onerror=function(qs){mn(qs),yo(qs)},Lt.onsuccess=yo})},getMany:function(lt){var et=lt.trans,pt=lt.keys;return new Promise(function(xt,_t){xt=Ie(xt);for(var kt,Bt=et.objectStore(nt),Zt=pt.length,Ft=new Array(Zt),qt=0,Yt=0,Lt=function(bn){bn=bn.target,Ft[bn._pos]=bn.result,++Yt===qt&&xt(Ft)},tn=ga(_t),mn=0;mn<Zt;++mn)pt[mn]!=null&&((kt=Bt.get(pt[mn]))._pos=mn,kt.onsuccess=Lt,kt.onerror=tn,++qt);qt===0&&xt(Ft)})},get:function(lt){var et=lt.trans,pt=lt.key;return new Promise(function(xt,_t){xt=Ie(xt);var kt=et.objectStore(nt).get(pt);kt.onsuccess=function(Bt){return xt(Bt.target.result)},kt.onerror=ga(_t)})},query:(Ze=Qe,function(lt){return new Promise(function(et,pt){et=Ie(et);var xt,_t,kt,qt=lt.trans,Bt=lt.values,Zt=lt.limit,Lt=lt.query,Ft=Zt===1/0?void 0:Zt,Yt=Lt.index,Lt=Lt.range,qt=qt.objectStore(nt),Yt=Yt.isPrimaryKey?qt:qt.index(Yt.name),Lt=se(Lt);if(Zt===0)return et({result:[]});Ze?((Ft=Bt?Yt.getAll(Lt,Ft):Yt.getAllKeys(Lt,Ft)).onsuccess=function(tn){return et({result:tn.target.result})},Ft.onerror=ga(pt)):(xt=0,_t=!Bt&&"openKeyCursor"in Yt?Yt.openKeyCursor(Lt):Yt.openCursor(Lt),kt=[],_t.onsuccess=function(tn){var mn=_t.result;return mn?(kt.push(Bt?mn.value:mn.primaryKey),++xt===Zt?et({result:kt}):void mn.continue()):et({result:kt})},_t.onerror=ga(pt))})}),openCursor:function(lt){var et=lt.trans,pt=lt.values,xt=lt.query,_t=lt.reverse,kt=lt.unique;return new Promise(function(Bt,Zt){Bt=Ie(Bt);var Yt=xt.index,Ft=xt.range,qt=et.objectStore(nt),qt=Yt.isPrimaryKey?qt:qt.index(Yt.name),Yt=_t?kt?"prevunique":"prev":kt?"nextunique":"next",Lt=!pt&&"openKeyCursor"in qt?qt.openKeyCursor(se(Ft),Yt):qt.openCursor(se(Ft),Yt);Lt.onerror=ga(Zt),Lt.onsuccess=Ie(function(tn){var mn,bn,Mn,oi,Cn=Lt.result;Cn?(Cn.___id=++Ab,Cn.done=!1,mn=Cn.continue.bind(Cn),bn=(bn=Cn.continuePrimaryKey)&&bn.bind(Cn),Mn=Cn.advance.bind(Cn),oi=function(){throw new Error("Cursor not stopped")},Cn.trans=et,Cn.stop=Cn.continue=Cn.continuePrimaryKey=Cn.advance=function(){throw new Error("Cursor not started")},Cn.fail=Ie(Zt),Cn.next=function(){var ps=this,Cs=1;return this.start(function(){return Cs--?ps.continue():ps.stop()}).then(function(){return ps})},Cn.start=function(ps){function Cs(){if(Lt.result)try{ps()}catch(qs){Cn.fail(qs)}else Cn.done=!0,Cn.start=function(){throw new Error("Cursor behind last entry")},Cn.stop()}var yo=new Promise(function(qs,Fa){qs=Ie(qs),Lt.onerror=ga(Fa),Cn.fail=Fa,Cn.stop=function(rl){Cn.stop=Cn.continue=Cn.continuePrimaryKey=Cn.advance=oi,qs(rl)}});return Lt.onsuccess=Ie(function(qs){Lt.onsuccess=Cs,Cs()}),Cn.continue=mn,Cn.continuePrimaryKey=bn,Cn.advance=Mn,Cs(),yo},Bt(Cn)):Bt(null)},Zt)})},count:function(lt){var et=lt.query,pt=lt.trans,xt=et.index,_t=et.range;return new Promise(function(kt,Bt){var Zt=pt.objectStore(nt),Ft=xt.isPrimaryKey?Zt:Zt.index(xt.name),Zt=se(_t),Ft=Zt?Ft.count(Zt):Ft.count();Ft.onsuccess=Ie(function(qt){return kt(qt.target.result)}),Ft.onerror=ga(Bt)})}}}var _e,Pe,$e,it=(Pe=Ye,$e=Rd((_e=A).objectStoreNames),{schema:{name:_e.name,tables:$e.map(function(ot){return Pe.objectStore(ot)}).map(function(ot){var Ze=ot.keyPath,et=ot.autoIncrement,nt=o(Ze),lt={},et={name:ot.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ze==null,compound:nt,keyPath:Ze,autoIncrement:et,unique:!0,extractKey:su(Ze)},indexes:Rd(ot.indexNames).map(function(pt){return ot.index(pt)}).map(function(kt){var xt=kt.name,_t=kt.unique,Bt=kt.multiEntry,kt=kt.keyPath,Bt={name:xt,compound:o(kt),keyPath:kt,unique:_t,multiEntry:Bt,extractKey:su(kt)};return lt[Es(kt)]=Bt}),getIndexByKeyPath:function(pt){return lt[Es(pt)]}};return lt[":id"]=et.primaryKey,Ze!=null&&(lt[Es(Ze)]=et.primaryKey),et})},hasGetAll:0<$e.length&&"getAll"in Pe.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ye=it.schema,Qe=it.hasGetAll,it=Ye.tables.map(fe),Ke={};return it.forEach(function(ot){return Ke[ot.name]=ot}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(ot){if(!Ke[ot])throw new Error("Table '".concat(ot,"' not found"));return Ke[ot]},MIN_KEY:-1/0,MAX_KEY:ru(F),schema:Ye}}function ah(A,F,Y,se){var fe=Y.IDBKeyRange;return Y.indexedDB,{dbcore:(se=Wl(F,fe,se),A.dbcore.reduce(function(_e,Pe){return Pe=Pe.create,r(r({},_e),Pe(_e))},se))}}function el(A,se){var Y=se.db,se=ah(A._middlewares,Y,A._deps,se);A.core=se.dbcore,A.tables.forEach(function(fe){var _e=fe.name;A.core.schema.tables.some(function(Pe){return Pe.name===_e})&&(fe.core=A.core.table(_e),A[_e]instanceof A.Table&&(A[_e].core=fe.core))})}function oh(A,F,Y,se){Y.forEach(function(fe){var _e=se[fe];F.forEach(function(Pe){var $e=function Ye(Qe,it){return w(Qe,it)||(Qe=c(Qe))&&Ye(Qe,it)}(Pe,fe);(!$e||"value"in $e&&$e.value===void 0)&&(Pe===A.Transaction.prototype||Pe instanceof A.Transaction?v(Pe,fe,{get:function(){return this.table(fe)},set:function(Ye){g(this,fe,{value:Ye,writable:!0,configurable:!0,enumerable:!0})}}):Pe[fe]=new A.Table(fe,_e))})})}function Nd(A,F){F.forEach(function(Y){for(var se in Y)Y[se]instanceof A.Table&&delete Y[se]})}function Lm(A,F){return A._cfg.version-F._cfg.version}function Id(A,F,Y,se){var fe=A._dbSchema;Y.objectStoreNames.contains("$meta")&&!fe.$meta&&(fe.$meta=nu("$meta",Nb("")[0],[]),A._storeNames.push("$meta"));var _e=A._createTransaction("readwrite",A._storeNames,fe);_e.create(Y),_e._completion.catch(se);var Pe=_e._reject.bind(_e),$e=Ae.transless||Ae;an(function(){return Ae.trans=_e,Ae.transless=$e,F!==0?(el(A,Y),Qe=F,((Ye=_e).storeNames.includes("$meta")?Ye.table("$meta").get("version").then(function(it){return it??Qe}):L.resolve(Qe)).then(function(it){return ot=it,Ze=_e,nt=Y,lt=[],it=(Ke=A)._versions,et=Ke._dbSchema=iu(0,Ke.idbdb,nt),(it=it.filter(function(pt){return pt._cfg.version>=ot})).length!==0?(it.forEach(function(pt){lt.push(function(){var xt=et,_t=pt._cfg.dbschema;dh(Ke,xt,nt),dh(Ke,_t,nt),et=Ke._dbSchema=_t;var kt=ch(xt,_t);kt.add.forEach(function(Yt){$m(nt,Yt[0],Yt[1].primKey,Yt[1].indexes)}),kt.change.forEach(function(Yt){if(Yt.recreate)throw new xe.Upgrade("Not yet support for changing primary key");var Lt=nt.objectStore(Yt.name);Yt.add.forEach(function(tn){return uh(Lt,tn)}),Yt.change.forEach(function(tn){Lt.deleteIndex(tn.name),uh(Lt,tn)}),Yt.del.forEach(function(tn){return Lt.deleteIndex(tn)})});var Bt=pt._cfg.contentUpgrade;if(Bt&&pt._cfg.version>ot){el(Ke,nt),Ze._memoizedTables={};var Zt=I(_t);kt.del.forEach(function(Yt){Zt[Yt]=xt[Yt]}),Nd(Ke,[Ke.Transaction.prototype]),oh(Ke,[Ke.Transaction.prototype],a(Zt),Zt),Ze.schema=Zt;var Ft,qt=ee(Bt);return qt&&$n(),kt=L.follow(function(){var Yt;(Ft=Bt(Ze))&&qt&&(Yt=tr.bind(null,null),Ft.then(Yt,Yt))}),Ft&&typeof Ft.then=="function"?L.resolve(Ft):kt.then(function(){return Ft})}}),lt.push(function(xt){var _t,kt,Bt=pt._cfg.dbschema;_t=Bt,kt=xt,[].slice.call(kt.db.objectStoreNames).forEach(function(Zt){return _t[Zt]==null&&kt.db.deleteObjectStore(Zt)}),Nd(Ke,[Ke.Transaction.prototype]),oh(Ke,[Ke.Transaction.prototype],Ke._storeNames,Ke._dbSchema),Ze.schema=Ke._dbSchema}),lt.push(function(xt){Ke.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Ke.idbdb.version/10)===pt._cfg.version?(Ke.idbdb.deleteObjectStore("$meta"),delete Ke._dbSchema.$meta,Ke._storeNames=Ke._storeNames.filter(function(_t){return _t!=="$meta"})):xt.objectStore("$meta").put(pt._cfg.version,"version"))})}),function pt(){return lt.length?L.resolve(lt.shift()(Ze.idbtrans)).then(pt):L.resolve()}().then(function(){Rb(et,nt)})):L.resolve();var Ke,ot,Ze,nt,lt,et}).catch(Pe)):(a(fe).forEach(function(it){$m(Y,it,fe[it].primKey,fe[it].indexes)}),el(A,Y),void L.follow(function(){return A.on.populate.fire(_e)}).catch(Pe));var Ye,Qe})}function lh(A,F){Rb(A._dbSchema,F),F.db.version%10!=0||F.objectStoreNames.contains("$meta")||F.db.createObjectStore("$meta").add(Math.ceil(F.db.version/10-1),"version");var Y=iu(0,A.idbdb,F);dh(A,A._dbSchema,F);for(var se=0,fe=ch(Y,A._dbSchema).change;se<fe.length;se++){var _e=function(Pe){if(Pe.change.length||Pe.recreate)return console.warn("Unable to patch indexes of table ".concat(Pe.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=F.objectStore(Pe.name);Pe.add.forEach(function(Ye){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Pe.name,".").concat(Ye.src)),uh($e,Ye)})}(fe[se]);if(typeof _e=="object")return _e.value}}function ch(A,F){var Y,se={del:[],add:[],change:[]};for(Y in A)F[Y]||se.del.push(Y);for(Y in F){var fe=A[Y],_e=F[Y];if(fe){var Pe={name:Y,def:_e,recreate:!1,del:[],add:[],change:[]};if(""+(fe.primKey.keyPath||"")!=""+(_e.primKey.keyPath||"")||fe.primKey.auto!==_e.primKey.auto)Pe.recreate=!0,se.change.push(Pe);else{var $e=fe.idxByName,Ye=_e.idxByName,Qe=void 0;for(Qe in $e)Ye[Qe]||Pe.del.push(Qe);for(Qe in Ye){var it=$e[Qe],Ke=Ye[Qe];it?it.src!==Ke.src&&Pe.change.push(Ke):Pe.add.push(Ke)}(0<Pe.del.length||0<Pe.add.length||0<Pe.change.length)&&se.change.push(Pe)}}else se.add.push([Y,_e])}return se}function $m(A,F,Y,se){var fe=A.db.createObjectStore(F,Y.keyPath?{keyPath:Y.keyPath,autoIncrement:Y.auto}:{autoIncrement:Y.auto});return se.forEach(function(_e){return uh(fe,_e)}),fe}function Rb(A,F){a(A).forEach(function(Y){F.db.objectStoreNames.contains(Y)||(Le&&console.debug("Dexie: Creating missing table",Y),$m(F,Y,A[Y].primKey,A[Y].indexes))})}function uh(A,F){A.createIndex(F.name,F.keyPath,{unique:F.unique,multiEntry:F.multi})}function iu(A,F,Y){var se={};return _(F.objectStoreNames,0).forEach(function(fe){for(var _e=Y.objectStore(fe),Pe=Oa(ih(Qe=_e.keyPath),Qe||"",!0,!1,!!_e.autoIncrement,Qe&&typeof Qe!="string",!0),$e=[],Ye=0;Ye<_e.indexNames.length;++Ye){var it=_e.index(_e.indexNames[Ye]),Qe=it.keyPath,it=Oa(it.name,Qe,!!it.unique,!!it.multiEntry,!1,Qe&&typeof Qe!="string",!1);$e.push(it)}se[fe]=nu(fe,Pe,$e)}),se}function dh(A,F,Y){for(var se=Y.db.objectStoreNames,fe=0;fe<se.length;++fe){var _e=se[fe],Pe=Y.objectStore(_e);A._hasGetAll="getAll"in Pe;for(var $e=0;$e<Pe.indexNames.length;++$e){var Ye=Pe.indexNames[$e],Qe=Pe.index(Ye).keyPath,it=typeof Qe=="string"?Qe:"["+_(Qe).join("+")+"]";!F[_e]||(Qe=F[_e].idxByName[it])&&(Qe.name=Ye,delete F[_e].idxByName[it],F[_e].idxByName[Ye]=Qe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function Nb(A){return A.split(",").map(function(F,Y){var se=(F=F.trim()).replace(/([&*]|\+\+)/g,""),fe=/^\[/.test(se)?se.match(/^\[(.*)\]$/)[1].split("+"):se;return Oa(se,fe||null,/\&/.test(F),/\*/.test(F),/\+\+/.test(F),o(fe),Y===0)})}var U_=(fh.prototype._parseStoresSpec=function(A,F){a(A).forEach(function(Y){if(A[Y]!==null){var se=Nb(A[Y]),fe=se.shift();if(fe.unique=!0,fe.multi)throw new xe.Schema("Primary key cannot be multi-valued");se.forEach(function(_e){if(_e.auto)throw new xe.Schema("Only primary key can be marked as autoIncrement (++)");if(!_e.keyPath)throw new xe.Schema("Index must have a name and cannot be an empty string")}),F[Y]=nu(Y,fe,se)}})},fh.prototype.stores=function(Y){var F=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Y):Y;var Y=F._versions,se={},fe={};return Y.forEach(function(_e){l(se,_e._cfg.storesSource),fe=_e._cfg.dbschema={},_e._parseStoresSpec(se,fe)}),F._dbSchema=fe,Nd(F,[F._allTables,F,F.Transaction.prototype]),oh(F,[F._allTables,F,F.Transaction.prototype,this._cfg.tables],a(fe),fe),F._storeNames=a(fe),this},fh.prototype.upgrade=function(A){return this._cfg.contentUpgrade=Ee(this._cfg.contentUpgrade||He,A),this},fh);function fh(){}function Bm(A,F){var Y=A._dbNamesDB;return Y||(Y=A._dbNamesDB=new Pa(zl,{addons:[],indexedDB:A,IDBKeyRange:F})).version(1).stores({dbnames:"name"}),Y.table("dbnames")}function hh(A){return A&&typeof A.databases=="function"}function zm(A){return an(function(){return Ae.letThrough=!0,A()})}function Um(A){return!("from"in A)}var Us=function(A,F){if(!this){var Y=new Us;return A&&"d"in A&&l(Y,A),Y}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?F:A}:{d:0})};function jd(A,F,Y){var se=nr(F,Y);if(!isNaN(se)){if(0<se)throw RangeError();if(Um(A))return l(A,{from:F,to:Y,d:1});var fe=A.l,se=A.r;if(nr(Y,A.from)<0)return fe?jd(fe,F,Y):A.l={from:F,to:Y,d:1,l:null,r:null},jb(A);if(0<nr(F,A.to))return se?jd(se,F,Y):A.r={from:F,to:Y,d:1,l:null,r:null},jb(A);nr(F,A.from)<0&&(A.from=F,A.l=null,A.d=se?se.d+1:1),0<nr(Y,A.to)&&(A.to=Y,A.r=null,A.d=A.l?A.l.d+1:1),Y=!A.r,fe&&!A.l&&Zl(A,fe),se&&Y&&Zl(A,se)}}function Zl(A,F){Um(F)||function Y(se,Ye){var _e=Ye.from,Pe=Ye.to,$e=Ye.l,Ye=Ye.r;jd(se,_e,Pe),$e&&Y(se,$e),Ye&&Y(se,Ye)}(A,F)}function Ib(A,F){var Y=ph(F),se=Y.next();if(se.done)return!1;for(var fe=se.value,_e=ph(A),Pe=_e.next(fe.from),$e=Pe.value;!se.done&&!Pe.done;){if(nr($e.from,fe.to)<=0&&0<=nr($e.to,fe.from))return!0;nr(fe.from,$e.from)<0?fe=(se=Y.next($e.from)).value:$e=(Pe=_e.next(fe.from)).value}return!1}function ph(A){var F=Um(A)?null:{s:0,n:A};return{next:function(Y){for(var se=0<arguments.length;F;)switch(F.s){case 0:if(F.s=1,se)for(;F.n.l&&nr(Y,F.n.from)<0;)F={up:F,n:F.n.l,s:1};else for(;F.n.l;)F={up:F,n:F.n.l,s:1};case 1:if(F.s=2,!se||nr(Y,F.n.to)<=0)return{value:F.n,done:!1};case 2:if(F.n.r){F.s=3,F={up:F,n:F.n.r,s:0};continue}case 3:F=F.up}return{done:!0}}}}function jb(A){var F,Y,se=(((F=A.r)===null||F===void 0?void 0:F.d)||0)-(((Y=A.l)===null||Y===void 0?void 0:Y.d)||0),fe=1<se?"r":se<-1?"l":"";fe&&(F=fe=="r"?"l":"r",Y=r({},A),se=A[fe],A.from=se.from,A.to=se.to,A[fe]=se[fe],Y[fe]=se[F],(A[F]=Y).d=qm(Y)),A.d=qm(A)}function qm(Y){var F=Y.r,Y=Y.l;return(F?Y?Math.max(F.d,Y.d):F.d:Y?Y.d:0)+1}function mh(A,F){return a(F).forEach(function(Y){A[Y]?Zl(A[Y],F[Y]):A[Y]=function se(fe){var _e,Pe,$e={};for(_e in fe)h(fe,_e)&&(Pe=fe[_e],$e[_e]=!Pe||typeof Pe!="object"||U.has(Pe.constructor)?Pe:se(Pe));return $e}(F[Y])}),A}function Vm(A,F){return A.all||F.all||Object.keys(A).some(function(Y){return F[Y]&&Ib(F[Y],A[Y])})}m(Us.prototype,((Pi={add:function(A){return Zl(this,A),this},addKey:function(A){return jd(this,A,A),this},addKeys:function(A){var F=this;return A.forEach(function(Y){return jd(F,Y,Y)}),this},hasKey:function(A){var F=ph(this).next(A).value;return F&&nr(F.from,A)<=0&&0<=nr(F.to,A)}})[J]=function(){return ph(this)},Pi));var Yl={},Hm={},Gm=!1;function gh(A){mh(Hm,A),Gm||(Gm=!0,setTimeout(function(){Gm=!1,Km(Hm,!(Hm={}))},0))}function Km(A,F){F===void 0&&(F=!1);var Y=new Set;if(A.all)for(var se=0,fe=Object.values(Yl);se<fe.length;se++)Mb(Pe=fe[se],A,Y,F);else for(var _e in A){var Pe,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(_e);$e&&(_e=$e[1],$e=$e[2],(Pe=Yl["idb://".concat(_e,"/").concat($e)])&&Mb(Pe,A,Y,F))}Y.forEach(function(Ye){return Ye()})}function Mb(A,F,Y,se){for(var fe=[],_e=0,Pe=Object.entries(A.queries.query);_e<Pe.length;_e++){for(var $e=Pe[_e],Ye=$e[0],Qe=[],it=0,Ke=$e[1];it<Ke.length;it++){var ot=Ke[it];Vm(F,ot.obsSet)?ot.subscribers.forEach(function(et){return Y.add(et)}):se&&Qe.push(ot)}se&&fe.push([Ye,Qe])}if(se)for(var Ze=0,nt=fe;Ze<nt.length;Ze++){var lt=nt[Ze],Ye=lt[0],Qe=lt[1];A.queries.query[Ye]=Qe}}function q_(A){var F=A._state,Y=A._deps.indexedDB;if(F.isBeingOpened||A.idbdb)return F.dbReadyPromise.then(function(){return F.dbOpenError?rs(F.dbOpenError):A});F.isBeingOpened=!0,F.dbOpenError=null,F.openComplete=!1;var se=F.openCanceller,fe=Math.round(10*A.verno),_e=!1;function Pe(){if(F.openCanceller!==se)throw new xe.DatabaseClosed("db.open() was cancelled")}function $e(){return new L(function(ot,Ze){if(Pe(),!Y)throw new xe.MissingAPI;var nt=A.name,lt=F.autoSchema||!fe?Y.open(nt):Y.open(nt,fe);if(!lt)throw new xe.MissingAPI;lt.onerror=ga(Ze),lt.onblocked=Ie(A._fireOnBlocked),lt.onupgradeneeded=Ie(function(et){var pt;it=lt.transaction,F.autoSchema&&!A._options.allowEmptyDB?(lt.onerror=Gl,it.abort(),lt.result.close(),(pt=Y.deleteDatabase(nt)).onsuccess=pt.onerror=Ie(function(){Ze(new xe.NoSuchDatabase("Database ".concat(nt," doesnt exist")))})):(it.onerror=ga(Ze),et=et.oldVersion>Math.pow(2,62)?0:et.oldVersion,Ke=et<1,A.idbdb=lt.result,_e&&lh(A,it),Id(A,et/10,it,Ze))},Ze),lt.onsuccess=Ie(function(){it=null;var et,pt,xt,_t,kt,Bt=A.idbdb=lt.result,Zt=_(Bt.objectStoreNames);if(0<Zt.length)try{var Ft=Bt.transaction((_t=Zt).length===1?_t[0]:_t,"readonly");if(F.autoSchema)pt=Bt,xt=Ft,(et=A).verno=pt.version/10,xt=et._dbSchema=iu(0,pt,xt),et._storeNames=_(pt.objectStoreNames,0),oh(et,[et._allTables],a(xt),xt);else if(dh(A,A._dbSchema,Ft),((kt=ch(iu(0,(kt=A).idbdb,Ft),kt._dbSchema)).add.length||kt.change.some(function(qt){return qt.add.length||qt.change.length}))&&!_e)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Bt.close(),fe=Bt.version+1,_e=!0,ot($e());el(A,Ft)}catch{}mo.push(A),Bt.onversionchange=Ie(function(qt){F.vcFired=!0,A.on("versionchange").fire(qt)}),Bt.onclose=Ie(function(qt){A.on("close").fire(qt)}),Ke&&(kt=A._deps,Ft=nt,Bt=kt.indexedDB,kt=kt.IDBKeyRange,hh(Bt)||Ft===zl||Bm(Bt,kt).put({name:Ft}).catch(He)),ot()},Ze)}).catch(function(ot){switch(ot==null?void 0:ot.name){case"UnknownError":if(0<F.PR1398_maxLoop)return F.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<fe)return fe=0,$e()}return L.reject(ot)})}var Ye,Qe=F.dbReadyResolve,it=null,Ke=!1;return L.race([se,(typeof navigator>"u"?L.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ot){function Ze(){return indexedDB.databases().finally(ot)}Ye=setInterval(Ze,100),Ze()}).finally(function(){return clearInterval(Ye)}):Promise.resolve()).then($e)]).then(function(){return Pe(),F.onReadyBeingFired=[],L.resolve(zm(function(){return A.on.ready.fire(A.vip)})).then(function ot(){if(0<F.onReadyBeingFired.length){var Ze=F.onReadyBeingFired.reduce(Ee,He);return F.onReadyBeingFired=[],L.resolve(zm(function(){return Ze(A.vip)})).then(ot)}})}).finally(function(){F.openCanceller===se&&(F.onReadyBeingFired=null,F.isBeingOpened=!1)}).catch(function(ot){F.dbOpenError=ot;try{it&&it.abort()}catch{}return se===F.openCanceller&&A._close(),rs(ot)}).finally(function(){F.openComplete=!0,Qe()}).then(function(){var ot;return Ke&&(ot={},A.tables.forEach(function(Ze){Ze.schema.indexes.forEach(function(nt){nt.name&&(ot["idb://".concat(A.name,"/").concat(Ze.name,"/").concat(nt.name)]=new Us(-1/0,[[[]]]))}),ot["idb://".concat(A.name,"/").concat(Ze.name,"/")]=ot["idb://".concat(A.name,"/").concat(Ze.name,"/:dels")]=new Us(-1/0,[[[]]])}),zs(tu).fire(ot),Km(ot,!0)),A})}function Md(A){function F(_e){return A.next(_e)}var Y=fe(F),se=fe(function(_e){return A.throw(_e)});function fe(_e){return function(Ye){var $e=_e(Ye),Ye=$e.value;return $e.done?Ye:Ye&&typeof Ye.then=="function"?Ye.then(Y,se):o(Ye)?Promise.all(Ye).then(Y,se):Y(Ye)}}return fe(F)()}function tl(A,F,Y){for(var se=o(A)?A.slice():[A],fe=0;fe<Y;++fe)se.push(F);return se}var V_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(F){var Y=A.table(F),se=Y.schema,fe={},_e=[];function Pe(Ke,ot,Ze){var nt=Es(Ke),lt=fe[nt]=fe[nt]||[],et=Ke==null?0:typeof Ke=="string"?1:Ke.length,pt=0<ot,pt=r(r({},Ze),{name:pt?"".concat(nt,"(virtual-from:").concat(Ze.name,")"):Ze.name,lowLevelIndex:Ze,isVirtual:pt,keyTail:ot,keyLength:et,extractKey:su(Ke),unique:!pt&&Ze.unique});return lt.push(pt),pt.isPrimaryKey||_e.push(pt),1<et&&Pe(et===2?Ke[0]:Ke.slice(0,et-1),ot+1,Ze),lt.sort(function(xt,_t){return xt.keyTail-_t.keyTail}),pt}F=Pe(se.primaryKey.keyPath,0,se.primaryKey),fe[":id"]=[F];for(var $e=0,Ye=se.indexes;$e<Ye.length;$e++){var Qe=Ye[$e];Pe(Qe.keyPath,0,Qe)}function it(Ke){var ot,Ze=Ke.query.index;return Ze.isVirtual?r(r({},Ke),{query:{index:Ze.lowLevelIndex,range:(ot=Ke.query.range,Ze=Ze.keyTail,{type:ot.type===1?2:ot.type,lower:tl(ot.lower,ot.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ze),lowerOpen:!0,upper:tl(ot.upper,ot.upperOpen?A.MIN_KEY:A.MAX_KEY,Ze),upperOpen:!0})}}):Ke}return r(r({},Y),{schema:r(r({},se),{primaryKey:F,indexes:_e,getIndexByKeyPath:function(Ke){return(Ke=fe[Es(Ke)])&&Ke[0]}}),count:function(Ke){return Y.count(it(Ke))},query:function(Ke){return Y.query(it(Ke))},openCursor:function(Ke){var ot=Ke.query.index,Ze=ot.keyTail,nt=ot.isVirtual,lt=ot.keyLength;return nt?Y.openCursor(it(Ke)).then(function(pt){return pt&&et(pt)}):Y.openCursor(Ke);function et(pt){return Object.create(pt,{continue:{value:function(xt){xt!=null?pt.continue(tl(xt,Ke.reverse?A.MAX_KEY:A.MIN_KEY,Ze)):Ke.unique?pt.continue(pt.key.slice(0,lt).concat(Ke.reverse?A.MIN_KEY:A.MAX_KEY,Ze)):pt.continue()}},continuePrimaryKey:{value:function(xt,_t){pt.continuePrimaryKey(tl(xt,A.MAX_KEY,Ze),_t)}},primaryKey:{get:function(){return pt.primaryKey}},key:{get:function(){var xt=pt.key;return lt===1?xt[0]:xt.slice(0,lt)}},value:{get:function(){return pt.value}}})}}})}})}};function yh(A,F,Y,se){return Y=Y||{},se=se||"",a(A).forEach(function(fe){var _e,Pe,$e;h(F,fe)?(_e=A[fe],Pe=F[fe],typeof _e=="object"&&typeof Pe=="object"&&_e&&Pe?($e=re(_e))!==re(Pe)?Y[se+fe]=F[fe]:$e==="Object"?yh(_e,Pe,Y,se+fe+"."):_e!==Pe&&(Y[se+fe]=F[fe]):_e!==Pe&&(Y[se+fe]=F[fe])):Y[se+fe]=void 0}),a(F).forEach(function(fe){h(A,fe)||(Y[se+fe]=F[fe])}),Y}function bh(A,F){return F.type==="delete"?F.keys:F.keys||F.values.map(A.extractKey)}var Db={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(F){var Y=A.table(F),se=Y.schema.primaryKey;return r(r({},Y),{mutate:function(fe){var _e=Ae.trans,Pe=_e.table(F).hook,$e=Pe.deleting,Ye=Pe.creating,Qe=Pe.updating;switch(fe.type){case"add":if(Ye.fire===He)break;return _e._promise("readwrite",function(){return it(fe)},!0);case"put":if(Ye.fire===He&&Qe.fire===He)break;return _e._promise("readwrite",function(){return it(fe)},!0);case"delete":if($e.fire===He)break;return _e._promise("readwrite",function(){return it(fe)},!0);case"deleteRange":if($e.fire===He)break;return _e._promise("readwrite",function(){return function Ke(ot,Ze,nt){return Y.query({trans:ot,values:!1,query:{index:se,range:Ze},limit:nt}).then(function(lt){var et=lt.result;return it({type:"delete",keys:et,trans:ot}).then(function(pt){return 0<pt.numFailures?Promise.reject(pt.failures[0]):et.length<nt?{failures:[],numFailures:0,lastResult:void 0}:Ke(ot,r(r({},Ze),{lower:et[et.length-1],lowerOpen:!0}),nt)})})}(fe.trans,fe.range,1e4)},!0)}return Y.mutate(fe);function it(Ke){var ot,Ze,nt,lt=Ae.trans,et=Ke.keys||bh(se,Ke);if(!et)throw new Error("Keys missing");return(Ke=Ke.type==="add"||Ke.type==="put"?r(r({},Ke),{keys:et}):r({},Ke)).type!=="delete"&&(Ke.values=s([],Ke.values)),Ke.keys&&(Ke.keys=s([],Ke.keys)),ot=Y,nt=et,((Ze=Ke).type==="add"?Promise.resolve([]):ot.getMany({trans:Ze.trans,keys:nt,cache:"immutable"})).then(function(pt){var xt=et.map(function(_t,kt){var Bt,Zt,Ft,qt=pt[kt],Yt={onerror:null,onsuccess:null};return Ke.type==="delete"?$e.fire.call(Yt,_t,qt,lt):Ke.type==="add"||qt===void 0?(Bt=Ye.fire.call(Yt,_t,Ke.values[kt],lt),_t==null&&Bt!=null&&(Ke.keys[kt]=_t=Bt,se.outbound||M(Ke.values[kt],se.keyPath,_t))):(Bt=yh(qt,Ke.values[kt]),(Zt=Qe.fire.call(Yt,Bt,_t,qt,lt))&&(Ft=Ke.values[kt],Object.keys(Zt).forEach(function(Lt){h(Ft,Lt)?Ft[Lt]=Zt[Lt]:M(Ft,Lt,Zt[Lt])}))),Yt});return Y.mutate(Ke).then(function(_t){for(var kt=_t.failures,Bt=_t.results,Zt=_t.numFailures,_t=_t.lastResult,Ft=0;Ft<et.length;++Ft){var qt=(Bt||et)[Ft],Yt=xt[Ft];qt==null?Yt.onerror&&Yt.onerror(kt[Ft]):Yt.onsuccess&&Yt.onsuccess(Ke.type==="put"&&pt[Ft]?Ke.values[Ft]:qt)}return{failures:kt,results:Bt,numFailures:Zt,lastResult:_t}}).catch(function(_t){return xt.forEach(function(kt){return kt.onerror&&kt.onerror(_t)}),Promise.reject(_t)})})}}})}})}};function Wm(A,F,Y){try{if(!F||F.keys.length<A.length)return null;for(var se=[],fe=0,_e=0;fe<F.keys.length&&_e<A.length;++fe)nr(F.keys[fe],A[_e])===0&&(se.push(Y?V(F.values[fe]):F.values[fe]),++_e);return se.length===A.length?se:null}catch{return null}}var Ob={stack:"dbcore",level:-1,create:function(A){return{table:function(F){var Y=A.table(F);return r(r({},Y),{getMany:function(se){if(!se.cache)return Y.getMany(se);var fe=Wm(se.keys,se.trans._cache,se.cache==="clone");return fe?L.resolve(fe):Y.getMany(se).then(function(_e){return se.trans._cache={keys:se.keys,values:se.cache==="clone"?V(_e):_e},_e})},mutate:function(se){return se.type!=="add"&&(se.trans._cache=null),Y.mutate(se)}})}}}};function Xl(A,F){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!F.schema.primaryKey.outbound}function Pb(A,F){switch(A){case"query":return F.values&&!F.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var H_={stack:"dbcore",level:0,name:"Observability",create:function(A){var F=A.schema.name,Y=new Us(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(se,fe,_e){if(Ae.subscr&&fe!=="readonly")throw new xe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ae.querier));return A.transaction(se,fe,_e)},table:function(se){var fe=A.table(se),_e=fe.schema,Pe=_e.primaryKey,Ke=_e.indexes,$e=Pe.extractKey,Ye=Pe.outbound,Qe=Pe.autoIncrement&&Ke.filter(function(Ze){return Ze.compound&&Ze.keyPath.includes(Pe.keyPath)}),it=r(r({},fe),{mutate:function(Ze){function nt(Lt){return Lt="idb://".concat(F,"/").concat(se,"/").concat(Lt),_t[Lt]||(_t[Lt]=new Us)}var lt,et,pt,xt=Ze.trans,_t=Ze.mutatedParts||(Ze.mutatedParts={}),kt=nt(""),Bt=nt(":dels"),Zt=Ze.type,Yt=Ze.type==="deleteRange"?[Ze.range]:Ze.type==="delete"?[Ze.keys]:Ze.values.length<50?[bh(Pe,Ze).filter(function(Lt){return Lt}),Ze.values]:[],Ft=Yt[0],qt=Yt[1],Yt=Ze.trans._cache;return o(Ft)?(kt.addKeys(Ft),(Yt=Zt==="delete"||Ft.length===qt.length?Wm(Ft,Yt):null)||Bt.addKeys(Ft),(Yt||qt)&&(lt=nt,et=Yt,pt=qt,_e.indexes.forEach(function(Lt){var tn=lt(Lt.name||"");function mn(Mn){return Mn!=null?Lt.extractKey(Mn):null}function bn(Mn){return Lt.multiEntry&&o(Mn)?Mn.forEach(function(oi){return tn.addKey(oi)}):tn.addKey(Mn)}(et||pt).forEach(function(Mn,ps){var Cn=et&&mn(et[ps]),ps=pt&&mn(pt[ps]);nr(Cn,ps)!==0&&(Cn!=null&&bn(Cn),ps!=null&&bn(ps))})}))):Ft?(qt={from:(qt=Ft.lower)!==null&&qt!==void 0?qt:A.MIN_KEY,to:(qt=Ft.upper)!==null&&qt!==void 0?qt:A.MAX_KEY},Bt.add(qt),kt.add(qt)):(kt.add(Y),Bt.add(Y),_e.indexes.forEach(function(Lt){return nt(Lt.name).add(Y)})),fe.mutate(Ze).then(function(Lt){return!Ft||Ze.type!=="add"&&Ze.type!=="put"||(kt.addKeys(Lt.results),Qe&&Qe.forEach(function(tn){for(var mn=Ze.values.map(function(Cn){return tn.extractKey(Cn)}),bn=tn.keyPath.findIndex(function(Cn){return Cn===Pe.keyPath}),Mn=0,oi=Lt.results.length;Mn<oi;++Mn)mn[Mn][bn]=Lt.results[Mn];nt(tn.name).addKeys(mn)})),xt.mutatedParts=mh(xt.mutatedParts||{},_t),Lt})}}),Ke=function(nt){var lt=nt.query,nt=lt.index,lt=lt.range;return[nt,new Us((nt=lt.lower)!==null&&nt!==void 0?nt:A.MIN_KEY,(lt=lt.upper)!==null&&lt!==void 0?lt:A.MAX_KEY)]},ot={get:function(Ze){return[Pe,new Us(Ze.key)]},getMany:function(Ze){return[Pe,new Us().addKeys(Ze.keys)]},count:Ke,query:Ke,openCursor:Ke};return a(ot).forEach(function(Ze){it[Ze]=function(nt){var lt=Ae.subscr,et=!!lt,pt=Xl(Ae,fe)&&Pb(Ze,nt)?nt.obsSet={}:lt;if(et){var xt=function(qt){return qt="idb://".concat(F,"/").concat(se,"/").concat(qt),pt[qt]||(pt[qt]=new Us)},_t=xt(""),kt=xt(":dels"),lt=ot[Ze](nt),et=lt[0],lt=lt[1];if((Ze==="query"&&et.isPrimaryKey&&!nt.values?kt:xt(et.name||"")).add(lt),!et.isPrimaryKey){if(Ze!=="count"){var Bt=Ze==="query"&&Ye&&nt.values&&fe.query(r(r({},nt),{values:!1}));return fe[Ze].apply(this,arguments).then(function(qt){if(Ze==="query"){if(Ye&&nt.values)return Bt.then(function(mn){return mn=mn.result,_t.addKeys(mn),qt});var Yt=nt.values?qt.result.map($e):qt.result;(nt.values?_t:kt).addKeys(Yt)}else if(Ze==="openCursor"){var Lt=qt,tn=nt.values;return Lt&&Object.create(Lt,{key:{get:function(){return kt.addKey(Lt.primaryKey),Lt.key}},primaryKey:{get:function(){var mn=Lt.primaryKey;return kt.addKey(mn),mn}},value:{get:function(){return tn&&_t.addKey(Lt.primaryKey),Lt.value}}})}return qt})}kt.add(Y)}}return fe[Ze].apply(this,arguments)}}),it}})}};function Fb(A,F,Y){if(Y.numFailures===0)return F;if(F.type==="deleteRange")return null;var se=F.keys?F.keys.length:"values"in F&&F.values?F.values.length:1;return Y.numFailures===se?null:(F=r({},F),o(F.keys)&&(F.keys=F.keys.filter(function(fe,_e){return!(_e in Y.failures)})),"values"in F&&o(F.values)&&(F.values=F.values.filter(function(fe,_e){return!(_e in Y.failures)})),F)}function vh(A,F){return Y=A,((se=F).lower===void 0||(se.lowerOpen?0<nr(Y,se.lower):0<=nr(Y,se.lower)))&&(A=A,(F=F).upper===void 0||(F.upperOpen?nr(A,F.upper)<0:nr(A,F.upper)<=0));var Y,se}function Zm(A,F,ot,se,fe,_e){if(!ot||ot.length===0)return A;var Pe=F.query.index,$e=Pe.multiEntry,Ye=F.query.range,Qe=se.schema.primaryKey.extractKey,it=Pe.extractKey,Ke=(Pe.lowLevelIndex||Pe).extractKey,ot=ot.reduce(function(Ze,nt){var lt=Ze,et=[];if(nt.type==="add"||nt.type==="put")for(var pt=new Us,xt=nt.values.length-1;0<=xt;--xt){var _t,kt=nt.values[xt],Bt=Qe(kt);pt.hasKey(Bt)||(_t=it(kt),($e&&o(_t)?_t.some(function(Lt){return vh(Lt,Ye)}):vh(_t,Ye))&&(pt.addKey(Bt),et.push(kt)))}switch(nt.type){case"add":var Zt=new Us().addKeys(F.values?Ze.map(function(tn){return Qe(tn)}):Ze),lt=Ze.concat(F.values?et.filter(function(tn){return tn=Qe(tn),!Zt.hasKey(tn)&&(Zt.addKey(tn),!0)}):et.map(function(tn){return Qe(tn)}).filter(function(tn){return!Zt.hasKey(tn)&&(Zt.addKey(tn),!0)}));break;case"put":var Ft=new Us().addKeys(nt.values.map(function(tn){return Qe(tn)}));lt=Ze.filter(function(tn){return!Ft.hasKey(F.values?Qe(tn):tn)}).concat(F.values?et:et.map(function(tn){return Qe(tn)}));break;case"delete":var qt=new Us().addKeys(nt.keys);lt=Ze.filter(function(tn){return!qt.hasKey(F.values?Qe(tn):tn)});break;case"deleteRange":var Yt=nt.range;lt=Ze.filter(function(tn){return!vh(Qe(tn),Yt)})}return lt},A);return ot===A?A:(ot.sort(function(Ze,nt){return nr(Ke(Ze),Ke(nt))||nr(Qe(Ze),Qe(nt))}),F.limit&&F.limit<1/0&&(ot.length>F.limit?ot.length=F.limit:A.length===F.limit&&ot.length<F.limit&&(fe.dirty=!0)),_e?Object.freeze(ot):ot)}function au(A,F){return nr(A.lower,F.lower)===0&&nr(A.upper,F.upper)===0&&!!A.lowerOpen==!!F.lowerOpen&&!!A.upperOpen==!!F.upperOpen}function Dd(A,F){return function(Y,se,fe,_e){if(Y===void 0)return se!==void 0?-1:0;if(se===void 0)return 1;if((se=nr(Y,se))===0){if(fe&&_e)return 0;if(fe)return 1;if(_e)return-1}return se}(A.lower,F.lower,A.lowerOpen,F.lowerOpen)<=0&&0<=function(Y,se,fe,_e){if(Y===void 0)return se!==void 0?1:0;if(se===void 0)return-1;if((se=nr(Y,se))===0){if(fe&&_e)return 0;if(fe)return-1;if(_e)return 1}return se}(A.upper,F.upper,A.upperOpen,F.upperOpen)}function G_(A,F,Y,se){A.subscribers.add(Y),se.addEventListener("abort",function(){var fe,_e;A.subscribers.delete(Y),A.subscribers.size===0&&(fe=A,_e=F,setTimeout(function(){fe.subscribers.size===0&&X(_e,fe)},3e3))})}var wh={stack:"dbcore",level:0,name:"Cache",create:function(A){var F=A.schema.name;return r(r({},A),{transaction:function(Y,se,fe){var _e,Pe,$e=A.transaction(Y,se,fe);return se==="readwrite"&&(Pe=(_e=new AbortController).signal,fe=function(Ye){return function(){if(_e.abort(),se==="readwrite"){for(var Qe=new Set,it=0,Ke=Y;it<Ke.length;it++){var ot=Ke[it],Ze=Yl["idb://".concat(F,"/").concat(ot)];if(Ze){var nt=A.table(ot),lt=Ze.optimisticOps.filter(function(tn){return tn.trans===$e});if($e._explicit&&Ye&&$e.mutatedParts)for(var et=0,pt=Object.values(Ze.queries.query);et<pt.length;et++)for(var xt=0,_t=(Zt=pt[et]).slice();xt<_t.length;xt++)Vm((Ft=_t[xt]).obsSet,$e.mutatedParts)&&(X(Zt,Ft),Ft.subscribers.forEach(function(tn){return Qe.add(tn)}));else if(0<lt.length){Ze.optimisticOps=Ze.optimisticOps.filter(function(tn){return tn.trans!==$e});for(var kt=0,Bt=Object.values(Ze.queries.query);kt<Bt.length;kt++)for(var Zt,Ft,qt,Yt=0,Lt=(Zt=Bt[kt]).slice();Yt<Lt.length;Yt++)(Ft=Lt[Yt]).res!=null&&$e.mutatedParts&&(Ye&&!Ft.dirty?(qt=Object.isFrozen(Ft.res),qt=Zm(Ft.res,Ft.req,lt,nt,Ft,qt),Ft.dirty?(X(Zt,Ft),Ft.subscribers.forEach(function(tn){return Qe.add(tn)})):qt!==Ft.res&&(Ft.res=qt,Ft.promise=L.resolve({result:qt}))):(Ft.dirty&&X(Zt,Ft),Ft.subscribers.forEach(function(tn){return Qe.add(tn)})))}}}Qe.forEach(function(tn){return tn()})}}},$e.addEventListener("abort",fe(!1),{signal:Pe}),$e.addEventListener("error",fe(!1),{signal:Pe}),$e.addEventListener("complete",fe(!0),{signal:Pe})),$e},table:function(Y){var se=A.table(Y),fe=se.schema.primaryKey;return r(r({},se),{mutate:function(_e){var Pe=Ae.trans;if(fe.outbound||Pe.db._options.cache==="disabled"||Pe.explicit||Pe.idbtrans.mode!=="readwrite")return se.mutate(_e);var $e=Yl["idb://".concat(F,"/").concat(Y)];return $e?(Pe=se.mutate(_e),_e.type!=="add"&&_e.type!=="put"||!(50<=_e.values.length||bh(fe,_e).some(function(Ye){return Ye==null}))?($e.optimisticOps.push(_e),_e.mutatedParts&&gh(_e.mutatedParts),Pe.then(function(Ye){0<Ye.numFailures&&(X($e.optimisticOps,_e),(Ye=Fb(0,_e,Ye))&&$e.optimisticOps.push(Ye),_e.mutatedParts&&gh(_e.mutatedParts))}),Pe.catch(function(){X($e.optimisticOps,_e),_e.mutatedParts&&gh(_e.mutatedParts)})):Pe.then(function(Ye){var Qe=Fb(0,r(r({},_e),{values:_e.values.map(function(it,Ke){var ot;return Ye.failures[Ke]?it:(it=(ot=fe.keyPath)!==null&&ot!==void 0&&ot.includes(".")?V(it):r({},it),M(it,fe.keyPath,Ye.results[Ke]),it)})}),Ye);$e.optimisticOps.push(Qe),queueMicrotask(function(){return _e.mutatedParts&&gh(_e.mutatedParts)})}),Pe):se.mutate(_e)},query:function(_e){if(!Xl(Ae,se)||!Pb("query",_e))return se.query(_e);var Pe=((Qe=Ae.trans)===null||Qe===void 0?void 0:Qe.db._options.cache)==="immutable",Ke=Ae,$e=Ke.requery,Ye=Ke.signal,Qe=function(nt,lt,et,pt){var xt=Yl["idb://".concat(nt,"/").concat(lt)];if(!xt)return[];if(!(lt=xt.queries[et]))return[null,!1,xt,null];var _t=lt[(pt.query?pt.query.index.name:null)||""];if(!_t)return[null,!1,xt,null];switch(et){case"query":var kt=_t.find(function(Bt){return Bt.req.limit===pt.limit&&Bt.req.values===pt.values&&au(Bt.req.query.range,pt.query.range)});return kt?[kt,!0,xt,_t]:[_t.find(function(Bt){return("limit"in Bt.req?Bt.req.limit:1/0)>=pt.limit&&(!pt.values||Bt.req.values)&&Dd(Bt.req.query.range,pt.query.range)}),!1,xt,_t];case"count":return kt=_t.find(function(Bt){return au(Bt.req.query.range,pt.query.range)}),[kt,!!kt,xt,_t]}}(F,Y,"query",_e),it=Qe[0],Ke=Qe[1],ot=Qe[2],Ze=Qe[3];return it&&Ke?it.obsSet=_e.obsSet:(Ke=se.query(_e).then(function(nt){var lt=nt.result;if(it&&(it.res=lt),Pe){for(var et=0,pt=lt.length;et<pt;++et)Object.freeze(lt[et]);Object.freeze(lt)}else nt.result=V(lt);return nt}).catch(function(nt){return Ze&&it&&X(Ze,it),Promise.reject(nt)}),it={obsSet:_e.obsSet,promise:Ke,subscribers:new Set,type:"query",req:_e,dirty:!1},Ze?Ze.push(it):(Ze=[it],(ot=ot||(Yl["idb://".concat(F,"/").concat(Y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[_e.query.index.name||""]=Ze)),G_(it,Ze,$e,Ye),it.promise.then(function(nt){return{result:Zm(nt.result,_e,ot==null?void 0:ot.optimisticOps,se,it,Pe)}})}})}})}};function Od(A,F){return new Proxy(A,{get:function(Y,se,fe){return se==="db"?F:Reflect.get(Y,se,fe)}})}var Pa=(Zr.prototype.version=function(A){if(isNaN(A)||A<.1)throw new xe.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new xe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var F=this._versions,Y=F.filter(function(se){return se._cfg.version===A})[0];return Y||(Y=new this.Version(A),F.push(Y),F.sort(Lm),Y.stores({}),this._state.autoSchema=!1,Y)},Zr.prototype._whenReady=function(A){var F=this;return this.idbdb&&(this._state.openComplete||Ae.letThrough||this._vip)?A():new L(function(Y,se){if(F._state.openComplete)return se(new xe.DatabaseClosed(F._state.dbOpenError));if(!F._state.isBeingOpened){if(!F._state.autoOpen)return void se(new xe.DatabaseClosed);F.open().catch(He)}F._state.dbReadyPromise.then(Y,se)}).then(A)},Zr.prototype.use=function(A){var F=A.stack,Y=A.create,se=A.level,fe=A.name;return fe&&this.unuse({stack:F,name:fe}),A=this._middlewares[F]||(this._middlewares[F]=[]),A.push({stack:F,create:Y,level:se??10,name:fe}),A.sort(function(_e,Pe){return _e.level-Pe.level}),this},Zr.prototype.unuse=function(A){var F=A.stack,Y=A.name,se=A.create;return F&&this._middlewares[F]&&(this._middlewares[F]=this._middlewares[F].filter(function(fe){return se?fe.create!==se:!!Y&&fe.name!==Y})),this},Zr.prototype.open=function(){var A=this;return Wo(ve,function(){return q_(A)})},Zr.prototype._close=function(){var A=this._state,F=mo.indexOf(this);if(0<=F&&mo.splice(F,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new L(function(Y){A.dbReadyResolve=Y}),A.openCanceller=new L(function(Y,se){A.cancelOpen=se}))},Zr.prototype.close=function(Y){var F=(Y===void 0?{disableAutoOpen:!0}:Y).disableAutoOpen,Y=this._state;F?(Y.isBeingOpened&&Y.cancelOpen(new xe.DatabaseClosed),this._close(),Y.autoOpen=!1,Y.dbOpenError=new xe.DatabaseClosed):(this._close(),Y.autoOpen=this._options.autoOpen||Y.isBeingOpened,Y.openComplete=!1,Y.dbOpenError=null)},Zr.prototype.delete=function(A){var F=this;A===void 0&&(A={disableAutoOpen:!0});var Y=0<arguments.length&&typeof arguments[0]!="object",se=this._state;return new L(function(fe,_e){function Pe(){F.close(A);var $e=F._deps.indexedDB.deleteDatabase(F.name);$e.onsuccess=Ie(function(){var Ye,Qe,it;Ye=F._deps,Qe=F.name,it=Ye.indexedDB,Ye=Ye.IDBKeyRange,hh(it)||Qe===zl||Bm(it,Ye).delete(Qe).catch(He),fe()}),$e.onerror=ga(_e),$e.onblocked=F._fireOnBlocked}if(Y)throw new xe.InvalidArgument("Invalid closeOptions argument to db.delete()");se.isBeingOpened?se.dbReadyPromise.then(Pe):Pe()})},Zr.prototype.backendDB=function(){return this.idbdb},Zr.prototype.isOpen=function(){return this.idbdb!==null},Zr.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},Zr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Zr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Zr.prototype,"tables",{get:function(){var A=this;return a(this._allTables).map(function(F){return A._allTables[F]})},enumerable:!1,configurable:!0}),Zr.prototype.transaction=function(){var A=(function(F,Y,se){var fe=arguments.length;if(fe<2)throw new xe.InvalidArgument("Too few arguments");for(var _e=new Array(fe-1);--fe;)_e[fe-1]=arguments[fe];return se=_e.pop(),[F,P(_e),se]}).apply(this,arguments);return this._transaction.apply(this,A)},Zr.prototype._transaction=function(A,F,Y){var se=this,fe=Ae.trans;fe&&fe.db===this&&A.indexOf("!")===-1||(fe=null);var _e,Pe,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(Pe=F.map(function(Qe){if(Qe=Qe instanceof se.Table?Qe.name:Qe,typeof Qe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Qe}),A=="r"||A===ma)_e=ma;else{if(A!="rw"&&A!=Ad)throw new xe.InvalidArgument("Invalid transaction mode: "+A);_e=Ad}if(fe){if(fe.mode===ma&&_e===Ad){if(!$e)throw new xe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");fe=null}fe&&Pe.forEach(function(Qe){if(fe&&fe.storeNames.indexOf(Qe)===-1){if(!$e)throw new xe.SubTransaction("Table "+Qe+" not included in parent transaction.");fe=null}}),$e&&fe&&!fe.active&&(fe=null)}}catch(Qe){return fe?fe._promise(null,function(it,Ke){Ke(Qe)}):rs(Qe)}var Ye=(function Qe(it,Ke,ot,Ze,nt){return L.resolve().then(function(){var lt=Ae.transless||Ae,et=it._createTransaction(Ke,ot,it._dbSchema,Ze);if(et.explicit=!0,lt={trans:et,transless:lt},Ze)et.idbtrans=Ze.idbtrans;else try{et.create(),et.idbtrans._explicit=!0,it._state.PR1398_maxLoop=3}catch(_t){return _t.name===De.InvalidState&&it.isOpen()&&0<--it._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),it.close({disableAutoOpen:!1}),it.open().then(function(){return Qe(it,Ke,ot,null,nt)})):rs(_t)}var pt,xt=ee(nt);return xt&&$n(),lt=L.follow(function(){var _t;(pt=nt.call(et,et))&&(xt?(_t=tr.bind(null,null),pt.then(_t,_t)):typeof pt.next=="function"&&typeof pt.throw=="function"&&(pt=Md(pt)))},lt),(pt&&typeof pt.then=="function"?L.resolve(pt).then(function(_t){return et.active?_t:rs(new xe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):lt.then(function(){return pt})).then(function(_t){return Ze&&et._resolve(),et._completion.then(function(){return _t})}).catch(function(_t){return et._reject(_t),rs(_t)})})}).bind(null,this,_e,Pe,fe,Y);return fe?fe._promise(_e,Ye,"lock"):Ae.trans?Wo(Ae.transless,function(){return se._whenReady(Ye)}):this._whenReady(Ye)},Zr.prototype.table=function(A){if(!h(this._allTables,A))throw new xe.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},Zr);function Zr(A,F){var Y=this;this._middlewares={},this.verno=0;var se=Zr.dependencies;this._options=F=r({addons:Zr.addons,autoOpen:!0,indexedDB:se.indexedDB,IDBKeyRange:se.IDBKeyRange,cache:"cloned"},F),this._deps={indexedDB:F.indexedDB,IDBKeyRange:F.IDBKeyRange},se=F.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var fe,_e,Pe,$e,Ye,Qe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:F.autoOpen};Qe.dbReadyPromise=new L(function(Ke){Qe.dbReadyResolve=Ke}),Qe.openCanceller=new L(function(Ke,ot){Qe.cancelOpen=ot}),this._state=Qe,this.name=A,this.on=Qo(this,"populate","blocked","versionchange","close",{ready:[Ee,He]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(Ke){return function(ot,Ze){Zr.vip(function(){var nt,lt=Y._state;lt.openComplete?(lt.dbOpenError||L.resolve().then(ot),Ze&&Ke(ot)):lt.onReadyBeingFired?(lt.onReadyBeingFired.push(ot),Ze&&Ke(ot)):(Ke(ot),nt=Y,Ze||Ke(function et(){nt.on.ready.unsubscribe(ot),nt.on.ready.unsubscribe(et)}))})}}),this.Collection=(fe=this,Zc(Qc.prototype,function(pt,et){this.db=fe;var Ze=Ul,nt=null;if(et)try{Ze=et()}catch(xt){nt=xt}var lt=pt._ctx,et=lt.table,pt=et.hook.reading.fire;this._ctx={table:et,index:lt.index,isPrimKey:!lt.index||et.schema.primKey.keyPath&&lt.index===et.schema.primKey.name,range:Ze,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:nt,or:lt.or,valueMapper:pt!==Ne?pt:null}})),this.Table=(_e=this,Zc(jm.prototype,function(Ke,ot,Ze){this.db=_e,this._tx=Ze,this.name=Ke,this.schema=ot,this.hook=_e._allTables[Ke]?_e._allTables[Ke].hook:Qo(null,{creating:[ke,He],reading:[H,Ne],updating:[oe,He],deleting:[ae,He]})})),this.Transaction=(Pe=this,Zc(Fm.prototype,function(Ke,ot,Ze,nt,lt){var et=this;this.db=Pe,this.mode=Ke,this.storeNames=ot,this.schema=Ze,this.chromeTransactionDurability=nt,this.idbtrans=null,this.on=Qo(this,"complete","error","abort"),this.parent=lt||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(pt,xt){et._resolve=pt,et._reject=xt}),this._completion.then(function(){et.active=!1,et.on.complete.fire()},function(pt){var xt=et.active;return et.active=!1,et.on.error.fire(pt),et.parent?et.parent._reject(pt):xt&&et.idbtrans&&et.idbtrans.abort(),rs(pt)})})),this.Version=($e=this,Zc(U_.prototype,function(Ke){this.db=$e,this._cfg={version:Ke,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ye=this,Zc(Hl.prototype,function(Ke,ot,Ze){if(this.db=Ye,this._ctx={table:Ke,index:ot===":id"?null:ot,or:Ze},this._cmp=this._ascending=nr,this._descending=function(nt,lt){return nr(lt,nt)},this._max=function(nt,lt){return 0<nr(nt,lt)?nt:lt},this._min=function(nt,lt){return nr(nt,lt)<0?nt:lt},this._IDBKeyRange=Ye._deps.IDBKeyRange,!this._IDBKeyRange)throw new xe.MissingAPI})),this.on("versionchange",function(Ke){0<Ke.newVersion?console.warn("Another connection wants to upgrade database '".concat(Y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Y.name,"'. Closing db now to resume the delete request.")),Y.close({disableAutoOpen:!1})}),this.on("blocked",function(Ke){!Ke.newVersion||Ke.newVersion<Ke.oldVersion?console.warn("Dexie.delete('".concat(Y.name,"') was blocked")):console.warn("Upgrade '".concat(Y.name,"' blocked by other connection holding version ").concat(Ke.oldVersion/10))}),this._maxKey=ru(F.IDBKeyRange),this._createTransaction=function(Ke,ot,Ze,nt){return new Y.Transaction(Ke,ot,Ze,Y._options.chromeTransactionDurability,nt)},this._fireOnBlocked=function(Ke){Y.on("blocked").fire(Ke),mo.filter(function(ot){return ot.name===Y.name&&ot!==Y&&!ot._state.vcFired}).map(function(ot){return ot.on("versionchange").fire(Ke)})},this.use(Ob),this.use(wh),this.use(H_),this.use(V_),this.use(Db);var it=new Proxy(this,{get:function(Ke,ot,Ze){if(ot==="_vip")return!0;if(ot==="table")return function(lt){return Od(Y.table(lt),it)};var nt=Reflect.get(Ke,ot,Ze);return nt instanceof jm?Od(nt,it):ot==="tables"?nt.map(function(lt){return Od(lt,it)}):ot==="_createTransaction"?function(){return Od(nt.apply(this,arguments),it)}:nt}});this.vip=it,se.forEach(function(Ke){return Ke(Y)})}var ou,Pi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Lb=(xh.prototype.subscribe=function(A,F,Y){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:F,complete:Y})},xh.prototype[Pi]=function(){return this},xh);function xh(A){this._subscribe=A}try{ou={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{ou={indexedDB:null,IDBKeyRange:null}}function $b(A){var F,Y=!1,se=new Lb(function(fe){var _e=ee(A),Pe,$e=!1,Ye={},Qe={},it={get closed(){return $e},unsubscribe:function(){$e||($e=!0,Pe&&Pe.abort(),Ke&&zs.storagemutated.unsubscribe(Ze))}};fe.start&&fe.start(it);var Ke=!1,ot=function(){return Yo(nt)},Ze=function(lt){mh(Ye,lt),Vm(Qe,Ye)&&ot()},nt=function(){var lt,et,pt;!$e&&ou.indexedDB&&(Ye={},lt={},Pe&&Pe.abort(),Pe=new AbortController,pt=function(xt){var _t=G();try{_e&&$n();var kt=an(A,xt);return kt=_e?kt.finally(tr):kt}finally{_t&&q()}}(et={subscr:lt,signal:Pe.signal,requery:ot,querier:A,trans:null}),Promise.resolve(pt).then(function(xt){Y=!0,F=xt,$e||et.signal.aborted||(Ye={},function(_t){for(var kt in _t)if(h(_t,kt))return;return 1}(Qe=lt)||Ke||(zs(tu,Ze),Ke=!0),Yo(function(){return!$e&&fe.next&&fe.next(xt)}))},function(xt){Y=!1,["DatabaseClosedError","AbortError"].includes(xt==null?void 0:xt.name)||$e||Yo(function(){$e||fe.error&&fe.error(xt)})}))};return setTimeout(ot,0),it});return se.hasValue=function(){return Y},se.getValue=function(){return F},se}var Jl=Pa;function Ym(A){var F=nl;try{nl=!0,zs.storagemutated.fire(A),Km(A,!0)}finally{nl=F}}m(Jl,r(r({},st),{delete:function(A){return new Jl(A,{addons:[]}).delete()},exists:function(A){return new Jl(A,{addons:[]}).open().then(function(F){return F.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return F=Jl.dependencies,Y=F.indexedDB,F=F.IDBKeyRange,(hh(Y)?Promise.resolve(Y.databases()).then(function(se){return se.map(function(fe){return fe.name}).filter(function(fe){return fe!==zl})}):Bm(Y,F).toCollection().primaryKeys()).then(A)}catch{return rs(new xe.MissingAPI)}var F,Y},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return Ae.trans?Wo(Ae.transless,A):A()},vip:zm,async:function(A){return function(){try{var F=Md(A.apply(this,arguments));return F&&typeof F.then=="function"?F:L.resolve(F)}catch(Y){return rs(Y)}}},spawn:function(A,F,Y){try{var se=Md(A.apply(Y,F||[]));return se&&typeof se.then=="function"?se:L.resolve(se)}catch(fe){return rs(fe)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(A,F){return F=L.resolve(typeof A=="function"?Jl.ignoreTransaction(A):A).timeout(F||6e4),Ae.trans?Ae.trans.waitFor(F):F},Promise:L,debug:{get:function(){return Le},set:function(A){Te(A)}},derive:b,extend:l,props:m,override:E,Events:Qo,on:zs,liveQuery:$b,extendObservabilitySet:mh,getByKeyPath:R,setByKeyPath:M,delByKeyPath:function(A,F){typeof F=="string"?M(A,F,void 0):"length"in F&&[].map.call(F,function(Y){M(A,Y,void 0)})},shallowClone:I,deepClone:V,getObjectDiff:yh,cmp:nr,asap:T,minKey:-1/0,addons:[],connections:mo,errnames:De,dependencies:ou,cache:Yl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,F,Y){return A+F/Math.pow(10,2*Y)})})),Jl.maxKey=ru(Jl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zs(tu,function(A){nl||(A=new CustomEvent(Kl,{detail:A}),nl=!0,dispatchEvent(A),nl=!1)}),addEventListener(Kl,function(A){A=A.detail,nl||Ym(A)}));var lu,nl=!1,vi=function(){};return typeof BroadcastChannel<"u"&&((vi=function(){(lu=new BroadcastChannel(Kl)).onmessage=function(A){return A.data&&Ym(A.data)}})(),typeof lu.unref=="function"&&lu.unref(),zs(tu,function(A){nl||lu.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!Pa.disableBfCache&&A.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),lu!=null&&lu.close();for(var F=0,Y=mo;F<Y.length;F++)Y[F].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!Pa.disableBfCache&&A.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),vi(),Ym({all:new Us(-1/0,[[]])}))})),L.rejectionMapper=function(A,F){return!A||A instanceof he||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Fe[A.name]?A:(F=new Fe[A.name](F||A.message,A),"stack"in A&&v(F,"stack",{get:function(){return this.inner.stack}}),F)},Te(Le),r(Pa,Object.freeze({__proto__:null,Dexie:Pa,liveQuery:$b,Entity:nh,cmp:nr,PropModification:Jc,replacePrefix:function(A,F){return new Jc({replacePrefix:[A,F]})},add:function(A){return new Jc({add:A})},remove:function(A){return new Jc({remove:A})},default:Pa,RangeSet:Us,mergeRanges:Zl,rangesOverlap:Ib}),{default:Pa}),Pa})}(vw)),vw.exports}var IX=NX();const zk=Ni(IX),B4=Symbol.for("Dexie"),Fw=globalThis[B4]||(globalThis[B4]=zk);if(zk.semVer!==Fw.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${zk.semVer} and ${Fw.semVer}`);const{liveQuery:f3e,mergeRanges:h3e,rangesOverlap:p3e,RangeSet:m3e,cmp:g3e,Entity:y3e,PropModification:b3e,replacePrefix:v3e,add:w3e,remove:x3e}=Fw;class jX extends Fw{constructor(){super("LiteChatDatabase_Rewrite_v1");Me(this,"conversations");Me(this,"interactions");Me(this,"mods");Me(this,"appState");Me(this,"providerConfigs");Me(this,"apiKeys");Me(this,"syncRepos");Me(this,"projects");Me(this,"rules");Me(this,"tags");Me(this,"tagRuleLinks");this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Ct=new jX,Ks=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Nt{static async loadConversations(){try{return(await Ct.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Ks(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Ct.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Ct.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Ct.interactions.where({conversationId:t}).sortBy("index")).map(r=>Ks(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Ct.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Ct.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Ct.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Ct.mods.orderBy("loadOrder").toArray()).map(n=>Ks(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Ct.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Ct.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Ct.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Ct.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Ct.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Ks(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Ct.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Ct.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Ct.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Ks(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Ct.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Ct.transaction("rw",[Ct.apiKeys,Ct.providerConfigs],async()=>{const n=await Ct.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(s=>Ct.providerConfigs.update(s.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Ct.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Ct.syncRepos.toArray()).map(n=>Ks(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Ct.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Ct.transaction("rw",[Ct.syncRepos,Ct.conversations],async()=>{const n=await Ct.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(s=>Ct.conversations.update(s.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Ct.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Ct.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Ks(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Ct.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const s=await Ct.projects.where("parentId").equals(r).toArray();for(const a of s)await n(a.id);const i=await Ct.conversations.where("projectId").equals(r).toArray();if(i.length>0){const a=i.map(o=>Ct.conversations.update(o.id,{projectId:null}));await Promise.all(a),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Ct.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Ct.transaction("rw",[Ct.projects,Ct.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Ct.rules.orderBy("name").toArray()).map(n=>Ks(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Ct.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Ct.transaction("rw",[Ct.rules,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("ruleId").equals(t).delete(),await Ct.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Ct.tags.orderBy("name").toArray()).map(n=>Ks(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Ct.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Ct.transaction("rw",[Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("tagId").equals(t).delete(),await Ct.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Ct.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Ct.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Ct.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Ct.appState.toArray();n.settings={},r.forEach(s=>{s.key.startsWith("settings:")&&(n.settings[s.key.substring(9)]=s.value)})}return t.importApiKeys&&(n.apiKeys=await Ct.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Ct.providerConfigs.toArray()),t.importProjects&&(n.projects=await Ct.projects.toArray()),t.importConversations&&(n.conversations=await Ct.conversations.toArray(),n.interactions=await Ct.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Ct.rules.toArray(),n.tags=await Ct.tags.toArray(),n.tagRuleLinks=await Ct.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Ct.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Ct.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Ct.transaction("rw",[Ct.appState,Ct.apiKeys,Ct.providerConfigs,Ct.projects,Ct.conversations,Ct.interactions,Ct.rules,Ct.tags,Ct.tagRuleLinks,Ct.mods,Ct.syncRepos],async()=>{if(n.importSettings&&await Ct.appState.clear(),n.importApiKeys&&await Ct.apiKeys.clear(),n.importProviderConfigs&&await Ct.providerConfigs.clear(),n.importProjects&&await Ct.projects.clear(),n.importConversations&&(await Ct.conversations.clear(),await Ct.interactions.clear()),n.importRulesAndTags&&(await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()),n.importMods&&await Ct.mods.clear(),n.importSyncRepos&&await Ct.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([s,i])=>({key:`settings:${s}`,value:i}));await Ct.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Ct.apiKeys.bulkPut(t.apiKeys.map(r=>Ks(r))),n.importProviderConfigs&&t.providerConfigs&&await Ct.providerConfigs.bulkPut(t.providerConfigs.map(r=>Ks(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Ct.projects.bulkPut(t.projects.map(r=>Ks(r))),n.importConversations&&t.conversations&&(await Ct.conversations.bulkPut(t.conversations.map(r=>Ks(r,["lastSyncedAt"]))),t.interactions&&await Ct.interactions.bulkPut(t.interactions.map(r=>Ks(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Ct.rules.bulkPut(t.rules.map(r=>Ks(r))),t.tags&&await Ct.tags.bulkPut(t.tags.map(r=>Ks(r))),t.tagRuleLinks&&await Ct.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Ct.mods.bulkPut(t.mods.map(r=>Ks(r))),n.importSyncRepos&&t.syncRepos&&await Ct.syncRepos.bulkPut(t.syncRepos.map(r=>Ks(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Ct.transaction("rw",[Ct.conversations,Ct.interactions,Ct.mods,Ct.appState,Ct.providerConfigs,Ct.apiKeys,Ct.syncRepos,Ct.projects,Ct.rules,Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.interactions.clear(),await Ct.conversations.clear(),await Ct.projects.clear(),await Ct.mods.clear(),await Ct.appState.clear(),await Ct.providerConfigs.clear(),await Ct.apiKeys.clear(),await Ct.syncRepos.clear(),await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const zn={loaded:"interaction.loaded",currentConversationIdChanged:"interaction.current.conversation.id.changed",added:"interaction.added",updated:"interaction.updated",streamingIdsChanged:"interaction.streaming.ids.changed",activeStreamBuffersChanged:"interaction.active.stream.buffers.changed",activeReasoningBuffersChanged:"interaction.active.reasoning.buffers.changed",statusChanged:"interaction.status.changed",errorChanged:"interaction.error.changed",interactionRated:"interaction.rated",started:"interaction.sdk.started",streamChunk:"interaction.sdk.streamChunk",completed:"interaction.sdk.completed",loadInteractionsRequest:"interaction.load.interactions.request",rateInteractionRequest:"interaction.rate.interaction.request",setCurrentConversationIdRequest:"interaction.set.current.conversation.id.request",clearInteractionsRequest:"interaction.clear.interactions.request",setErrorRequest:"interaction.set.error.request",setStatusRequest:"interaction.set.status.request"};var Ao=j8();const c5=Ni(Ao);function MX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const DX=e=>{switch(e){case"success":return FX;case"info":return $X;case"warning":return LX;case"error":return BX;default:return null}},OX=Array(12).fill(0),PX=({visible:e,className:t})=>yt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},yt.createElement("div",{className:"sonner-spinner"},OX.map((n,r)=>yt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),FX=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),LX=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),$X=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),BX=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),zX=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},yt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),yt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),UX=()=>{const[e,t]=yt.useState(document.hidden);return yt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Uk=1;class qX{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Uk++,a=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...s,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,a;const o=s.then(async c=>{if(a=["resolve",c],yt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(HX(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async c=>{if(a=["reject",c],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof d=="object"&&!yt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,d)=>o.then(()=>a[0]==="reject"?d(a[1]):c(a[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||Uk++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ta=new qX,VX=(e,t)=>{const n=(t==null?void 0:t.id)||Uk++;return ta.addToast({title:e,...t,id:n}),n},HX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",GX=VX,KX=()=>ta.toasts,WX=()=>ta.getActiveToasts(),ze=Object.assign(GX,{success:ta.success,info:ta.info,warning:ta.warning,error:ta.error,custom:ta.custom,message:ta.message,promise:ta.promise,dismiss:ta.dismiss,loading:ta.loading},{getHistory:KX,getToasts:WX});MX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Lv(e){return e.label!==void 0}const ZX=3,YX="24px",XX="16px",z4=4e3,JX=356,QX=14,eJ=45,tJ=200;function cl(...e){return e.filter(Boolean).join(" ")}function nJ(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const rJ=e=>{var t,n,r,s,i,a,o,l,c;const{invert:d,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:b,heights:w,index:x,toasts:_,expanded:E,removeToast:k,defaultRichColors:T,closeButton:R,style:M,cancelButtonStyle:I,actionButtonStyle:O,className:P="",descriptionClassName:U="",duration:j,position:V,gap:$,expandByDefault:re,classNames:J,icons:te,closeButtonAriaLabel:X="Close toast"}=e,[ie,Z]=yt.useState(null),[ee,Q]=yt.useState(null),[he,Se]=yt.useState(!1),[ce,je]=yt.useState(!1),[De,Re]=yt.useState(!1),[xe,Fe]=yt.useState(!1),[st,He]=yt.useState(!1),[Ne,H]=yt.useState(0),[ue,ke]=yt.useState(0),ae=yt.useRef(h.duration||j||z4),oe=yt.useRef(null),ne=yt.useRef(null),Ee=x===0,Le=x+1<=b,Te=h.type,Xe=h.dismissible!==!1,St=h.className||"",dt=h.descriptionClassName||"",It=yt.useMemo(()=>w.findIndex(we=>we.toastId===h.id)||0,[w,h.id]),Vt=yt.useMemo(()=>{var we;return(we=h.closeButton)!=null?we:R},[h.closeButton,R]),Dt=yt.useMemo(()=>h.duration||j||z4,[h.duration,j]),Kt=yt.useRef(0),be=yt.useRef(0),D=yt.useRef(0),K=yt.useRef(null),[pe,Oe]=V.split("-"),ve=yt.useMemo(()=>w.reduce((we,Ue,Et)=>Et>=It?we:we+Ue.height,0),[w,It]),Ae=UX(),de=h.invert||d,ht=Te==="loading";be.current=yt.useMemo(()=>It*$+ve,[It,ve]),yt.useEffect(()=>{ae.current=Dt},[Dt]),yt.useEffect(()=>{Se(!0)},[]),yt.useEffect(()=>{const we=ne.current;if(we){const Ue=we.getBoundingClientRect().height;return ke(Ue),v(Et=>[{toastId:h.id,height:Ue,position:h.position},...Et]),()=>v(Et=>Et.filter(me=>me.toastId!==h.id))}},[v,h.id]),yt.useLayoutEffect(()=>{if(!he)return;const we=ne.current,Ue=we.style.height;we.style.height="auto";const Et=we.getBoundingClientRect().height;we.style.height=Ue,ke(Et),v(me=>me.find(q=>q.toastId===h.id)?me.map(q=>q.toastId===h.id?{...q,height:Et}:q):[{toastId:h.id,height:Et,position:h.position},...me])},[he,h.title,h.description,v,h.id]);const wt=yt.useCallback(()=>{je(!0),H(be.current),v(we=>we.filter(Ue=>Ue.toastId!==h.id)),setTimeout(()=>{k(h)},tJ)},[h,k,v,be]);yt.useEffect(()=>{if(h.promise&&Te==="loading"||h.duration===1/0||h.type==="loading")return;let we;return E||g||Ae?(()=>{if(D.current<Kt.current){const me=new Date().getTime()-Kt.current;ae.current=ae.current-me}D.current=new Date().getTime()})():(()=>{ae.current!==1/0&&(Kt.current=new Date().getTime(),we=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),wt()},ae.current))})(),()=>clearTimeout(we)},[E,g,h,Te,Ae,wt]),yt.useEffect(()=>{h.delete&&wt()},[wt,h.delete]);function L(){var we;if(te!=null&&te.loading){var Ue;return yt.createElement("div",{className:cl(J==null?void 0:J.loader,h==null||(Ue=h.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":Te==="loading"},te.loading)}return yt.createElement(PX,{className:cl(J==null?void 0:J.loader,h==null||(we=h.classNames)==null?void 0:we.loader),visible:Te==="loading"})}const Be=h.icon||(te==null?void 0:te[Te])||DX(Te);var rt,ye;return yt.createElement("li",{tabIndex:0,ref:ne,className:cl(P,St,J==null?void 0:J.toast,h==null||(t=h.classNames)==null?void 0:t.toast,J==null?void 0:J.default,J==null?void 0:J[Te],h==null||(n=h.classNames)==null?void 0:n[Te]),"data-sonner-toast":"","data-rich-colors":(rt=h.richColors)!=null?rt:T,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":he,"data-promise":!!h.promise,"data-swiped":st,"data-removed":ce,"data-visible":Le,"data-y-position":pe,"data-x-position":Oe,"data-index":x,"data-front":Ee,"data-swiping":De,"data-dismissible":Xe,"data-type":Te,"data-invert":de,"data-swipe-out":xe,"data-swipe-direction":ee,"data-expanded":!!(E||re&&he),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${ce?Ne:be.current}px`,"--initial-height":re?"auto":`${ue}px`,...M,...h.style},onDragEnd:()=>{Re(!1),Z(null),K.current=null},onPointerDown:we=>{ht||!Xe||(oe.current=new Date,H(be.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(Re(!0),K.current={x:we.clientX,y:we.clientY}))},onPointerUp:()=>{var we,Ue,Et;if(xe||!Xe)return;K.current=null;const me=Number(((we=ne.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),G=Number(((Ue=ne.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),q=new Date().getTime()-((Et=oe.current)==null?void 0:Et.getTime()),W=ie==="x"?me:G,ge=Math.abs(W)/q;if(Math.abs(W)>=eJ||ge>.11){H(be.current),h.onDismiss==null||h.onDismiss.call(h,h),Q(ie==="x"?me>0?"right":"left":G>0?"down":"up"),wt(),Fe(!0);return}else{var Ie,Ge;(Ie=ne.current)==null||Ie.style.setProperty("--swipe-amount-x","0px"),(Ge=ne.current)==null||Ge.style.setProperty("--swipe-amount-y","0px")}He(!1),Re(!1),Z(null)},onPointerMove:we=>{var Ue,Et,me;if(!K.current||!Xe||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;const q=we.clientY-K.current.y,W=we.clientX-K.current.x;var ge;const Ie=(ge=e.swipeDirections)!=null?ge:nJ(V);!ie&&(Math.abs(W)>1||Math.abs(q)>1)&&Z(Math.abs(W)>Math.abs(q)?"x":"y");let Ge={x:0,y:0};const bt=Wt=>1/(1.5+Math.abs(Wt)/20);if(ie==="y"){if(Ie.includes("top")||Ie.includes("bottom"))if(Ie.includes("top")&&q<0||Ie.includes("bottom")&&q>0)Ge.y=q;else{const Wt=q*bt(q);Ge.y=Math.abs(Wt)<Math.abs(q)?Wt:q}}else if(ie==="x"&&(Ie.includes("left")||Ie.includes("right")))if(Ie.includes("left")&&W<0||Ie.includes("right")&&W>0)Ge.x=W;else{const Wt=W*bt(W);Ge.x=Math.abs(Wt)<Math.abs(W)?Wt:W}(Math.abs(Ge.x)>0||Math.abs(Ge.y)>0)&&He(!0),(Et=ne.current)==null||Et.style.setProperty("--swipe-amount-x",`${Ge.x}px`),(me=ne.current)==null||me.style.setProperty("--swipe-amount-y",`${Ge.y}px`)}},Vt&&!h.jsx&&Te!=="loading"?yt.createElement("button",{"aria-label":X,"data-disabled":ht,"data-close-button":!0,onClick:ht||!Xe?()=>{}:()=>{wt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:cl(J==null?void 0:J.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ye=te==null?void 0:te.close)!=null?ye:zX):null,(Te||h.icon||h.promise)&&h.icon!==null&&((te==null?void 0:te[Te])!==null||h.icon)?yt.createElement("div",{"data-icon":"",className:cl(J==null?void 0:J.icon,h==null||(s=h.classNames)==null?void 0:s.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||L():null,h.type!=="loading"?Be:null):null,yt.createElement("div",{"data-content":"",className:cl(J==null?void 0:J.content,h==null||(i=h.classNames)==null?void 0:i.content)},yt.createElement("div",{"data-title":"",className:cl(J==null?void 0:J.title,h==null||(a=h.classNames)==null?void 0:a.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?yt.createElement("div",{"data-description":"",className:cl(U,dt,J==null?void 0:J.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),yt.isValidElement(h.cancel)?h.cancel:h.cancel&&Lv(h.cancel)?yt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||I,onClick:we=>{Lv(h.cancel)&&Xe&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,we),wt())},className:cl(J==null?void 0:J.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,yt.isValidElement(h.action)?h.action:h.action&&Lv(h.action)?yt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:we=>{Lv(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,we),!we.defaultPrevented&&wt())},className:cl(J==null?void 0:J.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function U4(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function sJ(e,t){const n={};return[e,t].forEach((r,s)=>{const i=s===1,a=i?"--mobile-offset":"--offset",o=i?XX:YX;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${a}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${a}-${c}`]=o:n[`${a}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(o)}),n}const iJ=yt.forwardRef(function(t,n){const{invert:r,position:s="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:b=ZX,toastOptions:w,dir:x=U4(),gap:_=QX,icons:E,containerAriaLabel:k="Notifications"}=t,[T,R]=yt.useState([]),M=yt.useMemo(()=>Array.from(new Set([s].concat(T.filter(ee=>ee.position).map(ee=>ee.position)))),[T,s]),[I,O]=yt.useState([]),[P,U]=yt.useState(!1),[j,V]=yt.useState(!1),[$,re]=yt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=yt.useRef(null),te=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=yt.useRef(null),ie=yt.useRef(!1),Z=yt.useCallback(ee=>{R(Q=>{var he;return(he=Q.find(Se=>Se.id===ee.id))!=null&&he.delete||ta.dismiss(ee.id),Q.filter(({id:Se})=>Se!==ee.id)})},[]);return yt.useEffect(()=>ta.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{R(Q=>Q.map(he=>he.id===ee.id?{...he,delete:!0}:he))});return}setTimeout(()=>{c5.flushSync(()=>{R(Q=>{const he=Q.findIndex(Se=>Se.id===ee.id);return he!==-1?[...Q.slice(0,he),{...Q[he],...ee},...Q.slice(he+1)]:[ee,...Q]})})})}),[T]),yt.useEffect(()=>{if(h!=="system"){re(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:Q})=>{re(Q?"dark":"light")})}catch{ee.addListener(({matches:he})=>{try{re(he?"dark":"light")}catch(Se){console.error(Se)}})}},[h]),yt.useEffect(()=>{T.length<=1&&U(!1)},[T]),yt.useEffect(()=>{const ee=Q=>{var he;if(i.every(je=>Q[je]||Q.code===je)){var ce;U(!0),(ce=J.current)==null||ce.focus()}Q.code==="Escape"&&(document.activeElement===J.current||(he=J.current)!=null&&he.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[i]),yt.useEffect(()=>{if(J.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ie.current=!1)}},[J.current]),yt.createElement("section",{ref:n,"aria-label":`${k} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((ee,Q)=>{var he;const[Se,ce]=ee.split("-");return T.length?yt.createElement("ol",{key:ee,dir:x==="auto"?U4():x,tabIndex:-1,ref:J,className:l,"data-sonner-toaster":!0,"data-sonner-theme":$,"data-y-position":Se,"data-lifted":P&&T.length>1&&!a,"data-x-position":ce,style:{"--front-toast-height":`${((he=I[0])==null?void 0:he.height)||0}px`,"--width":`${JX}px`,"--gap":`${_}px`,...v,...sJ(c,d)},onBlur:je=>{ie.current&&!je.currentTarget.contains(je.relatedTarget)&&(ie.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,X.current=je.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{j||U(!1)},onDragEnd:()=>U(!1),onPointerDown:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},T.filter(je=>!je.position&&Q===0||je.position===ee).map((je,De)=>{var Re,xe;return yt.createElement(rJ,{key:je.id,icons:E,index:De,toast:je,defaultRichColors:m,duration:(Re=w==null?void 0:w.duration)!=null?Re:g,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:b,closeButton:(xe=w==null?void 0:w.closeButton)!=null?xe:o,interacting:j,position:ee,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,closeButtonAriaLabel:w==null?void 0:w.closeButtonAriaLabel,removeToast:Z,toasts:T.filter(Fe=>Fe.position==je.position),heights:I.filter(Fe=>Fe.position==je.position),setHeights:O,expandByDefault:a,gap:_,expanded:P,swipeDirections:t.swipeDirections})})):null}))}),Hn=lo(co((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(t().currentConversationId!==n){console.warn(`InteractionStore: loadInteractions called for ${n}, but current is ${t().currentConversationId}. Aborting load.`);return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{}}),r!=="loading"&&We.emit(zn.statusChanged,{status:"loading"});try{const s=await Nt.loadInteractionsForConversation(n);s.sort((i,a)=>i.index-a.index),t().currentConversationId===n?(e({interactions:s,status:"idle"}),We.emit(zn.loaded,{conversationId:n,interactions:s}),We.emit(zn.statusChanged,{status:"idle"})):console.warn(`InteractionStore: loadInteractions for ${n} completed, but currentConversationId changed during fetch to ${t().currentConversationId}. Discarding.`)}catch(s){console.error(`InteractionStore: Error loading interactions for ${n}`,s),t().currentConversationId===n&&(e({error:"Failed load interactions",status:"error"}),We.emit(zn.statusChanged,{status:"error"}),We.emit(zn.errorChanged,{error:"Failed load interactions"}))}},_addInteractionToState:n=>{e(r=>{if(r.currentConversationId!==n.conversationId){console.warn(`InteractionStore: Attempted to add interaction for ${n.conversationId} but current is ${r.currentConversationId}. Skipping.`);return}if(!r.interactions.some(s=>s.id===n.id))r.interactions.push(n),r.interactions.sort((s,i)=>s.index-i.index);else{const s=r.interactions.findIndex(i=>i.id===n.id);s!==-1&&(r.interactions[s]={...r.interactions[s],...n})}}),We.emit(zn.added,{interaction:n})},_updateInteractionInState:(n,r)=>{e(s=>{const i=s.interactions.findIndex(a=>a.id===n);if(i!==-1){if(s.currentConversationId!==s.interactions[i].conversationId){console.warn(`InteractionStore: Attempted to update interaction ${n} which is not in the current conversation ${s.currentConversationId}. Skipping.`);return}const a=s.interactions[i];let o={...a.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]),r.metadata.reasoning!==void 0&&(o.reasoning=r.metadata.reasoning));const l={...a,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),s.interactions[i]=l}}),We.emit(zn.updated,{interactionId:n,updates:r})},appendInteractionResponseChunk:(n,r)=>{e(s=>{var i;s.streamingInteractionIds.includes(n)&&s.currentConversationId===((i=s.interactions.find(a=>a.id===n))==null?void 0:i.conversationId)&&(s.activeStreamBuffers[n]=(s.activeStreamBuffers[n]||"")+r)}),We.emit(zn.activeStreamBuffersChanged,{buffers:t().activeStreamBuffers})},appendReasoningChunk:(n,r)=>{e(s=>{var i;s.streamingInteractionIds.includes(n)&&s.currentConversationId===((i=s.interactions.find(a=>a.id===n))==null?void 0:i.conversationId)&&(s.activeReasoningBuffers[n]=(s.activeReasoningBuffers[n]||"")+r)}),We.emit(zn.activeReasoningBuffersChanged,{buffers:t().activeReasoningBuffers})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(s=>s.id!==n)})},rateInteraction:async(n,r)=>{const s=t().interactions.find(i=>i.id===n);if(s&&t().currentConversationId===s.conversationId){t()._updateInteractionInState(n,{rating:r});try{await Nt.saveInteraction({...s,rating:r}),We.emit(zn.interactionRated,{interactionId:n,rating:r})}catch{t()._updateInteractionInState(n,{rating:s.rating}),ze.error("Failed to save rating.")}}},setCurrentConversationId:async n=>{const r=t().currentConversationId;if(r===n){n&&t().interactions.length===0&&t().status!=="loading"?(console.warn(`InteractionStore: Current ID ${n} matches, but no interactions. Forcing reload.`),await t().loadInteractions(n)):console.log(`InteractionStore: setCurrentConversationId called with the same ID (${n}). No change needed or already handled.`);return}console.log(`InteractionStore: Setting current conversation ID from ${r} to ${n}`),e({currentConversationId:n}),We.emit(zn.currentConversationIdChanged,{conversationId:n}),n?await t().loadInteractions(n):t().clearInteractions()},clearInteractions:()=>{const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&We.emit(zn.statusChanged,{status:"idle"}),We.emit(zn.currentConversationIdChanged,{conversationId:null})},setError:n=>{const r=t().status;let s="idle";e(i=>{i.error=n,n?(s="error",i.status="error"):i.status==="error"?(s=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=s):s=i.status}),r!==s&&We.emit(zn.statusChanged,{status:s}),We.emit(zn.errorChanged,{error:n})},setStatus:n=>{t().status!==n&&(e({status:n}),We.emit(zn.statusChanged,{status:n}))},_addStreamingId:n=>{let r=!1;e(s=>{s.streamingInteractionIds.includes(n)||(s.streamingInteractionIds.push(n),s.activeStreamBuffers[n]="",s.activeReasoningBuffers[n]="",s.streamingInteractionIds.length===1&&(s.status="streaming",r=!0),s.error=null)}),r&&We.emit(zn.statusChanged,{status:"streaming"}),We.emit(zn.streamingIdsChanged,{streamingIds:t().streamingInteractionIds})},_removeStreamingId:n=>{let r=!1;e(s=>{const i=s.streamingInteractionIds.indexOf(n);i!==-1&&(s.streamingInteractionIds.splice(i,1),delete s.activeStreamBuffers[n],delete s.activeReasoningBuffers[n],s.streamingInteractionIds.length===0&&s.status==="streaming"&&(s.status=s.error?"error":"idle",r=!0))}),r&&We.emit(zn.statusChanged,{status:t().status}),We.emit(zn.streamingIdsChanged,{streamingIds:t().streamingInteractionIds})},getRegisteredActionHandlers:()=>{const n="interactionStore",r=t();return[{eventName:zn.loadInteractionsRequest,handler:s=>r.loadInteractions(s.conversationId),storeId:n},{eventName:zn.rateInteractionRequest,handler:s=>r.rateInteraction(s.interactionId,s.rating),storeId:n},{eventName:zn.setCurrentConversationIdRequest,handler:s=>r.setCurrentConversationId(s.id),storeId:n},{eventName:zn.clearInteractionsRequest,handler:()=>r.clearInteractions(),storeId:n},{eventName:zn.setErrorRequest,handler:s=>r.setError(s.error),storeId:n},{eventName:zn.setStatusRequest,handler:s=>r.setStatus(s.status),storeId:n}]}}))),aJ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let pi=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=aJ[n[e]&63];return t};const To={attachedFilesChanged:"input.attached.files.changed",addAttachedFileRequest:"input.add.attached.file.request",removeAttachedFileRequest:"input.remove.attached.file.request",clearAttachedFilesRequest:"input.clear.attached.files.request"},Mc=lo(co((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(s=>{if(s.attachedFilesMetadata.some(a=>a.source==="direct"&&n.source==="direct"?a.name===n.name&&a.size===n.size:a.source==="vfs"&&n.source==="vfs"?a.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const a={id:pi(),...n};s.attachedFilesMetadata.push(a),r=!0}}),r&&We.emit(To.attachedFilesChanged,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(s=>{const i=s.attachedFilesMetadata.length;s.attachedFilesMetadata=s.attachedFilesMetadata.filter(a=>a.id!==n),r=s.attachedFilesMetadata.length<i}),r&&We.emit(To.attachedFilesChanged,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&We.emit(To.attachedFilesChanged,{files:[]})},getRegisteredActionHandlers:()=>{const n="inputStore",r=t();return[{eventName:To.addAttachedFileRequest,handler:s=>r.addAttachedFile(s),storeId:n},{eventName:To.removeAttachedFileRequest,handler:s=>r.removeAttachedFile(s.attachmentId),storeId:n},{eventName:To.clearAttachedFilesRequest,handler:()=>r.clearAttachedFiles(),storeId:n}]}}))),u5=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(u5);const v0=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml"||n.split(".").length<2)return!0;const s="."+n.split(".").pop();return u5.has(s)};var d5="vercel.ai.error",oJ=Symbol.for(d5),f5,lJ=class h5 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[f5]=!0,this.name=t,this.cause=r}static isInstance(t){return h5.hasMarker(t,d5)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};f5=oJ;var jn=lJ,p5="AI_APICallError",m5=`vercel.ai.error.${p5}`,cJ=Symbol.for(m5),g5,eo=class extends jn{constructor({message:t,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:a,cause:o,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:p5,message:t,cause:o}),this[g5]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=a,this.isRetryable=l,this.data=c}static isInstance(t){return jn.hasMarker(t,m5)}};g5=cJ;var y5="AI_EmptyResponseBodyError",b5=`vercel.ai.error.${y5}`,uJ=Symbol.for(b5),v5,w5=class extends jn{constructor({message:t="Empty response body"}={}){super({name:y5,message:t}),this[v5]=!0}static isInstance(t){return jn.hasMarker(t,b5)}};v5=uJ;function Iy(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var x5="AI_InvalidArgumentError",_5=`vercel.ai.error.${x5}`,dJ=Symbol.for(_5),S5,E5=class extends jn{constructor({message:t,cause:n,argument:r}){super({name:x5,message:t,cause:n}),this[S5]=!0,this.argument=r}static isInstance(t){return jn.hasMarker(t,_5)}};S5=dJ;var C5="AI_InvalidPromptError",k5=`vercel.ai.error.${C5}`,fJ=Symbol.for(k5),T5,pc=class extends jn{constructor({prompt:t,message:n,cause:r}){super({name:C5,message:`Invalid prompt: ${n}`,cause:r}),this[T5]=!0,this.prompt=t}static isInstance(t){return jn.hasMarker(t,k5)}};T5=fJ;var A5="AI_InvalidResponseDataError",R5=`vercel.ai.error.${A5}`,hJ=Symbol.for(R5),N5,gp=class extends jn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:A5,message:n}),this[N5]=!0,this.data=t}static isInstance(t){return jn.hasMarker(t,R5)}};N5=hJ;var I5="AI_JSONParseError",j5=`vercel.ai.error.${I5}`,pJ=Symbol.for(j5),M5,Lw=class extends jn{constructor({text:t,cause:n}){super({name:I5,message:`JSON parsing failed: Text: ${t}.
Error message: ${Iy(n)}`,cause:n}),this[M5]=!0,this.text=t}static isInstance(t){return jn.hasMarker(t,j5)}};M5=pJ;var D5="AI_LoadAPIKeyError",O5=`vercel.ai.error.${D5}`,mJ=Symbol.for(O5),P5,$v=class extends jn{constructor({message:t}){super({name:D5,message:t}),this[P5]=!0}static isInstance(t){return jn.hasMarker(t,O5)}};P5=mJ;var F5="AI_TooManyEmbeddingValuesForCallError",L5=`vercel.ai.error.${F5}`,gJ=Symbol.for(L5),$5,l1=class extends jn{constructor(e){super({name:F5,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[$5]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return jn.hasMarker(e,L5)}};$5=gJ;var B5="AI_TypeValidationError",z5=`vercel.ai.error.${B5}`,yJ=Symbol.for(z5),U5,bJ=class qk extends jn{constructor({value:t,cause:n}){super({name:B5,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Iy(n)}`,cause:n}),this[U5]=!0,this.value=t}static isInstance(t){return jn.hasMarker(t,z5)}static wrap({value:t,cause:n}){return qk.isInstance(n)&&n.value===t?n:new qk({value:t,cause:n})}};U5=yJ;var $w=bJ,q5="AI_UnsupportedFunctionalityError",V5=`vercel.ai.error.${q5}`,vJ=Symbol.for(V5),H5,vr=class extends jn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:q5,message:n}),this[H5]=!0,this.functionality=t}static isInstance(t){return jn.hasMarker(t,V5)}};H5=vJ;let wJ=(e,t=21)=>(n=t)=>{let r="",s=n|0;for(;s--;)r+=e[Math.random()*e.length|0];return r};var RA={},c1={};c1.byteLength=SJ;c1.toByteArray=CJ;c1.fromByteArray=AJ;var bl=[],Za=[],xJ=typeof Uint8Array<"u"?Uint8Array:Array,L2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Gh=0,_J=L2.length;Gh<_J;++Gh)bl[Gh]=L2[Gh],Za[L2.charCodeAt(Gh)]=Gh;Za[45]=62;Za[95]=63;function G5(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function SJ(e){var t=G5(e),n=t[0],r=t[1];return(n+r)*3/4-r}function EJ(e,t,n){return(t+n)*3/4-n}function CJ(e){var t,n=G5(e),r=n[0],s=n[1],i=new xJ(EJ(e,r,s)),a=0,o=s>0?r-4:r,l;for(l=0;l<o;l+=4)t=Za[e.charCodeAt(l)]<<18|Za[e.charCodeAt(l+1)]<<12|Za[e.charCodeAt(l+2)]<<6|Za[e.charCodeAt(l+3)],i[a++]=t>>16&255,i[a++]=t>>8&255,i[a++]=t&255;return s===2&&(t=Za[e.charCodeAt(l)]<<2|Za[e.charCodeAt(l+1)]>>4,i[a++]=t&255),s===1&&(t=Za[e.charCodeAt(l)]<<10|Za[e.charCodeAt(l+1)]<<4|Za[e.charCodeAt(l+2)]>>2,i[a++]=t>>8&255,i[a++]=t&255),i}function kJ(e){return bl[e>>18&63]+bl[e>>12&63]+bl[e>>6&63]+bl[e&63]}function TJ(e,t,n){for(var r,s=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),s.push(kJ(r));return s.join("")}function AJ(e){for(var t,n=e.length,r=n%3,s=[],i=16383,a=0,o=n-r;a<o;a+=i)s.push(TJ(e,a,a+i>o?o:a+i));return r===1?(t=e[n-1],s.push(bl[t>>2]+bl[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],s.push(bl[t>>10]+bl[t>>4&63]+bl[t<<2&63]+"=")),s.join("")}var NA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */NA.read=function(e,t,n,r,s){var i,a,o=s*8-r-1,l=(1<<o)-1,c=l>>1,d=-7,h=n?s-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-d)-1,g>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=m,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=a*256+e[t+h],h+=m,d-=8);if(i===0)i=1-c;else{if(i===l)return a?NaN:(g?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-c}return(g?-1:1)*a*Math.pow(2,i-r)};NA.write=function(e,t,n,r,s,i){var a,o,l,c=i*8-s-1,d=(1<<c)-1,h=d>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=m/l:t+=m*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=d?(o=0,a=d):a+h>=1?(o=(t*l-1)*Math.pow(2,s),a=a+h):(o=t*Math.pow(2,h-1)*Math.pow(2,s),a=0));s>=8;e[n+g]=o&255,g+=v,o/=256,s-=8);for(a=a<<s|o,c+=s;c>0;e[n+g]=a&255,g+=v,a/=256,c-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=c1,n=NA,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:a,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const be=new i(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,i.prototype),Object.setPrototypeOf(be,D),be.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function c(be){if(be>s)throw new RangeError('The value "'+be+'" is invalid for option "size"');const D=new i(be);return Object.setPrototypeOf(D,d.prototype),D}function d(be,D,K){if(typeof be=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(be)}return h(be,D,K)}d.poolSize=8192;function h(be,D,K){if(typeof be=="string")return b(be,D);if(a.isView(be))return x(be);if(be==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(dt(be,a)||be&&dt(be.buffer,a)||typeof o<"u"&&(dt(be,o)||be&&dt(be.buffer,o)))return _(be,D,K);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=be.valueOf&&be.valueOf();if(pe!=null&&pe!==be)return d.from(pe,D,K);const Oe=E(be);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return d.from(be[Symbol.toPrimitive]("string"),D,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}d.from=function(be,D,K){return h(be,D,K)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function m(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function g(be,D,K){return m(be),be<=0?c(be):D!==void 0?typeof K=="string"?c(be).fill(D,K):c(be).fill(D):c(be)}d.alloc=function(be,D,K){return g(be,D,K)};function v(be){return m(be),c(be<0?0:k(be)|0)}d.allocUnsafe=function(be){return v(be)},d.allocUnsafeSlow=function(be){return v(be)};function b(be,D){if((typeof D!="string"||D==="")&&(D="utf8"),!d.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const K=R(be,D)|0;let pe=c(K);const Oe=pe.write(be,D);return Oe!==K&&(pe=pe.slice(0,Oe)),pe}function w(be){const D=be.length<0?0:k(be.length)|0,K=c(D);for(let pe=0;pe<D;pe+=1)K[pe]=be[pe]&255;return K}function x(be){if(dt(be,i)){const D=new i(be);return _(D.buffer,D.byteOffset,D.byteLength)}return w(be)}function _(be,D,K){if(D<0||be.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<D+(K||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return D===void 0&&K===void 0?pe=new i(be):K===void 0?pe=new i(be,D):pe=new i(be,D,K),Object.setPrototypeOf(pe,d.prototype),pe}function E(be){if(d.isBuffer(be)){const D=k(be.length)|0,K=c(D);return K.length===0||be.copy(K,0,0,D),K}if(be.length!==void 0)return typeof be.length!="number"||It(be.length)?c(0):w(be);if(be.type==="Buffer"&&Array.isArray(be.data))return w(be.data)}function k(be){if(be>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return be|0}function T(be){return+be!=be&&(be=0),d.alloc(+be)}d.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==d.prototype},d.compare=function(D,K){if(dt(D,i)&&(D=d.from(D,D.offset,D.byteLength)),dt(K,i)&&(K=d.from(K,K.offset,K.byteLength)),!d.isBuffer(D)||!d.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===K)return 0;let pe=D.length,Oe=K.length;for(let ve=0,Ae=Math.min(pe,Oe);ve<Ae;++ve)if(D[ve]!==K[ve]){pe=D[ve],Oe=K[ve];break}return pe<Oe?-1:Oe<pe?1:0},d.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(D,K){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return d.alloc(0);let pe;if(K===void 0)for(K=0,pe=0;pe<D.length;++pe)K+=D[pe].length;const Oe=d.allocUnsafe(K);let ve=0;for(pe=0;pe<D.length;++pe){let Ae=D[pe];if(dt(Ae,i))ve+Ae.length>Oe.length?(d.isBuffer(Ae)||(Ae=d.from(Ae)),Ae.copy(Oe,ve)):i.prototype.set.call(Oe,Ae,ve);else if(d.isBuffer(Ae))Ae.copy(Oe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=Ae.length}return Oe};function R(be,D){if(d.isBuffer(be))return be.length;if(a.isView(be)||dt(be,a))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);const K=be.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&K===0)return 0;let Oe=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return Ee(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return Xe(be).length;default:if(Oe)return pe?-1:Ee(be).length;D=(""+D).toLowerCase(),Oe=!0}}d.byteLength=R;function M(be,D,K){let pe=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,D>>>=0,K<=D))return"";for(be||(be="utf8");;)switch(be){case"hex":return Q(this,D,K);case"utf8":case"utf-8":return te(this,D,K);case"ascii":return Z(this,D,K);case"latin1":case"binary":return ee(this,D,K);case"base64":return J(this,D,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,D,K);default:if(pe)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),pe=!0}}d.prototype._isBuffer=!0;function I(be,D,K){const pe=be[D];be[D]=be[K],be[K]=pe}d.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let K=0;K<D;K+=2)I(this,K,K+1);return this},d.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let K=0;K<D;K+=4)I(this,K,K+3),I(this,K+1,K+2);return this},d.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let K=0;K<D;K+=8)I(this,K,K+7),I(this,K+1,K+6),I(this,K+2,K+5),I(this,K+3,K+4);return this},d.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?te(this,0,D):M.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(D){if(!d.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:d.compare(this,D)===0},d.prototype.inspect=function(){let D="";const K=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(D+=" ... "),"<Buffer "+D+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(D,K,pe,Oe,ve){if(dt(D,i)&&(D=d.from(D,D.offset,D.byteLength)),!d.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(K===void 0&&(K=0),pe===void 0&&(pe=D?D.length:0),Oe===void 0&&(Oe=0),ve===void 0&&(ve=this.length),K<0||pe>D.length||Oe<0||ve>this.length)throw new RangeError("out of range index");if(Oe>=ve&&K>=pe)return 0;if(Oe>=ve)return-1;if(K>=pe)return 1;if(K>>>=0,pe>>>=0,Oe>>>=0,ve>>>=0,this===D)return 0;let Ae=ve-Oe,de=pe-K;const ht=Math.min(Ae,de),wt=this.slice(Oe,ve),L=D.slice(K,pe);for(let Be=0;Be<ht;++Be)if(wt[Be]!==L[Be]){Ae=wt[Be],de=L[Be];break}return Ae<de?-1:de<Ae?1:0};function O(be,D,K,pe,Oe){if(be.length===0)return-1;if(typeof K=="string"?(pe=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,It(K)&&(K=Oe?0:be.length-1),K<0&&(K=be.length+K),K>=be.length){if(Oe)return-1;K=be.length-1}else if(K<0)if(Oe)K=0;else return-1;if(typeof D=="string"&&(D=d.from(D,pe)),d.isBuffer(D))return D.length===0?-1:P(be,D,K,pe,Oe);if(typeof D=="number")return D=D&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(be,D,K):i.prototype.lastIndexOf.call(be,D,K):P(be,[D],K,pe,Oe);throw new TypeError("val must be string, number or Buffer")}function P(be,D,K,pe,Oe){let ve=1,Ae=be.length,de=D.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(be.length<2||D.length<2)return-1;ve=2,Ae/=2,de/=2,K/=2}function ht(L,Be){return ve===1?L[Be]:L.readUInt16BE(Be*ve)}let wt;if(Oe){let L=-1;for(wt=K;wt<Ae;wt++)if(ht(be,wt)===ht(D,L===-1?0:wt-L)){if(L===-1&&(L=wt),wt-L+1===de)return L*ve}else L!==-1&&(wt-=wt-L),L=-1}else for(K+de>Ae&&(K=Ae-de),wt=K;wt>=0;wt--){let L=!0;for(let Be=0;Be<de;Be++)if(ht(be,wt+Be)!==ht(D,Be)){L=!1;break}if(L)return wt}return-1}d.prototype.includes=function(D,K,pe){return this.indexOf(D,K,pe)!==-1},d.prototype.indexOf=function(D,K,pe){return O(this,D,K,pe,!0)},d.prototype.lastIndexOf=function(D,K,pe){return O(this,D,K,pe,!1)};function U(be,D,K,pe){K=Number(K)||0;const Oe=be.length-K;pe?(pe=Number(pe),pe>Oe&&(pe=Oe)):pe=Oe;const ve=D.length;pe>ve/2&&(pe=ve/2);let Ae;for(Ae=0;Ae<pe;++Ae){const de=parseInt(D.substr(Ae*2,2),16);if(It(de))return Ae;be[K+Ae]=de}return Ae}function j(be,D,K,pe){return St(Ee(D,be.length-K),be,K,pe)}function V(be,D,K,pe){return St(Le(D),be,K,pe)}function $(be,D,K,pe){return St(Xe(D),be,K,pe)}function re(be,D,K,pe){return St(Te(D,be.length-K),be,K,pe)}d.prototype.write=function(D,K,pe,Oe){if(K===void 0)Oe="utf8",pe=this.length,K=0;else if(pe===void 0&&typeof K=="string")Oe=K,pe=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(pe)?(pe=pe>>>0,Oe===void 0&&(Oe="utf8")):(Oe=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-K;if((pe===void 0||pe>ve)&&(pe=ve),D.length>0&&(pe<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let Ae=!1;for(;;)switch(Oe){case"hex":return U(this,D,K,pe);case"utf8":case"utf-8":return j(this,D,K,pe);case"ascii":case"latin1":case"binary":return V(this,D,K,pe);case"base64":return $(this,D,K,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,D,K,pe);default:if(Ae)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Ae=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(be,D,K){return D===0&&K===be.length?t.fromByteArray(be):t.fromByteArray(be.slice(D,K))}function te(be,D,K){K=Math.min(be.length,K);const pe=[];let Oe=D;for(;Oe<K;){const ve=be[Oe];let Ae=null,de=ve>239?4:ve>223?3:ve>191?2:1;if(Oe+de<=K){let ht,wt,L,Be;switch(de){case 1:ve<128&&(Ae=ve);break;case 2:ht=be[Oe+1],(ht&192)===128&&(Be=(ve&31)<<6|ht&63,Be>127&&(Ae=Be));break;case 3:ht=be[Oe+1],wt=be[Oe+2],(ht&192)===128&&(wt&192)===128&&(Be=(ve&15)<<12|(ht&63)<<6|wt&63,Be>2047&&(Be<55296||Be>57343)&&(Ae=Be));break;case 4:ht=be[Oe+1],wt=be[Oe+2],L=be[Oe+3],(ht&192)===128&&(wt&192)===128&&(L&192)===128&&(Be=(ve&15)<<18|(ht&63)<<12|(wt&63)<<6|L&63,Be>65535&&Be<1114112&&(Ae=Be))}}Ae===null?(Ae=65533,de=1):Ae>65535&&(Ae-=65536,pe.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),pe.push(Ae),Oe+=de}return ie(pe)}const X=4096;function ie(be){const D=be.length;if(D<=X)return String.fromCharCode.apply(String,be);let K="",pe=0;for(;pe<D;)K+=String.fromCharCode.apply(String,be.slice(pe,pe+=X));return K}function Z(be,D,K){let pe="";K=Math.min(be.length,K);for(let Oe=D;Oe<K;++Oe)pe+=String.fromCharCode(be[Oe]&127);return pe}function ee(be,D,K){let pe="";K=Math.min(be.length,K);for(let Oe=D;Oe<K;++Oe)pe+=String.fromCharCode(be[Oe]);return pe}function Q(be,D,K){const pe=be.length;(!D||D<0)&&(D=0),(!K||K<0||K>pe)&&(K=pe);let Oe="";for(let ve=D;ve<K;++ve)Oe+=Vt[be[ve]];return Oe}function he(be,D,K){const pe=be.slice(D,K);let Oe="";for(let ve=0;ve<pe.length-1;ve+=2)Oe+=String.fromCharCode(pe[ve]+pe[ve+1]*256);return Oe}d.prototype.slice=function(D,K){const pe=this.length;D=~~D,K=K===void 0?pe:~~K,D<0?(D+=pe,D<0&&(D=0)):D>pe&&(D=pe),K<0?(K+=pe,K<0&&(K=0)):K>pe&&(K=pe),K<D&&(K=D);const Oe=this.subarray(D,K);return Object.setPrototypeOf(Oe,d.prototype),Oe};function Se(be,D,K){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+D>K)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(D,K,pe){D=D>>>0,K=K>>>0,pe||Se(D,K,this.length);let Oe=this[D],ve=1,Ae=0;for(;++Ae<K&&(ve*=256);)Oe+=this[D+Ae]*ve;return Oe},d.prototype.readUintBE=d.prototype.readUIntBE=function(D,K,pe){D=D>>>0,K=K>>>0,pe||Se(D,K,this.length);let Oe=this[D+--K],ve=1;for(;K>0&&(ve*=256);)Oe+=this[D+--K]*ve;return Oe},d.prototype.readUint8=d.prototype.readUInt8=function(D,K){return D=D>>>0,K||Se(D,1,this.length),this[D]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(D,K){return D=D>>>0,K||Se(D,2,this.length),this[D]|this[D+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(D,K){return D=D>>>0,K||Se(D,2,this.length),this[D]<<8|this[D+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(D,K){return D=D>>>0,K||Se(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(D,K){return D=D>>>0,K||Se(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},d.prototype.readBigUInt64LE=Dt(function(D){D=D>>>0,ke(D,"offset");const K=this[D],pe=this[D+7];(K===void 0||pe===void 0)&&ae(D,this.length-8);const Oe=K+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,ve=this[++D]+this[++D]*2**8+this[++D]*2**16+pe*2**24;return BigInt(Oe)+(BigInt(ve)<<BigInt(32))}),d.prototype.readBigUInt64BE=Dt(function(D){D=D>>>0,ke(D,"offset");const K=this[D],pe=this[D+7];(K===void 0||pe===void 0)&&ae(D,this.length-8);const Oe=K*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],ve=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe;return(BigInt(Oe)<<BigInt(32))+BigInt(ve)}),d.prototype.readIntLE=function(D,K,pe){D=D>>>0,K=K>>>0,pe||Se(D,K,this.length);let Oe=this[D],ve=1,Ae=0;for(;++Ae<K&&(ve*=256);)Oe+=this[D+Ae]*ve;return ve*=128,Oe>=ve&&(Oe-=Math.pow(2,8*K)),Oe},d.prototype.readIntBE=function(D,K,pe){D=D>>>0,K=K>>>0,pe||Se(D,K,this.length);let Oe=K,ve=1,Ae=this[D+--Oe];for(;Oe>0&&(ve*=256);)Ae+=this[D+--Oe]*ve;return ve*=128,Ae>=ve&&(Ae-=Math.pow(2,8*K)),Ae},d.prototype.readInt8=function(D,K){return D=D>>>0,K||Se(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},d.prototype.readInt16LE=function(D,K){D=D>>>0,K||Se(D,2,this.length);const pe=this[D]|this[D+1]<<8;return pe&32768?pe|4294901760:pe},d.prototype.readInt16BE=function(D,K){D=D>>>0,K||Se(D,2,this.length);const pe=this[D+1]|this[D]<<8;return pe&32768?pe|4294901760:pe},d.prototype.readInt32LE=function(D,K){return D=D>>>0,K||Se(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},d.prototype.readInt32BE=function(D,K){return D=D>>>0,K||Se(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},d.prototype.readBigInt64LE=Dt(function(D){D=D>>>0,ke(D,"offset");const K=this[D],pe=this[D+7];(K===void 0||pe===void 0)&&ae(D,this.length-8);const Oe=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(pe<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(K+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),d.prototype.readBigInt64BE=Dt(function(D){D=D>>>0,ke(D,"offset");const K=this[D],pe=this[D+7];(K===void 0||pe===void 0)&&ae(D,this.length-8);const Oe=(K<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+pe)}),d.prototype.readFloatLE=function(D,K){return D=D>>>0,K||Se(D,4,this.length),n.read(this,D,!0,23,4)},d.prototype.readFloatBE=function(D,K){return D=D>>>0,K||Se(D,4,this.length),n.read(this,D,!1,23,4)},d.prototype.readDoubleLE=function(D,K){return D=D>>>0,K||Se(D,8,this.length),n.read(this,D,!0,52,8)},d.prototype.readDoubleBE=function(D,K){return D=D>>>0,K||Se(D,8,this.length),n.read(this,D,!1,52,8)};function ce(be,D,K,pe,Oe,ve){if(!d.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>Oe||D<ve)throw new RangeError('"value" argument is out of bounds');if(K+pe>be.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(D,K,pe,Oe){if(D=+D,K=K>>>0,pe=pe>>>0,!Oe){const de=Math.pow(2,8*pe)-1;ce(this,D,K,pe,de,0)}let ve=1,Ae=0;for(this[K]=D&255;++Ae<pe&&(ve*=256);)this[K+Ae]=D/ve&255;return K+pe},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(D,K,pe,Oe){if(D=+D,K=K>>>0,pe=pe>>>0,!Oe){const de=Math.pow(2,8*pe)-1;ce(this,D,K,pe,de,0)}let ve=pe-1,Ae=1;for(this[K+ve]=D&255;--ve>=0&&(Ae*=256);)this[K+ve]=D/Ae&255;return K+pe},d.prototype.writeUint8=d.prototype.writeUInt8=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,1,255,0),this[K]=D&255,K+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,2,65535,0),this[K]=D&255,this[K+1]=D>>>8,K+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,2,65535,0),this[K]=D>>>8,this[K+1]=D&255,K+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,4,4294967295,0),this[K+3]=D>>>24,this[K+2]=D>>>16,this[K+1]=D>>>8,this[K]=D&255,K+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,4,4294967295,0),this[K]=D>>>24,this[K+1]=D>>>16,this[K+2]=D>>>8,this[K+3]=D&255,K+4};function je(be,D,K,pe,Oe){ue(D,pe,Oe,be,K,7);let ve=Number(D&BigInt(4294967295));be[K++]=ve,ve=ve>>8,be[K++]=ve,ve=ve>>8,be[K++]=ve,ve=ve>>8,be[K++]=ve;let Ae=Number(D>>BigInt(32)&BigInt(4294967295));return be[K++]=Ae,Ae=Ae>>8,be[K++]=Ae,Ae=Ae>>8,be[K++]=Ae,Ae=Ae>>8,be[K++]=Ae,K}function De(be,D,K,pe,Oe){ue(D,pe,Oe,be,K,7);let ve=Number(D&BigInt(4294967295));be[K+7]=ve,ve=ve>>8,be[K+6]=ve,ve=ve>>8,be[K+5]=ve,ve=ve>>8,be[K+4]=ve;let Ae=Number(D>>BigInt(32)&BigInt(4294967295));return be[K+3]=Ae,Ae=Ae>>8,be[K+2]=Ae,Ae=Ae>>8,be[K+1]=Ae,Ae=Ae>>8,be[K]=Ae,K+8}d.prototype.writeBigUInt64LE=Dt(function(D,K=0){return je(this,D,K,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Dt(function(D,K=0){return De(this,D,K,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(D,K,pe,Oe){if(D=+D,K=K>>>0,!Oe){const ht=Math.pow(2,8*pe-1);ce(this,D,K,pe,ht-1,-ht)}let ve=0,Ae=1,de=0;for(this[K]=D&255;++ve<pe&&(Ae*=256);)D<0&&de===0&&this[K+ve-1]!==0&&(de=1),this[K+ve]=(D/Ae>>0)-de&255;return K+pe},d.prototype.writeIntBE=function(D,K,pe,Oe){if(D=+D,K=K>>>0,!Oe){const ht=Math.pow(2,8*pe-1);ce(this,D,K,pe,ht-1,-ht)}let ve=pe-1,Ae=1,de=0;for(this[K+ve]=D&255;--ve>=0&&(Ae*=256);)D<0&&de===0&&this[K+ve+1]!==0&&(de=1),this[K+ve]=(D/Ae>>0)-de&255;return K+pe},d.prototype.writeInt8=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,1,127,-128),D<0&&(D=255+D+1),this[K]=D&255,K+1},d.prototype.writeInt16LE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,2,32767,-32768),this[K]=D&255,this[K+1]=D>>>8,K+2},d.prototype.writeInt16BE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,2,32767,-32768),this[K]=D>>>8,this[K+1]=D&255,K+2},d.prototype.writeInt32LE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,4,2147483647,-2147483648),this[K]=D&255,this[K+1]=D>>>8,this[K+2]=D>>>16,this[K+3]=D>>>24,K+4},d.prototype.writeInt32BE=function(D,K,pe){return D=+D,K=K>>>0,pe||ce(this,D,K,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[K]=D>>>24,this[K+1]=D>>>16,this[K+2]=D>>>8,this[K+3]=D&255,K+4},d.prototype.writeBigInt64LE=Dt(function(D,K=0){return je(this,D,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Dt(function(D,K=0){return De(this,D,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(be,D,K,pe,Oe,ve){if(K+pe>be.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function xe(be,D,K,pe,Oe){return D=+D,K=K>>>0,Oe||Re(be,D,K,4),n.write(be,D,K,pe,23,4),K+4}d.prototype.writeFloatLE=function(D,K,pe){return xe(this,D,K,!0,pe)},d.prototype.writeFloatBE=function(D,K,pe){return xe(this,D,K,!1,pe)};function Fe(be,D,K,pe,Oe){return D=+D,K=K>>>0,Oe||Re(be,D,K,8),n.write(be,D,K,pe,52,8),K+8}d.prototype.writeDoubleLE=function(D,K,pe){return Fe(this,D,K,!0,pe)},d.prototype.writeDoubleBE=function(D,K,pe){return Fe(this,D,K,!1,pe)},d.prototype.copy=function(D,K,pe,Oe){if(!d.isBuffer(D))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Oe&&Oe!==0&&(Oe=this.length),K>=D.length&&(K=D.length),K||(K=0),Oe>0&&Oe<pe&&(Oe=pe),Oe===pe||D.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),D.length-K<Oe-pe&&(Oe=D.length-K+pe);const ve=Oe-pe;return this===D&&typeof i.prototype.copyWithin=="function"?this.copyWithin(K,pe,Oe):i.prototype.set.call(D,this.subarray(pe,Oe),K),ve},d.prototype.fill=function(D,K,pe,Oe){if(typeof D=="string"){if(typeof K=="string"?(Oe=K,K=0,pe=this.length):typeof pe=="string"&&(Oe=pe,pe=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!d.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(D.length===1){const Ae=D.charCodeAt(0);(Oe==="utf8"&&Ae<128||Oe==="latin1")&&(D=Ae)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(K<0||this.length<K||this.length<pe)throw new RangeError("Out of range index");if(pe<=K)return this;K=K>>>0,pe=pe===void 0?this.length:pe>>>0,D||(D=0);let ve;if(typeof D=="number")for(ve=K;ve<pe;++ve)this[ve]=D;else{const Ae=d.isBuffer(D)?D:d.from(D,Oe),de=Ae.length;if(de===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ve=0;ve<pe-K;++ve)this[ve+K]=Ae[ve%de]}return this};const st={};function He(be,D,K){st[be]=class extends K{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${be}]`,this.stack,delete this.name}get code(){return be}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${be}]: ${this.message}`}}}He("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?`${be} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),He("ERR_INVALID_ARG_TYPE",function(be,D){return`The "${be}" argument must be of type number. Received type ${typeof D}`},TypeError),He("ERR_OUT_OF_RANGE",function(be,D,K){let pe=`The value of "${be}" is out of range.`,Oe=K;return Number.isInteger(K)&&Math.abs(K)>2**32?Oe=Ne(String(K)):typeof K=="bigint"&&(Oe=String(K),(K>BigInt(2)**BigInt(32)||K<-(BigInt(2)**BigInt(32)))&&(Oe=Ne(Oe)),Oe+="n"),pe+=` It must be ${D}. Received ${Oe}`,pe},RangeError);function Ne(be){let D="",K=be.length;const pe=be[0]==="-"?1:0;for(;K>=pe+4;K-=3)D=`_${be.slice(K-3,K)}${D}`;return`${be.slice(0,K)}${D}`}function H(be,D,K){ke(D,"offset"),(be[D]===void 0||be[D+K]===void 0)&&ae(D,be.length-(K+1))}function ue(be,D,K,pe,Oe,ve){if(be>K||be<D){const Ae=typeof D=="bigint"?"n":"";let de;throw D===0||D===BigInt(0)?de=`>= 0${Ae} and < 2${Ae} ** ${(ve+1)*8}${Ae}`:de=`>= -(2${Ae} ** ${(ve+1)*8-1}${Ae}) and < 2 ** ${(ve+1)*8-1}${Ae}`,new st.ERR_OUT_OF_RANGE("value",de,be)}H(pe,Oe,ve)}function ke(be,D){if(typeof be!="number")throw new st.ERR_INVALID_ARG_TYPE(D,"number",be)}function ae(be,D,K){throw Math.floor(be)!==be?(ke(be,K),new st.ERR_OUT_OF_RANGE("offset","an integer",be)):D<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,be)}const oe=/[^+/0-9A-Za-z-_]/g;function ne(be){if(be=be.split("=")[0],be=be.trim().replace(oe,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function Ee(be,D){D=D||1/0;let K;const pe=be.length;let Oe=null;const ve=[];for(let Ae=0;Ae<pe;++Ae){if(K=be.charCodeAt(Ae),K>55295&&K<57344){if(!Oe){if(K>56319){(D-=3)>-1&&ve.push(239,191,189);continue}else if(Ae+1===pe){(D-=3)>-1&&ve.push(239,191,189);continue}Oe=K;continue}if(K<56320){(D-=3)>-1&&ve.push(239,191,189),Oe=K;continue}K=(Oe-55296<<10|K-56320)+65536}else Oe&&(D-=3)>-1&&ve.push(239,191,189);if(Oe=null,K<128){if((D-=1)<0)break;ve.push(K)}else if(K<2048){if((D-=2)<0)break;ve.push(K>>6|192,K&63|128)}else if(K<65536){if((D-=3)<0)break;ve.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((D-=4)<0)break;ve.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return ve}function Le(be){const D=[];for(let K=0;K<be.length;++K)D.push(be.charCodeAt(K)&255);return D}function Te(be,D){let K,pe,Oe;const ve=[];for(let Ae=0;Ae<be.length&&!((D-=2)<0);++Ae)K=be.charCodeAt(Ae),pe=K>>8,Oe=K%256,ve.push(Oe),ve.push(pe);return ve}function Xe(be){return t.toByteArray(ne(be))}function St(be,D,K,pe){let Oe;for(Oe=0;Oe<pe&&!(Oe+K>=D.length||Oe>=be.length);++Oe)D[Oe+K]=be[Oe];return Oe}function dt(be,D){return be instanceof D||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===D.name}function It(be){return be!==be}const Vt=function(){const be="0123456789abcdef",D=new Array(256);for(let K=0;K<16;++K){const pe=K*16;for(let Oe=0;Oe<16;++Oe)D[pe+Oe]=be[K]+be[Oe]}return D}();function Dt(be){return typeof BigInt>"u"?Kt:be}function Kt(){throw new Error("BigInt not supported")}})(RA);const Jt=RA.Buffer,Gr=RA.Buffer;var Yd={exports:{}},q4;function RJ(){if(q4)return Yd.exports;q4=1;const e=typeof Jt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,c){c==null&&l!==null&&typeof l=="object"&&(c=l,l=void 0),e&&Jt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=c&&c.protoAction||"error",m=c&&c.constructorAction||"error";if(h==="ignore"&&m==="ignore")return d;if(h!=="ignore"&&m!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&m==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return s(d,{protoAction:h,constructorAction:m,safe:c&&c.safe})}function s(o,{protoAction:l="error",constructorAction:c="error",safe:d}={}){let h=[o];for(;h.length;){const m=h;h=[];for(const g of m){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return o}function i(o,l,c){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,c)}finally{Error.stackTraceLimit=d}}function a(o,l){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Yd.exports=i,Yd.exports.default=i,Yd.exports.parse=i,Yd.exports.safeParse=a,Yd.exports.scan=s,Yd.exports}var NJ=RJ();const Xp=Ni(NJ);var IJ={};function xs(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function jJ(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function MJ(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function DJ(){let e="",t,n=[],r,s;function i(l,c){if(l===""){a(c);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,g=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,g)}function a(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:s}),n=[],t=void 0,s=void 0)}function o(l,c){switch(l){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const d=parseInt(c,10);isNaN(d)||(s=d);break}}return new TransformStream({transform(l,c){const{lines:d,incompleteLine:h}=OJ(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],c)},flush(l){i(e,l),a(l)}})}function OJ(e,t){const n=[];let r=e;for(let s=0;s<t.length;){const i=t[s++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[s+1]===`
`&&s++):r+=i}return{lines:n,incompleteLine:r}}function Jp(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Lf=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=wJ(n,t);if(e==null)return s;if(n.includes(r))throw new E5({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${s(i)}`},na=Lf();function PJ(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function FJ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function ww(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function K5({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new $v({message:`${r} API key must be a string.`});if(typeof vs>"u")throw new $v({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=IJ[t],e==null)throw new $v({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new $v({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Bw=Symbol.for("vercel.ai.validator");function LJ(e){return{[Bw]:!0,validate:e}}function $J(e){return typeof e=="object"&&e!==null&&Bw in e&&e[Bw]===!0&&"validate"in e}function BJ(e){return $J(e)?e:zJ(e)}function zJ(e){return LJ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function UJ({value:e,schema:t}){const n=Qp({value:e,schema:t});if(!n.success)throw $w.wrap({value:e,cause:n.error});return n.value}function Qp({value:e,schema:t}){const n=BJ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:$w.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:$w.wrap({value:e,cause:r})}}}function qJ({text:e,schema:t}){try{const n=Xp.parse(e);return t==null?n:UJ({value:n,schema:t})}catch(n){throw Lw.isInstance(n)||$w.isInstance(n)?n:new Lw({text:e,cause:n})}}function Cf({text:e,schema:t}){try{const n=Xp.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Qp({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Lw.isInstance(n)?n:new Lw({text:e,cause:n})}}}function zw(e){try{return Xp.parse(e),!0}catch{return!1}}function u1({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Qp({value:t[e],schema:n});if(!r.success)throw new E5({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var VJ=()=>globalThis.fetch,_s=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:a})=>W5({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:a}),HJ=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:a})=>W5({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:a}),W5=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:a=VJ()})=>{try{const o=await a(e,{method:"POST",headers:FJ(t),body:n.content,signal:i}),l=Jp(o);if(!o.ok){let c;try{c=await s({response:o,url:e,requestBodyValues:n.values})}catch(d){throw ww(d)||eo.isInstance(d)?d:new eo({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(ww(c)||eo.isInstance(c))?c:new eo({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(ww(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new eo({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function Vk(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var $f=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const a=await r.text(),o=Jp(r);if(a.trim()==="")return{responseHeaders:o,value:new eo({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})};try{const l=qJ({text:a,schema:e});return{responseHeaders:o,value:new eo({message:t(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:a,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new eo({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})}}},em=e=>async({response:t})=>{const n=Jp(t);if(t.body==null)throw new w5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(DJ()).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(Cf({text:r,schema:e}))}}))}},fa=e=>async({response:t,url:n,requestBodyValues:r})=>{const s=await t.text(),i=Cf({text:s,schema:e}),a=Jp(t);if(!i.success)throw new eo({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:a,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},GJ=()=>async({response:e,url:t,requestBodyValues:n})=>{const r=Jp(e);if(!e.body)throw new eo({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{const s=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(s)}}catch(s){throw new eo({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:s})}},{btoa:KJ,atob:WJ}=globalThis;function d1(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=WJ(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Vu(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return KJ(t)}function f1(e){return e==null?void 0:e.replace(/\/$/,"")}var pr;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return e.objectValues(a)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},e.find=(s,i)=>{for(const a of s)if(i(a))return a},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(pr||(pr={}));var Hk;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Hk||(Hk={}));const nn=pr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gc=e=>{switch(typeof e){case"undefined":return nn.undefined;case"string":return nn.string;case"number":return isNaN(e)?nn.nan:nn.number;case"boolean":return nn.boolean;case"function":return nn.function;case"bigint":return nn.bigint;case"symbol":return nn.symbol;case"object":return Array.isArray(e)?nn.array:e===null?nn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?nn.promise:typeof Map<"u"&&e instanceof Map?nn.map:typeof Set<"u"&&e instanceof Set?nn.set:typeof Date<"u"&&e instanceof Date?nn.date:nn.object;default:return nn.unknown}},Pt=pr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ZJ=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ra extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return s(this),r}static assert(t){if(!(t instanceof Ra))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ra.create=e=>new Ra(e);const Tp=(e,t)=>{let n;switch(e.code){case Pt.invalid_type:e.received===nn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Pt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,pr.jsonStringifyReplacer)}`;break;case Pt.unrecognized_keys:n=`Unrecognized key(s) in object: ${pr.joinValues(e.keys,", ")}`;break;case Pt.invalid_union:n="Invalid input";break;case Pt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${pr.joinValues(e.options)}`;break;case Pt.invalid_enum_value:n=`Invalid enum value. Expected ${pr.joinValues(e.options)}, received '${e.received}'`;break;case Pt.invalid_arguments:n="Invalid function arguments";break;case Pt.invalid_return_type:n="Invalid function return type";break;case Pt.invalid_date:n="Invalid date";break;case Pt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:pr.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Pt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Pt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Pt.custom:n="Invalid input";break;case Pt.invalid_intersection_types:n="Intersection results could not be merged";break;case Pt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Pt.not_finite:n="Number must be finite";break;default:n=t.defaultError,pr.assertNever(e)}return{message:n}};let Z5=Tp;function YJ(e){Z5=e}function Uw(){return Z5}const qw=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:t,defaultError:o}).message;return{...s,path:i,message:o}},XJ=[];function Qt(e,t){const n=Uw(),r=qw({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Tp?void 0:Tp].filter(s=>!!s)});e.common.issues.push(r)}class Ti{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return An;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return Ti.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return An;i.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:t.value,value:r}}}const An=Object.freeze({status:"aborted"}),ip=e=>({status:"dirty",value:e}),Vi=e=>({status:"valid",value:e}),Gk=e=>e.status==="aborted",Kk=e=>e.status==="dirty",kf=e=>e.status==="valid",w0=e=>typeof Promise<"u"&&e instanceof Promise;function Vw(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Y5(e,t,n,r,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var dn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(dn||(dn={}));var Kg,Wg;class Rl{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const V4=(e,t)=>{if(kf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ra(e.common.issues);return this._error=n,this._error}}};function Ln(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(a,o)=>{var l,c;const{message:d}=e;return a.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=d??n)!==null&&c!==void 0?c:o.defaultError}},description:s}}class Zn{get description(){return this._def.description}_getType(t){return gc(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:gc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ti,ctx:{common:t.parent.common,data:t.data,parsedType:gc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(w0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gc(t)},i=this._parseSync({data:t,path:s.path,parent:s});return V4(s,i)}"~validate"(t){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:s});return kf(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(i=>kf(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gc(t)},s=this._parse({data:t,path:r.path,parent:r}),i=await(w0(s)?s:Promise.resolve(s));return V4(r,i)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=t(s),o=()=>i.addIssue({code:Pt.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new Fo({schema:this,typeName:zt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return jo.create(this,this._def)}nullable(){return Wu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Io.create(this)}promise(){return Rp.create(this,this._def)}or(t){return E0.create([this,t],this._def)}and(t){return C0.create(this,t,this._def)}transform(t){return new Fo({...Ln(this._def),schema:this,typeName:zt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new N0({...Ln(this._def),innerType:this,defaultValue:n,typeName:zt.ZodDefault})}brand(){return new IA({typeName:zt.ZodBranded,type:this,...Ln(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new I0({...Ln(this._def),innerType:this,catchValue:n,typeName:zt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return jy.create(this,t)}readonly(){return j0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const JJ=/^c[^\s-]{8,}$/i,QJ=/^[0-9a-z]+$/,eQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nQ=/^[a-z0-9_-]{21}$/i,rQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,iQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let $2;const oQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,X5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hQ=new RegExp(`^${X5}$`);function J5(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function pQ(e){return new RegExp(`^${J5(e)}$`)}function Q5(e){let t=`${X5}T${J5(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function mQ(e,t){return!!((t==="v4"||!t)&&oQ.test(e)||(t==="v6"||!t)&&cQ.test(e))}function gQ(e,t){if(!rQ.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function yQ(e,t){return!!((t==="v4"||!t)&&lQ.test(e)||(t==="v6"||!t)&&uQ.test(e))}class Ro extends Zn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==nn.string){const i=this._getOrReturnCtx(t);return Qt(i,{code:Pt.invalid_type,expected:nn.string,received:i.parsedType}),An}const r=new Ti;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=t.data.length>i.value,o=t.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(t,s),a?Qt(s,{code:Pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Qt(s,{code:Pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")iQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"email",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")$2||($2=new RegExp(aQ,"u")),$2.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"emoji",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")tQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"uuid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")nQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"nanoid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")JJ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"cuid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")QJ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"cuid2",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")eQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"ulid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),Qt(s,{validation:"url",code:Pt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"regex",code:Pt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Q5(i).test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?hQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?pQ(i).test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?sQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"duration",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?mQ(t.data,i.version)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"ip",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?gQ(t.data,i.alg)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"jwt",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?yQ(t.data,i.version)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"cidr",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?dQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"base64",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?fQ.test(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{validation:"base64url",code:Pt.invalid_string,message:i.message}),r.dirty()):pr.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:Pt.invalid_string,...dn.errToObj(r)})}_addCheck(t){return new Ro({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...dn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...dn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...dn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...dn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...dn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...dn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...dn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...dn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...dn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...dn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...dn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...dn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...dn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...dn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...dn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...dn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...dn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...dn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...dn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...dn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...dn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...dn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...dn.errToObj(n)})}nonempty(t){return this.min(1,dn.errToObj(t))}trim(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ro.create=e=>{var t;return new Ro({checks:[],typeName:zt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};function bQ(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(e.toFixed(s).replace(".","")),a=parseInt(t.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class Hu extends Zn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==nn.number){const i=this._getOrReturnCtx(t);return Qt(i,{code:Pt.invalid_type,expected:nn.number,received:i.parsedType}),An}let r;const s=new Ti;for(const i of this._def.checks)i.kind==="int"?pr.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?bQ(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.not_finite,message:i.message}),s.dirty()):pr.assertNever(i);return{status:s.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,dn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,dn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,dn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,dn.toString(n))}setLimit(t,n,r,s){return new Hu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:dn.toString(s)}]})}_addCheck(t){return new Hu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:dn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:dn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:dn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:dn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:dn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:dn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:dn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&pr.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Hu.create=e=>new Hu({checks:[],typeName:zt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class Gu extends Zn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==nn.bigint)return this._getInvalidInput(t);let r;const s=new Ti;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Qt(r,{code:Pt.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):pr.assertNever(i);return{status:s.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Qt(n,{code:Pt.invalid_type,expected:nn.bigint,received:n.parsedType}),An}gte(t,n){return this.setLimit("min",t,!0,dn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,dn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,dn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,dn.toString(n))}setLimit(t,n,r,s){return new Gu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:dn.toString(s)}]})}_addCheck(t){return new Gu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:dn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:dn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:dn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:dn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:dn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Gu.create=e=>{var t;return new Gu({checks:[],typeName:zt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};class x0 extends Zn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==nn.boolean){const r=this._getOrReturnCtx(t);return Qt(r,{code:Pt.invalid_type,expected:nn.boolean,received:r.parsedType}),An}return Vi(t.data)}}x0.create=e=>new x0({typeName:zt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class Tf extends Zn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==nn.date){const i=this._getOrReturnCtx(t);return Qt(i,{code:Pt.invalid_type,expected:nn.date,received:i.parsedType}),An}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Qt(i,{code:Pt.invalid_date}),An}const r=new Ti;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Pt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):pr.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Tf({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:dn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:dn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Tf.create=e=>new Tf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:zt.ZodDate,...Ln(e)});class Hw extends Zn{_parse(t){if(this._getType(t)!==nn.symbol){const r=this._getOrReturnCtx(t);return Qt(r,{code:Pt.invalid_type,expected:nn.symbol,received:r.parsedType}),An}return Vi(t.data)}}Hw.create=e=>new Hw({typeName:zt.ZodSymbol,...Ln(e)});class _0 extends Zn{_parse(t){if(this._getType(t)!==nn.undefined){const r=this._getOrReturnCtx(t);return Qt(r,{code:Pt.invalid_type,expected:nn.undefined,received:r.parsedType}),An}return Vi(t.data)}}_0.create=e=>new _0({typeName:zt.ZodUndefined,...Ln(e)});class S0 extends Zn{_parse(t){if(this._getType(t)!==nn.null){const r=this._getOrReturnCtx(t);return Qt(r,{code:Pt.invalid_type,expected:nn.null,received:r.parsedType}),An}return Vi(t.data)}}S0.create=e=>new S0({typeName:zt.ZodNull,...Ln(e)});class Ap extends Zn{constructor(){super(...arguments),this._any=!0}_parse(t){return Vi(t.data)}}Ap.create=e=>new Ap({typeName:zt.ZodAny,...Ln(e)});class bf extends Zn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Vi(t.data)}}bf.create=e=>new bf({typeName:zt.ZodUnknown,...Ln(e)});class Dc extends Zn{_parse(t){const n=this._getOrReturnCtx(t);return Qt(n,{code:Pt.invalid_type,expected:nn.never,received:n.parsedType}),An}}Dc.create=e=>new Dc({typeName:zt.ZodNever,...Ln(e)});class Gw extends Zn{_parse(t){if(this._getType(t)!==nn.undefined){const r=this._getOrReturnCtx(t);return Qt(r,{code:Pt.invalid_type,expected:nn.void,received:r.parsedType}),An}return Vi(t.data)}}Gw.create=e=>new Gw({typeName:zt.ZodVoid,...Ln(e)});class Io extends Zn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==nn.array)return Qt(n,{code:Pt.invalid_type,expected:nn.array,received:n.parsedType}),An;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(Qt(n,{code:a?Pt.too_big:Pt.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Qt(n,{code:Pt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Qt(n,{code:Pt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new Rl(n,a,n.path,o)))).then(a=>Ti.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new Rl(n,a,n.path,o)));return Ti.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Io({...this._def,minLength:{value:t,message:dn.toString(n)}})}max(t,n){return new Io({...this._def,maxLength:{value:t,message:dn.toString(n)}})}length(t,n){return new Io({...this._def,exactLength:{value:t,message:dn.toString(n)}})}nonempty(t){return this.min(1,t)}}Io.create=(e,t)=>new Io({type:e,minLength:null,maxLength:null,exactLength:null,typeName:zt.ZodArray,...Ln(t)});function np(e){if(e instanceof is){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=jo.create(np(r))}return new is({...e._def,shape:()=>t})}else return e instanceof Io?new Io({...e._def,type:np(e.element)}):e instanceof jo?jo.create(np(e.unwrap())):e instanceof Wu?Wu.create(np(e.unwrap())):e instanceof Nl?Nl.create(e.items.map(t=>np(t))):e}class is extends Zn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=pr.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==nn.object){const c=this._getOrReturnCtx(t);return Qt(c,{code:Pt.invalid_type,expected:nn.object,received:c.parsedType}),An}const{status:r,ctx:s}=this._processInputParams(t),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Dc&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const d=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new Rl(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Dc){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")o.length>0&&(Qt(s,{code:Pt.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of o){const h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new Rl(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,m=await d.value;c.push({key:h,value:m,alwaysSet:d.alwaysSet})}return c}).then(c=>Ti.mergeObjectSync(r,c)):Ti.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return dn.errToObj,new is({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var s,i,a,o;const l=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=dn.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new is({...this._def,unknownKeys:"strip"})}passthrough(){return new is({...this._def,unknownKeys:"passthrough"})}extend(t){return new is({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new is({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:zt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new is({...this._def,catchall:t})}pick(t){const n={};return pr.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new is({...this._def,shape:()=>n})}omit(t){const n={};return pr.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new is({...this._def,shape:()=>n})}deepPartial(){return np(this)}partial(t){const n={};return pr.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}),new is({...this._def,shape:()=>n})}required(t){const n={};return pr.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof jo;)i=i._def.innerType;n[r]=i}}),new is({...this._def,shape:()=>n})}keyof(){return eF(pr.objectKeys(this.shape))}}is.create=(e,t)=>new is({shape:()=>e,unknownKeys:"strip",catchall:Dc.create(),typeName:zt.ZodObject,...Ln(t)});is.strictCreate=(e,t)=>new is({shape:()=>e,unknownKeys:"strict",catchall:Dc.create(),typeName:zt.ZodObject,...Ln(t)});is.lazycreate=(e,t)=>new is({shape:e,unknownKeys:"strip",catchall:Dc.create(),typeName:zt.ZodObject,...Ln(t)});class E0 extends Zn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new Ra(o.ctx.common.issues));return Qt(n,{code:Pt.invalid_union,unionErrors:a}),An}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new Ra(l));return Qt(n,{code:Pt.invalid_union,unionErrors:o}),An}}get options(){return this._def.options}}E0.create=(e,t)=>new E0({options:e,typeName:zt.ZodUnion,...Ln(t)});const hc=e=>e instanceof T0?hc(e.schema):e instanceof Fo?hc(e.innerType()):e instanceof A0?[e.value]:e instanceof Ku?e.options:e instanceof R0?pr.objectValues(e.enum):e instanceof N0?hc(e._def.innerType):e instanceof _0?[void 0]:e instanceof S0?[null]:e instanceof jo?[void 0,...hc(e.unwrap())]:e instanceof Wu?[null,...hc(e.unwrap())]:e instanceof IA||e instanceof j0?hc(e.unwrap()):e instanceof I0?hc(e._def.innerType):[];class h1 extends Zn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nn.object)return Qt(n,{code:Pt.invalid_type,expected:nn.object,received:n.parsedType}),An;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Qt(n,{code:Pt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),An)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const s=new Map;for(const i of n){const a=hc(i.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);s.set(o,i)}}return new h1({typeName:zt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...Ln(r)})}}function Wk(e,t){const n=gc(e),r=gc(t);if(e===t)return{valid:!0,data:e};if(n===nn.object&&r===nn.object){const s=pr.objectKeys(t),i=pr.objectKeys(e).filter(o=>s.indexOf(o)!==-1),a={...e,...t};for(const o of i){const l=Wk(e[o],t[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===nn.array&&r===nn.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const a=e[i],o=t[i],l=Wk(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===nn.date&&r===nn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class C0 extends Zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(i,a)=>{if(Gk(i)||Gk(a))return An;const o=Wk(i.value,a.value);return o.valid?((Kk(i)||Kk(a))&&n.dirty(),{status:n.value,value:o.data}):(Qt(r,{code:Pt.invalid_intersection_types}),An)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}C0.create=(e,t,n)=>new C0({left:e,right:t,typeName:zt.ZodIntersection,...Ln(n)});class Nl extends Zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==nn.array)return Qt(r,{code:Pt.invalid_type,expected:nn.array,received:r.parsedType}),An;if(r.data.length<this._def.items.length)return Qt(r,{code:Pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),An;!this._def.rest&&r.data.length>this._def.items.length&&(Qt(r,{code:Pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Rl(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>Ti.mergeArray(n,a)):Ti.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Nl({...this._def,rest:t})}}Nl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Nl({items:e,typeName:zt.ZodTuple,rest:null,...Ln(t)})};class k0 extends Zn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==nn.object)return Qt(r,{code:Pt.invalid_type,expected:nn.object,received:r.parsedType}),An;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in r.data)s.push({key:i._parse(new Rl(r,o,r.path,o)),value:a._parse(new Rl(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?Ti.mergeObjectAsync(n,s):Ti.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Zn?new k0({keyType:t,valueType:n,typeName:zt.ZodRecord,...Ln(r)}):new k0({keyType:Ro.create(),valueType:t,typeName:zt.ZodRecord,...Ln(n)})}}class Kw extends Zn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==nn.map)return Qt(r,{code:Pt.invalid_type,expected:nn.map,received:r.parsedType}),An;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:s._parse(new Rl(r,o,r.path,[c,"key"])),value:i._parse(new Rl(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return An;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(c.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return An;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(c.value,d.value)}return{status:n.value,value:o}}}}Kw.create=(e,t,n)=>new Kw({valueType:t,keyType:e,typeName:zt.ZodMap,...Ln(n)});class Af extends Zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==nn.set)return Qt(r,{code:Pt.invalid_type,expected:nn.set,received:r.parsedType}),An;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Qt(r,{code:Pt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Qt(r,{code:Pt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(l){const c=new Set;for(const d of l){if(d.status==="aborted")return An;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>i._parse(new Rl(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(t,n){return new Af({...this._def,minSize:{value:t,message:dn.toString(n)}})}max(t,n){return new Af({...this._def,maxSize:{value:t,message:dn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Af.create=(e,t)=>new Af({valueType:e,minSize:null,maxSize:null,typeName:zt.ZodSet,...Ln(t)});class yp extends Zn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nn.function)return Qt(n,{code:Pt.invalid_type,expected:nn.function,received:n.parsedType}),An;function r(o,l){return qw({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Uw(),Tp].filter(c=>!!c),issueData:{code:Pt.invalid_arguments,argumentsError:l}})}function s(o,l){return qw({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Uw(),Tp].filter(c=>!!c),issueData:{code:Pt.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Rp){const o=this;return Vi(async function(...l){const c=new Ra([]),d=await o._def.args.parseAsync(l,i).catch(g=>{throw c.addIssue(r(l,g)),c}),h=await Reflect.apply(a,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(s(h,g)),c})})}else{const o=this;return Vi(function(...l){const c=o._def.args.safeParse(l,i);if(!c.success)throw new Ra([r(l,c.error)]);const d=Reflect.apply(a,this,c.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new Ra([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new yp({...this._def,args:Nl.create(t).rest(bf.create())})}returns(t){return new yp({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new yp({args:t||Nl.create([]).rest(bf.create()),returns:n||bf.create(),typeName:zt.ZodFunction,...Ln(r)})}}class T0 extends Zn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}T0.create=(e,t)=>new T0({getter:e,typeName:zt.ZodLazy,...Ln(t)});class A0 extends Zn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Qt(n,{received:n.data,code:Pt.invalid_literal,expected:this._def.value}),An}return{status:"valid",value:t.data}}get value(){return this._def.value}}A0.create=(e,t)=>new A0({value:e,typeName:zt.ZodLiteral,...Ln(t)});function eF(e,t){return new Ku({values:e,typeName:zt.ZodEnum,...Ln(t)})}class Ku extends Zn{constructor(){super(...arguments),Kg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Qt(n,{expected:pr.joinValues(r),received:n.parsedType,code:Pt.invalid_type}),An}if(Vw(this,Kg)||Y5(this,Kg,new Set(this._def.values)),!Vw(this,Kg).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Qt(n,{received:n.data,code:Pt.invalid_enum_value,options:r}),An}return Vi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Ku.create(t,{...this._def,...n})}exclude(t,n=this._def){return Ku.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Kg=new WeakMap;Ku.create=eF;class R0 extends Zn{constructor(){super(...arguments),Wg.set(this,void 0)}_parse(t){const n=pr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==nn.string&&r.parsedType!==nn.number){const s=pr.objectValues(n);return Qt(r,{expected:pr.joinValues(s),received:r.parsedType,code:Pt.invalid_type}),An}if(Vw(this,Wg)||Y5(this,Wg,new Set(pr.getValidEnumValues(this._def.values))),!Vw(this,Wg).has(t.data)){const s=pr.objectValues(n);return Qt(r,{received:r.data,code:Pt.invalid_enum_value,options:s}),An}return Vi(t.data)}get enum(){return this._def.values}}Wg=new WeakMap;R0.create=(e,t)=>new R0({values:e,typeName:zt.ZodNativeEnum,...Ln(t)});class Rp extends Zn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nn.promise&&n.common.async===!1)return Qt(n,{code:Pt.invalid_type,expected:nn.promise,received:n.parsedType}),An;const r=n.parsedType===nn.promise?n.data:Promise.resolve(n.data);return Vi(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Rp.create=(e,t)=>new Rp({type:e,typeName:zt.ZodPromise,...Ln(t)});class Fo extends Zn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===zt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:a=>{Qt(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return An;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?An:l.status==="dirty"||n.value==="dirty"?ip(l.value):l});{if(n.value==="aborted")return An;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?An:o.status==="dirty"||n.value==="dirty"?ip(o.value):o}}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?An:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?An:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!kf(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>kf(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):a);pr.assertNever(s)}}Fo.create=(e,t,n)=>new Fo({schema:e,typeName:zt.ZodEffects,effect:t,...Ln(n)});Fo.createWithPreprocess=(e,t,n)=>new Fo({schema:t,effect:{type:"preprocess",transform:e},typeName:zt.ZodEffects,...Ln(n)});class jo extends Zn{_parse(t){return this._getType(t)===nn.undefined?Vi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}jo.create=(e,t)=>new jo({innerType:e,typeName:zt.ZodOptional,...Ln(t)});class Wu extends Zn{_parse(t){return this._getType(t)===nn.null?Vi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wu.create=(e,t)=>new Wu({innerType:e,typeName:zt.ZodNullable,...Ln(t)});class N0 extends Zn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===nn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}N0.create=(e,t)=>new N0({innerType:e,typeName:zt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ln(t)});class I0 extends Zn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return w0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ra(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ra(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}I0.create=(e,t)=>new I0({innerType:e,typeName:zt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ln(t)});class Ww extends Zn{_parse(t){if(this._getType(t)!==nn.nan){const r=this._getOrReturnCtx(t);return Qt(r,{code:Pt.invalid_type,expected:nn.nan,received:r.parsedType}),An}return{status:"valid",value:t.data}}}Ww.create=e=>new Ww({typeName:zt.ZodNaN,...Ln(e)});const vQ=Symbol("zod_brand");class IA extends Zn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class jy extends Zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?An:i.status==="dirty"?(n.dirty(),ip(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?An:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new jy({in:t,out:n,typeName:zt.ZodPipeline})}}class j0 extends Zn{_parse(t){const n=this._def.innerType._parse(t),r=s=>(kf(s)&&(s.value=Object.freeze(s.value)),s);return w0(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}j0.create=(e,t)=>new j0({innerType:e,typeName:zt.ZodReadonly,...Ln(t)});function H4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function tF(e,t={},n){return e?Ap.create().superRefine((r,s)=>{var i,a;const o=e(r);if(o instanceof Promise)return o.then(l=>{var c,d;if(!l){const h=H4(t,r),m=(d=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&d!==void 0?d:!0;s.addIssue({code:"custom",...h,fatal:m})}});if(!o){const l=H4(t,r),c=(a=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&a!==void 0?a:!0;s.addIssue({code:"custom",...l,fatal:c})}}):Ap.create()}const wQ={object:is.lazycreate};var zt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(zt||(zt={}));const xQ=(e,t={message:`Input not instance of ${e.name}`})=>tF(n=>n instanceof e,t),nF=Ro.create,rF=Hu.create,_Q=Ww.create,SQ=Gu.create,sF=x0.create,EQ=Tf.create,CQ=Hw.create,kQ=_0.create,TQ=S0.create,AQ=Ap.create,RQ=bf.create,NQ=Dc.create,IQ=Gw.create,jQ=Io.create,MQ=is.create,DQ=is.strictCreate,OQ=E0.create,PQ=h1.create,FQ=C0.create,LQ=Nl.create,$Q=k0.create,BQ=Kw.create,zQ=Af.create,UQ=yp.create,qQ=T0.create,VQ=A0.create,HQ=Ku.create,GQ=R0.create,KQ=Rp.create,G4=Fo.create,WQ=jo.create,ZQ=Wu.create,YQ=Fo.createWithPreprocess,XQ=jy.create,JQ=()=>nF().optional(),QQ=()=>rF().optional(),eee=()=>sF().optional(),tee={string:e=>Ro.create({...e,coerce:!0}),number:e=>Hu.create({...e,coerce:!0}),boolean:e=>x0.create({...e,coerce:!0}),bigint:e=>Gu.create({...e,coerce:!0}),date:e=>Tf.create({...e,coerce:!0})},nee=An;var z=Object.freeze({__proto__:null,defaultErrorMap:Tp,setErrorMap:YJ,getErrorMap:Uw,makeIssue:qw,EMPTY_PATH:XJ,addIssueToContext:Qt,ParseStatus:Ti,INVALID:An,DIRTY:ip,OK:Vi,isAborted:Gk,isDirty:Kk,isValid:kf,isAsync:w0,get util(){return pr},get objectUtil(){return Hk},ZodParsedType:nn,getParsedType:gc,ZodType:Zn,datetimeRegex:Q5,ZodString:Ro,ZodNumber:Hu,ZodBigInt:Gu,ZodBoolean:x0,ZodDate:Tf,ZodSymbol:Hw,ZodUndefined:_0,ZodNull:S0,ZodAny:Ap,ZodUnknown:bf,ZodNever:Dc,ZodVoid:Gw,ZodArray:Io,ZodObject:is,ZodUnion:E0,ZodDiscriminatedUnion:h1,ZodIntersection:C0,ZodTuple:Nl,ZodRecord:k0,ZodMap:Kw,ZodSet:Af,ZodFunction:yp,ZodLazy:T0,ZodLiteral:A0,ZodEnum:Ku,ZodNativeEnum:R0,ZodPromise:Rp,ZodEffects:Fo,ZodTransformer:Fo,ZodOptional:jo,ZodNullable:Wu,ZodDefault:N0,ZodCatch:I0,ZodNaN:Ww,BRAND:vQ,ZodBranded:IA,ZodPipeline:jy,ZodReadonly:j0,custom:tF,Schema:Zn,ZodSchema:Zn,late:wQ,get ZodFirstPartyTypeKind(){return zt},coerce:tee,any:AQ,array:jQ,bigint:SQ,boolean:sF,date:EQ,discriminatedUnion:PQ,effect:G4,enum:HQ,function:UQ,instanceof:xQ,intersection:FQ,lazy:qQ,literal:VQ,map:BQ,nan:_Q,nativeEnum:GQ,never:NQ,null:TQ,nullable:ZQ,number:rF,object:MQ,oboolean:eee,onumber:QQ,optional:WQ,ostring:JQ,pipeline:XQ,preprocess:YQ,promise:KQ,record:$Q,set:zQ,strictObject:DQ,string:nF,symbol:CQ,transformer:G4,tuple:LQ,undefined:kQ,union:OQ,unknown:RQ,void:IQ,NEVER:nee,ZodIssueCode:Pt,quotelessJson:ZJ,ZodError:Ra});function ree({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],s=[];for(const{role:i,content:a}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:a});break}case"developer":{r.push({role:"developer",content:a});break}case"remove":{s.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(a.length===1&&a[0].type==="text"){r.push({role:"user",content:a[0].text});break}r.push({role:"user",content:a.map((o,l)=>{var c,d,h,m;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(c=o.mimeType)!=null?c:"image/jpeg"};base64,${Vu(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new vr({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=o.filename)!=null?m:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new vr({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const c of a)switch(c.type){case"text":{o+=c.text;break}case"tool-call":{l.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(l.length>1)throw new vr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of a)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:s}}function K4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:s,top_logprobs:i})=>({token:r,logprob:s,topLogprobs:i?i.map(({token:a,logprob:o})=>({token:a,logprob:o})):[]})))!=null?n:void 0}function Zw(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var jA=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),Il=$f({errorSchema:jA,errorToMessage:e=>e.error.message});function Yw({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function see({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const s=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(s==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const a=e.toolChoice;if(t){const c=[];for(const h of s)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(a==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(a.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new vr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:a.toolName},toolWarnings:i}}}const o=[];for(const c of s)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):o.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(a==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=a.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:i};default:{const c=l;throw new vr({functionality:`Unsupported tool choice type: ${c}`})}}}var iee=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:Zk(this.modelId)}get defaultObjectGenerationMode(){return lee(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:a,presencePenalty:o,stopSequences:l,responseFormat:c,seed:d,providerMetadata:h}){var m,g,v,b,w,x,_,E;const k=e.type,T=[];i!=null&&T.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&T.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const R=this.settings.useLegacyFunctionCalling;if(R&&this.settings.parallelToolCalls===!0)throw new vr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(R&&this.supportsStructuredOutputs)throw new vr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:M,warnings:I}=ree({prompt:t,useLegacyFunctionCalling:R,systemMessageMode:cee(this.modelId)});T.push(...I);const O={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:s,frequency_penalty:a,presence_penalty:o,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(m=c.name)!=null?m:"response",description:c.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(w=h==null?void 0:h.openai)==null?void 0:w.prediction,reasoning_effort:(_=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?_:this.settings.reasoningEffort,messages:M};switch(Zk(this.modelId)?(O.temperature!=null&&(O.temperature=void 0,T.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),O.top_p!=null&&(O.top_p=void 0,T.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),O.frequency_penalty!=null&&(O.frequency_penalty=void 0,T.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),O.presence_penalty!=null&&(O.presence_penalty=void 0,T.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),O.logit_bias!=null&&(O.logit_bias=void 0,T.push({type:"other",message:"logitBias is not supported for reasoning models"})),O.logprobs!=null&&(O.logprobs=void 0,T.push({type:"other",message:"logprobs is not supported for reasoning models"})),O.top_logprobs!=null&&(O.top_logprobs=void 0,T.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),O.max_tokens!=null&&(O.max_completion_tokens==null&&(O.max_completion_tokens=O.max_tokens),O.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&O.temperature!=null&&(O.temperature=void 0,T.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),k){case"regular":{const{tools:P,tool_choice:U,functions:j,function_call:V,toolWarnings:$}=see({mode:e,useLegacyFunctionCalling:R,structuredOutputs:this.supportsStructuredOutputs});return{args:{...O,tools:P,tool_choice:U,functions:j,function_call:V},warnings:[...T,...$]}}case"object-json":return{args:{...O,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:T};case"object-tool":return{args:R?{...O,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...O,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:T};default:{const P=k;throw new Error(`Unsupported type: ${P}`)}}}async doGenerate(e){var t,n,r,s,i,a,o,l;const{args:c,warnings:d}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await _s({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:c,failedResponseHandler:Il,successfulResponseHandler:fa(aee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=c,w=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,_=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(_==null?void 0:_.cached_tokens)!=null&&(E.openai.cachedPromptTokens=_==null?void 0:_.cached_tokens),{text:(r=w.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&w.message.function_call?[{toolCallType:"function",toolCallId:na(),toolName:w.message.function_call.name,args:w.message.function_call.arguments}]:(s=w.message.tool_calls)==null?void 0:s.map(k=>{var T;return{toolCallType:"function",toolCallId:(T=k.id)!=null?T:na(),toolName:k.function.name,args:k.function.arguments}}),finishReason:Zw(w.finish_reason),usage:{promptTokens:(a=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?a:NaN,completionTokens:(l=(o=m.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:Yw(m),warnings:d,logprobs:K4(w.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_.toolCallId,toolName:_.toolName,argsTextDelta:_.args}),x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await _s({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:r,failedResponseHandler:Il,successfulResponseHandler:em(oee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:a,...o}=t,l=[];let c="unknown",d={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,w){var x,_,E,k,T,R,M,I,O,P,U,j;if(!b.success){c="error",w.enqueue({type:"error",error:b.error});return}const V=b.value;if("error"in V){c="error",w.enqueue({type:"error",error:V.error});return}if(m&&(m=!1,w.enqueue({type:"response-metadata",...Yw(V)})),V.usage!=null){const{prompt_tokens:X,completion_tokens:ie,prompt_tokens_details:Z,completion_tokens_details:ee}=V.usage;d={promptTokens:X??void 0,completionTokens:ie??void 0},(ee==null?void 0:ee.reasoning_tokens)!=null&&(v.openai.reasoningTokens=ee==null?void 0:ee.reasoning_tokens),(ee==null?void 0:ee.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=ee==null?void 0:ee.accepted_prediction_tokens),(ee==null?void 0:ee.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=ee==null?void 0:ee.rejected_prediction_tokens),(Z==null?void 0:Z.cached_tokens)!=null&&(v.openai.cachedPromptTokens=Z==null?void 0:Z.cached_tokens)}const $=V.choices[0];if(($==null?void 0:$.finish_reason)!=null&&(c=Zw($.finish_reason)),($==null?void 0:$.delta)==null)return;const re=$.delta;re.content!=null&&w.enqueue({type:"text-delta",textDelta:re.content});const J=K4($==null?void 0:$.logprobs);J!=null&&J.length&&(h===void 0&&(h=[]),h.push(...J));const te=g&&re.function_call!=null?[{type:"function",id:na(),function:re.function_call,index:0}]:re.tool_calls;if(te!=null)for(const X of te){const ie=X.index;if(l[ie]==null){if(X.type!=="function")throw new gp({data:X,message:"Expected 'function' type."});if(X.id==null)throw new gp({data:X,message:"Expected 'id' to be a string."});if(((x=X.function)==null?void 0:x.name)==null)throw new gp({data:X,message:"Expected 'function.name' to be a string."});l[ie]={id:X.id,type:"function",function:{name:X.function.name,arguments:(_=X.function.arguments)!=null?_:""},hasFinished:!1};const ee=l[ie];((E=ee.function)==null?void 0:E.name)!=null&&((k=ee.function)==null?void 0:k.arguments)!=null&&(ee.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ee.id,toolName:ee.function.name,argsTextDelta:ee.function.arguments}),zw(ee.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(T=ee.id)!=null?T:na(),toolName:ee.function.name,args:ee.function.arguments}),ee.hasFinished=!0));continue}const Z=l[ie];Z.hasFinished||(((R=X.function)==null?void 0:R.arguments)!=null&&(Z.function.arguments+=(I=(M=X.function)==null?void 0:M.arguments)!=null?I:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.id,toolName:Z.function.name,argsTextDelta:(O=X.function.arguments)!=null?O:""}),((P=Z.function)==null?void 0:P.name)!=null&&((U=Z.function)==null?void 0:U.arguments)!=null&&zw(Z.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=Z.id)!=null?j:na(),toolName:Z.function.name,args:Z.function.arguments}),Z.hasFinished=!0))}},flush(b){var w,x;b.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(w=d.promptTokens)!=null?w:NaN,completionTokens:(x=d.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:s},request:{body:JSON.stringify(r)},warnings:n}}},iF=z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish(),prompt_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),completion_tokens_details:z.object({reasoning_tokens:z.number().nullish(),accepted_prediction_tokens:z.number().nullish(),rejected_prediction_tokens:z.number().nullish()}).nullish()}).nullish(),aee=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),function_call:z.object({arguments:z.string(),name:z.string()}).nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),index:z.number(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullish()})),usage:iF}),oee=z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),function_call:z.object({name:z.string().optional(),arguments:z.string().optional()}).nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").nullish(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullish(),index:z.number()})),usage:iF}),jA]);function Zk(e){return e.startsWith("o")}function lee(e){return e.startsWith("gpt-4o-audio-preview")}function cee(e){var t,n;return Zk(e)?(n=(t=uee[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var uee={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function dee({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let s="";e[0].role==="system"&&(s+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:a}of e)switch(i){case"system":throw new pc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new vr({functionality:"images"})}}).join("");s+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new vr({functionality:"tool-call messages"})}}).join("");s+=`${r}:
${o}

`;break}case"tool":throw new vr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return s+=`${r}:
`,{prompt:s,stopSequences:[`
${n}:`]}}function W4(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,s])=>({token:r,logprob:s})):[]}))}var fee=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:s,topP:i,topK:a,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:d,seed:h}){var m;const g=e.type,v=[];a!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:w}=dee({prompt:n,inputFormat:t}),x=[...w??[],...c??[]],_={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:s,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new vr({functionality:"tools"});if(e.toolChoice)throw new vr({functionality:"toolChoice"});return{args:_,warnings:v}}case"object-json":throw new vr({functionality:"object-json mode"});case"object-tool":throw new vr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:s,rawValue:i}=await _s({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:t,failedResponseHandler:Il,successfulResponseHandler:fa(hee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t,l=s.choices[0];return{text:l.text,usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},finishReason:Zw(l.finish_reason),logprobs:W4(l.logprobs),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:r,body:i},response:Yw(s),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await _s({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:r,failedResponseHandler:Il,successfulResponseHandler:em(pee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){l="error",g.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){l="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...Yw(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=Zw(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const w=W4(b==null?void 0:b.logprobs);w!=null&&w.length&&(d===void 0&&(d=[]),d.push(...w))},flush(m){m.enqueue({type:"finish",finishReason:l,logprobs:d,usage:c})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:s},warnings:n,request:{body:JSON.stringify(r)}}}},hee=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullish()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()})}),pee=z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string().nullish(),index:z.number(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullish()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),jA]),mee=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new l1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:s}=await _s({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:xs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Il,successfulResponseHandler:fa(gee),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.data.map(i=>i.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},gee=z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()}),yee={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},bee=new Set(["gpt-image-1"]),vee=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:yee[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:s,providerOptions:i,headers:a,abortSignal:o}){var l,c,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(d=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await _s({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:xs(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},...bee.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Il,successfulResponseHandler:fa(wee),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(w=>w.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:b}}}},wee=z.object({data:z.array(z.object({b64_json:z.string()}))}),xee=z.object({include:z.array(z.string()).nullish(),language:z.string().nullish(),prompt:z.string().nullish(),temperature:z.number().min(0).max(1).nullish().default(0),timestampGranularities:z.array(z.enum(["word","segment"])).nullish().default(["segment"])}),Z4={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},_ee=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var r,s,i,a,o;const l=[],c=u1({provider:"openai",providerOptions:n,schema:xee}),d=new FormData,h=e instanceof Uint8Array?new Blob([e]):new Blob([d1(e)]);if(d.append("model",this.modelId),d.append("file",new File([h],"audio",{type:t})),c){const m={include:(r=c.include)!=null?r:void 0,language:(s=c.language)!=null?s:void 0,prompt:(i=c.prompt)!=null?i:void 0,temperature:(a=c.temperature)!=null?a:void 0,timestamp_granularities:(o=c.timestampGranularities)!=null?o:void 0};for(const g in m){const v=m[g];v!==void 0&&d.append(g,String(v))}}return{formData:d,warnings:l}}async doGenerate(e){var t,n,r,s,i,a;const o=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{formData:l,warnings:c}=this.getArgs(e),{value:d,responseHeaders:h,rawValue:m}=await HJ({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),formData:l,failedResponseHandler:Il,successfulResponseHandler:fa(See),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=d.language!=null&&d.language in Z4?Z4[d.language]:void 0;return{text:d.text,segments:(i=(s=d.words)==null?void 0:s.map(v=>({text:v.word,startSecond:v.start,endSecond:v.end})))!=null?i:[],language:g,durationInSeconds:(a=d.duration)!=null?a:void 0,warnings:c,response:{timestamp:o,modelId:this.modelId,headers:h,body:m}}}},See=z.object({text:z.string(),language:z.string().nullish(),duration:z.number().nullish(),words:z.array(z.object({word:z.string(),start:z.number(),end:z.number()})).nullish()});function Eee({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:s,content:i}of e)switch(s){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const a=t;throw new Error(`Unsupported system message mode: ${a}`)}}break}case"user":{n.push({role:"user",content:i.map((a,o)=>{var l,c,d,h;switch(a.type){case"text":return{type:"input_text",text:a.text};case"image":return{type:"input_image",image_url:a.image instanceof URL?a.image.toString():`data:${(l=a.mimeType)!=null?l:"image/jpeg"};base64,${Vu(a.image)}`,detail:(d=(c=a.providerMetadata)==null?void 0:c.openai)==null?void 0:d.imageDetail};case"file":{if(a.data instanceof URL)throw new vr({functionality:"File URLs in user messages"});switch(a.mimeType){case"application/pdf":return{type:"input_file",filename:(h=a.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${a.data}`};default:throw new vr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const a of i)switch(a.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:a.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:a.toolCallId,name:a.toolName,arguments:JSON.stringify(a.args)});break}}break}case"tool":{for(const a of i)n.push({type:"function_call_output",call_id:a.toolCallId,output:JSON.stringify(a.result)});break}default:{const a=s;throw new Error(`Unsupported role: ${a}`)}}return{messages:n,warnings:r}}function Y4({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function Cee({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,s=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:s};const i=e.toolChoice,a=[];for(const l of r)switch(l.type){case"function":a.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":a.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:s.push({type:"unsupported-tool",tool:l});break}break;default:s.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:a,tool_choice:void 0,toolWarnings:s};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:a,tool_choice:o,toolWarnings:s};case"tool":return i.toolName==="web_search_preview"?{tools:a,tool_choice:{type:"web_search_preview"},toolWarnings:s}:{tools:a,tool_choice:{type:"function",name:i.toolName},toolWarnings:s};default:{const l=o;throw new vr({functionality:`Unsupported tool choice type: ${l}`})}}}var kee=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:s,topK:i,presencePenalty:a,frequencyPenalty:o,seed:l,prompt:c,providerMetadata:d,responseFormat:h}){var m,g,v;const b=[],w=Vee(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),a!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:_,warnings:E}=Eee({prompt:c,systemMessageMode:w.systemMessageMode});b.push(...E);const k=u1({provider:"openai",providerOptions:d,schema:Hee}),T=(m=k==null?void 0:k.strictSchemas)!=null?m:!0,R={model:this.modelId,input:_,temperature:n,top_p:s,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:T,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:k==null?void 0:k.metadata,parallel_tool_calls:k==null?void 0:k.parallelToolCalls,previous_response_id:k==null?void 0:k.previousResponseId,store:k==null?void 0:k.store,user:k==null?void 0:k.user,instructions:k==null?void 0:k.instructions,...w.isReasoningModel&&((k==null?void 0:k.reasoningEffort)!=null||(k==null?void 0:k.reasoningSummary)!=null)&&{reasoning:{...(k==null?void 0:k.reasoningEffort)!=null&&{effort:k.reasoningEffort},...(k==null?void 0:k.reasoningSummary)!=null&&{summary:k.reasoningSummary}}},...w.requiredAutoTruncation&&{truncation:"auto"}};switch(w.isReasoningModel&&(R.temperature!=null&&(R.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),R.top_p!=null&&(R.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:M,tool_choice:I,toolWarnings:O}=Cee({mode:e,strict:T});return{args:{...R,tools:M,tool_choice:I},warnings:[...b,...O]}}case"object-json":return{args:{...R,text:{format:e.schema!=null?{type:"json_schema",strict:T,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...R,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:T}]},warnings:b};default:{const M=x;throw new Error(`Unsupported type: ${M}`)}}}async doGenerate(e){var t,n,r,s,i,a,o;const{args:l,warnings:c}=this.getArgs(e),{responseHeaders:d,value:h,rawValue:m}=await _s({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:l,failedResponseHandler:Il,successfulResponseHandler:fa(z.object({id:z.string(),created_at:z.number(),model:z.string(),output:z.array(z.discriminatedUnion("type",[z.object({type:z.literal("message"),role:z.literal("assistant"),content:z.array(z.object({type:z.literal("output_text"),text:z.string(),annotations:z.array(z.object({type:z.literal("url_citation"),start_index:z.number(),end_index:z.number(),url:z.string(),title:z.string()}))}))}),z.object({type:z.literal("function_call"),call_id:z.string(),name:z.string(),arguments:z.string()}),z.object({type:z.literal("web_search_call")}),z.object({type:z.literal("computer_call")}),z.object({type:z.literal("reasoning"),summary:z.array(z.object({type:z.literal("summary_text"),text:z.string()}))})])),incomplete_details:z.object({reason:z.string()}).nullable(),usage:aF})),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=h.output.filter(w=>w.type==="message").flatMap(w=>w.content).filter(w=>w.type==="output_text"),v=h.output.filter(w=>w.type==="function_call").map(w=>({toolCallType:"function",toolCallId:w.call_id,toolName:w.name,args:w.arguments})),b=(n=(t=h.output.find(w=>w.type==="reasoning"))==null?void 0:t.summary)!=null?n:null;return{text:g.map(w=>w.text).join(`
`),sources:g.flatMap(w=>w.annotations.map(x=>{var _,E,k;return{sourceType:"url",id:(k=(E=(_=this.config).generateId)==null?void 0:E.call(_))!=null?k:na(),url:x.url,title:x.title}})),finishReason:Y4({finishReason:(r=h.incomplete_details)==null?void 0:r.reason,hasToolCalls:v.length>0}),toolCalls:v.length>0?v:void 0,reasoning:b?b.map(w=>({type:"text",text:w.text})):void 0,usage:{promptTokens:h.usage.input_tokens,completionTokens:h.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:d,body:m},request:{body:JSON.stringify(l)},response:{id:h.id,timestamp:new Date(h.created_at*1e3),modelId:h.model},providerMetadata:{openai:{responseId:h.id,cachedPromptTokens:(i=(s=h.usage.input_tokens_details)==null?void 0:s.cached_tokens)!=null?i:null,reasoningTokens:(o=(a=h.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?o:null}},warnings:c}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:s}=await _s({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Il,successfulResponseHandler:em(Oee),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let a="unknown",o=NaN,l=NaN,c=null,d=null,h=null;const m={};let g=!1;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var w,x,_,E,k,T,R,M;if(!v.success){a="error",b.enqueue({type:"error",error:v.error});return}const I=v.value;if(zee(I))I.item.type==="function_call"&&(m[I.output_index]={toolName:I.item.name,toolCallId:I.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:I.item.call_id,toolName:I.item.name,argsTextDelta:I.item.arguments}));else if(Bee(I)){const O=m[I.output_index];O!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:O.toolCallId,toolName:O.toolName,argsTextDelta:I.delta})}else $ee(I)?(h=I.response.id,b.enqueue({type:"response-metadata",id:I.response.id,timestamp:new Date(I.response.created_at*1e3),modelId:I.response.model})):Pee(I)?b.enqueue({type:"text-delta",textDelta:I.delta}):qee(I)?b.enqueue({type:"reasoning",textDelta:I.delta}):Fee(I)&&I.item.type==="function_call"?(m[I.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:I.item.call_id,toolName:I.item.name,args:I.item.arguments})):Lee(I)?(a=Y4({finishReason:(w=I.response.incomplete_details)==null?void 0:w.reason,hasToolCalls:g}),o=I.response.usage.input_tokens,l=I.response.usage.output_tokens,c=(_=(x=I.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?_:c,d=(k=(E=I.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?k:d):Uee(I)&&b.enqueue({type:"source",source:{sourceType:"url",id:(M=(R=(T=i.config).generateId)==null?void 0:R.call(T))!=null?M:na(),url:I.annotation.url,title:I.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:a,usage:{promptTokens:o,completionTokens:l},...(c!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},aF=z.object({input_tokens:z.number(),input_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),output_tokens:z.number(),output_tokens_details:z.object({reasoning_tokens:z.number().nullish()}).nullish()}),Tee=z.object({type:z.literal("response.output_text.delta"),delta:z.string()}),Aee=z.object({type:z.enum(["response.completed","response.incomplete"]),response:z.object({incomplete_details:z.object({reason:z.string()}).nullish(),usage:aF})}),Ree=z.object({type:z.literal("response.created"),response:z.object({id:z.string(),created_at:z.number(),model:z.string()})}),Nee=z.object({type:z.literal("response.output_item.done"),output_index:z.number(),item:z.discriminatedUnion("type",[z.object({type:z.literal("message")}),z.object({type:z.literal("function_call"),id:z.string(),call_id:z.string(),name:z.string(),arguments:z.string(),status:z.literal("completed")})])}),Iee=z.object({type:z.literal("response.function_call_arguments.delta"),item_id:z.string(),output_index:z.number(),delta:z.string()}),jee=z.object({type:z.literal("response.output_item.added"),output_index:z.number(),item:z.discriminatedUnion("type",[z.object({type:z.literal("message")}),z.object({type:z.literal("function_call"),id:z.string(),call_id:z.string(),name:z.string(),arguments:z.string()})])}),Mee=z.object({type:z.literal("response.output_text.annotation.added"),annotation:z.object({type:z.literal("url_citation"),url:z.string(),title:z.string()})}),Dee=z.object({type:z.literal("response.reasoning_summary_text.delta"),item_id:z.string(),output_index:z.number(),summary_index:z.number(),delta:z.string()}),Oee=z.union([Tee,Aee,Ree,Nee,Iee,jee,Mee,Dee,z.object({type:z.string()}).passthrough()]);function Pee(e){return e.type==="response.output_text.delta"}function Fee(e){return e.type==="response.output_item.done"}function Lee(e){return e.type==="response.completed"||e.type==="response.incomplete"}function $ee(e){return e.type==="response.created"}function Bee(e){return e.type==="response.function_call_arguments.delta"}function zee(e){return e.type==="response.output_item.added"}function Uee(e){return e.type==="response.output_text.annotation.added"}function qee(e){return e.type==="response.reasoning_summary_text.delta"}function Vee(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var Hee=z.object({metadata:z.any().nullish(),parallelToolCalls:z.boolean().nullish(),previousResponseId:z.string().nullish(),store:z.boolean().nullish(),user:z.string().nullish(),reasoningEffort:z.string().nullish(),strictSchemas:z.boolean().nullish(),instructions:z.string().nullish(),reasoningSummary:z.string().nullish()}),Gee=z.object({});function Kee({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:Gee}}var Wee={webSearchPreview:Kee},Zee=z.object({instructions:z.string().nullish(),speed:z.number().min(.25).max(4).default(1).nullish()}),Yee=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:r,instructions:s,providerOptions:i}){const a=[],o=u1({provider:"openai",providerOptions:i,schema:Zee}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:r,instructions:s};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?l.response_format=n:a.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),o){const c={};for(const d in c){const h=c[d];h!==void 0&&(l[d]=h)}}return{requestBody:l,warnings:a}}async doGenerate(e){var t,n,r;const s=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{requestBody:i,warnings:a}=this.getArgs(e),{value:o,responseHeaders:l,rawValue:c}=await _s({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:i,failedResponseHandler:Il,successfulResponseHandler:GJ(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:o,warnings:a,request:{body:JSON.stringify(i)},response:{timestamp:s,modelId:this.modelId,headers:l,body:c}}}};function oF(e={}){var t,n,r;const s=(t=f1(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",a=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${K5({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(x,_={})=>new iee(x,_,{provider:`${a}.chat`,url:({path:E})=>`${s}${E}`,headers:o,compatibility:i,fetch:e.fetch}),c=(x,_={})=>new fee(x,_,{provider:`${a}.completion`,url:({path:E})=>`${s}${E}`,headers:o,compatibility:i,fetch:e.fetch}),d=(x,_={})=>new mee(x,_,{provider:`${a}.embedding`,url:({path:E})=>`${s}${E}`,headers:o,fetch:e.fetch}),h=(x,_={})=>new vee(x,_,{provider:`${a}.image`,url:({path:E})=>`${s}${E}`,headers:o,fetch:e.fetch}),m=x=>new _ee(x,{provider:`${a}.transcription`,url:({path:_})=>`${s}${_}`,headers:o,fetch:e.fetch}),g=x=>new Yee(x,{provider:`${a}.speech`,url:({path:_})=>`${s}${_}`,headers:o,fetch:e.fetch}),v=(x,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return x==="gpt-3.5-turbo-instruct"?c(x,_):l(x,_)},b=x=>new kee(x,{provider:`${a}.responses`,url:({path:_})=>`${s}${_}`,headers:o,fetch:e.fetch}),w=function(x,_){return v(x,_)};return w.languageModel=v,w.chat=l,w.completion=c,w.responses=b,w.embedding=d,w.textEmbedding=d,w.textEmbeddingModel=d,w.image=h,w.imageModel=h,w.transcription=m,w.transcriptionModel=m,w.speech=g,w.speechModel=g,w.tools=Wee,w}oF({compatibility:"strict"});function Ya(e){if(Xee(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:s,items:i,allOf:a,anyOf:o,oneOf:l,format:c,const:d,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),d!==void 0&&(g.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),s!=null&&(g.properties=Object.entries(s).reduce((v,[b,w])=>(v[b]=Ya(w),v),{})),i&&(g.items=Array.isArray(i)?i.map(Ya):Ya(i)),a&&(g.allOf=a.map(Ya)),o)if(o.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=Ya(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(Ya),g.nullable=!0}else g.anyOf=o.map(Ya);return l&&(g.oneOf=l.map(Ya)),h!==void 0&&(g.minLength=h),g}function Xee(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Jee(e){var t,n;const r=[],s=[];let i=!0;for(const{role:a,content:o}of e)switch(a){case"system":{if(!i)throw new vr({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const c of o)switch(c.type){case"text":{l.push({text:c.text});break}case"image":{l.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:Vu(c.image)}});break}case"file":{l.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}s.push({role:"user",parts:l});break}case"assistant":{i=!1,s.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new vr({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new vr({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,s.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:s}}function X4(e){return e.includes("/")?e:`models/${e}`}var Qee=z.object({error:z.object({code:z.number().nullable(),message:z.string(),status:z.string()})}),Yk=$f({errorSchema:Qee,errorToMessage:e=>e.error.message});function ete(e,t,n,r){var s,i;const a=(s=e.tools)!=null&&s.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(a==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const g of a)g.type==="provider-defined"?o.push({type:"unsupported-tool",tool:g}):d.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:Ya(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const g=m;throw new vr({functionality:`Unsupported tool choice type: ${g}`})}}}function J4({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var tte=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:a,presencePenalty:o,stopSequences:l,responseFormat:c,seed:d,providerMetadata:h}){var m,g;const v=e.type,b=[],w=u1({provider:"google",providerOptions:h,schema:ite}),x={maxOutputTokens:n,temperature:r,topK:i,topP:s,frequencyPenalty:a,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?Ya(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:w==null?void 0:w.responseModalities,thinkingConfig:w==null?void 0:w.thinkingConfig},{contents:_,systemInstruction:E}=Jee(t);switch(v){case"regular":{const{tools:k,toolConfig:T,toolWarnings:R}=ete(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:k,toolConfig:T,cachedContent:this.settings.cachedContent},warnings:[...b,...R]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Ya(e.schema):void 0},contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:_,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:Ya(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const k=v;throw new Error(`Unsupported type: ${k}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,s,i;const{args:a,warnings:o}=await this.getArgs(e),l=JSON.stringify(a),c=xs(await Vk(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:m}=await _s({url:`${this.config.baseURL}/${X4(this.modelId)}:generateContent`,headers:c,body:a,failedResponseHandler:Yk,successfulResponseHandler:fa(rte),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=a,b=h.candidates[0],w=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=Q4({parts:w,generateId:this.config.generateId}),_=h.usageMetadata;return{text:eM(w),files:(t=tM(w))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:J4({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=_==null?void 0:_.promptTokenCount)!=null?n:NaN,completionTokens:(r=_==null?void 0:_.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:d,body:m},warnings:o,providerMetadata:{google:{groundingMetadata:(s=b.groundingMetadata)!=null?s:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:nM({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),s=xs(await Vk(this.config.headers),e.headers),{responseHeaders:i,value:a}=await _s({url:`${this.config.baseURL}/${X4(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:t,failedResponseHandler:Yk,successfulResponseHandler:em(ste),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let c="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var w,x,_,E,k,T;if(!v.success){b.enqueue({type:"error",error:v.error});return}const R=v.value,M=R.usageMetadata;M!=null&&(d={promptTokens:(w=M.promptTokenCount)!=null?w:NaN,completionTokens:(x=M.candidatesTokenCount)!=null?x:NaN});const I=(_=R.candidates)==null?void 0:_[0];if(I==null)return;const O=I.content;if(O!=null){const P=eM(O.parts);P!=null&&b.enqueue({type:"text-delta",textDelta:P});const U=tM(O.parts);if(U!=null)for(const V of U)b.enqueue({type:"file",mimeType:V.inlineData.mimeType,data:V.inlineData.data});const j=Q4({parts:O.parts,generateId:m});if(j!=null)for(const V of j)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:V.toolCallId,toolName:V.toolName,argsTextDelta:V.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:V.toolCallId,toolName:V.toolName,args:V.args}),g=!0}if(I.finishReason!=null){c=J4({finishReason:I.finishReason,hasToolCalls:g});const P=(E=nM({groundingMetadata:I.groundingMetadata,generateId:m}))!=null?E:[];for(const U of P)b.enqueue({type:"source",source:U});h={google:{groundingMetadata:(k=I.groundingMetadata)!=null?k:null,safetyRatings:(T=I.safetyRatings)!=null?T:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function Q4({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function eM(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function tM(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function nM({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var lF=z.object({role:z.string(),parts:z.array(z.union([z.object({text:z.string()}),z.object({functionCall:z.object({name:z.string(),args:z.unknown()})}),z.object({inlineData:z.object({mimeType:z.string(),data:z.string()})})])).nullish()}),nte=z.object({web:z.object({uri:z.string(),title:z.string()}).nullish(),retrievedContext:z.object({uri:z.string(),title:z.string()}).nullish()}),cF=z.object({webSearchQueries:z.array(z.string()).nullish(),retrievalQueries:z.array(z.string()).nullish(),searchEntryPoint:z.object({renderedContent:z.string()}).nullish(),groundingChunks:z.array(nte).nullish(),groundingSupports:z.array(z.object({segment:z.object({startIndex:z.number().nullish(),endIndex:z.number().nullish(),text:z.string().nullish()}),segment_text:z.string().nullish(),groundingChunkIndices:z.array(z.number()).nullish(),supportChunkIndices:z.array(z.number()).nullish(),confidenceScores:z.array(z.number()).nullish(),confidenceScore:z.array(z.number()).nullish()})).nullish(),retrievalMetadata:z.union([z.object({webDynamicRetrievalScore:z.number()}),z.object({})]).nullish()}),uF=z.object({category:z.string().nullish(),probability:z.string().nullish(),probabilityScore:z.number().nullish(),severity:z.string().nullish(),severityScore:z.number().nullish(),blocked:z.boolean().nullish()}),rte=z.object({candidates:z.array(z.object({content:lF.nullish().or(z.object({}).strict()),finishReason:z.string().nullish(),safetyRatings:z.array(uF).nullish(),groundingMetadata:cF.nullish()})),usageMetadata:z.object({promptTokenCount:z.number().nullish(),candidatesTokenCount:z.number().nullish(),totalTokenCount:z.number().nullish()}).nullish()}),ste=z.object({candidates:z.array(z.object({content:lF.nullish(),finishReason:z.string().nullish(),safetyRatings:z.array(uF).nullish(),groundingMetadata:cF.nullish()})).nullish(),usageMetadata:z.object({promptTokenCount:z.number().nullish(),candidatesTokenCount:z.number().nullish(),totalTokenCount:z.number().nullish()}).nullish()}),ite=z.object({responseModalities:z.array(z.enum(["TEXT","IMAGE"])).nullish(),thinkingConfig:z.object({thinkingBudget:z.number().nullish()}).nullish()}),ate=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new l1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=xs(await Vk(this.config.headers),t),{responseHeaders:s,value:i}=await _s({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(a=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:a}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:Yk,successfulResponseHandler:fa(ote),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(a=>a.values),usage:void 0,rawResponse:{headers:s}}}},ote=z.object({embeddings:z.array(z.object({values:z.array(z.number())}))});function lte(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function dF(e={}){var t;const n=(t=f1(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":K5({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),s=(o,l={})=>{var c;return new tte(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:na,isSupportedUrl:lte,fetch:e.fetch})},i=(o,l={})=>new ate(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),a=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return s(o,l)};return a.languageModel=s,a.chat=s,a.generativeAI=s,a.embedding=i,a.textEmbedding=i,a.textEmbeddingModel=i,a}dF();var fF="vercel.ai.error",cte=Symbol.for(fF),hF,ute=class pF extends Error{constructor({name:t,message:n,cause:r}){super(n),this[hF]=!0,this.name=t,this.cause=r}static isInstance(t){return pF.hasMarker(t,fF)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};hF=cte;var ri=ute,mF="AI_APICallError",gF=`vercel.ai.error.${mF}`,dte=Symbol.for(gF),yF,bc=class extends ri{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:s,responseBody:i,cause:a,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:mF,message:e,cause:a}),this[yF]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=s,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return ri.hasMarker(e,gF)}};yF=dte;var bF="AI_EmptyResponseBodyError",vF=`vercel.ai.error.${bF}`,fte=Symbol.for(vF),wF,hte=class extends ri{constructor({message:e="Empty response body"}={}){super({name:bF,message:e}),this[wF]=!0}static isInstance(e){return ri.hasMarker(e,vF)}};wF=fte;function xF(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var _F="AI_InvalidArgumentError",SF=`vercel.ai.error.${_F}`,pte=Symbol.for(SF),EF,mte=class extends ri{constructor({message:t,cause:n,argument:r}){super({name:_F,message:t,cause:n}),this[EF]=!0,this.argument=r}static isInstance(t){return ri.hasMarker(t,SF)}};EF=pte;var CF="AI_InvalidPromptError",kF=`vercel.ai.error.${CF}`,gte=Symbol.for(kF),TF,yte=class extends ri{constructor({prompt:e,message:t,cause:n}){super({name:CF,message:`Invalid prompt: ${t}`,cause:n}),this[TF]=!0,this.prompt=e}static isInstance(e){return ri.hasMarker(e,kF)}};TF=gte;var AF="AI_InvalidResponseDataError",RF=`vercel.ai.error.${AF}`,bte=Symbol.for(RF),NF,B2=class extends ri{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:AF,message:t}),this[NF]=!0,this.data=e}static isInstance(e){return ri.hasMarker(e,RF)}};NF=bte;var IF="AI_JSONParseError",jF=`vercel.ai.error.${IF}`,vte=Symbol.for(jF),MF,Xw=class extends ri{constructor({text:e,cause:t}){super({name:IF,message:`JSON parsing failed: Text: ${e}.
Error message: ${xF(t)}`,cause:t}),this[MF]=!0,this.text=e}static isInstance(e){return ri.hasMarker(e,jF)}};MF=vte;var DF="AI_LoadAPIKeyError",OF=`vercel.ai.error.${DF}`,wte=Symbol.for(OF),PF,Bv=class extends ri{constructor({message:e}){super({name:DF,message:e}),this[PF]=!0}static isInstance(e){return ri.hasMarker(e,OF)}};PF=wte;var FF="AI_TypeValidationError",LF=`vercel.ai.error.${FF}`,xte=Symbol.for(LF),$F,_te=class Xk extends ri{constructor({value:t,cause:n}){super({name:FF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${xF(n)}`,cause:n}),this[$F]=!0,this.value=t}static isInstance(t){return ri.hasMarker(t,LF)}static wrap({value:t,cause:n}){return Xk.isInstance(n)&&n.value===t?n:new Xk({value:t,cause:n})}};$F=xte;var Jw=_te,BF="AI_UnsupportedFunctionalityError",zF=`vercel.ai.error.${BF}`,Ste=Symbol.for(zF),UF,Ja=class extends ri{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:BF,message:t}),this[UF]=!0,this.functionality=e}static isInstance(e){return ri.hasMarker(e,zF)}};UF=Ste;let Ete=(e,t=21)=>(n=t)=>{let r="",s=n|0;for(;s--;)r+=e[Math.random()*e.length|0];return r},rM=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function z2(e){}function Cte(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=z2,onError:n=z2,onRetry:r=z2,onComment:s}=e;let i="",a=!0,o,l="",c="";function d(b){const w=a?b.replace(/^\xEF\xBB\xBF/,""):b,[x,_]=kte(`${i}${w}`);for(const E of x)h(E);i=_,a=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){s&&s(b.slice(b.startsWith(": ")?2:1));return}const w=b.indexOf(":");if(w!==-1){const x=b.slice(0,w),_=b[w+1]===" "?2:1,E=b.slice(w+_);m(x,E,b);return}m(b,"",b)}function m(b,w,x){switch(b){case"event":c=w;break;case"data":l=`${l}${w}
`;break;case"id":o=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new rM(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:x}));break;default:n(new rM(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:w,line:x}));break}}function g(){l.length>0&&t({id:o,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",c=""}function v(b={}){i&&b.consume&&h(i),a=!0,o=void 0,l="",c="",i=""}return{feed:d,reset:v}}function kte(e){const t=[];let n="",r=0;for(;r<e.length;){const s=e.indexOf("\r",r),i=e.indexOf(`
`,r);let a=-1;if(s!==-1&&i!==-1?a=Math.min(s,i):s!==-1?a=s:i!==-1&&(a=i),a===-1){n=e.slice(r);break}else{const o=e.slice(r,a);t.push(o),r=a+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Tte extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let s;super({start(i){s=Cte({onEvent:a=>{i.enqueue(a)},onError(a){t==="terminate"?i.error(a):typeof t=="function"&&t(a)},onRetry:n,onComment:r})},transform(i){s.feed(i)}})}}var Ate={};function Qw(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function p1(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Rte=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=Ete(n,t);if(e==null)return s;if(n.includes(r))throw new mte({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${s(i)}`},zv=Rte();function Nte(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function U2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Ite({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Bv({message:`${r} API key must be a string.`});if(typeof vs>"u")throw new Bv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Ate[t],e==null)throw new Bv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Bv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Jk=Symbol.for("vercel.ai.validator");function jte(e){return{[Jk]:!0,validate:e}}function Mte(e){return typeof e=="object"&&e!==null&&Jk in e&&e[Jk]===!0&&"validate"in e}function Dte(e){return Mte(e)?e:Ote(e)}function Ote(e){return jte(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Pte({value:e,schema:t}){const n=qF({value:e,schema:t});if(!n.success)throw Jw.wrap({value:e,cause:n.error});return n.value}function qF({value:e,schema:t}){const n=Dte(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Jw.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Jw.wrap({value:e,cause:r})}}}function Fte({text:e,schema:t}){try{const n=Xp.parse(e);return t==null?n:Pte({value:n,schema:t})}catch(n){throw Xw.isInstance(n)||Jw.isInstance(n)?n:new Xw({text:e,cause:n})}}function VF({text:e,schema:t}){try{const n=Xp.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=qF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Xw.isInstance(n)?n:new Xw({text:e,cause:n})}}}function q2(e){try{return Xp.parse(e),!0}catch{return!1}}var Lte=()=>globalThis.fetch,ex=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:a})=>$te({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:a}),$te=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:a=Lte()})=>{try{const o=await a(e,{method:"POST",headers:Nte(t),body:n.content,signal:i}),l=p1(o);if(!o.ok){let c;try{c=await s({response:o,url:e,requestBodyValues:n.values})}catch(d){throw U2(d)||bc.isInstance(d)?d:new bc({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(U2(c)||bc.isInstance(c))?c:new bc({message:"Failed to process successful response",cause:c,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(U2(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new bc({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},Bte=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const a=await r.text(),o=p1(r);if(a.trim()==="")return{responseHeaders:o,value:new bc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})};try{const l=Fte({text:a,schema:e});return{responseHeaders:o,value:new bc({message:t(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:a,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new bc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:a,isRetryable:n==null?void 0:n(r)})}}},HF=e=>async({response:t})=>{const n=p1(t);if(t.body==null)throw new hte({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Tte).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(VF({text:r,schema:e}))}}))}},GF=e=>async({response:t,url:n,requestBodyValues:r})=>{const s=await t.text(),i=VF({text:s,schema:e}),a=p1(t);if(!i.success)throw new bc({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:a,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:a,value:i.value,rawValue:i.rawValue}},{btoa:zte}=globalThis;function Ute(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return zte(t)}function qte(e){return e==null?void 0:e.replace(/\/$/,"")}var Vte=Object.defineProperty,Hte=Object.defineProperties,Gte=Object.getOwnPropertyDescriptors,tx=Object.getOwnPropertySymbols,KF=Object.prototype.hasOwnProperty,WF=Object.prototype.propertyIsEnumerable,sM=(e,t,n)=>t in e?Vte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ta=(e,t)=>{for(var n in t||(t={}))KF.call(t,n)&&sM(e,n,t[n]);if(tx)for(var n of tx(t))WF.call(t,n)&&sM(e,n,t[n]);return e},xw=(e,t)=>Hte(e,Gte(t)),nx=(e,t)=>{var n={};for(var r in e)KF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tx)for(var r of tx(e))t.indexOf(r)<0&&WF.call(e,r)&&(n[r]=e[r]);return n};function ul(e){var t,n,r;const s=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:s==null?void 0:s.cacheControl)!=null?r:s==null?void 0:s.cache_control}function Kte(e){var t,n,r;const s=[];for(const{role:i,content:a,providerMetadata:o}of e)switch(i){case"system":{s.push({role:"system",content:a,cache_control:ul(o)});break}case"user":{if(a.length===1&&((t=a[0])==null?void 0:t.type)==="text"){s.push({role:"user",content:a[0].text,cache_control:(n=ul(o))!=null?n:ul(a[0].providerMetadata)});break}const l=ul(o),c=a.map(d=>{var h,m,g,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=ul(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(m=d.mimeType)!=null?m:"image/jpeg"};base64,${Ute(d.image)}`},cache_control:(g=ul(d.providerMetadata))!=null?g:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=ul(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});s.push({role:"user",content:c});break}case"assistant":{let l="";const c=[];for(const d of a)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{c.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}s.push({role:"assistant",content:l,tool_calls:c.length>0?c:void 0,cache_control:ul(o)});break}case"tool":{for(const l of a)s.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=ul(o))!=null?r:ul(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return s}function iM(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:s,top_logprobs:i})=>({token:r,logprob:s,topLogprobs:i?i.map(({token:a,logprob:o})=>({token:a,logprob:o})):[]})))!=null?n:void 0}function rx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var MA=z.object({error:z.object({message:z.string(),type:z.string(),param:z.any().nullable(),code:z.string().nullable()})}),sx=Bte({errorSchema:MA,errorToMessage:e=>e.error.message});function Wte(e){return"parameters"in e}var Zte=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:s,frequencyPenalty:i,presencePenalty:a,seed:o,stopSequences:l,responseFormat:c,topK:d,providerMetadata:h}){var m;const g=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},b=Ta(Ta(Ta({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:s,frequency_penalty:i,presence_penalty:a,seed:o,stop:l,response_format:c,top_k:d,messages:Kte(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Ta(Ta({},b),Jte(e));case"object-json":return xw(Ta({},b),{response_format:{type:"json_object"}});case"object-tool":return xw(Ta({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const w=g;throw new Ja({functionality:`${w} mode`})}}}async doGenerate(e){var t,n,r,s,i,a,o;const l=this.getArgs(e),{responseHeaders:c,value:d}=await ex({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Qw(this.config.headers(),e.headers),body:l,failedResponseHandler:sx,successfulResponseHandler:GF(Yte),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:m}=h,g=nx(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var w;return{toolCallType:"function",toolCallId:(w=b.id)!=null?w:zv(),toolName:b.function.name,args:b.function.arguments}}),finishReason:rx(v.finish_reason),usage:{promptTokens:(i=(s=d.usage)==null?void 0:s.prompt_tokens)!=null?i:0,completionTokens:(o=(a=d.usage)==null?void 0:a.completion_tokens)!=null?o:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:iM(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await ex({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Qw(this.config.headers(),e.headers),body:xw(Ta({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:sx,successfulResponseHandler:HF(Xte),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=t,{messages:i}=s,a=nx(s,["messages"]),o=[];let l="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,v,b,w,x,_,E,k,T,R,M,I;if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const O=h.value;if("error"in O){l="error",m.enqueue({type:"error",error:O.error});return}O.id&&m.enqueue({type:"response-metadata",id:O.id}),O.model&&m.enqueue({type:"response-metadata",modelId:O.model}),O.usage!=null&&(c={promptTokens:O.usage.prompt_tokens,completionTokens:O.usage.completion_tokens});const P=O.choices[0];if((P==null?void 0:P.finish_reason)!=null&&(l=rx(P.finish_reason)),(P==null?void 0:P.delta)==null)return;const U=P.delta;U.content!=null&&m.enqueue({type:"text-delta",textDelta:U.content}),U.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:U.reasoning});const j=iM(P==null?void 0:P.logprobs);if(j!=null&&j.length&&(d===void 0&&(d=[]),d.push(...j)),U.tool_calls!=null)for(const V of U.tool_calls){const $=V.index;if(o[$]==null){if(V.type!=="function")throw new B2({data:V,message:"Expected 'function' type."});if(V.id==null)throw new B2({data:V,message:"Expected 'id' to be a string."});if(((g=V.function)==null?void 0:g.name)==null)throw new B2({data:V,message:"Expected 'function.name' to be a string."});o[$]={id:V.id,type:"function",function:{name:V.function.name,arguments:(v=V.function.arguments)!=null?v:""},sent:!1};const J=o[$];if(J==null)throw new Error("Tool call is missing");((b=J.function)==null?void 0:b.name)!=null&&((w=J.function)==null?void 0:w.arguments)!=null&&q2(J.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=J.id)!=null?x:zv(),toolName:J.function.name,args:J.function.arguments}),J.sent=!0);continue}const re=o[$];if(re==null)throw new Error("Tool call is missing");((_=V.function)==null?void 0:_.arguments)!=null&&(re.function.arguments+=(k=(E=V.function)==null?void 0:E.arguments)!=null?k:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:re.id,toolName:re.function.name,argsTextDelta:(T=V.function.arguments)!=null?T:""}),((R=re.function)==null?void 0:R.name)!=null&&((M=re.function)==null?void 0:M.arguments)!=null&&q2(re.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(I=re.id)!=null?I:zv(),toolName:re.function.name,args:re.function.arguments}),re.sent=!0)}},flush(h){var m;if(l==="tool-calls")for(const g of o)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:zv(),toolName:g.function.name,args:q2(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:a},rawResponse:{headers:n},warnings:[]}}},ZF=z.object({id:z.string().optional(),model:z.string().optional(),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number(),total_tokens:z.number()}).nullish()}),Yte=ZF.extend({choices:z.array(z.object({message:z.object({role:z.literal("assistant"),content:z.string().nullable().optional(),reasoning:z.string().nullable().optional(),tool_calls:z.array(z.object({id:z.string().optional().nullable(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).optional()}),index:z.number(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullable().optional(),finish_reason:z.string().optional().nullable()}))}),Xte=z.union([ZF.extend({choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).optional(),content:z.string().nullish(),reasoning:z.string().nullish().optional(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").optional(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullable().optional(),index:z.number()}))}),MA]);function Jte(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(a=>Wte(a)?{type:"function",function:{name:a.name,description:a.description,parameters:a.parameters}}:{type:"function",function:{name:a.name}}),s=e.toolChoice;if(s==null)return{tools:r,tool_choice:void 0};const i=s.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:s.toolName}}};default:{const a=i;throw new Error(`Unsupported tool choice type: ${a}`)}}}function Qte({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let s="";e[0]&&e[0].role==="system"&&(s+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:a}of e)switch(i){case"system":throw new yte({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ja({functionality:"images"});case"file":throw new Ja({functionality:"file attachments"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");s+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ja({functionality:"tool-call messages"});case"reasoning":throw new Ja({functionality:"reasoning messages"});case"redacted-reasoning":throw new Ja({functionality:"redacted reasoning messages"});default:{const c=l;throw new Error(`Unsupported content type: ${c}`)}}}).join("");s+=`${r}:
${o}

`;break}case"tool":throw new Ja({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return s+=`${r}:
`,{prompt:s}}function aM(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,s;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((s=e.top_logprobs[n])!=null?s:{}).map(([i,a])=>({token:i,logprob:a})):[]}})}var ene=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:s,topP:i,frequencyPenalty:a,presencePenalty:o,seed:l,responseFormat:c,topK:d,stopSequences:h,providerMetadata:m}){var g,v;const b=e.type,w=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=Qte({prompt:n,inputFormat:t}),_=Ta(Ta(Ta({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:s,top_p:i,frequency_penalty:a,presence_penalty:o,seed:l,stop:h,response_format:c,top_k:d,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),w);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new Ja({functionality:"tools"});if(e.toolChoice)throw new Ja({functionality:"toolChoice"});return _}case"object-json":throw new Ja({functionality:"object-json mode"});case"object-tool":throw new Ja({functionality:"object-tool mode"});default:{const E=b;throw new Ja({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,s,i;const a=this.getArgs(e),{responseHeaders:o,value:l}=await ex({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Qw(this.config.headers(),e.headers),body:a,failedResponseHandler:sx,successfulResponseHandler:GF(oM),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=a,{prompt:d}=c,h=nx(c,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const m=l.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(s=l.usage)==null?void 0:s.completion_tokens)!=null?i:0},finishReason:rx(m.finish_reason),logprobs:aM(m.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await ex({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Qw(this.config.headers(),e.headers),body:xw(Ta({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:sx,successfulResponseHandler:HF(oM),abortSignal:e.abortSignal,fetch:this.config.fetch}),s=t,{prompt:i}=s,a=nx(s,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){o="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(l={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(o=rx(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=aM(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:c,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:a},rawResponse:{headers:n},warnings:[]}}},oM=z.union([z.object({id:z.string().optional(),model:z.string().optional(),choices:z.array(z.object({text:z.string(),reasoning:z.string().nullish().optional(),finish_reason:z.string().nullish(),index:z.number(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullable().optional()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).optional().nullable()}),MA]);function YF(e={}){var t,n,r;const s=(n=qte((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",a=()=>Ta({Authorization:`Bearer ${Ite({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,m={})=>new Zte(h,m,{provider:"openrouter.chat",url:({path:g})=>`${s}${g}`,headers:a,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,m={})=>new ene(h,m,{provider:"openrouter.completion",url:({path:g})=>`${s}${g}`,headers:a,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,m):o(h,m)},d=function(h,m){return c(h,m)};return d.languageModel=c,d.chat=o,d.completion=l,d}YF({compatibility:"strict"});var Xd={},V2={},lM;function cM(){return lM||(lM=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(V2)),V2}var uM;function tne(){return uM||(uM=1,function(e){var t=Xd&&Xd.__createBinding||(Object.create?function(c,d,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(c,m,g)}:function(c,d,h,m){m===void 0&&(m=h),c[m]=d[h]}),n=Xd&&Xd.__exportStar||function(c,d){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=cM();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(cM(),e);class s extends Error{}e.PartialJSON=s;class i extends Error{}e.MalformedJSON=i;function a(c,d=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return o(c.trim(),d)}e.parseJSON=a;const o=(c,d)=>{const h=c.length;let m=0;const g=T=>{throw new s(`${T} at position ${m}`)},v=T=>{throw new i(`${T} at position ${m}`)},b=()=>(k(),m>=h&&g("Unexpected end of input"),c[m]==='"'?w():c[m]==="{"?x():c[m]==="["?_():c.substring(m,m+4)==="null"||r.Allow.NULL&d&&h-m<4&&"null".startsWith(c.substring(m))?(m+=4,null):c.substring(m,m+4)==="true"||r.Allow.BOOL&d&&h-m<4&&"true".startsWith(c.substring(m))?(m+=4,!0):c.substring(m,m+5)==="false"||r.Allow.BOOL&d&&h-m<5&&"false".startsWith(c.substring(m))?(m+=5,!1):c.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&d&&h-m<8&&"Infinity".startsWith(c.substring(m))?(m+=8,1/0):c.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-m&&h-m<9&&"-Infinity".startsWith(c.substring(m))?(m+=9,-1/0):c.substring(m,m+3)==="NaN"||r.Allow.NAN&d&&h-m<3&&"NaN".startsWith(c.substring(m))?(m+=3,NaN):E()),w=()=>{const T=m;let R=!1;for(m++;m<h&&(c[m]!=='"'||R&&c[m-1]==="\\");)R=c[m]==="\\"?!R:!1,m++;if(c.charAt(m)=='"')try{return JSON.parse(c.substring(T,++m-Number(R)))}catch(M){v(String(M))}else if(r.Allow.STR&d)try{return JSON.parse(c.substring(T,m-Number(R))+'"')}catch{return JSON.parse(c.substring(T,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,k();const T={};try{for(;c[m]!=="}";){if(k(),m>=h&&r.Allow.OBJ&d)return T;const R=w();k(),m++;try{const M=b();T[R]=M}catch(M){if(r.Allow.OBJ&d)return T;throw M}k(),c[m]===","&&m++}}catch{if(r.Allow.OBJ&d)return T;g("Expected '}' at end of object")}return m++,T},_=()=>{m++;const T=[];try{for(;c[m]!=="]";)T.push(b()),k(),c[m]===","&&m++}catch{if(r.Allow.ARR&d)return T;g("Expected ']' at end of array")}return m++,T},E=()=>{if(m===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(R){if(r.Allow.NUM&d)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(R))}}const T=m;for(c[m]==="-"&&m++;c[m]&&",]}".indexOf(c[m])===-1;)m++;m==h&&!(r.Allow.NUM&d)&&g("Unterminated number literal");try{return JSON.parse(c.substring(T,m))}catch{c.substring(T,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(T,c.lastIndexOf("e")))}catch(M){v(String(M))}}},k=()=>{for(;m<h&&` 
\r	`.includes(c[m]);)m++};return b()},l=a;e.parse=l}(Xd)),Xd}var nne=tne();function H2(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((s,i)=>{if(i.type==="text")s.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new vr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(s.images=s.images||[],s.images.push(Vu(i.image)))}return s},{content:""}),role:"user"});break}case"assistant":{const s=[],i=[];for(const a of n)switch(a.type){case"text":{s.push(a.text);break}case"tool-call":{i.push({function:{arguments:a.args,name:a.toolName},id:a.toolCallId,type:"function"});break}default:{const o=a;throw new Error(`Unsupported part: ${o}`)}}t.push({content:s.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(s=>({content:typeof s.result=="object"?JSON.stringify(s.result):`${s.result}`,role:"tool",tool_call_id:s.toolCallId})));break}default:{const s=r;throw new Error(`Unsupported role: ${s}`)}}return t}var rne=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=nne.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[s,i]of r.entries()){const a=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(a==="")continue;this._toolCalls[s]||(this._toolCalls[s]={function:{arguments:"",name:i.name},id:na(),type:"function"});const o=this._toolCalls[s];o.function.arguments=a,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function sne({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var ine=z.object({error:z.object({code:z.string().nullable(),message:z.string(),param:z.any().nullable(),type:z.string()})}),Qk=$f({errorSchema:ine,errorToMessage:e=>e.error.message});function ane({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],s=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(s===void 0)return{tools:i,toolWarnings:r};const a=s.type;switch(a){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=a;throw new vr({functionality:`Unsupported tool choice type: ${o}`})}}}function one(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var lne=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},cne=e=>async({response:t})=>{const n=Jp(t);if(t.body===null)throw new w5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new lne).pipeThrough(new TransformStream({transform(r,s){s.enqueue(Cf({schema:e,text:r}))}}))}},une=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:s,responseFormat:i,seed:a,stopSequences:o,temperature:l,topK:c,topP:d}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:one({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:a,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:c,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=ane({mode:n});return{args:{...g,messages:H2(s),tools:v},type:h,warnings:[...m,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:H2(s)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:H2(s),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:s}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:a,value:o}=await _s({abortSignal:e.abortSignal,body:i,failedResponseHandler:Qk,fetch:this.config.fetch,headers:xs(this.config.headers(),e.headers),successfulResponseHandler:fa(dne),url:`${this.config.baseURL}/chat`}),{messages:l,...c}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:na(),toolCallType:"function",toolName:h.function.name}});return{finishReason:sne({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:a},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:s}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const w of g.toolCalls)b.enqueue({argsTextDelta:w.args,toolCallId:w.toolCallId,toolCallType:"function",toolName:w.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...w});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:s,value:i}=await _s({abortSignal:e.abortSignal,body:t,failedResponseHandler:Qk,fetch:this.config.fetch,headers:xs(this.config.headers(),e.headers),successfulResponseHandler:cne(fne),url:`${this.config.baseURL}/chat`}),{messages:a,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new rne({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:s},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:d,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){d=c.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}m&&c.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},dne=z.object({created_at:z.string(),done:z.literal(!0),done_reason:z.string().optional().nullable(),eval_count:z.number(),eval_duration:z.number(),load_duration:z.number().optional(),message:z.object({content:z.string(),role:z.string(),tool_calls:z.array(z.object({function:z.object({arguments:z.record(z.any()),name:z.string()}),id:z.string().optional()})).optional().nullable()}),model:z.string(),prompt_eval_count:z.number().optional(),prompt_eval_duration:z.number().optional(),total_duration:z.number()}),fne=z.discriminatedUnion("done",[z.object({created_at:z.string(),done:z.literal(!1),message:z.object({content:z.string(),role:z.string()}),model:z.string()}),z.object({created_at:z.string(),done:z.literal(!0),eval_count:z.number(),eval_duration:z.number(),load_duration:z.number().optional(),model:z.string(),prompt_eval_count:z.number().optional(),prompt_eval_duration:z.number().optional(),total_duration:z.number()})]),hne=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new l1({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await _s({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:Qk,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:fa(pne),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},pne=z.object({embeddings:z.array(z.array(z.number())),prompt_eval_count:z.number().nullable()});function XF(e={}){var t;const n=(t=f1(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),s=(o,l={})=>new une(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new hne(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),a=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return s(o,l)};return a.chat=s,a.embedding=i,a.languageModel=s,a.textEmbedding=i,a.textEmbeddingModel=i,a}XF();function Fg(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function mne(e){const t=[];for(const{role:n,content:r,...s}of e){const i=Fg({...s});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Fg(r[0])});break}t.push({role:"user",content:r.map(a=>{var o;const l=Fg(a);switch(a.type){case"text":return{type:"text",text:a.text,...l};case"image":return{type:"image_url",image_url:{url:a.image instanceof URL?a.image.toString():`data:${(o=a.mimeType)!=null?o:"image/jpeg"};base64,${Vu(a.image)}`},...l};case"file":throw new vr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let a="";const o=[];for(const l of r){const c=Fg(l);switch(l.type){case"text":{a+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...c});break}}}t.push({role:"assistant",content:a,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const a of r){const o=Fg(a);t.push({role:"tool",tool_call_id:a.toolCallId,content:JSON.stringify(a.result),...o})}break}default:{const a=n;throw new Error(`Unsupported role: ${a}`)}}}return t}function ix({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function ax(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var gne=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),m1={errorSchema:gne,errorToMessage:e=>e.error.message};function yne({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,s=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:s};const i=e.toolChoice,a=[];for(const l of r)l.type==="provider-defined"?s.push({type:"unsupported-tool",tool:l}):a.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:a,tool_choice:void 0,toolWarnings:s};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:a,tool_choice:o,toolWarnings:s};case"tool":return{tools:a,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:s};default:{const l=o;throw new vr({functionality:`Unsupported tool choice type: ${l}`})}}}var bne=class{constructor(e,t,n){this.specificationVersion="v1";var r,s;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:m1;this.chunkSchema=wne(i.errorSchema),this.failedResponseHandler=$f(i),this.supportsStructuredOutputs=(s=n.supportsStructuredOutputs)!=null?s:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:a,presencePenalty:o,providerMetadata:l,stopSequences:c,responseFormat:d,seed:h}){var m,g,v,b,w;const x=e.type,_=[];i!=null&&_.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const E={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:s,frequency_penalty:a,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(m=d.name)!=null?m:"response",description:d.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...l==null?void 0:l[this.providerOptionsName],reasoning_effort:(b=(g=l==null?void 0:l[this.providerOptionsName])==null?void 0:g.reasoningEffort)!=null?b:(v=l==null?void 0:l["openai-compatible"])==null?void 0:v.reasoningEffort,messages:mne(t)};switch(x){case"regular":{const{tools:k,tool_choice:T,toolWarnings:R}=yne({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...E,tools:k,tool_choice:T},warnings:[..._,...R]}}case"object-json":return{args:{...E,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(w=e.name)!=null?w:"response",description:e.description}}:{type:"json_object"}},warnings:_};case"object-tool":return{args:{...E,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:_};default:{const k=x;throw new Error(`Unsupported type: ${k}`)}}}async doGenerate(e){var t,n,r,s,i,a,o,l,c,d,h;const{args:m,warnings:g}=this.getArgs({...e}),v=JSON.stringify(m),{responseHeaders:b,value:w,rawValue:x}=await _s({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:m,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:fa(vne),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...E}=m,k=w.choices[0],T={[this.providerOptionsName]:{},...(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:x})},R=(r=w.usage)==null?void 0:r.completion_tokens_details,M=(s=w.usage)==null?void 0:s.prompt_tokens_details;return(R==null?void 0:R.reasoning_tokens)!=null&&(T[this.providerOptionsName].reasoningTokens=R==null?void 0:R.reasoning_tokens),(R==null?void 0:R.accepted_prediction_tokens)!=null&&(T[this.providerOptionsName].acceptedPredictionTokens=R==null?void 0:R.accepted_prediction_tokens),(R==null?void 0:R.rejected_prediction_tokens)!=null&&(T[this.providerOptionsName].rejectedPredictionTokens=R==null?void 0:R.rejected_prediction_tokens),(M==null?void 0:M.cached_tokens)!=null&&(T[this.providerOptionsName].cachedPromptTokens=M==null?void 0:M.cached_tokens),{text:(i=k.message.content)!=null?i:void 0,reasoning:(a=k.message.reasoning_content)!=null?a:void 0,toolCalls:(o=k.message.tool_calls)==null?void 0:o.map(I=>{var O;return{toolCallType:"function",toolCallId:(O=I.id)!=null?O:na(),toolName:I.function.name,args:I.function.arguments}}),finishReason:ax(k.finish_reason),usage:{promptTokens:(c=(l=w.usage)==null?void 0:l.prompt_tokens)!=null?c:NaN,completionTokens:(h=(d=w.usage)==null?void 0:d.completion_tokens)!=null?h:NaN},providerMetadata:T,rawCall:{rawPrompt:_,rawSettings:E},rawResponse:{headers:b,body:x},response:ix(w),warnings:g,request:{body:v}}}async doStream(e){var t;if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.reasoning)if(Array.isArray(b.reasoning))for(const _ of b.reasoning)_.type==="text"&&x.enqueue({type:"reasoning",textDelta:_.text});else x.enqueue({type:"reasoning",textDelta:b.reasoning});if(b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),s={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:a,value:o}=await _s({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:s,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:em(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...c}=n,d=[];let h="unknown",m={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0}},g=!0,v=this.providerOptionsName;return{stream:o.pipeThrough(new TransformStream({transform(b,w){var x,_,E,k,T,R,M,I,O,P,U,j;if(!b.success){h="error",w.enqueue({type:"error",error:b.error});return}const V=b.value;if(i==null||i.processChunk(b.rawValue),"error"in V){h="error",w.enqueue({type:"error",error:V.error.message});return}if(g&&(g=!1,w.enqueue({type:"response-metadata",...ix(V)})),V.usage!=null){const{prompt_tokens:J,completion_tokens:te,prompt_tokens_details:X,completion_tokens_details:ie}=V.usage;m.promptTokens=J??void 0,m.completionTokens=te??void 0,(ie==null?void 0:ie.reasoning_tokens)!=null&&(m.completionTokensDetails.reasoningTokens=ie==null?void 0:ie.reasoning_tokens),(ie==null?void 0:ie.accepted_prediction_tokens)!=null&&(m.completionTokensDetails.acceptedPredictionTokens=ie==null?void 0:ie.accepted_prediction_tokens),(ie==null?void 0:ie.rejected_prediction_tokens)!=null&&(m.completionTokensDetails.rejectedPredictionTokens=ie==null?void 0:ie.rejected_prediction_tokens),(X==null?void 0:X.cached_tokens)!=null&&(m.promptTokensDetails.cachedTokens=X==null?void 0:X.cached_tokens)}const $=V.choices[0];if(($==null?void 0:$.finish_reason)!=null&&(h=ax($.finish_reason)),($==null?void 0:$.delta)==null)return;const re=$.delta;if(re.reasoning_content!=null&&w.enqueue({type:"reasoning",textDelta:re.reasoning_content}),re.content!=null&&w.enqueue({type:"text-delta",textDelta:re.content}),re.tool_calls!=null)for(const J of re.tool_calls){const te=J.index;if(d[te]==null){if(J.type!=="function")throw new gp({data:J,message:"Expected 'function' type."});if(J.id==null)throw new gp({data:J,message:"Expected 'id' to be a string."});if(((x=J.function)==null?void 0:x.name)==null)throw new gp({data:J,message:"Expected 'function.name' to be a string."});d[te]={id:J.id,type:"function",function:{name:J.function.name,arguments:(_=J.function.arguments)!=null?_:""},hasFinished:!1};const ie=d[te];((E=ie.function)==null?void 0:E.name)!=null&&((k=ie.function)==null?void 0:k.arguments)!=null&&(ie.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:ie.function.arguments}),zw(ie.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(T=ie.id)!=null?T:na(),toolName:ie.function.name,args:ie.function.arguments}),ie.hasFinished=!0));continue}const X=d[te];X.hasFinished||(((R=J.function)==null?void 0:R.arguments)!=null&&(X.function.arguments+=(I=(M=J.function)==null?void 0:M.arguments)!=null?I:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:X.id,toolName:X.function.name,argsTextDelta:(O=J.function.arguments)!=null?O:""}),((P=X.function)==null?void 0:P.name)!=null&&((U=X.function)==null?void 0:U.arguments)!=null&&zw(X.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=X.id)!=null?j:na(),toolName:X.function.name,args:X.function.arguments}),X.hasFinished=!0))}},flush(b){var w,x;const _={[v]:{},...i==null?void 0:i.buildMetadata()};m.completionTokensDetails.reasoningTokens!=null&&(_[v].reasoningTokens=m.completionTokensDetails.reasoningTokens),m.completionTokensDetails.acceptedPredictionTokens!=null&&(_[v].acceptedPredictionTokens=m.completionTokensDetails.acceptedPredictionTokens),m.completionTokensDetails.rejectedPredictionTokens!=null&&(_[v].rejectedPredictionTokens=m.completionTokensDetails.rejectedPredictionTokens),m.promptTokensDetails.cachedTokens!=null&&(_[v].cachedPromptTokens=m.promptTokensDetails.cachedTokens),b.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(w=m.promptTokens)!=null?w:NaN,completionTokens:(x=m.completionTokens)!=null?x:NaN},providerMetadata:_})}})),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:a},warnings:r,request:{body:JSON.stringify(s)}}}},JF=z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish(),prompt_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),completion_tokens_details:z.object({reasoning_tokens:z.number().nullish(),accepted_prediction_tokens:z.number().nullish(),rejected_prediction_tokens:z.number().nullish()}).nullish()}).nullish(),vne=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),finish_reason:z.string().nullish()})),usage:JF}),wne=e=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").nullish(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),finish_reason:z.string().nullish()})),usage:JF}),e]);function xne({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let s="";e[0].role==="system"&&(s+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:a}of e)switch(i){case"system":throw new pc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new vr({functionality:"images"})}}).join("");s+=`${n}:
${o}

`;break}case"assistant":{const o=a.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new vr({functionality:"tool-call messages"})}}).join("");s+=`${r}:
${o}

`;break}case"tool":throw new vr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return s+=`${r}:
`,{prompt:s,stopSequences:[`
${n}:`]}}var _ne=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const s=(r=n.errorStructure)!=null?r:m1;this.chunkSchema=Ene(s.errorSchema),this.failedResponseHandler=$f(s)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:s,topP:i,topK:a,frequencyPenalty:o,presencePenalty:l,stopSequences:c,responseFormat:d,seed:h,providerMetadata:m}){var g;const v=e.type,b=[];a!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:w,stopSequences:x}=xne({prompt:n,inputFormat:t}),_=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:s,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:w,stop:_.length>0?_:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new vr({functionality:"tools"});if(e.toolChoice)throw new vr({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new vr({functionality:"object-json mode"});case"object-tool":throw new vr({functionality:"object-tool mode"});default:{const k=v;throw new Error(`Unsupported type: ${k}`)}}}async doGenerate(e){var t,n,r,s;const{args:i,warnings:a}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:c}=await _s({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:fa(Sne),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,m=l.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(s=(r=l.usage)==null?void 0:r.completion_tokens)!=null?s:NaN},finishReason:ax(m.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:c},response:ix(l),warnings:a,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await _s({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xs(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:em(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...o}=t;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",m.enqueue({type:"error",error:g.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...ix(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=ax(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:c})}})),rawCall:{rawPrompt:a,rawSettings:o},rawResponse:{headers:s},warnings:n,request:{body:JSON.stringify(r)}}}},Sne=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),Ene=e=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string().nullish(),index:z.number()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),e]),Cne=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new l1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:s,value:i}=await _s({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:xs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:$f((r=this.config.errorStructure)!=null?r:m1),successfulResponseHandler:fa(kne),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(a=>a.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:s}}}},kne=z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()}),Tne=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:s,providerOptions:i,headers:a,abortSignal:o}){var l,c,d,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(d=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?d:new Date,{value:b,responseHeaders:w}=await _s({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:xs(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:$f((m=this.config.errorStructure)!=null?m:m1),successfulResponseHandler:fa(Ane),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:w}}}},Ane=z.object({data:z.array(z.object({b64_json:z.string()}))});function Rne(e){const t=f1(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),s=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>a(h,m),a=(h,m={})=>new bne(h,m,{...s("chat"),defaultObjectGenerationMode:"tool"}),o=(h,m={})=>new _ne(h,m,s("completion")),l=(h,m={})=>new Cne(h,m,s("embedding")),c=(h,m={})=>new Tne(h,m,s("image")),d=(h,m)=>i(h,m);return d.languageModel=i,d.chatModel=a,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=c,d}const n0=(e,t)=>`${e}:${t}`,Mo=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},M0=e=>e==="openai"||e==="openrouter"||e==="google",QF=e=>e==="ollama"||e==="openai-compatible",ff=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",wc=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],Nne={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},eL=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function DA(e,t,n){try{switch(e.type){case"openai":return oF({apiKey:n})(t);case"google":return dF({apiKey:n})(t);case"openrouter":return YF({apiKey:n,extraBody:{include_reasoning:!0}})(t);case"ollama":return XF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return Rne({baseURL:eL(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function tL(e,t,n){const s=gr.getState().getAllAvailableModelDefsForProvider(e.id).find(a=>a.id===t);if(!s){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=DA(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:n0(e.id,t),name:s.name,providerId:e.id,providerName:e.name,instance:i,metadata:s}}const nL={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},Lg=new Map,Ine=5*60*1e3,jne=(e,t)=>{var i,a,o,l,c,d,h,m,g,v,b,w,x,_;const n=e.id||e.name,r=e.name||n,s={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((a=e.architecture)==null?void 0:a.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((c=e.architecture)==null?void 0:c.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((m=e.pricing)==null?void 0:m.request)??"0",image:((g=e.pricing)==null?void 0:g.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((w=e.top_provider)==null?void 0:w.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((_=e.top_provider)==null?void 0:_.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??nL[t]??[]};return t==="ollama"?(s.context_length=s.context_length??4096,s.top_provider&&(s.top_provider.context_length=s.context_length),s.architecture&&(s.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(s.context_length=8192),n.includes("gpt-4-32k")&&(s.context_length=32768),n.includes("gpt-4-turbo")&&(s.context_length=128e3),n.includes("gpt-4o")&&(s.context_length=128e3),n.includes("gpt-3.5-turbo")&&(s.context_length=16385),s.top_provider&&(s.top_provider.context_length=s.context_length),s.architecture&&(s.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?s.context_length=1048576:n.includes("gemini")&&(s.context_length=32768),s.top_provider&&(s.top_provider.context_length=s.context_length),s.architecture&&(s.architecture.tokenizer="Google")):t==="openai-compatible"&&(s.context_length=s.context_length??4096,s.top_provider&&(s.top_provider.context_length=s.context_length),s.architecture&&(s.architecture.tokenizer="Compatible")),s};async function Mne(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Lg.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const s=(async()=>{var o,l,c;let i;const a={Accept:"application/json"};t&&(a.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",a["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",a["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete a.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=eL(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),ze.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:a});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const w=JSON.parse(b);v=((c=w==null?void 0:w.error)==null?void 0:c.message)||(w==null?void 0:w.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let m=[];if(e.type==="ollama"?m=h.models||[]:m=h.data||h||[],!Array.isArray(m))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const g=m.map(v=>jne(v,e.type));return g.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${g.length} models for ${e.name}`),g}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),ze.error(`Failed to fetch models for ${e.name}: ${h}`),Lg.delete(n),[]}})();return Lg.set(n,s),setTimeout(()=>{Lg.get(n)===s&&(Lg.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},Ine),s}const Un={initialDataLoaded:"provider.initial.data.loaded",configsChanged:"provider.configs.changed",apiKeysChanged:"provider.api.keys.changed",selectedModelChanged:"provider.selected.model.changed",globalModelSortOrderChanged:"provider.global.model.sort.order.changed",fetchStatusChanged:"provider.fetch.status.changed",globallyEnabledModelsUpdated:"provider.globally.enabled.models.updated",selectedModelForDetailsChanged:"provider.selected.model.for.details.changed",enableApiKeyManagementChanged:"provider.enable.api.key.management.changed",loadInitialDataRequest:"provider.load.initial.data.request",selectModelRequest:"provider.select.model.request",addApiKeyRequest:"provider.add.api.key.request",deleteApiKeyRequest:"provider.delete.api.key.request",addProviderConfigRequest:"provider.add.config.request",updateProviderConfigRequest:"provider.update.config.request",deleteProviderConfigRequest:"provider.delete.config.request",fetchModelsRequest:"provider.fetch.models.request",setGlobalModelSortOrderRequest:"provider.set.global.model.sort.order.request",setEnableApiKeyManagementRequest:"provider.set.enable.api.key.management.request",setSelectedModelForDetailsRequest:"provider.set.selected.model.for.details.request"},G2="provider:lastModelSelection",dM="provider:globalModelSortOrder",gr=lo(co((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,globallyEnabledModelDefinitions:[],_updateGloballyEnabledModelDefinitions:()=>{const{dbProviderConfigs:n,globalModelSortOrder:r}=t(),s=t().getAvailableModelListItems(),i=new Map(s.map(d=>[d.id,d])),a=new Set;n.forEach(d=>{d.isEnabled&&d.enabledModels&&d.enabledModels.forEach(h=>{a.add(n0(d.id,h))})});const o=[],l=new Set;r.forEach(d=>{if(a.has(d)){const h=i.get(d);h&&!l.has(d)&&(o.push(h),l.add(d))}});const c=s.filter(d=>a.has(d.id)&&!l.has(d.id)).sort((d,h)=>d.name.localeCompare(h.name));o.push(...c),e({globallyEnabledModelDefinitions:o}),We.emit(Un.globallyEnabledModelsUpdated,{models:o})},getGloballyEnabledModelDefinitions:()=>t().globallyEnabledModelDefinitions,createAiModelConfig:(n,r,s)=>{const a=t().getAllAvailableModelDefsForProvider(n.id).find(l=>l.id===r);if(!a){console.warn(`Model definition not found for ${r} in provider ${n.name}`);return}const o=DA(n,r,s);if(!o){console.warn(`Failed to instantiate AI SDK instance for ${r} from provider ${n.name}`);return}return{id:n0(n.id,r),name:a.name,providerId:n.id,providerName:n.name,instance:o,metadata:a}},setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Nt.saveSetting("enableApiKeyManagement",n),We.emit(Un.enableApiKeyManagementChanged,{enabled:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Nt.loadSetting("enableApiKeyManagement",!0),[r,s,i,a]=await Promise.all([Nt.loadProviderConfigs(),Nt.loadApiKeys(),Nt.loadSetting(dM,[]),Nt.loadSetting(G2,null)]);e({dbProviderConfigs:r,dbApiKeys:s,enableApiKeyManagement:n,globalModelSortOrder:i}),t()._updateGloballyEnabledModelDefinitions();const o=t().globallyEnabledModelDefinitions.map(h=>h.id),l=new Set(o);let c=a;c&&l.has(c)||(c=o[0]??null),e({selectedModelId:c,isLoading:!1}),await Nt.saveSetting(G2,c),We.emit(Un.initialDataLoaded,{configs:r,apiKeys:s,selectedModelId:c,globalSortOrder:t().globalModelSortOrder}),t().selectedModelId!==c?t().selectModel(c):We.emit(Un.selectedModelChanged,{modelId:c})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),ze.error("Failed to load provider data")}},selectModel:n=>{t().selectedModelId!==n&&(e({selectedModelId:n}),Nt.saveSetting(G2,n),We.emit(Un.selectedModelChanged,{modelId:n}))},addApiKey:async(n,r,s)=>{const i=pi(),a=new Date,o={id:i,name:n,value:s,providerId:r,createdAt:a,updatedAt:a};try{return await Nt.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),ze.success(`API Key "${n}" added.`),We.emit(Un.apiKeysChanged,{apiKeys:t().dbApiKeys}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),ze.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var s;const r=((s=t().dbApiKeys.find(i=>i.id===n))==null?void 0:s.name)??"Unknown Key";try{await Nt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(a=>a.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(a=>a.apiKeyId===n?{...a,apiKeyId:null}:a)}),ze.success(`API Key "${r}" deleted.`),We.emit(Un.apiKeysChanged,{apiKeys:t().dbApiKeys}),We.emit(Un.configsChanged,{providerConfigs:t().dbProviderConfigs})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),ze.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=pi(),s=new Date,i={id:r,createdAt:s,updatedAt:s,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Nt.saveProviderConfig(i),e(a=>{a.dbProviderConfigs.push(i)}),t()._updateGloballyEnabledModelDefinitions(),ze.success(`Provider "${n.name}" added.`),We.emit(Un.configsChanged,{providerConfigs:t().dbProviderConfigs}),t().fetchModels(r).catch(a=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,a)}),r}catch(a){throw console.error("ProviderStore: Error adding provider config",a),ze.error(`Failed to add Provider: ${a instanceof Error?a.message:String(a)}`),a}},updateProviderConfig:async(n,r)=>{const s=t().dbProviderConfigs.find(a=>a.id===n);if(!s)return;const i={...s,...r,fetchedModels:r.fetchedModels!==void 0?r.fetchedModels:s.fetchedModels,modelsLastFetchedAt:r.modelsLastFetchedAt!==void 0?r.modelsLastFetchedAt:s.modelsLastFetchedAt,updatedAt:new Date};try{await Nt.saveProviderConfig(i),e(a=>{const o=a.dbProviderConfigs.findIndex(l=>l.id===n);o!==-1&&(a.dbProviderConfigs[o]=i)}),t()._updateGloballyEnabledModelDefinitions(),We.emit(Un.configsChanged,{providerConfigs:t().dbProviderConfigs})}catch(a){throw console.error("ProviderStore: Error updating provider config",a),ze.error(`Failed to update Provider: ${a instanceof Error?a.message:String(a)}`),a}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const s=r.name;try{await Nt.deleteProviderConfig(n),e(i=>{i.dbProviderConfigs=i.dbProviderConfigs.filter(a=>a.id!==n),delete i.providerFetchStatus[n]}),t()._updateGloballyEnabledModelDefinitions(),We.emit(Un.configsChanged,{providerConfigs:t().dbProviderConfigs}),ze.success(`Provider "${s}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),ze.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var s;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){ze.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]!=="fetching"){t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,a=(s=t().dbApiKeys.find(l=>l.id===i))==null?void 0:s.value,o=await Mne(r,a);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),ze.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Nt.saveSetting(dM,r),t()._updateGloballyEnabledModelDefinitions(),We.emit(Un.globalModelSortOrderChanged,{ids:r});const s=t().selectedModelId,i=t().globallyEnabledModelDefinitions.map(o=>o.id),a=new Set(i);if(!s||!a.has(s)){const o=i[0]??null;o!==s&&t().selectModel(o)}},_setProviderFetchStatus:(n,r)=>{e(s=>{s.providerFetchStatus[n]=r}),We.emit(Un.fetchStatusChanged,{providerId:n,status:r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n}),We.emit(Un.selectedModelForDetailsChanged,{modelId:n})},getSelectedModel:()=>{const{selectedModelId:n}=t();if(!n)return;const{providerId:r,modelId:s}=Mo(n);if(!r||!s)return;const i=t().dbProviderConfigs.find(o=>o.id===r);if(!i)return;const a=t().dbApiKeys.find(o=>o.id===i.apiKeyId);return t().createAiModelConfig(i,s,a==null?void 0:a.value)},getApiKeyForProvider:n=>{var s;const r=t().dbProviderConfigs.find(i=>i.id===n);return(s=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:s.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(a=>a.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const s=r.type;return(Nne[s]||[]).map(a=>({id:a.id,name:a.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:nL[r.type]??[]}))},getAvailableModelListItems:()=>{const{dbProviderConfigs:n}=t(),r=[];return n.forEach(s=>{t().getAllAvailableModelDefsForProvider(s.id).forEach(a=>{var o,l;r.push({id:n0(s.id,a.id),name:a.name,providerId:s.id,providerName:s.name,metadataSummary:{context_length:((o=a.top_provider)==null?void 0:o.context_length)??a.context_length,supported_parameters:a.supported_parameters,input_modalities:(l=a.architecture)==null?void 0:l.input_modalities,pricing:a.pricing,description:a.description}})})}),r},getRegisteredActionHandlers:()=>{const n="providerStore",r=t();return[{eventName:Un.loadInitialDataRequest,handler:r.loadInitialData,storeId:n},{eventName:Un.selectModelRequest,handler:s=>r.selectModel(s.modelId),storeId:n},{eventName:Un.addApiKeyRequest,handler:s=>r.addApiKey(s.name,s.providerId,s.value).then(()=>{}),storeId:n},{eventName:Un.deleteApiKeyRequest,handler:s=>r.deleteApiKey(s.id),storeId:n},{eventName:Un.addProviderConfigRequest,handler:s=>r.addProviderConfig(s).then(()=>{}),storeId:n},{eventName:Un.updateProviderConfigRequest,handler:s=>r.updateProviderConfig(s.id,s.changes),storeId:n},{eventName:Un.deleteProviderConfigRequest,handler:s=>r.deleteProviderConfig(s.id),storeId:n},{eventName:Un.fetchModelsRequest,handler:s=>r.fetchModels(s.providerConfigId),storeId:n},{eventName:Un.setGlobalModelSortOrderRequest,handler:s=>r.setGlobalModelSortOrder(s.ids),storeId:n},{eventName:Un.setEnableApiKeyManagementRequest,handler:s=>r.setEnableApiKeyManagement(s.enabled),storeId:n},{eventName:Un.setSelectedModelForDetailsRequest,handler:s=>r.setSelectedModelForDetails(s.modelId),storeId:n}]}}))),en={loaded:"settings.loaded",themeChanged:"settings.theme.changed",globalSystemPromptChanged:"settings.global.system.prompt.changed",temperatureChanged:"settings.temperature.changed",maxTokensChanged:"settings.max.tokens.changed",topPChanged:"settings.top.p.changed",topKChanged:"settings.top.k.changed",presencePenaltyChanged:"settings.presence.penalty.changed",frequencyPenaltyChanged:"settings.frequency.penalty.changed",enableAdvancedSettingsChanged:"settings.enable.advanced.settings.changed",enableStreamingMarkdownChanged:"settings.enable.streaming.markdown.changed",enableStreamingCodeBlockParsingChanged:"settings.enable.streaming.code.block.parsing.changed",foldStreamingCodeBlocksChanged:"settings.fold.streaming.code.blocks.changed",foldUserMessagesOnCompletionChanged:"settings.fold.user.messages.on.completion.changed",streamingRenderFpsChanged:"settings.streaming.render.fps.changed",gitUserNameChanged:"settings.git.user.name.changed",gitUserEmailChanged:"settings.git.user.email.changed",toolMaxStepsChanged:"settings.tool.max.steps.changed",prismThemeUrlChanged:"settings.prism.theme.url.changed",autoTitleEnabledChanged:"settings.auto.title.enabled.changed",autoTitleModelIdChanged:"settings.auto.title.model.id.changed",autoTitlePromptMaxLengthChanged:"settings.auto.title.prompt.max.length.changed",autoTitleIncludeFilesChanged:"settings.auto.title.include.files.changed",autoTitleIncludeRulesChanged:"settings.auto.title.include.rules.changed",customFontFamilyChanged:"settings.custom.font.family.changed",customFontSizeChanged:"settings.custom.font.size.changed",chatMaxWidthChanged:"settings.chat.max.width.changed",customThemeColorsChanged:"settings.custom.theme.colors.changed",autoScrollIntervalChanged:"settings.auto.scroll.interval.changed",enableAutoScrollOnStreamChanged:"settings.enable.auto.scroll.on.stream.changed",setThemeRequest:"settings.set.theme.request",setGlobalSystemPromptRequest:"settings.set.global.system.prompt.request",setTemperatureRequest:"settings.set.temperature.request",setMaxTokensRequest:"settings.set.max.tokens.request",setTopPRequest:"settings.set.top.p.request",setTopKRequest:"settings.set.top.k.request",setPresencePenaltyRequest:"settings.set.presence.penalty.request",setFrequencyPenaltyRequest:"settings.set.frequency.penalty.request",setEnableAdvancedSettingsRequest:"settings.set.enable.advanced.settings.request",setEnableStreamingMarkdownRequest:"settings.set.enable.streaming.markdown.request",setEnableStreamingCodeBlockParsingRequest:"settings.set.enable.streaming.code.block.parsing.request",setFoldStreamingCodeBlocksRequest:"settings.set.fold.streaming.code.blocks.request",setFoldUserMessagesOnCompletionRequest:"settings.set.fold.user.messages.on.completion.request",setStreamingRenderFpsRequest:"settings.set.streaming.render.fps.request",setGitUserNameRequest:"settings.set.git.user.name.request",setGitUserEmailRequest:"settings.set.git.user.email.request",setToolMaxStepsRequest:"settings.set.tool.max.steps.request",setPrismThemeUrlRequest:"settings.set.prism.theme.url.request",setAutoTitleEnabledRequest:"settings.set.auto.title.enabled.request",setAutoTitleModelIdRequest:"settings.set.auto.title.model.id.request",setAutoTitlePromptMaxLengthRequest:"settings.set.auto.title.prompt.max.length.request",setAutoTitleIncludeFilesRequest:"settings.set.auto.title.include.files.request",setAutoTitleIncludeRulesRequest:"settings.set.auto.title.include.rules.request",setCustomFontFamilyRequest:"settings.set.custom.font.family.request",setCustomFontSizeRequest:"settings.set.custom.font.size.request",setChatMaxWidthRequest:"settings.set.chat.max.width.request",setCustomThemeColorsRequest:"settings.set.custom.theme.colors.request",setCustomThemeColorRequest:"settings.set.custom.theme.color.request",setAutoScrollIntervalRequest:"settings.set.auto.scroll.interval.request",setEnableAutoScrollOnStreamRequest:"settings.set.enable.auto.scroll.on.stream.request",loadSettingsRequest:"settings.load.settings.request",resetGeneralSettingsRequest:"settings.reset.general.settings.request",resetAssistantSettingsRequest:"settings.reset.assistant.settings.request",resetThemeSettingsRequest:"settings.reset.theme.settings.request"},K2="system",W2="You are a helpful AI assistant.",Z2=.7,Y2=null,X2=null,J2=null,Q2=0,eE=0,fM=!0,tE=!0,nE=!1,rE=!1,sE=!1,iE=15,hM=null,pM=null,aE=5,oE=null,lE=!0,cE=null,uE=768,dE=!1,fE=!1,hE=null,pE=16,mE="max-w-7xl",gE=null,yE=1e3,bE=!0,ur=lo(co((e,t)=>({theme:K2,globalSystemPrompt:W2,temperature:Z2,maxTokens:Y2,topP:X2,topK:J2,presencePenalty:Q2,frequencyPenalty:eE,enableAdvancedSettings:fM,enableStreamingMarkdown:tE,enableStreamingCodeBlockParsing:nE,foldStreamingCodeBlocks:rE,foldUserMessagesOnCompletion:sE,streamingRenderFPS:iE,gitUserName:hM,gitUserEmail:pM,toolMaxSteps:aE,prismThemeUrl:oE,autoTitleEnabled:lE,autoTitleModelId:cE,autoTitlePromptMaxLength:uE,autoTitleIncludeFiles:dE,autoTitleIncludeRules:fE,customFontFamily:hE,customFontSize:pE,chatMaxWidth:mE,customThemeColors:gE,autoScrollInterval:yE,enableAutoScrollOnStream:bE,setTheme:n=>{e({theme:n}),Nt.saveSetting("theme",n),We.emit(en.themeChanged,{theme:n})},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),Nt.saveSetting("globalSystemPrompt",n),We.emit(en.globalSystemPromptChanged,{prompt:n})},setTemperature:n=>{e({temperature:n}),Nt.saveSetting("temperature",n),We.emit(en.temperatureChanged,{value:n})},setMaxTokens:n=>{e({maxTokens:n}),Nt.saveSetting("maxTokens",n),We.emit(en.maxTokensChanged,{value:n})},setTopP:n=>{e({topP:n}),Nt.saveSetting("topP",n),We.emit(en.topPChanged,{value:n})},setTopK:n=>{e({topK:n}),Nt.saveSetting("topK",n),We.emit(en.topKChanged,{value:n})},setPresencePenalty:n=>{e({presencePenalty:n}),Nt.saveSetting("presencePenalty",n),We.emit(en.presencePenaltyChanged,{value:n})},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),Nt.saveSetting("frequencyPenalty",n),We.emit(en.frequencyPenaltyChanged,{value:n})},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),Nt.saveSetting("enableAdvancedSettings",n),We.emit(en.enableAdvancedSettingsChanged,{enabled:n})},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),Nt.saveSetting("enableStreamingMarkdown",n),We.emit(en.enableStreamingMarkdownChanged,{enabled:n})},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),Nt.saveSetting("enableStreamingCodeBlockParsing",n),We.emit(en.enableStreamingCodeBlockParsingChanged,{enabled:n})},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),Nt.saveSetting("foldStreamingCodeBlocks",n),We.emit(en.foldStreamingCodeBlocksChanged,{fold:n})},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),Nt.saveSetting("foldUserMessagesOnCompletion",n),We.emit(en.foldUserMessagesOnCompletionChanged,{fold:n})},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),Nt.saveSetting("streamingRenderFPS",r),We.emit(en.streamingRenderFpsChanged,{fps:r})},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),Nt.saveSetting("gitUserName",r),We.emit(en.gitUserNameChanged,{name:r})},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),Nt.saveSetting("gitUserEmail",r),We.emit(en.gitUserEmailChanged,{email:r})},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),Nt.saveSetting("toolMaxSteps",r),We.emit(en.toolMaxStepsChanged,{steps:r})},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),Nt.saveSetting("prismThemeUrl",r),We.emit(en.prismThemeUrlChanged,{url:r})},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),Nt.saveSetting("autoTitleEnabled",n),We.emit(en.autoTitleEnabledChanged,{enabled:n})},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),Nt.saveSetting("autoTitleModelId",n),We.emit(en.autoTitleModelIdChanged,{modelId:n})},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),Nt.saveSetting("autoTitlePromptMaxLength",r),We.emit(en.autoTitlePromptMaxLengthChanged,{length:r})},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),Nt.saveSetting("autoTitleIncludeFiles",n),We.emit(en.autoTitleIncludeFilesChanged,{include:n})},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),Nt.saveSetting("autoTitleIncludeRules",n),We.emit(en.autoTitleIncludeRulesChanged,{include:n})},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),Nt.saveSetting("customFontFamily",r),We.emit(en.customFontFamilyChanged,{fontFamily:r})},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),Nt.saveSetting("customFontSize",r),We.emit(en.customFontSizeChanged,{fontSize:r})},setChatMaxWidth:n=>{e({chatMaxWidth:n}),Nt.saveSetting("chatMaxWidth",n),We.emit(en.chatMaxWidthChanged,{maxWidth:n})},setCustomThemeColors:n=>{e({customThemeColors:n}),Nt.saveSetting("customThemeColors",n),We.emit(en.customThemeColorsChanged,{colors:n})},setCustomThemeColor:(n,r)=>{e(i=>{const o={...i.customThemeColors??{}};r===null||r.trim()===""?delete o[n]:o[n]=r.trim(),i.customThemeColors=Object.keys(o).length>0?o:null});const s=t().customThemeColors;Nt.saveSetting("customThemeColors",s),We.emit(en.customThemeColorsChanged,{colors:s})},setAutoScrollInterval:n=>{const r=Math.max(50,n);e({autoScrollInterval:r}),Nt.saveSetting("autoScrollInterval",r),We.emit(en.autoScrollIntervalChanged,{interval:r})},setEnableAutoScrollOnStream:n=>{e({enableAutoScrollOnStream:n}),Nt.saveSetting("enableAutoScrollOnStream",n),We.emit(en.enableAutoScrollOnStreamChanged,{enabled:n})},loadSettings:async()=>{try{const[n,r,s,i,a,o,l,c,d,h,m,g,v,b,w,x,_,E,k,T,R,M,I,O,P,U,j,V,$]=await Promise.all([Nt.loadSetting("theme",K2),Nt.loadSetting("temperature",Z2),Nt.loadSetting("maxTokens",Y2),Nt.loadSetting("topP",X2),Nt.loadSetting("topK",J2),Nt.loadSetting("presencePenalty",Q2),Nt.loadSetting("frequencyPenalty",eE),Nt.loadSetting("globalSystemPrompt",W2),Nt.loadSetting("enableAdvancedSettings",fM),Nt.loadSetting("enableStreamingMarkdown",tE),Nt.loadSetting("enableStreamingCodeBlockParsing",nE),Nt.loadSetting("foldStreamingCodeBlocks",rE),Nt.loadSetting("foldUserMessagesOnCompletion",sE),Nt.loadSetting("streamingRenderFPS",iE),Nt.loadSetting("gitUserName",hM),Nt.loadSetting("gitUserEmail",pM),Nt.loadSetting("toolMaxSteps",aE),Nt.loadSetting("prismThemeUrl",oE),Nt.loadSetting("autoTitleEnabled",lE),Nt.loadSetting("autoTitleModelId",cE),Nt.loadSetting("autoTitlePromptMaxLength",uE),Nt.loadSetting("autoTitleIncludeFiles",dE),Nt.loadSetting("autoTitleIncludeRules",fE),Nt.loadSetting("customFontFamily",hE),Nt.loadSetting("customFontSize",pE),Nt.loadSetting("chatMaxWidth",mE),Nt.loadSetting("customThemeColors",gE),Nt.loadSetting("autoScrollInterval",yE),Nt.loadSetting("enableAutoScrollOnStream",bE)]),re={theme:n,temperature:r,maxTokens:s,topP:i,topK:a,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:c,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:m,foldStreamingCodeBlocks:g,foldUserMessagesOnCompletion:v,streamingRenderFPS:b,gitUserName:w,gitUserEmail:x,toolMaxSteps:_,prismThemeUrl:E,autoTitleEnabled:k,autoTitleModelId:T,autoTitlePromptMaxLength:R,autoTitleIncludeFiles:M,autoTitleIncludeRules:I,customFontFamily:O,customFontSize:P,chatMaxWidth:U,customThemeColors:j,autoScrollInterval:V,enableAutoScrollOnStream:$};e(re),We.emit(en.loaded,{settings:re})}catch(n){console.error("SettingsStore: Error loading settings",n),We.emit(en.loaded,{settings:t()})}},resetGeneralSettings:async()=>{try{t().setEnableStreamingMarkdown(tE),t().setEnableStreamingCodeBlockParsing(nE),t().setFoldStreamingCodeBlocks(rE),t().setFoldUserMessagesOnCompletion(sE),t().setStreamingRenderFPS(iE),t().setAutoScrollInterval(yE),t().setEnableAutoScrollOnStream(bE),ze.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),ze.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{t().setGlobalSystemPrompt(W2),t().setTemperature(Z2),t().setMaxTokens(Y2),t().setTopP(X2),t().setTopK(J2),t().setPresencePenalty(Q2),t().setFrequencyPenalty(eE),t().setToolMaxSteps(aE),t().setAutoTitleEnabled(lE),t().setAutoTitleModelId(cE),t().setAutoTitlePromptMaxLength(uE),t().setAutoTitleIncludeFiles(dE),t().setAutoTitleIncludeRules(fE),ze.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),ze.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{t().setTheme(K2),t().setPrismThemeUrl(oE),t().setCustomFontFamily(hE),t().setCustomFontSize(pE),t().setChatMaxWidth(mE),t().setCustomThemeColors(gE),ze.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),ze.error("Failed to reset theme settings.")}},getRegisteredActionHandlers:()=>{const n="settingsStore",r=t();return[{eventName:en.setThemeRequest,handler:s=>r.setTheme(s.theme),storeId:n},{eventName:en.setGlobalSystemPromptRequest,handler:s=>r.setGlobalSystemPrompt(s.prompt),storeId:n},{eventName:en.setTemperatureRequest,handler:s=>r.setTemperature(s.value),storeId:n},{eventName:en.setMaxTokensRequest,handler:s=>r.setMaxTokens(s.value),storeId:n},{eventName:en.setTopPRequest,handler:s=>r.setTopP(s.value),storeId:n},{eventName:en.setTopKRequest,handler:s=>r.setTopK(s.value),storeId:n},{eventName:en.setPresencePenaltyRequest,handler:s=>r.setPresencePenalty(s.value),storeId:n},{eventName:en.setFrequencyPenaltyRequest,handler:s=>r.setFrequencyPenalty(s.value),storeId:n},{eventName:en.setEnableAdvancedSettingsRequest,handler:s=>r.setEnableAdvancedSettings(s.enabled),storeId:n},{eventName:en.setEnableStreamingMarkdownRequest,handler:s=>r.setEnableStreamingMarkdown(s.enabled),storeId:n},{eventName:en.setEnableStreamingCodeBlockParsingRequest,handler:s=>r.setEnableStreamingCodeBlockParsing(s.enabled),storeId:n},{eventName:en.setFoldStreamingCodeBlocksRequest,handler:s=>r.setFoldStreamingCodeBlocks(s.fold),storeId:n},{eventName:en.setFoldUserMessagesOnCompletionRequest,handler:s=>r.setFoldUserMessagesOnCompletion(s.fold),storeId:n},{eventName:en.setStreamingRenderFpsRequest,handler:s=>r.setStreamingRenderFPS(s.fps),storeId:n},{eventName:en.setGitUserNameRequest,handler:s=>r.setGitUserName(s.name),storeId:n},{eventName:en.setGitUserEmailRequest,handler:s=>r.setGitUserEmail(s.email),storeId:n},{eventName:en.setToolMaxStepsRequest,handler:s=>r.setToolMaxSteps(s.steps),storeId:n},{eventName:en.setPrismThemeUrlRequest,handler:s=>r.setPrismThemeUrl(s.url),storeId:n},{eventName:en.setAutoTitleEnabledRequest,handler:s=>r.setAutoTitleEnabled(s.enabled),storeId:n},{eventName:en.setAutoTitleModelIdRequest,handler:s=>r.setAutoTitleModelId(s.modelId),storeId:n},{eventName:en.setAutoTitlePromptMaxLengthRequest,handler:s=>r.setAutoTitlePromptMaxLength(s.length),storeId:n},{eventName:en.setAutoTitleIncludeFilesRequest,handler:s=>r.setAutoTitleIncludeFiles(s.include),storeId:n},{eventName:en.setAutoTitleIncludeRulesRequest,handler:s=>r.setAutoTitleIncludeRules(s.include),storeId:n},{eventName:en.setCustomFontFamilyRequest,handler:s=>r.setCustomFontFamily(s.fontFamily),storeId:n},{eventName:en.setCustomFontSizeRequest,handler:s=>r.setCustomFontSize(s.fontSize),storeId:n},{eventName:en.setChatMaxWidthRequest,handler:s=>r.setChatMaxWidth(s.maxWidth),storeId:n},{eventName:en.setCustomThemeColorsRequest,handler:s=>r.setCustomThemeColors(s.colors),storeId:n},{eventName:en.setCustomThemeColorRequest,handler:s=>r.setCustomThemeColor(s.colorKey,s.value),storeId:n},{eventName:en.setAutoScrollIntervalRequest,handler:s=>r.setAutoScrollInterval(s.interval),storeId:n},{eventName:en.setEnableAutoScrollOnStreamRequest,handler:s=>r.setEnableAutoScrollOnStream(s.enabled),storeId:n},{eventName:en.loadSettingsRequest,handler:()=>r.loadSettings(),storeId:n},{eventName:en.resetGeneralSettingsRequest,handler:()=>r.resetGeneralSettings(),storeId:n},{eventName:en.resetAssistantSettingsRequest,handler:()=>r.resetAssistantSettings(),storeId:n},{eventName:en.resetThemeSettingsRequest,handler:()=>r.resetThemeSettings(),storeId:n}]}})));async function ox(e,t){const n=dd.getState().getMiddlewareForHook,r=n(e);let s=t;for(const i of r)try{const a=await i.callback(s);if(a===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;a&&typeof a=="object"&&(s=a)}catch(a){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,a),!1}return s}function Dne(){const e=Hn.getState(),t=gr.getState(),n=ur.getState(),{providerId:r}=Mo(t.selectedModelId),s={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme,gitUserName:n.gitUserName,gitUserEmail:n.gitUserEmail};return Object.freeze(s)}function One(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.charCodeAt(s);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function mM(e){try{const t=e.type||"application/octet-stream",n=v0(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:One(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),ze.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function gM(e){return e.flatMap(t=>{var s,i,a;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(s=r.metadata)!=null&&s.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-call"&&c.toolCallId&&c.toolName&&c.args!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,c)}}),o.length>0&&n.push({role:"assistant",content:o})}if((a=t.metadata)!=null&&a.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const c=JSON.parse(l);c&&c.type==="tool-result"&&c.toolCallId&&c.toolName&&c.result!==void 0?o.push(c):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(c){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,c)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const yM=e=>Symbol.iterator in e,bM=e=>"entries"in e,vM=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[s,i]of n)if(!Object.is(i,r.get(s)))return!1;return!0},Pne=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let s=n.next(),i=r.next();for(;!s.done&&!i.done;){if(!Object.is(s.value,i.value))return!1;s=n.next(),i=r.next()}return!!s.done&&!!i.done};function Fne(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!yM(e)||!yM(t)?vM({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):bM(e)&&bM(t)?vM(e,t):Pne(e,t)}function En(e){const t=yt.useRef(void 0);return n=>{const r=e(n);return Fne(t.current,r)?t.current:t.current=r}}var D0=(e=>(e.PROMPT_TURN_FINALIZE="middleware.prompt.turnFinalize",e.INTERACTION_BEFORE_START="middleware.interaction.beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware.interaction.processChunk",e))(D0||{});const Nn={initialized:"prompt.state.initialized",parameterChanged:"prompt.state.parameter.changed",transientParametersReset:"prompt.state.transient.parameters.reset",inputTextStateChanged:"prompt.state.input.text.changed",submitted:"prompt.state.submitted",setModelIdRequest:"prompt.state.set.model.id.request",setTemperatureRequest:"prompt.state.set.temperature.request",setMaxTokensRequest:"prompt.state.set.max.tokens.request",setTopPRequest:"prompt.state.set.top.p.request",setTopKRequest:"prompt.state.set.top.k.request",setPresencePenaltyRequest:"prompt.state.set.presence.penalty.request",setFrequencyPenaltyRequest:"prompt.state.set.frequency.penalty.request",setReasoningEnabledRequest:"prompt.state.set.reasoning.enabled.request",setWebSearchEnabledRequest:"prompt.state.set.web.search.enabled.request",setStructuredOutputJsonRequest:"prompt.state.set.structured.output.json.request",initializePromptStateRequest:"prompt.state.initialize.prompt.state.request",resetTransientParametersRequest:"prompt.state.reset.transient.parameters.request",inputChanged:"prompt.inputChanged"},dl=(e,t)=>{We.emit(Nn.parameterChanged,{params:{[e]:t}})},jl=lo(co((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),dl("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),dl("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),dl("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),dl("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),dl("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),dl("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),dl("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),dl("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),dl("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),dl("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),s={};let i=!1;r.modelId!==n.modelId&&(s.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(s.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(s.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(s.topP=n.topP,i=!0),r.topK!==n.topK&&(s.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(s.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(s.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(s),We.emit(Nn.parameterChanged,{params:s})),We.emit(Nn.initialized,{state:{...t()}})},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let s=!1;n.temperature!==null&&(r.temperature=null,s=!0),n.maxTokens!==null&&(r.maxTokens=null,s=!0),n.topP!==null&&(r.topP=null,s=!0),n.topK!==null&&(r.topK=null,s=!0),n.presencePenalty!==null&&(r.presencePenalty=null,s=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,s=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,s=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,s=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,s=!0),s&&(e(r),We.emit(Nn.parameterChanged,{params:r})),We.emit(Nn.transientParametersReset,void 0)},getRegisteredActionHandlers:()=>{const n="promptStateStore",r=t();return[{eventName:Nn.setModelIdRequest,handler:s=>r.setModelId(s.id),storeId:n},{eventName:Nn.setTemperatureRequest,handler:s=>r.setTemperature(s.value),storeId:n},{eventName:Nn.setMaxTokensRequest,handler:s=>r.setMaxTokens(s.value),storeId:n},{eventName:Nn.setTopPRequest,handler:s=>r.setTopP(s.value),storeId:n},{eventName:Nn.setTopKRequest,handler:s=>r.setTopK(s.value),storeId:n},{eventName:Nn.setPresencePenaltyRequest,handler:s=>r.setPresencePenalty(s.value),storeId:n},{eventName:Nn.setFrequencyPenaltyRequest,handler:s=>r.setFrequencyPenalty(s.value),storeId:n},{eventName:Nn.setReasoningEnabledRequest,handler:s=>r.setReasoningEnabled(s.enabled),storeId:n},{eventName:Nn.setWebSearchEnabledRequest,handler:s=>r.setWebSearchEnabled(s.enabled),storeId:n},{eventName:Nn.setStructuredOutputJsonRequest,handler:s=>r.setStructuredOutputJson(s.json),storeId:n},{eventName:Nn.initializePromptStateRequest,handler:s=>r.initializePromptState(s.effectiveSettings),storeId:n},{eventName:Nn.resetTransientParametersRequest,handler:()=>r.resetTransientParameters(),storeId:n}]}}))),Lne=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:s,selectedItemId:i,selectedItemType:a})=>{const[o,l]=C.useState(!1),[c,d]=C.useState(!1),h=dd(En(T=>T.promptControls)),m=Hn(En(T=>T.status==="streaming")),{attachedFilesMetadata:g,clearAttachedFiles:v}=Mc(En(T=>({attachedFilesMetadata:T.attachedFilesMetadata,clearAttachedFiles:T.clearAttachedFiles}))),b=jl(T=>T.modelId);C.useEffect(()=>{a==="conversation"&&i&&requestAnimationFrame(()=>{var T;(T=s.current)==null||T.focus()})},[i,a,s]);const w=C.useMemo(()=>Object.values(h),[h]),x=C.useMemo(()=>w.filter(T=>T.renderer),[w]),_=C.useMemo(()=>w.filter(T=>T.triggerRenderer),[w]),E=C.useCallback(async()=>{var I,O;const R=(((I=s==null?void 0:s.current)==null?void 0:I.getValue())??"").trim(),M=Mc.getState().attachedFilesMetadata;if(!(!R&&M.length===0)&&!(m||o)){l(!0);try{let P={},U={};for(const J of w){if(J.getParameters){const te=await J.getParameters();te&&(P={...P,...te})}if(J.getMetadata){const te=await J.getMetadata();te&&(U={...U,...te})}}M.length>0&&(U.attachedFiles=[...M]),!U.modelId&&b&&(U.modelId=b);const j=w.find(J=>J.id==="core-rules-tags");if(j&&U.activeRuleIds&&U.activeTagIds){const J=[],te=new Set(U.activeRuleIds);U.activeTagIds.forEach(X=>{j.getRulesForTag(X).forEach(ie=>te.add(ie.id))}),te.forEach(X=>{const ie=j.getRuleById(X);ie&&J.push({type:ie.type,content:ie.content,sourceRuleId:ie.id})}),U.effectiveRulesContent=J}let V={id:pi(),content:R,parameters:P,metadata:U};We.emit(Nn.submitted,{turnData:V});const $=await ox(D0.PROMPT_TURN_FINALIZE,{turnData:V});if($===!1){console.log("Prompt submission cancelled by middleware."),l(!1);return}const re=$&&typeof $=="object"?$.turnData:V;await t(re),v(),w.forEach(J=>{J.clearOnSubmit&&J.clearOnSubmit()}),(O=s.current)==null||O.clearValue(),d(!1)}catch(P){console.error("Error during prompt submission:",P),ze.error(`Failed to send message: ${P instanceof Error?P.message:String(P)}`)}finally{l(!1)}}},[s,m,o,w,t,v,b]),k=C.useCallback(T=>{d(T.trim().length>0)},[]);return p.jsxs("div",{className:mt("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[x.length>0&&p.jsx(I4,{controls:x,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:s,onSubmit:E,disabled:m||o,placeholder:r,onValueChange:k,className:"flex-grow"}),p.jsx(At,{type:"button",size:"icon",onClick:E,disabled:m||o||!c&&g.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:o?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(LY,{className:"h-4 w-4"})})]})," ",p.jsx(I4,{controls:_,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})};function Ut(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function $ne(e,t){const n=C.createContext(t),r=i=>{const{children:a,...o}=i,l=C.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:a})};r.displayName=e+"Provider";function s(i){const a=C.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function Ii(e,t=[]){let n=[];function r(i,a){const o=C.createContext(a),l=n.length;n=[...n,a];const c=h=>{var x;const{scope:m,children:g,...v}=h,b=((x=m==null?void 0:m[e])==null?void 0:x[l])||o,w=C.useMemo(()=>v,Object.values(v));return p.jsx(b.Provider,{value:w,children:g})};c.displayName=i+"Provider";function d(h,m){var b;const g=((b=m==null?void 0:m[e])==null?void 0:b[l])||o,v=C.useContext(g);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(a=>C.createContext(a));return function(o){const l=(o==null?void 0:o[e])||i;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return s.scopeName=e,[r,Bne(s,...t)]}function Bne(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...o,...h}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var zne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rn=zne.reduce((e,t)=>{const n=Uu(`Primitive.${t}`),r=C.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function rL(e,t){e&&Ao.flushSync(()=>e.dispatchEvent(t))}function Xs(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Une(e,t=globalThis==null?void 0:globalThis.document){const n=Xs(e);C.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var qne="DismissableLayer",eT="dismissableLayer.update",Vne="dismissableLayer.pointerDownOutside",Hne="dismissableLayer.focusOutside",wM,sL=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tm=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...l}=e,c=C.useContext(sL),[d,h]=C.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=C.useState({}),v=In(t,M=>h(M)),b=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(w),_=d?b.indexOf(d):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,k=_>=x,T=Wne(M=>{const I=M.target,O=[...c.branches].some(P=>P.contains(I));!k||O||(s==null||s(M),a==null||a(M),M.defaultPrevented||o==null||o())},m),R=Zne(M=>{const I=M.target;[...c.branches].some(P=>P.contains(I))||(i==null||i(M),a==null||a(M),M.defaultPrevented||o==null||o())},m);return Une(M=>{_===c.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&o&&(M.preventDefault(),o()))},m),C.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(wM=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),xM(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=wM)}},[d,m,n,c]),C.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),xM())},[d,c]),C.useEffect(()=>{const M=()=>g({});return document.addEventListener(eT,M),()=>document.removeEventListener(eT,M)},[]),p.jsx(rn.div,{...l,ref:v,style:{pointerEvents:E?k?"auto":"none":void 0,...e.style},onFocusCapture:Ut(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Ut(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Ut(e.onPointerDownCapture,T.onPointerDownCapture)})});tm.displayName=qne;var Gne="DismissableLayerBranch",Kne=C.forwardRef((e,t)=>{const n=C.useContext(sL),r=C.useRef(null),s=In(t,r);return C.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(rn.div,{...e,ref:s})});Kne.displayName=Gne;function Wne(e,t=globalThis==null?void 0:globalThis.document){const n=Xs(e),r=C.useRef(!1),s=C.useRef(()=>{});return C.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){iL(Vne,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Zne(e,t=globalThis==null?void 0:globalThis.document){const n=Xs(e),r=C.useRef(!1);return C.useEffect(()=>{const s=i=>{i.target&&!r.current&&iL(Hne,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xM(){const e=new CustomEvent(eT);document.dispatchEvent(e)}function iL(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?rL(s,i):s.dispatchEvent(i)}var mi=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},Yne=I8[" useId ".trim().toString()]||(()=>{}),Xne=0;function ei(e){const[t,n]=C.useState(Yne());return mi(()=>{n(r=>r??String(Xne++))},[e]),t?`radix-${t}`:""}const Jne=["top","right","bottom","left"],Zu=Math.min,Aa=Math.max,lx=Math.round,Uv=Math.floor,El=e=>({x:e,y:e}),Qne={left:"right",right:"left",bottom:"top",top:"bottom"},ere={start:"end",end:"start"};function tT(e,t,n){return Aa(e,Zu(t,n))}function Oc(e,t){return typeof e=="function"?e(t):e}function Pc(e){return e.split("-")[0]}function nm(e){return e.split("-")[1]}function OA(e){return e==="x"?"y":"x"}function PA(e){return e==="y"?"height":"width"}function Yu(e){return["top","bottom"].includes(Pc(e))?"y":"x"}function FA(e){return OA(Yu(e))}function tre(e,t,n){n===void 0&&(n=!1);const r=nm(e),s=FA(e),i=PA(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=cx(a)),[a,cx(a)]}function nre(e){const t=cx(e);return[nT(e),t,nT(t)]}function nT(e){return e.replace(/start|end/g,t=>ere[t])}function rre(e,t,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?i:a;default:return[]}}function sre(e,t,n,r){const s=nm(e);let i=rre(Pc(e),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(nT)))),i}function cx(e){return e.replace(/left|right|bottom|top/g,t=>Qne[t])}function ire(e){return{top:0,right:0,bottom:0,left:0,...e}}function aL(e){return typeof e!="number"?ire(e):{top:e,right:e,bottom:e,left:e}}function ux(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function _M(e,t,n){let{reference:r,floating:s}=e;const i=Yu(t),a=FA(t),o=PA(a),l=Pc(t),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[o]/2-s[o]/2;let g;switch(l){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(nm(t)){case"start":g[a]-=m*(n&&c?-1:1);break;case"end":g[a]+=m*(n&&c?-1:1);break}return g}const are=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,o=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=_M(c,r,l),m=r,g={},v=0;for(let b=0;b<o.length;b++){const{name:w,fn:x}=o[b],{x:_,y:E,data:k,reset:T}=await x({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:c,platform:a,elements:{reference:e,floating:t}});d=_??d,h=E??h,g={...g,[w]:{...g[w],...k}},T&&v<=50&&(v++,typeof T=="object"&&(T.placement&&(m=T.placement),T.rects&&(c=T.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:d,y:h}=_M(c,m,l)),b=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:g}};async function O0(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Oc(t,e),v=aL(g),w=o[m?h==="floating"?"reference":"floating":h],x=ux(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),k=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},T=ux(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:E,strategy:l}):_);return{top:(x.top-T.top+v.top)/k.y,bottom:(T.bottom-x.bottom+v.bottom)/k.y,left:(x.left-T.left+v.left)/k.x,right:(T.right-x.right+v.right)/k.x}}const ore=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=Oc(e,t)||{};if(c==null)return{};const h=aL(d),m={x:n,y:r},g=FA(s),v=PA(g),b=await a.getDimensions(c),w=g==="y",x=w?"top":"left",_=w?"bottom":"right",E=w?"clientHeight":"clientWidth",k=i.reference[v]+i.reference[g]-m[g]-i.floating[v],T=m[g]-i.reference[g],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let M=R?R[E]:0;(!M||!await(a.isElement==null?void 0:a.isElement(R)))&&(M=o.floating[E]||i.floating[v]);const I=k/2-T/2,O=M/2-b[v]/2-1,P=Zu(h[x],O),U=Zu(h[_],O),j=P,V=M-b[v]-U,$=M/2-b[v]/2+I,re=tT(j,$,V),J=!l.arrow&&nm(s)!=null&&$!==re&&i.reference[v]/2-($<j?P:U)-b[v]/2<0,te=J?$<j?$-j:$-V:0;return{[g]:m[g]+te,data:{[g]:re,centerOffset:$-re-te,...J&&{alignmentOffset:te}},reset:J}}}),lre=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...w}=Oc(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Pc(s),_=Yu(o),E=Pc(o)===o,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=m||(E||!b?[cx(o)]:nre(o)),R=v!=="none";!m&&R&&T.push(...sre(o,b,v,k));const M=[o,...T],I=await O0(t,w),O=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&O.push(I[x]),h){const $=tre(s,a,k);O.push(I[$[0]],I[$[1]])}if(P=[...P,{placement:s,overflows:O}],!O.every($=>$<=0)){var U,j;const $=(((U=i.flip)==null?void 0:U.index)||0)+1,re=M[$];if(re)return{data:{index:$,overflows:P},reset:{placement:re}};let J=(j=P.filter(te=>te.overflows[0]<=0).sort((te,X)=>te.overflows[1]-X.overflows[1])[0])==null?void 0:j.placement;if(!J)switch(g){case"bestFit":{var V;const te=(V=P.filter(X=>{if(R){const ie=Yu(X.placement);return ie===_||ie==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ie=>ie>0).reduce((ie,Z)=>ie+Z,0)]).sort((X,ie)=>X[1]-ie[1])[0])==null?void 0:V[0];te&&(J=te);break}case"initialPlacement":J=o;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function SM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function EM(e){return Jne.some(t=>e[t]>=0)}const cre=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Oc(e,t);switch(r){case"referenceHidden":{const i=await O0(t,{...s,elementContext:"reference"}),a=SM(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:EM(a)}}}case"escaped":{const i=await O0(t,{...s,altBoundary:!0}),a=SM(i,n.floating);return{data:{escapedOffsets:a,escaped:EM(a)}}}default:return{}}}}};async function ure(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Pc(n),o=nm(n),l=Yu(n)==="y",c=["left","top"].includes(a)?-1:1,d=i&&l?-1:1,h=Oc(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(g=o==="end"?v*-1:v),l?{x:g*d,y:m*c}:{x:m*c,y:g*d}}const dre=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:a,middlewareData:o}=t,l=await ure(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:a}}}}},fre=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x,y:_}=w;return{x,y:_}}},...l}=Oc(e,t),c={x:n,y:r},d=await O0(t,l),h=Yu(Pc(s)),m=OA(h);let g=c[m],v=c[h];if(i){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",_=g+d[w],E=g-d[x];g=tT(_,g,E)}if(a){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",_=v+d[w],E=v-d[x];v=tT(_,v,E)}const b=o.fn({...t,[m]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[m]:i,[h]:a}}}}}},hre=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Oc(e,t),d={x:n,y:r},h=Yu(s),m=OA(h);let g=d[m],v=d[h];const b=Oc(o,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=m==="y"?"height":"width",k=i.reference[m]-i.floating[E]+w.mainAxis,T=i.reference[m]+i.reference[E]-w.mainAxis;g<k?g=k:g>T&&(g=T)}if(c){var x,_;const E=m==="y"?"width":"height",k=["top","left"].includes(Pc(s)),T=i.reference[h]-i.floating[E]+(k&&((x=a.offset)==null?void 0:x[h])||0)+(k?0:w.crossAxis),R=i.reference[h]+i.reference[E]+(k?0:((_=a.offset)==null?void 0:_[h])||0)-(k?w.crossAxis:0);v<T?v=T:v>R&&(v=R)}return{[m]:g,[h]:v}}}},pre=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:a,elements:o}=t,{apply:l=()=>{},...c}=Oc(e,t),d=await O0(t,c),h=Pc(s),m=nm(s),g=Yu(s)==="y",{width:v,height:b}=i.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=m===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(x=h,w=m==="end"?"top":"bottom");const _=b-d.top-d.bottom,E=v-d.left-d.right,k=Zu(b-d[w],_),T=Zu(v-d[x],E),R=!t.middlewareData.shift;let M=k,I=T;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(M=_),R&&!m){const P=Aa(d.left,0),U=Aa(d.right,0),j=Aa(d.top,0),V=Aa(d.bottom,0);g?I=v-2*(P!==0||U!==0?P+U:Aa(d.left,d.right)):M=b-2*(j!==0||V!==0?j+V:Aa(d.top,d.bottom))}await l({...t,availableWidth:I,availableHeight:M});const O=await a.getDimensions(o.floating);return v!==O.width||b!==O.height?{reset:{rects:!0}}:{}}}};function g1(){return typeof window<"u"}function rm(e){return oL(e)?(e.nodeName||"").toLowerCase():"#document"}function Na(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fl(e){var t;return(t=(oL(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function oL(e){return g1()?e instanceof Node||e instanceof Na(e).Node:!1}function Lo(e){return g1()?e instanceof Element||e instanceof Na(e).Element:!1}function Ml(e){return g1()?e instanceof HTMLElement||e instanceof Na(e).HTMLElement:!1}function CM(e){return!g1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Na(e).ShadowRoot}function My(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=$o(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function mre(e){return["table","td","th"].includes(rm(e))}function y1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function LA(e){const t=$A(),n=Lo(e)?$o(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function gre(e){let t=Xu(e);for(;Ml(t)&&!Np(t);){if(LA(t))return t;if(y1(t))return null;t=Xu(t)}return null}function $A(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Np(e){return["html","body","#document"].includes(rm(e))}function $o(e){return Na(e).getComputedStyle(e)}function b1(e){return Lo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xu(e){if(rm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||CM(e)&&e.host||Fl(e);return CM(t)?t.host:t}function lL(e){const t=Xu(e);return Np(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ml(t)&&My(t)?t:lL(t)}function P0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=lL(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),a=Na(s);if(i){const o=rT(a);return t.concat(a,a.visualViewport||[],My(s)?s:[],o&&n?P0(o):[])}return t.concat(s,P0(s,[],n))}function rT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function cL(e){const t=$o(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ml(e),i=s?e.offsetWidth:n,a=s?e.offsetHeight:r,o=lx(n)!==i||lx(r)!==a;return o&&(n=i,r=a),{width:n,height:r,$:o}}function BA(e){return Lo(e)?e:e.contextElement}function bp(e){const t=BA(e);if(!Ml(t))return El(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=cL(t);let a=(i?lx(n.width):n.width)/r,o=(i?lx(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const yre=El(0);function uL(e){const t=Na(e);return!$A()||!t.visualViewport?yre:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bre(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Na(e)?!1:t}function Rf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=BA(e);let a=El(1);t&&(r?Lo(r)&&(a=bp(r)):a=bp(e));const o=bre(i,n,r)?uL(i):El(0);let l=(s.left+o.x)/a.x,c=(s.top+o.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(i){const m=Na(i),g=r&&Lo(r)?Na(r):r;let v=m,b=rT(v);for(;b&&r&&g!==v;){const w=bp(b),x=b.getBoundingClientRect(),_=$o(b),E=x.left+(b.clientLeft+parseFloat(_.paddingLeft))*w.x,k=x.top+(b.clientTop+parseFloat(_.paddingTop))*w.y;l*=w.x,c*=w.y,d*=w.x,h*=w.y,l+=E,c+=k,v=Na(b),b=rT(v)}}return ux({width:d,height:h,x:l,y:c})}function zA(e,t){const n=b1(e).scrollLeft;return t?t.left+n:Rf(Fl(e)).left+n}function dL(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:zA(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function vre(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",a=Fl(r),o=t?y1(t.floating):!1;if(r===a||o&&i)return n;let l={scrollLeft:0,scrollTop:0},c=El(1);const d=El(0),h=Ml(r);if((h||!h&&!i)&&((rm(r)!=="body"||My(a))&&(l=b1(r)),Ml(r))){const g=Rf(r);c=bp(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=a&&!h&&!i?dL(a,l,!0):El(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:n.y*c.y-l.scrollTop*c.y+d.y+m.y}}function wre(e){return Array.from(e.getClientRects())}function xre(e){const t=Fl(e),n=b1(e),r=e.ownerDocument.body,s=Aa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Aa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+zA(e);const o=-n.scrollTop;return $o(r).direction==="rtl"&&(a+=Aa(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}function _re(e,t){const n=Na(e),r=Fl(e),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;const c=$A();(!c||c&&t==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:i,height:a,x:o,y:l}}function Sre(e,t){const n=Rf(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=Ml(e)?bp(e):El(1),a=e.clientWidth*i.x,o=e.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:a,height:o,x:l,y:c}}function kM(e,t,n){let r;if(t==="viewport")r=_re(e,n);else if(t==="document")r=xre(Fl(e));else if(Lo(t))r=Sre(t,n);else{const s=uL(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return ux(r)}function fL(e,t){const n=Xu(e);return n===t||!Lo(n)||Np(n)?!1:$o(n).position==="fixed"||fL(n,t)}function Ere(e,t){const n=t.get(e);if(n)return n;let r=P0(e,[],!1).filter(o=>Lo(o)&&rm(o)!=="body"),s=null;const i=$o(e).position==="fixed";let a=i?Xu(e):e;for(;Lo(a)&&!Np(a);){const o=$o(a),l=LA(a);!l&&o.position==="fixed"&&(s=null),(i?!l&&!s:!l&&o.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||My(a)&&!l&&fL(e,a))?r=r.filter(d=>d!==a):s=o,a=Xu(a)}return t.set(e,r),r}function Cre(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?y1(t)?[]:Ere(t,this._c):[].concat(n),r],o=a[0],l=a.reduce((c,d)=>{const h=kM(t,d,s);return c.top=Aa(h.top,c.top),c.right=Zu(h.right,c.right),c.bottom=Zu(h.bottom,c.bottom),c.left=Aa(h.left,c.left),c},kM(t,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function kre(e){const{width:t,height:n}=cL(e);return{width:t,height:n}}function Tre(e,t,n){const r=Ml(t),s=Fl(t),i=n==="fixed",a=Rf(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=El(0);if(r||!r&&!i)if((rm(t)!=="body"||My(s))&&(o=b1(t)),r){const m=Rf(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else s&&(l.x=zA(s));const c=s&&!r&&!i?dL(s,o):El(0),d=a.left+o.scrollLeft-l.x-c.x,h=a.top+o.scrollTop-l.y-c.y;return{x:d,y:h,width:a.width,height:a.height}}function vE(e){return $o(e).position==="static"}function TM(e,t){if(!Ml(e)||$o(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Fl(e)===n&&(n=n.ownerDocument.body),n}function hL(e,t){const n=Na(e);if(y1(e))return n;if(!Ml(e)){let s=Xu(e);for(;s&&!Np(s);){if(Lo(s)&&!vE(s))return s;s=Xu(s)}return n}let r=TM(e,t);for(;r&&mre(r)&&vE(r);)r=TM(r,t);return r&&Np(r)&&vE(r)&&!LA(r)?n:r||gre(e)||n}const Are=async function(e){const t=this.getOffsetParent||hL,n=this.getDimensions,r=await n(e.floating);return{reference:Tre(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Rre(e){return $o(e).direction==="rtl"}const Nre={convertOffsetParentRelativeRectToViewportRelativeRect:vre,getDocumentElement:Fl,getClippingRect:Cre,getOffsetParent:hL,getElementRects:Are,getClientRects:wre,getDimensions:kre,getScale:bp,isElement:Lo,isRTL:Rre};function pL(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ire(e,t){let n=null,r;const s=Fl(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const c=e.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=c;if(o||t(),!m||!g)return;const v=Uv(h),b=Uv(s.clientWidth-(d+m)),w=Uv(s.clientHeight-(h+g)),x=Uv(d),E={rootMargin:-v+"px "+-b+"px "+-w+"px "+-x+"px",threshold:Aa(0,Zu(1,l))||1};let k=!0;function T(R){const M=R[0].intersectionRatio;if(M!==l){if(!k)return a();M?a(!1,M):r=setTimeout(()=>{a(!1,1e-7)},1e3)}M===1&&!pL(c,e.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(T,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,E)}n.observe(e)}return a(!0),i}function jre(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=BA(e),d=s||i?[...c?P0(c):[],...P0(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&o?Ire(c,n):null;let m=-1,g=null;a&&(g=new ResizeObserver(x=>{let[_]=x;_&&_.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let v,b=l?Rf(e):null;l&&w();function w(){const x=Rf(e);b&&!pL(b,x)&&n(),b=x,v=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const Mre=dre,Dre=fre,Ore=lre,Pre=pre,Fre=cre,AM=ore,Lre=hre,$re=(e,t,n)=>{const r=new Map,s={platform:Nre,...n},i={...s.platform,_c:r};return are(e,t,{...s,platform:i})};var _w=typeof document<"u"?C.useLayoutEffect:C.useEffect;function dx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!dx(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!dx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function mL(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function RM(e,t){const n=mL(e);return Math.round(t*n)/n}function wE(e){const t=C.useRef(e);return _w(()=>{t.current=e}),t}function Bre(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,h]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=C.useState(r);dx(m,r)||g(r);const[v,b]=C.useState(null),[w,x]=C.useState(null),_=C.useCallback(X=>{X!==R.current&&(R.current=X,b(X))},[]),E=C.useCallback(X=>{X!==M.current&&(M.current=X,x(X))},[]),k=i||v,T=a||w,R=C.useRef(null),M=C.useRef(null),I=C.useRef(d),O=l!=null,P=wE(l),U=wE(s),j=wE(c),V=C.useCallback(()=>{if(!R.current||!M.current)return;const X={placement:t,strategy:n,middleware:m};U.current&&(X.platform=U.current),$re(R.current,M.current,X).then(ie=>{const Z={...ie,isPositioned:j.current!==!1};$.current&&!dx(I.current,Z)&&(I.current=Z,Ao.flushSync(()=>{h(Z)}))})},[m,t,n,U,j]);_w(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[c]);const $=C.useRef(!1);_w(()=>($.current=!0,()=>{$.current=!1}),[]),_w(()=>{if(k&&(R.current=k),T&&(M.current=T),k&&T){if(P.current)return P.current(k,T,V);V()}},[k,T,V,P,O]);const re=C.useMemo(()=>({reference:R,floating:M,setReference:_,setFloating:E}),[_,E]),J=C.useMemo(()=>({reference:k,floating:T}),[k,T]),te=C.useMemo(()=>{const X={position:n,left:0,top:0};if(!J.floating)return X;const ie=RM(J.floating,d.x),Z=RM(J.floating,d.y);return o?{...X,transform:"translate("+ie+"px, "+Z+"px)",...mL(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:Z}},[n,o,J.floating,d.x,d.y]);return C.useMemo(()=>({...d,update:V,refs:re,elements:J,floatingStyles:te}),[d,V,re,J,te])}const zre=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?AM({element:r.current,padding:s}).fn(n):{}:r?AM({element:r,padding:s}).fn(n):{}}}},Ure=(e,t)=>({...Mre(e),options:[e,t]}),qre=(e,t)=>({...Dre(e),options:[e,t]}),Vre=(e,t)=>({...Lre(e),options:[e,t]}),Hre=(e,t)=>({...Ore(e),options:[e,t]}),Gre=(e,t)=>({...Pre(e),options:[e,t]}),Kre=(e,t)=>({...Fre(e),options:[e,t]}),Wre=(e,t)=>({...zre(e),options:[e,t]});var Zre="Arrow",gL=C.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return p.jsx(rn.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});gL.displayName=Zre;var Yre=gL;function v1(e){const[t,n]=C.useState(void 0);return mi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,o;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=e.offsetWidth,o=e.offsetHeight;n({width:a,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var UA="Popper",[yL,fd]=Ii(UA),[Xre,bL]=yL(UA),vL=e=>{const{__scopePopper:t,children:n}=e,[r,s]=C.useState(null);return p.jsx(Xre,{scope:t,anchor:r,onAnchorChange:s,children:n})};vL.displayName=UA;var wL="PopperAnchor",xL=C.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=bL(wL,n),a=C.useRef(null),o=In(t,a);return C.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:p.jsx(rn.div,{...s,ref:o})});xL.displayName=wL;var qA="PopperContent",[Jre,Qre]=yL(qA),_L=C.forwardRef((e,t)=>{var De,Re,xe,Fe,st,He;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,w=bL(qA,n),[x,_]=C.useState(null),E=In(t,Ne=>_(Ne)),[k,T]=C.useState(null),R=v1(k),M=(R==null?void 0:R.width)??0,I=(R==null?void 0:R.height)??0,O=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},U=Array.isArray(c)?c:[c],j=U.length>0,V={padding:P,boundary:U.filter(tse),altBoundary:j},{refs:$,floatingStyles:re,placement:J,isPositioned:te,middlewareData:X}=Bre({strategy:"fixed",placement:O,whileElementsMounted:(...Ne)=>jre(...Ne,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[Ure({mainAxis:s+I,alignmentAxis:a}),l&&qre({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Vre():void 0,...V}),l&&Hre({...V}),Gre({...V,apply:({elements:Ne,rects:H,availableWidth:ue,availableHeight:ke})=>{const{width:ae,height:oe}=H.reference,ne=Ne.floating.style;ne.setProperty("--radix-popper-available-width",`${ue}px`),ne.setProperty("--radix-popper-available-height",`${ke}px`),ne.setProperty("--radix-popper-anchor-width",`${ae}px`),ne.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),k&&Wre({element:k,padding:o}),nse({arrowWidth:M,arrowHeight:I}),m&&Kre({strategy:"referenceHidden",...V})]}),[ie,Z]=CL(J),ee=Xs(v);mi(()=>{te&&(ee==null||ee())},[te,ee]);const Q=(De=X.arrow)==null?void 0:De.x,he=(Re=X.arrow)==null?void 0:Re.y,Se=((xe=X.arrow)==null?void 0:xe.centerOffset)!==0,[ce,je]=C.useState();return mi(()=>{x&&je(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:te?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(Fe=X.transformOrigin)==null?void 0:Fe.x,(st=X.transformOrigin)==null?void 0:st.y].join(" "),...((He=X.hide)==null?void 0:He.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(Jre,{scope:n,placedSide:ie,onArrowChange:T,arrowX:Q,arrowY:he,shouldHideArrow:Se,children:p.jsx(rn.div,{"data-side":ie,"data-align":Z,...b,ref:E,style:{...b.style,animation:te?void 0:"none"}})})})});_L.displayName=qA;var SL="PopperArrow",ese={top:"bottom",right:"left",bottom:"top",left:"right"},EL=C.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=Qre(SL,r),a=ese[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(Yre,{...s,ref:n,style:{...s.style,display:"block"}})})});EL.displayName=SL;function tse(e){return e!==null}var nse=e=>({name:"transformOrigin",options:e,fn(t){var w,x,_;const{placement:n,rects:r,middlewareData:s}=t,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,o=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,d]=CL(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((x=s.arrow)==null?void 0:x.x)??0)+o/2,g=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let v="",b="";return c==="bottom"?(v=a?h:`${m}px`,b=`${-l}px`):c==="top"?(v=a?h:`${m}px`,b=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,b=a?h:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,b=a?h:`${g}px`),{data:{x:v,y:b}}}});function CL(e){const[t,n="center"]=e.split("-");return[t,n]}var w1=vL,Dy=xL,x1=_L,_1=EL,rse="Portal",sm=C.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[s,i]=C.useState(!1);mi(()=>i(!0),[]);const a=n||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?c5.createPortal(p.jsx(rn.div,{...r,ref:t}),a):null});sm.displayName=rse;function sse(e,t){return C.useReducer((n,r)=>t[n][r]??n,e)}var ii=e=>{const{present:t,children:n}=e,r=ise(t),s=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),i=In(r.ref,ase(s));return typeof n=="function"||r.isPresent?C.cloneElement(s,{ref:i}):null};ii.displayName="Presence";function ise(e){const[t,n]=C.useState(),r=C.useRef(null),s=C.useRef(e),i=C.useRef("none"),a=e?"mounted":"unmounted",[o,l]=sse(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const c=qv(r.current);i.current=o==="mounted"?c:"none"},[o]),mi(()=>{const c=r.current,d=s.current;if(d!==e){const m=i.current,g=qv(c);e?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),mi(()=>{if(t){let c;const d=t.ownerDocument.defaultView??window,h=g=>{const b=qv(r.current).includes(g.animationName);if(g.target===t&&b&&(l("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",c=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(i.current=qv(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:C.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function qv(e){return(e==null?void 0:e.animationName)||"none"}function ase(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ose=I8[" useInsertionEffect ".trim().toString()]||mi;function Bo({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,a]=lse({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:s;{const d=C.useRef(e!==void 0);C.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const c=C.useCallback(d=>{var h;if(o){const m=cse(d)?d(e):d;m!==e&&((h=a.current)==null||h.call(a,m))}else i(d)},[o,e,i,a]);return[l,c]}function lse({defaultProp:e,onChange:t}){const[n,r]=C.useState(e),s=C.useRef(n),i=C.useRef(t);return ose(()=>{i.current=t},[t]),C.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function cse(e){return typeof e=="function"}var kL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),use="VisuallyHidden",TL=C.forwardRef((e,t)=>p.jsx(rn.span,{...e,ref:t,style:{...kL,...e.style}}));TL.displayName=use;var dse=TL,[S1,M3e]=Ii("Tooltip",[fd]),E1=fd(),AL="TooltipProvider",fse=700,sT="tooltip.open",[hse,VA]=S1(AL),RL=e=>{const{__scopeTooltip:t,delayDuration:n=fse,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,a=C.useRef(!0),o=C.useRef(!1),l=C.useRef(0);return C.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(hse,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:C.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:C.useCallback(c=>{o.current=c},[]),disableHoverableContent:s,children:i})};RL.displayName=AL;var F0="Tooltip",[pse,Oy]=S1(F0),NL=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:a,delayDuration:o}=e,l=VA(F0,e.__scopeTooltip),c=E1(t),[d,h]=C.useState(null),m=ei(),g=C.useRef(0),v=a??l.disableHoverableContent,b=o??l.delayDuration,w=C.useRef(!1),[x,_]=Bo({prop:r,defaultProp:s??!1,onChange:M=>{M?(l.onOpen(),document.dispatchEvent(new CustomEvent(sT))):l.onClose(),i==null||i(M)},caller:F0}),E=C.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),k=C.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w.current=!1,_(!0)},[_]),T=C.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),R=C.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{w.current=!0,_(!0),g.current=0},b)},[b,_]);return C.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),p.jsx(w1,{...c,children:p.jsx(pse,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:C.useCallback(()=>{l.isOpenDelayedRef.current?R():k()},[l.isOpenDelayedRef,R,k]),onTriggerLeave:C.useCallback(()=>{v?T():(window.clearTimeout(g.current),g.current=0)},[T,v]),onOpen:k,onClose:T,disableHoverableContent:v,children:n})})};NL.displayName=F0;var iT="TooltipTrigger",IL=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Oy(iT,n),i=VA(iT,n),a=E1(n),o=C.useRef(null),l=In(t,o,s.onTriggerChange),c=C.useRef(!1),d=C.useRef(!1),h=C.useCallback(()=>c.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(Dy,{asChild:!0,...a,children:p.jsx(rn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Ut(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ut(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Ut(e.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ut(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ut(e.onBlur,s.onClose),onClick:Ut(e.onClick,s.onClose)})})});IL.displayName=iT;var HA="TooltipPortal",[mse,gse]=S1(HA,{forceMount:void 0}),jL=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,i=Oy(HA,t);return p.jsx(mse,{scope:t,forceMount:n,children:p.jsx(ii,{present:n||i.open,children:p.jsx(sm,{asChild:!0,container:s,children:r})})})};jL.displayName=HA;var Ip="TooltipContent",ML=C.forwardRef((e,t)=>{const n=gse(Ip,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,a=Oy(Ip,e.__scopeTooltip);return p.jsx(ii,{present:r||a.open,children:a.disableHoverableContent?p.jsx(DL,{side:s,...i,ref:t}):p.jsx(yse,{side:s,...i,ref:t})})}),yse=C.forwardRef((e,t)=>{const n=Oy(Ip,e.__scopeTooltip),r=VA(Ip,e.__scopeTooltip),s=C.useRef(null),i=In(t,s),[a,o]=C.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,m=C.useCallback(()=>{o(null),h(!1)},[h]),g=C.useCallback((v,b)=>{const w=v.currentTarget,x={x:v.clientX,y:v.clientY},_=xse(x,w.getBoundingClientRect()),E=_se(x,_),k=Sse(b.getBoundingClientRect()),T=Cse([...E,...k]);o(T),h(!0)},[h]);return C.useEffect(()=>()=>m(),[m]),C.useEffect(()=>{if(l&&d){const v=w=>g(w,d),b=w=>g(w,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,g,m]),C.useEffect(()=>{if(a){const v=b=>{const w=b.target,x={x:b.clientX,y:b.clientY},_=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),E=!Ese(x,a);_?m():E&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,a,c,m]),p.jsx(DL,{...e,ref:i})}),[bse,vse]=S1(F0,{isInside:!1}),wse=lW("TooltipContent"),DL=C.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...o}=e,l=Oy(Ip,n),c=E1(n),{onClose:d}=l;return C.useEffect(()=>(document.addEventListener(sT,d),()=>document.removeEventListener(sT,d)),[d]),C.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),p.jsx(tm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:p.jsxs(x1,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(wse,{children:r}),p.jsx(bse,{scope:n,isInside:!0,children:p.jsx(dse,{id:l.contentId,role:"tooltip",children:s||r})})]})})});ML.displayName=Ip;var OL="TooltipArrow",PL=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=E1(n);return vse(OL,n).isInside?null:p.jsx(_1,{...s,...r,ref:t})});PL.displayName=OL;function xse(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function _se(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Sse(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function Ese(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const o=t[i],l=t[a],c=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-c)*(r-d)/(m-d)+c&&(s=!s)}return s}function Cse(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),kse(t)}function kse(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Tse=RL,Ase=NL,Rse=IL,Nse=jL,Ise=ML,jse=PL;function qn({delayDuration:e=0,...t}){return p.jsx(Tse,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Gn({...e}){return p.jsx(qn,{children:p.jsx(Ase,{"data-slot":"tooltip",...e})})}function Kn({...e}){return p.jsx(Rse,{"data-slot":"tooltip-trigger",...e})}function Wn({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(Nse,{children:p.jsxs(Ise,{"data-slot":"tooltip-content",sideOffset:t,className:mt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(jse,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var xE={exports:{}},NM;function Mse(){return NM||(NM=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,a={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function _(E){return E instanceof l?new l(E.type,_(E.content),E.alias):Array.isArray(E)?E.map(_):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++i}),_.__id},clone:function _(E,k){k=k||{};var T,R;switch(o.util.type(E)){case"Object":if(R=o.util.objId(E),k[R])return k[R];T={},k[R]=T;for(var M in E)E.hasOwnProperty(M)&&(T[M]=_(E[M],k));return T;case"Array":return R=o.util.objId(E),k[R]?k[R]:(T=[],k[R]=T,E.forEach(function(I,O){T[O]=_(I,k)}),T);default:return E}},getLanguage:function(_){for(;_;){var E=s.exec(_.className);if(E)return E[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,E){_.className=_.className.replace(RegExp(s,"gi"),""),_.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(T){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(T.stack)||[])[1];if(_){var E=document.getElementsByTagName("script");for(var k in E)if(E[k].src==_)return E[k]}return null}},isActive:function(_,E,k){for(var T="no-"+E;_;){var R=_.classList;if(R.contains(E))return!0;if(R.contains(T))return!1;_=_.parentElement}return!!k}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(_,E){var k=o.util.clone(o.languages[_]);for(var T in E)k[T]=E[T];return k},insertBefore:function(_,E,k,T){T=T||o.languages;var R=T[_],M={};for(var I in R)if(R.hasOwnProperty(I)){if(I==E)for(var O in k)k.hasOwnProperty(O)&&(M[O]=k[O]);k.hasOwnProperty(I)||(M[I]=R[I])}var P=T[_];return T[_]=M,o.languages.DFS(o.languages,function(U,j){j===P&&U!=_&&(this[U]=M)}),M},DFS:function _(E,k,T,R){R=R||{};var M=o.util.objId;for(var I in E)if(E.hasOwnProperty(I)){k.call(E,I,E[I],T||I);var O=E[I],P=o.util.type(O);P==="Object"&&!R[M(O)]?(R[M(O)]=!0,_(O,k,null,R)):P==="Array"&&!R[M(O)]&&(R[M(O)]=!0,_(O,k,I,R))}}},plugins:{},highlightAll:function(_,E){o.highlightAllUnder(document,_,E)},highlightAllUnder:function(_,E,k){var T={callback:k,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",T),T.elements=Array.prototype.slice.apply(T.container.querySelectorAll(T.selector)),o.hooks.run("before-all-elements-highlight",T);for(var R=0,M;M=T.elements[R++];)o.highlightElement(M,E===!0,T.callback)},highlightElement:function(_,E,k){var T=o.util.getLanguage(_),R=o.languages[T];o.util.setLanguage(_,T);var M=_.parentElement;M&&M.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(M,T);var I=_.textContent,O={element:_,language:T,grammar:R,code:I};function P(j){O.highlightedCode=j,o.hooks.run("before-insert",O),O.element.innerHTML=O.highlightedCode,o.hooks.run("after-highlight",O),o.hooks.run("complete",O),k&&k.call(O.element)}if(o.hooks.run("before-sanity-check",O),M=O.element.parentElement,M&&M.nodeName.toLowerCase()==="pre"&&!M.hasAttribute("tabindex")&&M.setAttribute("tabindex","0"),!O.code){o.hooks.run("complete",O),k&&k.call(O.element);return}if(o.hooks.run("before-highlight",O),!O.grammar){P(o.util.encode(O.code));return}if(E&&r.Worker){var U=new Worker(o.filename);U.onmessage=function(j){P(j.data)},U.postMessage(JSON.stringify({language:O.language,code:O.code,immediateClose:!0}))}else P(o.highlight(O.code,O.grammar,O.language))},highlight:function(_,E,k){var T={code:_,grammar:E,language:k};if(o.hooks.run("before-tokenize",T),!T.grammar)throw new Error('The language "'+T.language+'" has no grammar.');return T.tokens=o.tokenize(T.code,T.grammar),o.hooks.run("after-tokenize",T),l.stringify(o.util.encode(T.tokens),T.language)},tokenize:function(_,E){var k=E.rest;if(k){for(var T in k)E[T]=k[T];delete E.rest}var R=new h;return m(R,R.head,_),d(_,R,E,R.head,0),v(R)},hooks:{all:{},add:function(_,E){var k=o.hooks.all;k[_]=k[_]||[],k[_].push(E)},run:function(_,E){var k=o.hooks.all[_];if(!(!k||!k.length))for(var T=0,R;R=k[T++];)R(E)}},Token:l};r.Prism=o;function l(_,E,k,T){this.type=_,this.content=E,this.alias=k,this.length=(T||"").length|0}l.stringify=function _(E,k){if(typeof E=="string")return E;if(Array.isArray(E)){var T="";return E.forEach(function(P){T+=_(P,k)}),T}var R={type:E.type,content:_(E.content,k),tag:"span",classes:["token",E.type],attributes:{},language:k},M=E.alias;M&&(Array.isArray(M)?Array.prototype.push.apply(R.classes,M):R.classes.push(M)),o.hooks.run("wrap",R);var I="";for(var O in R.attributes)I+=" "+O+'="'+(R.attributes[O]||"").replace(/"/g,"&quot;")+'"';return"<"+R.tag+' class="'+R.classes.join(" ")+'"'+I+">"+R.content+"</"+R.tag+">"};function c(_,E,k,T){_.lastIndex=E;var R=_.exec(k);if(R&&T&&R[1]){var M=R[1].length;R.index+=M,R[0]=R[0].slice(M)}return R}function d(_,E,k,T,R,M){for(var I in k)if(!(!k.hasOwnProperty(I)||!k[I])){var O=k[I];O=Array.isArray(O)?O:[O];for(var P=0;P<O.length;++P){if(M&&M.cause==I+","+P)return;var U=O[P],j=U.inside,V=!!U.lookbehind,$=!!U.greedy,re=U.alias;if($&&!U.pattern.global){var J=U.pattern.toString().match(/[imsuy]*$/)[0];U.pattern=RegExp(U.pattern.source,J+"g")}for(var te=U.pattern||U,X=T.next,ie=R;X!==E.tail&&!(M&&ie>=M.reach);ie+=X.value.length,X=X.next){var Z=X.value;if(E.length>_.length)return;if(!(Z instanceof l)){var ee=1,Q;if($){if(Q=c(te,ie,_,V),!Q||Q.index>=_.length)break;var je=Q.index,he=Q.index+Q[0].length,Se=ie;for(Se+=X.value.length;je>=Se;)X=X.next,Se+=X.value.length;if(Se-=X.value.length,ie=Se,X.value instanceof l)continue;for(var ce=X;ce!==E.tail&&(Se<he||typeof ce.value=="string");ce=ce.next)ee++,Se+=ce.value.length;ee--,Z=_.slice(ie,Se),Q.index-=ie}else if(Q=c(te,0,Z,V),!Q)continue;var je=Q.index,De=Q[0],Re=Z.slice(0,je),xe=Z.slice(je+De.length),Fe=ie+Z.length;M&&Fe>M.reach&&(M.reach=Fe);var st=X.prev;Re&&(st=m(E,st,Re),ie+=Re.length),g(E,st,ee);var He=new l(I,j?o.tokenize(De,j):De,re,De);if(X=m(E,st,He),xe&&m(E,X,xe),ee>1){var Ne={cause:I+","+P,reach:Fe};d(_,E,k,X.prev,ie,Ne),M&&Ne.reach>M.reach&&(M.reach=Ne.reach)}}}}}}function h(){var _={value:null,prev:null,next:null},E={value:null,prev:_,next:null};_.next=E,this.head=_,this.tail=E,this.length=0}function m(_,E,k){var T=E.next,R={value:k,prev:E,next:T};return E.next=R,T.prev=R,_.length++,R}function g(_,E,k){for(var T=E.next,R=0;R<k&&T!==_.tail;R++)T=T.next;E.next=T,T.prev=E,_.length-=R}function v(_){for(var E=[],k=_.head.next;k!==_.tail;)E.push(k.value),k=k.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(_){var E=JSON.parse(_.data),k=E.language,T=E.code,R=E.immediateClose;r.postMessage(o.highlight(T,o.languages[k],k)),R&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function w(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16)}return o}(t);e.exports&&(e.exports=n),typeof uf<"u"&&(uf.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,i){var a={};a["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(b,w){return" Error "+b+" while fetching file: "+w},i=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",c="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+l+'"])';function m(b,w,x){var _=new XMLHttpRequest;_.open("GET",b,!0),_.onreadystatechange=function(){_.readyState==4&&(_.status<400&&_.responseText?w(_.responseText):_.status>=400?x(s(_.status,_.statusText)):x(i))},_.send(null)}function g(b){var w=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(w){var x=Number(w[1]),_=w[2],E=w[3];return _?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var w=b.element;if(w.matches(h)){b.code="",w.setAttribute(o,l);var x=w.appendChild(document.createElement("CODE"));x.textContent=r;var _=w.getAttribute("data-src"),E=b.language;if(E==="none"){var k=(/\.(\w+)$/.exec(_)||[,"none"])[1];E=a[k]||k}n.util.setLanguage(x,E),n.util.setLanguage(w,E);var T=n.plugins.autoloader;T&&T.loadLanguages(E),m(_,function(R){w.setAttribute(o,c);var M=g(w.getAttribute("data-range"));if(M){var I=R.split(/\r\n?|\n/g),O=M[0],P=M[1]==null?I.length:M[1];O<0&&(O+=I.length),O=Math.max(0,Math.min(O-1,I.length)),P<0&&(P+=I.length),P=Math.max(0,Math.min(P,I.length)),R=I.slice(O,P).join(`
`),w.hasAttribute("data-start")||w.setAttribute("data-start",String(O+1))}x.textContent=R,n.highlightElement(x)},function(R){w.setAttribute(o,d),x.textContent=R})}}),n.plugins.fileHighlight={highlight:function(w){for(var x=(w||document).querySelectorAll(h),_=0,E;E=x[_++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(xE)),xE.exports}var Dse=Mse();const Ose=Ni(Dse);var IM={},jM;function Pse(){return jM||(jM=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),IM}Pse();var MM={},DM;function Fse(){return DM||(DM=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),MM}Fse();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var s=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,a=0;a<s.length;a++)i[s[a]]=e.languages.bash[s[a]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+i+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+i+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,v=m.length;g<v;g++){var b=m[g];if(b.type!=="code"){h(b.content);continue}var w=b.content[1],x=b.content[3];if(w&&x&&w.type==="code-language"&&x.type==="code-block"&&typeof w.content=="string"){var _=w.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");_=(/[a-z][\w-]*/i.exec(_)||[""])[0].toLowerCase();var E="language-"+_;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",m=0,g=d.classes.length;m<g;m++){var v=d.classes[m],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var w=e.languages[h];if(w)d.content=e.highlight(c(d.content),w,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var _=document.getElementById(x);_&&(_.innerHTML=e.highlight(_.textContent,e.languages[h],h))})}}});var a=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function c(d){var h=d.replace(a,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),l(v)}else{var b=o[g];return b||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],s=[];/^\w+$/.test(n)||s.push(/\w+/.exec(n)[0]),n==="diff"&&s.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",s=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function a(o,l){l=(l||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(c,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+s+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:a(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:a(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:a(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:a(i),lookbehind:!0,greedy:!0},number:{pattern:a(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var OM={},PM;function Lse(){return PM||(PM=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),OM}Lse();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const $se=({lang:e,code:t,isStreaming:n=!1})=>{const{foldStreamingCodeBlocks:r}=ur(En(v=>({prismThemeUrl:v.prismThemeUrl,theme:v.theme,foldStreamingCodeBlocks:v.foldStreamingCodeBlocks}))),[s,i]=C.useState(!1),[a,o]=C.useState(n?r:!1),l=C.useRef(null),c=C.useCallback(()=>{if(l.current&&t)try{l.current.style.whiteSpace!=="pre-wrap"&&(l.current.style.whiteSpace="pre-wrap"),l.current.textContent=t,Ose.highlightElement(l.current)}catch(v){console.error("Prism highlight error:",v),l.current.textContent=t}else l.current&&(l.current.textContent="")},[t]);C.useEffect(()=>{a||c()},[t,e,a,c]);const d=async()=>{try{await navigator.clipboard.writeText(t),i(!0),ze.success("Code copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(v){ze.error("Failed to copy code."),console.error("Clipboard copy failed:",v)}},h=()=>{const v=a;o(b=>!b),v&&setTimeout(c,0)},m=e?`language-${e}`:"language-plaintext",g=C.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":a?"Unfold code":"Fold code",children:p.jsx(e1,{className:"h-3.5 w-3.5"})})}),p.jsx(Wn,{side:"top",children:a?"Unfold":"Fold"})]})}),p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:d,"aria-label":"Copy code",children:s?p.jsx(ni,{className:"h-3.5 w-3.5 text-green-500"}):p.jsx(Ep,{className:"h-3.5 w-3.5"})})}),p.jsx(Wn,{side:"top",children:"Copy"})]})})]})]}),p.jsx("div",{})]}),!a&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:l,className:m+" block"})})}),a&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:h,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:g})})]})},im=C.memo($se);var ct;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(ct||(ct={}));const FM={[ct.EPERM]:"Operation not permitted",[ct.ENOENT]:"No such file or directory",[ct.EINTR]:"Interrupted system call",[ct.EIO]:"Input/output error",[ct.ENXIO]:"No such device or address",[ct.EBADF]:"Bad file descriptor",[ct.EAGAIN]:"Resource temporarily unavailable",[ct.ENOMEM]:"Cannot allocate memory",[ct.EACCES]:"Permission denied",[ct.EFAULT]:"Bad address",[ct.ENOTBLK]:"Block device required",[ct.EBUSY]:"Resource busy or locked",[ct.EEXIST]:"File exists",[ct.EXDEV]:"Invalid cross-device link",[ct.ENODEV]:"No such device",[ct.ENOTDIR]:"File is not a directory",[ct.EISDIR]:"File is a directory",[ct.EINVAL]:"Invalid argument",[ct.ENFILE]:"Too many open files in system",[ct.EMFILE]:"Too many open files",[ct.ETXTBSY]:"Text file busy",[ct.EFBIG]:"File is too big",[ct.ENOSPC]:"No space left on disk",[ct.ESPIPE]:"Illegal seek",[ct.EROFS]:"Cannot modify a read-only file system",[ct.EMLINK]:"Too many links",[ct.EPIPE]:"Broken pipe",[ct.EDOM]:"Numerical argument out of domain",[ct.ERANGE]:"Numerical result out of range",[ct.EDEADLK]:"Resource deadlock would occur",[ct.ENAMETOOLONG]:"File name too long",[ct.ENOLCK]:"No locks available",[ct.ENOSYS]:"Function not implemented",[ct.ENOTEMPTY]:"Directory is not empty",[ct.ELOOP]:"Too many levels of symbolic links",[ct.ENOMSG]:"No message of desired type",[ct.EBADE]:"Invalid exchange",[ct.EBADR]:"Invalid request descriptor",[ct.EXFULL]:"Exchange full",[ct.ENOANO]:"No anode",[ct.EBADRQC]:"Invalid request code",[ct.ENOSTR]:"Device not a stream",[ct.ENODATA]:"No data available",[ct.ETIME]:"Timer expired",[ct.ENOSR]:"Out of streams resources",[ct.ENONET]:"Machine is not on the network",[ct.EREMOTE]:"Object is remote",[ct.ENOLINK]:"Link has been severed",[ct.ECOMM]:"Communication error on send",[ct.EPROTO]:"Protocol error",[ct.EBADMSG]:"Bad message",[ct.EOVERFLOW]:"Value too large for defined data type",[ct.EBADFD]:"File descriptor in bad state",[ct.ESTRPIPE]:"Streams pipe error",[ct.ENOTSOCK]:"Socket operation on non-socket",[ct.EDESTADDRREQ]:"Destination address required",[ct.EMSGSIZE]:"Message too long",[ct.EPROTOTYPE]:"Protocol wrong type for socket",[ct.ENOPROTOOPT]:"Protocol not available",[ct.EPROTONOSUPPORT]:"Protocol not supported",[ct.ESOCKTNOSUPPORT]:"Socket type not supported",[ct.ENOTSUP]:"Operation is not supported",[ct.ENETDOWN]:"Network is down",[ct.ENETUNREACH]:"Network is unreachable",[ct.ENETRESET]:"Network dropped connection on reset",[ct.ETIMEDOUT]:"Connection timed out",[ct.ECONNREFUSED]:"Connection refused",[ct.EHOSTDOWN]:"Host is down",[ct.EHOSTUNREACH]:"No route to host",[ct.EALREADY]:"Operation already in progress",[ct.EINPROGRESS]:"Operation now in progress",[ct.ESTALE]:"Stale file handle",[ct.EREMOTEIO]:"Remote I/O error",[ct.EDQUOT]:"Disk quota exceeded"};class Ve extends Error{static fromJSON(t){const n=new Ve(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ve(ct[t],FM[ct[t]],n,r)}constructor(t,n=FM[t],r,s=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=s,this.code=ct[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var _E={exports:{}},LM;function Bse(){return LM||(LM=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function i(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,h||l,m),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)t.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},o.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,d,h,m,g,v){var b=n?n+c:c;if(!this._events[b])return!1;var w=this._events[b],x=arguments.length,_,E;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,h),!0;case 4:return w.fn.call(w.context,d,h,m),!0;case 5:return w.fn.call(w.context,d,h,m,g),!0;case 6:return w.fn.call(w.context,d,h,m,g,v),!0}for(E=1,_=new Array(x-1);E<x;E++)_[E-1]=arguments[E];w.fn.apply(w.context,_)}else{var k=w.length,T;for(E=0;E<k;E++)switch(w[E].once&&this.removeListener(c,w[E].fn,void 0,!0),x){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,d);break;case 3:w[E].fn.call(w[E].context,d,h);break;case 4:w[E].fn.call(w[E].context,d,h,m);break;default:if(!_)for(T=1,_=new Array(x-1);T<x;T++)_[T-1]=arguments[T];w[E].fn.apply(w[E].context,_)}}return!0},o.prototype.on=function(c,d,h){return i(this,c,d,h,!1)},o.prototype.once=function(c,d,h){return i(this,c,d,h,!0)},o.prototype.removeListener=function(c,d,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!d)return a(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&a(this,g);else{for(var b=0,w=[],x=v.length;b<x;b++)(v[b].fn!==d||m&&!v[b].once||h&&v[b].context!==h)&&w.push(v[b]);w.length?this._events[g]=w.length===1?w[0]:w:a(this,g)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(_E)),_E.exports}var zse=Bse();const GA=Ni(zse);var k8;let Use=class extends GA{constructor(n){super();Me(this,k8,"List");Me(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,s=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+s,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...s){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),a=i.splice(n,r,...s);return this.data=new Set(i),this.emit("update"),a}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(k8=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function $M(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function Rr(e){throw e}const BM=Intl.NumberFormat("en",{notation:"compact"});BM.format.bind(BM);function Bf(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function qse(e){try{return JSON.parse(e),!0}catch{return!1}}function aT(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function KA(e){return e.at(0).toUpperCase()+e.slice(1)}const Vse=new TextEncoder;function lf(e){return Vse.encode(e)}const zM=new TextDecoder;function WA(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return zM.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),zM.decode(t)}function L0(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=L0(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function Hse(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Gse={};let Kse="process"in globalThis&&"env"in globalThis.process&&Gse.U_DEBUG=="true";function $0(...e){Kse&&console.debug("[U]",...e)}const UM=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],Wse=[...UM,...UM.map(e=>KA(e)),"char"],ZA=/^(u?int|float)(8|16|32|64|128)$/i;function FL(e){return e=="char"?"uint8":e.toLowerCase()}function YA(e){return ZA.test(e.toString())}function oT(e){return e=="char"||ZA.test(e.toString().toLowerCase())}function Zse(e){if(!oT(e))throw new TypeError("Not a valid primitive type: "+e)}const qM=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function LL(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function Yse(e){return e!=null&&typeof e=="object"&&"struct"in e}function C1(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Do(e){return typeof e=="function"&&Symbol.metadata in e&&Yse(e[Symbol.metadata])}function Py(e){return e!=null&&typeof e=="object"&&Do(e.constructor)}function $L(e){if(!Py(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function XA(e){return Py(e)||Do(e)}function BL(e){if(!XA(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function JA(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Jr(e){if(e==null)return 0;if(Array.isArray(e)){let s=0;for(let i=0;i<e.length;i++)s+=Jr(e[i]);return s}if(typeof e=="string")return Zse(e),+FL(e).match(ZA)[2]/8;if(JA(e))return e[Symbol.size];BL(e);const t=Do(e)?e:e.constructor;C1(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Do(e))return r;for(const s of n.members.values()){const i=e[s.name];if(Py(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Jr(i)):r+=Jr(i);continue}if(typeof s.length!="string")continue;let a=0;for(let o=0;o<e[s.length];o++)a+=Jr(XA(i[o])?i[o]:s.type);n.isUnion?r=Math.max(r,a):r+=a}return r}function Xse(e,t){var i;BL(e);const n=Do(e)?e:e.constructor;C1(n);const{struct:r}=n[Symbol.metadata];if(Do(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??Rr(new Error("Struct does not have member: "+t));let s=0;for(const a of r.members.values()){if(a.name==t)return s;const o=e[a.name];s+=Jr(XA(o)?o:a.type)}throw new Error("Struct does not have member: "+t)}function Jse(e,t){return Math.ceil(e/t)*t}function zf(e={}){return function(n,r){const s=new Map;let i=0,a=!1;for(const{name:o,type:l,length:c}of LL(r)){if(!oT(l)&&!Do(l))throw new TypeError("Not a valid type: "+l);if(typeof c=="string"){const m=s.get(c);if(!m)throw new Error(`"${c}" is undefined or declared after "${o}"`);if(!YA(m.type))throw new Error(`"${c}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;c!==void 0&&(d+=`[${c}]`),s.set(o,{name:o,staticOffset:e.isUnion?0:i,type:oT(l)?FL(l):l,length:c,decl:d});const h=typeof c=="string"||Do(l)&&l[Symbol.metadata].struct.isDynamic?0:Jr(l)*(c||1);a||(a=Do(l)?l[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=Jse(i,e.align||1),$0("define",n.name+"."+o)}return r.metadata.struct={options:e,members:s,staticSize:i,isDynamic:a,isUnion:e.isUnion??!1},n}}function B0(e,t){return function(n,r){let s=r.name;if(typeof s=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+s.toString()),s=s.toString()),!s)throw new ReferenceError("Invalid name for struct member");return LL(r).push({name:s,type:e,length:t}),n}}function zL(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:Rr(new Error("Array lengths must be natural numbers"))}function di(e){if(JA(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();$L(e),C1(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Jr(e),s=new Uint8Array(r),i=new DataView(s.buffer);$0("serialize",e.constructor.name);let a=0,o=0;for(const l of n.values()){const c=zL(e,l);$0("	",l.decl);for(let d=0;d<Math.abs(c);d++){let h=c!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),a=o,o+=Py(h)?Jr(h):Jr(l.type),!YA(l.type)){s.set(h?di(h):new Uint8Array(Jr(l.type)),a);continue}const m=`set${KA(l.type)}`;if(m=="setInt64"){i.setBigInt64(a,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(a,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(a+(t.bigEndian?8:0),h&qM,!t.bigEndian),i.setBigInt64(a+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(a+(t.bigEndian?8:0),h&qM,!t.bigEndian),i.setBigUint64(a+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(a+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(a+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](a,Number(h),!t.bigEndian)}}return s}function k1(e,t){const n=Hse(t);if(JA(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);$L(e),C1(e.constructor);const{options:r,members:s}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);$0("deserialize",e.constructor.name);let a=0,o=0;for(const l of s.values()){const c=zL(e,l);$0("	",l.decl);for(let d=0;d<Math.abs(c);d++){let h=c!=-1?e[l.name]:e;const m=c!=-1?d:l.name,g=h[m]===null||h[m]===void 0,v=g&&Do(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(a=o,!Py(h[m])&&!v&&(o+=Jr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(a))+e[l.name].slice(d+1);continue}if(!YA(l.type)){if(v&&Do(l.type))h[m]??(h[m]=new l.type);else if(g)continue;k1(h[m],new Uint8Array(n.subarray(a))),o+=Jr(h[m]);continue}c&&c!=-1&&(h||(h=[]));const b=`get${KA(l.type)}`;if(b=="getInt64"){h[m]=i.getBigInt64(a,!r.bigEndian);continue}if(b=="getUint64"){h[m]=i.getBigUint64(a,!r.bigEndian);continue}if(b=="getInt128"){h[m]=i.getBigInt64(a+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(a+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[m]=i.getBigUint64(a+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(a+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[m]=i.getFloat64(a+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[b](a,!r.bigEndian)}}}function Qse(e){function t(n,r){return typeof n=="number"||typeof n=="string"?B0(e,n):B0(e)(n,r)}return t}const Sn=Object.fromEntries(Wse.map(e=>[e,Qse(e)]));function eie(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Vo={root:"/",pwd:"/",credentials:eie({uid:0,gid:0}),descriptors:new Map};function UL(e,t){let n="",r=0,s=-1,i=0,a="\0";for(let o=0;o<=e.length;++o){if(o<e.length)a=e[o];else{if(a=="/")break;a="/"}if(a=="/"){if(!(s===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}else if(n.length!==0){n="",r=0,s=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,i=0}else a==="."&&i!==-1?++i:i=-1}return n}function Fc(...e){var t;let n="";for(const s of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Vo.pwd])if(s!=null&&s.length&&(n=`${s}/${n}`,s.startsWith("/")))break;const r=n.startsWith("/");return n=UL(n,!r),r?`/${n}`:n.length?n:"/"}function tie(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=UL(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function _r(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?tie(t):"."}function qL(e,t){if(e===t||(e=Fc.call(this,e),t=Fc.call(this,t),e===t))return"";const n=1,r=e.length,s=r-n,i=1,a=t.length-i,o=s<a?s:a;let l=-1,c=0;for(;c<o;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(l=c)}if(c===o)if(a>o){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else s>o&&(e[n+c]==="/"?l=c:c===0&&(l=0));let d="";for(c=n+l+1;c<=r;++c)(c===r||e[c]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function mr(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let s=e.length-1;s>=1;--s)if(e[s]==="/"){if(!r){n=s;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function jp(e,t){let n=0,r=-1,s=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!s){n=i+1;break}}else r===-1&&(s=!1,r=i+1);return r===-1?"":e.slice(n,r)}function ml(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let s=-1,i=0,a=-1,o=!0,l=e.length-1,c=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}a===-1&&(o=!1,a=l+1),e[l]==="."?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(a!==-1){const d=i===0&&t?1:i;s===-1||c===0||c===1&&s===a-1&&s===i+1?n.base=n.name=e.slice(d,a):(n.name=e.slice(d,s),n.base=e.slice(d,a),n.ext=e.slice(s,a))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var xn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(xn||(xn={}));xn.EMERG+"",xn.ALERT+"",xn.CRIT+"",xn.ERR+"",xn.WARN+"",xn.NOTICE+"",xn.INFO+"",xn.DEBUG+"";const nie=new Use;function rie(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};nie.add(n),die(n)}function sie(e,t){var n,r;if(!(e instanceof Ve))return e.toString();const s=e.code+": "+e.message;if(!e.path)return s;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return s+": "+_r(i,e.path)}function hd(e){return function(t,n={}){return rie(e,sie(t,n)),t}}hd(xn.EMERG);const iie=hd(xn.ALERT),T1=hd(xn.CRIT),ra=hd(xn.ERR),Ci=hd(xn.WARN),QA=hd(xn.NOTICE),VL=hd(xn.INFO),r0=hd(xn.DEBUG);function aie(e,t){return`\x1B[${t}m${e}\x1B[0m`}function oie(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[aie(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}xn.EMERG+"",xn.ALERT+"",xn.CRIT+"",xn.ERR+"",xn.WARN+"",xn.NOTICE+"",xn.INFO+"",xn.DEBUG+"",xn.EMERG+"",xn.ALERT+"",xn.CRIT+"",xn.ERR+"",xn.WARN+"",xn.NOTICE+"",xn.INFO+"",xn.DEBUG+"";xn.EMERG+"",xn.ALERT+"",xn.CRIT+"",xn.ERR+"",xn.WARN+"",xn.NOTICE+"",xn.INFO+"",xn.DEBUG+"",xn.EMERG+"",xn.ALERT+"",xn.CRIT+"",xn.ERR+"",xn.WARN+"",xn.NOTICE+"",xn.INFO+"",xn.DEBUG+"";let lie=e=>[...oie(e),e.message];function cie(e){const t=lie(e);return typeof t=="string"?[t]:Array.from(t)}let uie=console.error;function die(e){e.level>fie||uie(...cie(e))}let fie=xn.ALERT;function eR(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function hie(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function pie(e,t){if(typeof t!="object"||t===null)throw ra(new Ve(ct.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const s=t==null?void 0:t[n];if(s==null){if(!r.required){r0("Using default for option: "+n);continue}throw ra(new Ve(ct.EINVAL,"Missing required option: "+n))}const i=(c,d=s)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?s instanceof c:c(s):typeof s===c||((h=s==null?void 0:s.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const a=typeof s=="object"&&"constructor"in s?s.constructor.name:typeof s,o=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw ra(new Ve(ct.EINVAL,`Incorrect type for "${n}": ${a} (expected ${l})`))}}function HL(e){return e!=null&&typeof e=="object"&&"backend"in e&&eR(e.backend)}const tR=0,$s=4,fs=2,Sw=1,nR=1,mie=2,gie=4,GL=0,Ei=1,xc=2,A1=64,R1=128,yie=256,N1=512,Nf=1024,bie=65536,vie=262144,wie=131072,I1=1052672,xie=4096,_ie=32768,Sie=16384,Eie=2048,Fr=61440,Uf=49152,Vc=40960,Oo=32768,qf=24576,Ns=16384,Vf=8192,Hf=4096,Fy=2048,Ly=1024,Cie=512,kie=448,KL=256,WL=128,ZL=64,Tie=56,YL=32,XL=16,JL=8,Aie=7,QL=4,e9=2,t9=1,Rie=0,Hi=4294967295,n9=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:nR,COPYFILE_FICLONE:mie,COPYFILE_FICLONE_FORCE:gie,F_OK:tR,O_APPEND:Nf,O_CREAT:A1,O_DIRECT:Sie,O_DIRECTORY:bie,O_DSYNC:xie,O_EXCL:R1,O_NOATIME:vie,O_NOCTTY:yie,O_NOFOLLOW:wie,O_NONBLOCK:Eie,O_RDONLY:GL,O_RDWR:xc,O_SYMLINK:_ie,O_SYNC:I1,O_TRUNC:N1,O_WRONLY:Ei,R_OK:$s,S_IFBLK:qf,S_IFCHR:Vf,S_IFDIR:Ns,S_IFIFO:Hf,S_IFLNK:Vc,S_IFMT:Fr,S_IFREG:Oo,S_IFSOCK:Uf,S_IRGRP:YL,S_IROTH:QL,S_IRUSR:KL,S_IRWXG:Tie,S_IRWXO:Aie,S_IRWXU:kie,S_ISGID:Ly,S_ISUID:Fy,S_ISVTX:Cie,S_IWGRP:XL,S_IWOTH:e9,S_IWUSR:WL,S_IXGRP:JL,S_IXOTH:t9,S_IXUSR:ZL,UV_FS_O_FILEMAP:Rie,W_OK:fs,X_OK:Sw,size_max:Hi},Symbol.toStringTag,{value:"Module"})),Vv=BigInt(1e3);class r9{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:s,uid:i,gid:a,size:o,mode:l,ino:c,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(s??h),this.uid=this._convert(i??0),this.gid=this._convert(a??0),this.size=this._convert(o??0),this.ino=this._convert(c??0),this.mode=this._convert(l??420&Oo),(this.mode&Fr)==0&&(this.mode=this.mode|this._convert(Oo)),Object.assign(this,d)}isFile(){return(this.mode&Fr)===Oo}isDirectory(){return(this.mode&Fr)===Ns}isSymbolicLink(){return(this.mode&Fr)===Vc}isSocket(){return(this.mode&Fr)===Uf}isBlockDevice(){return(this.mode&Fr)===qf}isCharacterDevice(){return(this.mode&Fr)===Vf}isFIFO(){return(this.mode&Fr)===Hf}toJSON(){return Bf(this,lT)}hasAccess(t,n){return Cr(n,this._isBigint?new Hc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*Vv}get mtimeNs(){return BigInt(this.mtimeMs)*Vv}get ctimeNs(){return BigInt(this.ctimeMs)*Vv}get birthtimeNs(){return BigInt(this.birthtimeMs)*Vv}}function s9(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Hi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Hi?e.gid=n:r=!1,r}class Hc extends r9{constructor(){super(...arguments),this._isBigint=!1}}class Gf extends r9{constructor(){super(...arguments),this._isBigint=!0}}function Nie(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class Iie{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Hi,this.ffree=Hi}}class jie{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Hi),this.ffree=BigInt(Hi)}}var Vr=function(e,t,n,r,s,i){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=a(w.get))&&(d.get=h),(h=a(w.set))&&(d.set=h),(h=a(w.init))&&s.unshift(h)}else(h=a(w))&&(o==="field"?s.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),m=!0},wn=function(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0},rR=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Sa=0,Mie=1024;let VM=(()=>{var e,t;let n=[zf()],r,s=[],i,a,o=[],l=[],c,d=[],h=[],m,g=[],v=[],b,w=[],x=[];return i=class{get key(){return this._key}set key(_){this._key=_,this.keySize=_.length}get value(){return this._value.subarray(0,this.valueSize)}set value(_){this._value=_,this.valueSize=_.length}constructor(_,E){this.keySize=wn(this,o,0),this.valueSize=(wn(this,l),wn(this,d,0)),this._key=(wn(this,h),wn(this,g,"")),this._value=(wn(this,v),wn(this,w,new Uint8Array(Mie))),wn(this,x),_&&(this.key=_),E&&(this.value=E)}},rR(i,"Attribute"),(()=>{const _=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;a=[(e=Sn).uint32.bind(e)],c=[(t=Sn).uint32.bind(t)],m=[Sn.char("keySize")],b=[Sn.uint8("valueSize")],Vr(null,null,a,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,k)=>{E.keySize=k}},metadata:_},o,l),Vr(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,k)=>{E.valueSize=k}},metadata:_},d,h),Vr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,k)=>{E._key=k}},metadata:_},g,v),Vr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,k)=>{E._value=k}},metadata:_},w,x),Vr(null,r={value:i},n,{kind:"class",name:i.name,metadata:_},null,s),i=r.value,_&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_}),wn(i,s)})(),i})(),Ju=(()=>{var e;let t=[zf()],n,r=[],s,i,a=[],o=[],l,c=[],d=[];return s=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new VM(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=wn(this,a,0),this.data=(wn(this,o),wn(this,c,[])),wn(this,d)}},rR(s,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=Sn).uint32.bind(e)],l=[B0(VM,"size")],Vr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},a,o),Vr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},c,d),Vr(null,n={value:s},t,{kind:"class",name:s.name,metadata:h},null,r),s=n.value,h&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),wn(s,r)})(),s})();const lT=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],Die=4;var sa;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(sa||(sa={}));let As=(()=>{var e,t,n,r,s,i,a,o,l,c,d,h,m,g,v,b;let w=[zf()],x,_=[],E,k,T=[],R=[],M,I=[],O=[],P,U=[],j=[],V,$=[],re=[],J,te=[],X=[],ie,Z=[],ee=[],Q,he=[],Se=[],ce,je=[],De=[],Re,xe=[],Fe=[],st,He=[],Ne=[],H,ue=[],ke=[],ae,oe=[],ne=[],Ee,Le=[],Te=[],Xe,St=[],dt=[],It,Vt=[],Dt=[],Kt,be=[],D=[],K,pe=[],Oe=[],ve,Ae=[],de=[];var ht=E=class{constructor(wt){if(this.data=wn(this,T,aT(0,Hi)),this.__data_old=(wn(this,R),wn(this,I,0)),this.size=(wn(this,O),wn(this,U,0)),this.mode=(wn(this,j),wn(this,$,0)),this.nlink=(wn(this,re),wn(this,te,1)),this.uid=(wn(this,X),wn(this,Z,0)),this.gid=(wn(this,ee),wn(this,he,0)),this.atimeMs=(wn(this,Se),wn(this,je,Date.now())),this.birthtimeMs=(wn(this,De),wn(this,xe,Date.now())),this.mtimeMs=(wn(this,Fe),wn(this,He,Date.now())),this.ctimeMs=(wn(this,Ne),wn(this,ue,Date.now())),this.ino=(wn(this,ke),wn(this,oe,aT(0,Hi))),this.__ino_old=(wn(this,ne),wn(this,Le,0)),this.flags=(wn(this,Te),wn(this,St,0)),this.__after_flags=(wn(this,dt),wn(this,Vt,0)),this.version=(wn(this,Dt),wn(this,be,0)),this.__padding=(wn(this,D),wn(this,pe,[])),this.attributes=(wn(this,Oe),wn(this,Ae,new Ju)),wn(this,de),!!wt){if(!("byteLength"in wt)){Object.assign(this,wt);return}if(wt.byteLength<Jr(ht))throw T1(new Ve(ct.EIO,"Buffer is too small to create an inode"));k1(this,wt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Bf(this,lT),attributes:this.attributes}}toStats(){return new Hc(this)}update(wt){if(!wt)return!1;let L=!1;for(const Be of lT)wt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==wt[Be]&&(Be=="atimeMs"&&this.flags&sa.NoAtime||(this[Be]=wt[Be],L=!0)));return wt.attributes&&(this.attributes=wt.attributes,L=!0),L&&(this.ctimeMs=Date.now()),L}};return rR(E,"Inode"),(()=>{const wt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;k=[(e=Sn).uint32.bind(e)],M=[(t=Sn).uint32.bind(t)],P=[(n=Sn).uint32.bind(n)],V=[(r=Sn).uint16.bind(r)],J=[(s=Sn).uint32.bind(s)],ie=[(i=Sn).uint32.bind(i)],Q=[(a=Sn).uint32.bind(a)],ce=[(o=Sn).float64.bind(o)],Re=[(l=Sn).float64.bind(l)],st=[(c=Sn).float64.bind(c)],H=[(d=Sn).float64.bind(d)],ae=[(h=Sn).uint32.bind(h)],Ee=[(m=Sn).uint32.bind(m)],Xe=[(g=Sn).uint32.bind(g)],It=[(v=Sn).uint16.bind(v)],Kt=[(b=Sn).uint32.bind(b)],K=[Sn.uint8(48)],ve=[B0(Ju)],Vr(null,null,k,{kind:"field",name:"data",static:!1,private:!1,access:{has:L=>"data"in L,get:L=>L.data,set:(L,Be)=>{L.data=Be}},metadata:wt},T,R),Vr(null,null,M,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:L=>"__data_old"in L,get:L=>L.__data_old,set:(L,Be)=>{L.__data_old=Be}},metadata:wt},I,O),Vr(null,null,P,{kind:"field",name:"size",static:!1,private:!1,access:{has:L=>"size"in L,get:L=>L.size,set:(L,Be)=>{L.size=Be}},metadata:wt},U,j),Vr(null,null,V,{kind:"field",name:"mode",static:!1,private:!1,access:{has:L=>"mode"in L,get:L=>L.mode,set:(L,Be)=>{L.mode=Be}},metadata:wt},$,re),Vr(null,null,J,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:L=>"nlink"in L,get:L=>L.nlink,set:(L,Be)=>{L.nlink=Be}},metadata:wt},te,X),Vr(null,null,ie,{kind:"field",name:"uid",static:!1,private:!1,access:{has:L=>"uid"in L,get:L=>L.uid,set:(L,Be)=>{L.uid=Be}},metadata:wt},Z,ee),Vr(null,null,Q,{kind:"field",name:"gid",static:!1,private:!1,access:{has:L=>"gid"in L,get:L=>L.gid,set:(L,Be)=>{L.gid=Be}},metadata:wt},he,Se),Vr(null,null,ce,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:L=>"atimeMs"in L,get:L=>L.atimeMs,set:(L,Be)=>{L.atimeMs=Be}},metadata:wt},je,De),Vr(null,null,Re,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:L=>"birthtimeMs"in L,get:L=>L.birthtimeMs,set:(L,Be)=>{L.birthtimeMs=Be}},metadata:wt},xe,Fe),Vr(null,null,st,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:L=>"mtimeMs"in L,get:L=>L.mtimeMs,set:(L,Be)=>{L.mtimeMs=Be}},metadata:wt},He,Ne),Vr(null,null,H,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:L=>"ctimeMs"in L,get:L=>L.ctimeMs,set:(L,Be)=>{L.ctimeMs=Be}},metadata:wt},ue,ke),Vr(null,null,ae,{kind:"field",name:"ino",static:!1,private:!1,access:{has:L=>"ino"in L,get:L=>L.ino,set:(L,Be)=>{L.ino=Be}},metadata:wt},oe,ne),Vr(null,null,Ee,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:L=>"__ino_old"in L,get:L=>L.__ino_old,set:(L,Be)=>{L.__ino_old=Be}},metadata:wt},Le,Te),Vr(null,null,Xe,{kind:"field",name:"flags",static:!1,private:!1,access:{has:L=>"flags"in L,get:L=>L.flags,set:(L,Be)=>{L.flags=Be}},metadata:wt},St,dt),Vr(null,null,It,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:L=>"__after_flags"in L,get:L=>L.__after_flags,set:(L,Be)=>{L.__after_flags=Be}},metadata:wt},Vt,Dt),Vr(null,null,Kt,{kind:"field",name:"version",static:!1,private:!1,access:{has:L=>"version"in L,get:L=>L.version,set:(L,Be)=>{L.version=Be}},metadata:wt},be,D),Vr(null,null,K,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:L=>"__padding"in L,get:L=>L.__padding,set:(L,Be)=>{L.__padding=Be}},metadata:wt},pe,Oe),Vr(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:L=>"attributes"in L,get:L=>L.attributes,set:(L,Be)=>{L.attributes=Be}},metadata:wt},Ae,de),Vr(null,x={value:E},w,{kind:"class",name:E.name,metadata:wt},null,_),ht=E=x.value,wt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:wt}),wn(E,_)})(),ht=E})();function Oie(e){return(e.mode&Fr)===Oo}function zo(e){return(e.mode&Fr)===Ns}function Mp(e){return(e.mode&Fr)===Vc}function Pie(e){return(e.mode&Fr)===Uf}function z0(e){return(e.mode&Fr)===qf}function U0(e){return(e.mode&Fr)===Vf}function Fie(e){return(e.mode&Fr)===Hf}function Cr(e,t,n){const r=(e==null?void 0:e.credentials)||Vo.credentials;if(Mp(t)||r.euid===0||r.egid===0)return!0;let s=0;return r.uid===t.uid&&(t.mode&KL&&(s|=$s),t.mode&WL&&(s|=fs),t.mode&ZL&&(s|=Sw)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&YL&&(s|=$s),t.mode&XL&&(s|=fs),t.mode&JL&&(s|=Sw)),t.mode&QL&&(s|=$s),t.mode&e9&&(s|=fs),t.mode&t9&&(s|=Sw),(s&n)===n}const HM=1;class fx extends Map{constructor(){super(...arguments),this.maxSize=Hi}toJSON(){return{version:HM,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Jr(As);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ve.With("ENOENT",t);if((n.mode&Fr)!=Ns)throw Ve.With("ENOTDIR",t);const r={};for(const s of this.keys())mr(s)==t&&s!=t&&(r[jp(s)]=this.get(s).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&Fr)!=Ns)continue;const s={};for(const i of this.keys())mr(i)==n&&i!=n&&(s[jp(i)]=this.get(i).ino);t.set(n,s)}return t}fromJSON(t){var n;if(t.version!=HM)throw new Ve(ct.EINVAL,"Index version mismatch");this.clear();for(const[r,s]of Object.entries(t.entries))(n=s.data)!==null&&n!==void 0||(s.data=aT(1,Hi)),r=="/"&&(s.ino=0),this.set(r,new As(s));return this}static parse(t){if(!qse(t))throw new Ve(ct.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new fx;return r.fromJSON(n),r}}const SE=4096;let sR=class cT{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===cT.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===cT.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:s}=await this.stat(t),{start:i=0,end:a=s}=n;for(let o=i;o<a;o+=SE){const l=o+SE>a?a-o:SE,c=new Uint8Array(l);await this.read(t,c,o,o+l).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let s=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,a)=>{let o=!1;const l=d=>{o=!0,a.error(d)},{size:c}=await this.stat(t);await this.write(t,i,s).catch(l),!o&&(s+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,s)}).catch(l))}})}};function Li(e){return JSON.parse(WA(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function qa(e){return lf(JSON.stringify(e))}function pd(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ve(ct.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function hx(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ve(ct.EINVAL,"Invalid time.")}}function pn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ve(ct.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ve(ct.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ve(ct.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Fc(e)}function _c(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:pd("mode"in e?e==null?void 0:e.mode:null,r)}}class Lie{constructor(t,n,r,s){Me(this,"id");Me(this,"_size");Me(this,"options");Me(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),s==null||s.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const s=t-r.offset;r.data.byteLength>s&&(r.data=r.data.subarray(0,s)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],s=this.regions[n+1];if(s.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...s.ranges),r.ranges.sort((i,a)=>i.start-a.start),r.ranges=r.ranges.reduce((i,a)=>(!i.length||i.at(-1).end<a.start?i.push(a):i.at(-1).end=Math.max(i.at(-1).end,a.end),i),[]),r.data=L0(r.data,s.offset+s.data.byteLength),r.data.set(s.data,s.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const s of this.regions){if(s.offset>=n)break;for(const i of s.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const a of i.ranges)if(!(a.end<=t)){if(a.start>=n)break;r.push({start:Math.max(t,a.start),end:Math.min(n,a.end)})}}r.sort((i,a)=>i.start-a.start);const s=[];for(const i of r){const a=s.at(-1);a&&i.start<=a.end?a.end=Math.max(a.end,i.end):s.push(i)}return s}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,s=this.regionAt(n);if(s)return s.data=L0(s.data,r),s.data.set(t,n),s.ranges.push({start:n,end:r}),s.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},a=this.regions.findIndex(o=>o.offset>n);return a==-1?this.regions.push(i):this.regions.splice(a,0,i),this.collect(),this}}var EE,CE,kE;(EE=Promise.withResolvers)!==null&&EE!==void 0||(Promise.withResolvers=(Ci("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}));(CE=Symbol.dispose)!==null&&CE!==void 0||(Symbol.dispose=(Ci("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(kE=Symbol.asyncDispose)!==null&&kE!==void 0||(Symbol.asyncDispose=(Ci("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class i9{constructor(t){this.store=t}}class $ie extends i9{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class uT extends i9{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,s;(r=(s=this.store).cache)!==null&&r!==void 0||(s.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new Lie(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var s;const i=this._cached(t);if(!i)return;r??(r=i.size);const a=i.missing(n,r);for(const{start:l,end:c}of a)this.async(this.get(t,l,c));if(a.length)throw ra(Ve.With("EAGAIN",(s=this.store._fs)===null||s===void 0?void 0:s._path(t)));const o=i.regionAt(n);if(!o){Ci("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class Bie{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const s=await this.raw.get(t,n,r);return this.stash(t),s}getSync(t,n=0,r){const s=this.raw.getSync(t,n,r);return this.stash(t),s}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const s=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,s),n)}catch(i){if(!(this.raw instanceof uT))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,s??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const s=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,s),n)}catch(i){if(!(this.raw instanceof uT))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,s??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Ur=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},qr=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,s=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(a).then(i,function(o){return n(o),i()})}else s|=1}catch(o){n(o)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class a9 extends sR{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[s,i]of this._ids){const a=qL(t,s);if(a.startsWith(".."))continue;let o=_r(n,a);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:s,newKey:o,ino:i})}for(const{oldKey:s,newKey:i,ino:a}of r){this._ids.delete(s),this._ids.set(i,a);const o=this._paths.get(a);if(!o){Ci("Missing paths in table for ino "+a);continue}o.delete(s),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,s;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,r0(this.name+": supports features: "+((s=this.store.flags)===null||s===void 0?void 0:s.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ur(n,this.transaction(),!0),s=t.directories();for(const[i,a]of t)this._add(a.ino,i),await r.set(a.ino,di(a)),s.has(i)&&await r.set(a.data,qa(s.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=qr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ur(n,this.transaction(),!1),s=t.directories();for(const[i,a]of t)this._add(a.ino,i),r.setSync(a.ino,di(a)),s.has(i)&&r.setSync(a.data,qa(s.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{qr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new fx,s=Ur(n,this.transaction(),!0),i=[["/",0]],a=$M(Ve.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),c=new As(await s.get(l));if(r.set(o,c),c.mode&Ns){const d=Li((t=await s.get(c.data))!==null&&t!==void 0?t:Rr(Ve.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([_r(o,h),m])}}return a(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=qr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new fx,s=Ur(n,this.transaction(),!1),i=[["/",0]],a=$M(Ve.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),c=new As(s.getSync(l));if(r.set(o,c),c.mode&Ns){const d=Li((t=s.getSync(c.data))!==null&&t!==void 0?t:Rr(Ve.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([_r(o,h),m])}}return a(),r}catch(r){n.error=r,n.hasError=!0}finally{qr(n)}}async rename(t,n){var r,s,i;const a={stack:[],error:void 0,hasError:!1};try{const o=Ur(a,this.transaction(),!0),l=ml(t),c=ml(n),d=await this.findInode(o,l.dir,"rename"),h=Li((r=await o.get(d.data))!==null&&r!==void 0?r:Rr(Ve.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ve.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&ra(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ve(ct.EBUSY,l.dir);const g=c.dir==l.dir,v=g?d:await this.findInode(o,c.dir,"rename"),b=g?h:Li((s=await o.get(v.data))!==null&&s!==void 0?s:Rr(Ve.With("ENODATA",c.dir,"rename")));if(b[c.base]){const w=new As((i=await o.get(b[c.base]))!==null&&i!==void 0?i:Rr(Ve.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw Ve.With("EPERM",n,"rename");await o.remove(w.data),await o.remove(b[c.base])}b[c.base]=m,await o.set(d.data,qa(h)),await o.set(v.data,qa(b)),await o.commit(),this._move(t,n)}catch(o){a.error=o,a.hasError=!0}finally{const o=qr(a);o&&await o}}renameSync(t,n){var r,s,i;const a={stack:[],error:void 0,hasError:!1};try{const o=Ur(a,this.transaction(),!1),l=ml(t),c=ml(n),d=this.findInodeSync(o,l.dir,"rename"),h=Li((r=o.getSync(d.data))!==null&&r!==void 0?r:Rr(Ve.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ve.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&ra(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(c.dir+"/").startsWith(t+"/"))throw new Ve(ct.EBUSY,l.dir);const g=c.dir===l.dir,v=g?d:this.findInodeSync(o,c.dir,"rename"),b=g?h:Li((s=o.getSync(v.data))!==null&&s!==void 0?s:Rr(Ve.With("ENODATA",c.dir,"rename")));if(b[c.base]){const w=new As((i=o.getSync(b[c.base]))!==null&&i!==void 0?i:Rr(Ve.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw Ve.With("EPERM",n,"rename");o.removeSync(w.data),o.removeSync(b[c.base])}b[c.base]=m,o.setSync(d.data,qa(h)),o.setSync(v.data,qa(b)),o.commitSync(),this._move(t,n)}catch(o){a.error=o,a.hasError=!0}finally{qr(a)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ur(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=qr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Ur(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{qr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const s=Ur(r,this.transaction(),!0),i=await this.findInode(s,t,"touch");i.update(n)&&(this._add(i.ino,t),s.setSync(i.ino,di(i))),await s.commit()}catch(s){r.error=s,r.hasError=!0}finally{const s=qr(r);s&&await s}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const s=Ur(r,this.transaction(),!1),i=this.findInodeSync(s,t,"touch");i.update(n)&&(this._add(i.ino,t),s.setSync(i.ino,di(i))),s.commitSync()}catch(s){r.error=s,r.hasError=!0}finally{qr(r)}}async createFile(t,n){return n.mode|=Oo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Oo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ve.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ve.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=Ns,await this.commitNew(t,n,lf("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=Ns,this.commitNewSync(t,n,lf("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const s=Ur(r,this.transaction(),!0),i=await this.findInode(s,t,"readdir");return Object.keys(Li((n=await s.get(i.data))!==null&&n!==void 0?n:Rr(Ve.With("ENOENT",t,"readdir"))))}catch(s){r.error=s,r.hasError=!0}finally{const s=qr(r);s&&await s}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const s=Ur(r,this.transaction(),!1),i=this.findInodeSync(s,t,"readdir");return Object.keys(Li((n=s.getSync(i.data))!==null&&n!==void 0?n:Rr(Ve.With("ENOENT",t,"readdir"))))}catch(s){r.error=s,r.hasError=!0}finally{qr(r)}}async sync(t,n,r){const s={stack:[],error:void 0,hasError:!1};try{const i=Ur(s,this.transaction(),!0),a=await this.findInode(i,t,"sync");n&&await i.set(a.data,n),a.update(r)&&(this._add(a.ino,t),await i.set(a.ino,di(a))),await i.commit()}catch(i){s.error=i,s.hasError=!0}finally{const i=qr(s);i&&await i}}syncSync(t,n,r){const s={stack:[],error:void 0,hasError:!1};try{const i=Ur(s,this.transaction(),!1),a=this.findInodeSync(i,t,"sync");n&&i.setSync(a.data,n),a.update(r)&&(this._add(a.ino,t),i.setSync(a.ino,di(a))),i.commitSync()}catch(i){s.error=i,s.hasError=!0}finally{qr(s)}}async link(t,n){var r;const s={stack:[],error:void 0,hasError:!1};try{const i=Ur(s,this.transaction(),!0),a=mr(n),o=await this.findInode(i,a,"link"),l=Li((r=await i.get(o.data))!==null&&r!==void 0?r:Rr(Ve.With("ENOENT",a,"link"))),c=await this.findInode(i,t,"link");c.nlink++,l[jp(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,di(c)),await i.set(o.data,qa(l)),await i.commit()}catch(i){s.error=i,s.hasError=!0}finally{const i=qr(s);i&&await i}}linkSync(t,n){var r;const s={stack:[],error:void 0,hasError:!1};try{const i=Ur(s,this.transaction(),!1),a=mr(n),o=this.findInodeSync(i,a,"link"),l=Li((r=i.getSync(o.data))!==null&&r!==void 0?r:Rr(Ve.With("ENOENT",a,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,l[jp(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,di(c)),i.setSync(o.data,qa(l)),i.commitSync()}catch(i){s.error=i,s.hasError=!0}finally{qr(s)}}async read(t,n,r,s){var i;const a={stack:[],error:void 0,hasError:!1};try{const o=Ur(a,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const c=(i=await o.get(l.data,r,s))!==null&&i!==void 0?i:Rr(Ve.With("ENODATA",t,"read")),d=o.flag("partial")?c:c.subarray(r,s);d.byteLength>n.byteLength&&ra(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){a.error=o,a.hasError=!0}finally{const o=qr(a);o&&await o}}readSync(t,n,r,s){var i;const a={stack:[],error:void 0,hasError:!1};try{const o=Ur(a,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const c=(i=o.getSync(l.data,r,s))!==null&&i!==void 0?i:Rr(Ve.With("ENODATA",t,"read")),d=o.flag("partial")?c:c.subarray(r,s);d.byteLength>n.byteLength&&ra(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){a.error=o,a.hasError=!0}finally{qr(a)}}async write(t,n,r){var s;const i={stack:[],error:void 0,hasError:!1};try{const a=Ur(i,this.transaction(),!0),o=await this.findInode(a,t,"write");let l=n;a.flag("partial")||(l=L0((s=await a.get(o.data))!==null&&s!==void 0?s:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await a.set(o.data,l,r),this._add(o.ino,t),await a.commit()}catch(a){i.error=a,i.hasError=!0}finally{const a=qr(i);a&&await a}}writeSync(t,n,r){var s;const i={stack:[],error:void 0,hasError:!1};try{const a=Ur(i,this.transaction(),!1),o=this.findInodeSync(a,t,"write");let l=n;a.flag("partial")||(l=L0((s=a.getSync(o.data))!==null&&s!==void 0?s:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),a.setSync(o.data,l,r),this._add(o.ino,t),a.commitSync()}catch(a){i.error=a,i.hasError=!0}finally{qr(i)}}transaction(){return new Bie(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Ur(t,this.transaction(),!0);if(await n.get(Sa))return;const r=new As({ino:Sa,data:1,mode:511|Ns});await n.set(r.data,lf("{}")),this._add(Sa,"/"),await n.set(Sa,di(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=qr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Ur(t,this.transaction(),!1);if(n.getSync(Sa))return;const r=new As({ino:Sa,data:1,mode:511|Ns});n.setSync(r.data,lf("{}")),this._add(Sa,"/"),n.setSync(Sa,di(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{qr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Ci("Attempted to populate tables after initialization");return}r0("Populating tables with existing store metadata");const n=Ur(t,this.transaction(),!0),r=await n.get(Sa);if(!r){QA("Store does not have a root inode");const o=new As({ino:Sa,data:1,mode:511|Ns});await n.set(o.data,lf("{}")),this._add(Sa,"/"),await n.set(Sa,di(o)),await n.commit();return}if(r.length<Jr(As)){T1("Store contains an invalid root inode. Refusing to populate tables");return}const s=new Set;let i=0;const a=[["/",Sa]];for(;a.length>0;){i++;const[o,l]=a.shift();this._add(l,o);const c=await n.get(l);if(!c){Ci("Store is missing data for inode: "+l);continue}if(c.length<Jr(As)){Ci(`Invalid inode size for ino ${l}: ${c.length}`);continue}const d=new As(c);if((d.mode&Ns)!=Ns||s.has(l))continue;s.add(l);const h=await n.get(d.data);if(!h){Ci("Store is missing directory data: "+d.data);continue}const m=Li(h);for(const[g,v]of Object.entries(m))a.push([_r(o,g),v])}r0(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=qr(t);n&&await n}}async findInode(t,n,r){var s;const i=this._ids.get(n);if(i===void 0)throw Ve.With("ENOENT",n,r);return new As((s=await t.get(i))!==null&&s!==void 0?s:Rr(Ve.With("ENOENT",n,r)))}findInodeSync(t,n,r){var s;const i=this._ids.get(n);if(i===void 0)throw Ve.With("ENOENT",n,r);return new As((s=t.getSync(i))!==null&&s!==void 0?s:Rr(Ve.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const s=this._lastID;if(s>Hi)throw ra(new Ve(ct.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(s,t),s}async commitNew(t,n,r,s){var i;const a={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ve.With("EEXIST",t,s);const o=Ur(a,this.transaction(),!0),{dir:l,base:c}=ml(t),d=await this.findInode(o,l,s),h=Li((i=await o.get(d.data))!==null&&i!==void 0?i:Rr(Ve.With("ENOENT",l,s)));if(h[c])throw Ve.With("EEXIST",t,s);const m=this.allocNew(t,s),g=new As({...n,ino:m,data:m+1,size:r.byteLength});return await o.set(g.ino,di(g)),await o.set(g.data,r),h[c]=g.ino,await o.set(d.data,qa(h)),await o.commit(),g}catch(o){a.error=o,a.hasError=!0}finally{const o=qr(a);o&&await o}}commitNewSync(t,n,r,s){var i;const a={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ve.With("EEXIST",t,s);const o=Ur(a,this.transaction(),!1),{dir:l,base:c}=ml(t),d=this.findInodeSync(o,l,s),h=Li((i=o.getSync(d.data))!==null&&i!==void 0?i:Rr(Ve.With("ENOENT",l,s)));if(h[c])throw Ve.With("EEXIST",t,s);const m=this.allocNew(t,s),g=new As({...n,ino:m,data:m+1,size:r.byteLength});return o.setSync(g.ino,di(g)),o.setSync(g.data,r),h[c]=g.ino,o.setSync(d.data,qa(h)),o.commitSync(),g}catch(o){a.error=o,a.hasError=!0}finally{qr(a)}}async remove(t,n){var r,s;const i={stack:[],error:void 0,hasError:!1};try{const a=n?"rmdir":"unlink",o=Ur(i,this.transaction(),!0),{dir:l,base:c}=ml(t),d=await this.findInode(o,l,a),h=Li((r=await o.get(d.data))!==null&&r!==void 0?r:Rr(Ve.With("ENOENT",l,a)));if(!h[c])throw Ve.With("ENOENT",t,a);const m=h[c],g=new As((s=await o.get(m))!==null&&s!==void 0?s:Rr(Ve.With("ENOENT",t,a)));if(delete h[c],!n&&zo(g))throw Ve.With("EISDIR",t,a);await o.set(d.data,qa(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await o.set(g.ino,di(g))):(await o.remove(g.data),await o.remove(m),this._remove(m)),await o.commit()}catch(a){i.error=a,i.hasError=!0}finally{const a=qr(i);a&&await a}}removeSync(t,n){var r,s;const i={stack:[],error:void 0,hasError:!1};try{const a=n?"rmdir":"unlink",o=Ur(i,this.transaction(),!1),{dir:l,base:c}=ml(t),d=this.findInodeSync(o,l,a),h=Li((r=o.getSync(d.data))!==null&&r!==void 0?r:Rr(Ve.With("ENOENT",l,a))),m=h[c];if(!m)throw Ve.With("ENOENT",t,a);const g=new As((s=o.getSync(m))!==null&&s!==void 0?s:Rr(Ve.With("ENOENT",t,a)));if(delete h[c],!n&&zo(g))throw Ve.With("EISDIR",t,a);o.setSync(d.data,qa(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),o.setSync(g.ino,di(g))):(o.removeSync(g.data),o.removeSync(m),this._remove(m)),o.commitSync()}catch(a){i.error=a,i.hasError=!0}finally{qr(i)}}}class zie extends $ie{async keys(){return this.store.keys()}async get(t){var n,r,s;return await((s=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&s!==void 0?s:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class Uie extends Map{constructor(t=Hi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new zie(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const qie={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new a9(new Uie(e,t));return n.checkRootSync(),n}},Vie=qie;let Bs=!0;class GM extends GA{get cursor(){return this._cursor}constructor(t,n,r,s=!1){super(),this.input=t,this.output=n,this.terminal=s,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let a=this._buffer.indexOf(`
`);a>=0;a=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,a);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(a+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;Va(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;Va(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);Hv(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);Hv(this.output,0),Va(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const s=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(s),this._cursor=i,this._cursor=i,Va(this.output,-s.length,0),Va(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const s=Math.max(0,Math.min(this.line.length,this._cursor+r));if(s==this._cursor)return;Va(this.output,r,0),this._cursor=s,this._cursor=s;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(Va(this.output,-this._cursor,0),Va(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);Hv(this.output,0),Va(this.output,0,0),this.output.write(this._prompt+r),this.line=r,Va(this.output,-r.length,0),Va(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(Hv(this.output,0),Va(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const s=typeof n=="function"?n:r;if(this._closed||!this.output){s("");return}this.output.write(t),this.once("line",s)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Ci("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Ci("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",s=>n({value:s,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function Hie(e,t,n,r){return"input"in e?new GM(e.input,e.output,e.completer,e.terminal):new GM(e,t,n,r)}function Hv(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function Va(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class px{get position(){return this.flag&Nf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,s,i,a){this.context=t,this.path=n,this.fs=r,this.internalPath=s,this.flag=i,this.inode=a,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&I1||this.inode.flags&sa.Sync)}sync(){if(this.closed)throw Ve.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ve.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ve.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ve.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ve.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ve.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Ei||this.flag&xc))throw new Ve(ct.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,s=this.position){if(this.closed)throw Ve.With("EBADF",this.path,"write");if(!(this.flag&Ei||this.flag&xc))throw new Ve(ct.EPERM,"File not opened with a writeable mode");if(this.inode.flags&sa.Immutable)throw new Ve(ct.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=s+r,a=t.subarray(n,n+r);return!U0(this.inode)&&!z0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=s+a.byteLength,this.fs.writeSync(this.internalPath,a,s),this._isSync&&this.sync(),a.byteLength}read(t,n=0,r=t.byteLength-n,s=this.position){if(this.closed)throw Ve.With("EBADF",this.path,"read");if(this.flag&Ei)throw new Ve(ct.EPERM,"File not opened with a readable mode");this.inode.flags&sa.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=s+r;!U0(this.inode)&&!z0(this.inode)&&i>this.inode.size&&(i=s+Math.max(this.inode.size-s,0)),this._position=i;const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,a.subarray(n,n+r),s,i),this._isSync&&this.sync(),i-s}chmod(t){if(this.closed)throw Ve.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>Fr?-61441:Fr)|t,(this._isSync||t>Fr)&&this.sync()}chown(t,n){if(this.closed)throw Ve.With("EBADF",this.path,"chown");this.dirty=!0,s9(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ve.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ve.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ve.With("EBADF",this.path,"streamWrite");if(this.inode.flags&sa.Immutable)throw new Ve(ct.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function mx(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Vo.descriptors,s=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(s,e),s}function ji(e,t){var n;const s=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Vo.descriptors).get(t);if(!s)throw new Ve(ct.EBADF);return s}function o9(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Vo.descriptors).delete(t)}const Gie=/[rwasx]{1,2}\+?/;function Sc(e){if(typeof e=="number")return e;if(!Gie.test(e))throw new Ve(ct.EINVAL,"Invalid flag string: "+e);return Kie(e)}function Kie(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ve(ct.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?GL:A1;return e.includes("w")&&(t|=N1),e.includes("a")&&(t|=Nf),e.includes("+")?t|=xc:e.includes("r")||(t|=Ei),e.includes("s")&&(t|=I1),e.includes("x")&&(t|=R1),t}function l9(e){let t=0;return e&Ei||(t|=$s),(e&Ei||e&xc)&&(t|=fs),t}const q0=new Map;iR("/",Vie.create({label:"root"}));function iR(e,t){if(e[0]!="/"&&(e="/"+e),e=Fc.call(this,e),q0.has(e))throw ra(new Ve(ct.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,q0.set(e,t),VL(`Mounted ${t.name} on ${e}`),r0(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function c9(e){if(e[0]!="/"&&(e="/"+e),e=Fc.call(this,e),!q0.has(e)){Ci(e+" is already unmounted");return}q0.delete(e),QA("Unmounted "+e)}function Yn(e,t){const n=(t==null?void 0:t.root)||Vo.root;e=pn(_r(n,e));const r=[...q0].sort((s,i)=>s[0].length>i[0].length?-1:1);for(const[s,i]of r)if(Zie(s,e))return e=e.slice(s.length>1?s.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:s,root:n};throw iie(new Ve(ct.EIO,"No file system",e))}function TE(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function kr(e,t){typeof e.stack=="string"&&(e.stack=TE(e.stack,t));try{e.message=TE(e.message,t)}catch{}return e.path&&(e.path=TE(e.path,t)),e}function u9(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Hi),files:(t?BigInt:Number)(n.totalNodes||Hi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function Wie(e){var t,n,r,s,i,a,o;const l=this!==null&&this!==void 0?this:Vo;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((s=l.credentials)===null||s===void 0?void 0:s.egid)!==0)throw new Ve(ct.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const c=_r(l.root,e);for(const d of(o=(a=l.descriptors)===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw Ve.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(c.length>l.root.length)throw new Ve(ct.EPERM,"Can not chroot() outside of current root");l.root=c}function Zie(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class d9 extends GA{off(t,n,r,s){return super.off(t,n,r,s)}removeListener(t,n,r,s){return super.removeListener(t,n,r,s)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ve.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ve.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ve.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ve.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ve.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class f9 extends d9{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?_r(t.root,n):n,Xie(this.realpath,this)}close(){super.emit("close"),Jie(this.realpath,this)}[Symbol.dispose](){this.close()}}class Yie extends d9{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Qu(this.path);Nie(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Qu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Lu=new Map;function Xie(e,t){const n=pn(e);Lu.has(n)||Lu.set(n,new Set),Lu.get(n).add(t)}function Jie(e,t){const n=pn(e);Lu.has(n)&&(Lu.get(n).delete(t),Lu.get(n).size===0&&Lu.delete(n))}function hi(e,t,n){var r;e&&(n=_r((r=e.root)!==null&&r!==void 0?r:"/",n)),n=pn(n);for(let s=n;s!="/";s=mr(s)){const i=Lu.get(s);if(i)for(const a of i)a.emit("change",t,qL.call(a._context,s,n)||jp(n))}}var $y=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},By=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,s=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(a).then(i,function(o){return n(o),i()})}else s|=1}catch(o){n(o)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Qie(e,t){e=pn(e),t=pn(t);const n=Yn(e,this),r=Yn(t,this);if(!Qu.call(this,mr(e)).hasAccess(fs,this))throw Ve.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),hi(this,"rename",e.toString()),hi(this,"change",t.toString());return}uR.call(this,t,cR(e)),lR.call(this,e),hi(this,"rename",e.toString())}catch(s){throw kr(s,{[n.path]:e,[r.path]:t})}}function aR(e){e=pn(e);try{const{fs:t,path:n}=Yn(md.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==ct.ENOENT)return!1;throw t}}function Qu(e,t){e=pn(e);const{fs:n,path:r}=Yn(md.call(this,e),this);try{const s=n.statSync(r);if(Bs&&!Cr(this,s,$s))throw Ve.With("EACCES",r,"stat");return t!=null&&t.bigint?new Gf(s):new Hc(s)}catch(s){throw kr(s,{[r]:e})}}function oR(e,t){e=pn(e);const{fs:n,path:r}=Yn(e,this);try{const s=n.statSync(r);if(Bs&&!Cr(this,s,$s))throw Ve.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Gf(s):new Hc(s)}catch(s){throw kr(s,{[r]:e})}}function eae(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=$y(n,Kf.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ve(ct.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{By(n)}}function lR(e){e=pn(e);const{fs:t,path:n}=Yn(e,this);try{if(Bs&&!Cr(this,t.statSync(n),fs))throw Ve.With("EACCES",n,"unlink");t.unlinkSync(n),hi(this,"rename",e.toString())}catch(r){throw kr(r,{[n]:e})}}function Kf(e,t){var n;e=pn(e);const r=pd(t.mode,420),s=Sc(t.flag);e=t.preserveSymlinks?e:md.call(this,e);const{fs:i,path:a}=Yn(e,this);let o;try{o=i.statSync(a)}catch{}if(!o){if(!(s&A1))throw Ve.With("ENOENT",e,"_open");const c=i.statSync(mr(a));if(!Cr(this,c,fs))throw Ve.With("EACCES",mr(e),"_open");if(!zo(c))throw Ve.With("ENOTDIR",mr(e),"_open");if(!t.allowDirectory&&r&Ns)throw Ve.With("EISDIR",e,"_open");if(!Cr(this,c,fs))throw Ve.With("EACCES",mr(a),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Vo.credentials,m=i.createFileSync(a,{mode:r,uid:c.mode&Fy?c.uid:d,gid:c.mode&Ly?c.gid:h});return new px(this,e,i,a,s,m)}if(!Cr(this,o,r)||!Cr(this,o,l9(s)))throw Ve.With("EACCES",e,"_open");if(s&R1)throw Ve.With("EEXIST",e,"_open");const l=new px(this,e,i,a,s,o);if(s&N1&&l.truncate(0),!t.allowDirectory&&o.mode&Ns)throw Ve.With("EISDIR",e,"_open");return l}function j1(e,t,n=tR){return mx(Kf.call(this,e,{flag:t,mode:n}))}function M1(e,t,n){return mx(Kf.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function h9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const s=$y(r,typeof e=="number"?ji(this,e):Kf.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=s.stat(),a=new Uint8Array(i);return s.read(a,0,i,0),a}catch(s){r.error=s,r.hasError=!0}finally{By(r)}}function cR(e,t={}){const n=_c(t,null,"r",420);if(Sc(n.flag)&Ei)throw new Ve(ct.EINVAL,"Flag passed to readFile must allow for reading");const s=Gr.from(h9.call(this,e,n.flag,!1));return n.encoding?s.toString(n.encoding):s}function uR(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const s=_c(n,"utf8","w+",420),i=Sc(s.flag);if(!(i&Ei||i&xc))throw new Ve(ct.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!s.encoding)throw new Ve(ct.EINVAL,"Encoding not specified");const a=typeof t=="string"?Gr.from(t,s.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!a)throw new Ve(ct.EINVAL,"Data not specified");$y(r,typeof e=="number"?ji(this,e):Kf.call(this,e.toString(),{flag:i,mode:s.mode,preserveSymlinks:!0}),!1).write(a,0,a.byteLength,0),hi(this,"change",e.toString())}catch(s){r.error=s,r.hasError=!0}finally{By(r)}}function tae(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const s=_c(n,"utf8","a+",420),i=Sc(s.flag);if(!(i&Nf))throw new Ve(ct.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!s.encoding)throw new Ve(ct.EINVAL,"Encoding not specified");const a=typeof t=="string"?Gr.from(t,s.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);$y(r,Kf.call(this,typeof e=="number"?ji(this,e).path:e.toString(),{flag:i,mode:s.mode,preserveSymlinks:!0}),!1).write(a,0,a.byteLength)}catch(s){r.error=s,r.hasError=!0}finally{By(r)}}function nae(e,t){const n=ji(this,e).stat();return t!=null&&t.bigint?new Gf(n):new Hc(n)}function Wf(e){ji(this,e).close(),o9(this,e)}function rae(e,t=0){if(t||(t=0),t<0)throw new Ve(ct.EINVAL);ji(this,e).truncate(t)}function sae(e){ji(this,e).sync()}function iae(e){ji(this,e).datasync()}function aae(e,t,n,r,s){let i,a,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";a=0,i=Gr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n,o=r,l=typeof s=="number"?s:null;const c=ji(this,e);l??(l=c.position);const d=c.write(i,a,o,l);return hi(this,"change",c.path),d}function oae(e,t,n,r,s){const i=ji(this,e),a=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,s=n.position),s=Number(s),isNaN(s)&&(s=i.position),i.read(t,a,r,s)}function dR(e,t,n){ji(this,e).chown(t,n)}function fR(e,t){const n=pd(t,-1);if(n<0)throw new Ve(ct.EINVAL,"Invalid mode.");ji(this,e).chmod(n)}function hR(e,t,n){ji(this,e).utimes(hx(t),hx(n))}function p9(e){e=pn(e);const{fs:t,path:n}=Yn(md.call(this,e),this);try{const r=t.statSync(n);if(!zo(r))throw Ve.With("ENOTDIR",n,"rmdir");if(Bs&&!Cr(this,r,fs))throw Ve.With("EACCES",n,"rmdir");t.rmdirSync(n),hi(this,"rename",e.toString())}catch(r){throw kr(r,{[n]:e})}}function pR(e,t){var n,r;const{euid:s,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Vo.credentials;t=typeof t=="object"?t:{mode:t};const a=pd(t==null?void 0:t.mode,511);e=md.call(this,e);const{fs:o,path:l,root:c}=Yn(e,this),d={[l]:e},h=(m,g)=>{if(!Cr(this,g,fs))throw Ve.With("EACCES",mr(m),"mkdir");const v=o.mkdirSync(m,{mode:a,uid:g.mode&Fy?g.uid:s,gid:g.mode&Ly?g.gid:i});return hi(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(mr(l)));return}const m=[];for(let v=l,b=e;!o.existsSync(v);v=mr(v),b=mr(b))m.unshift(v),d[v]=b;if(!m.length)return;const g=[o.statSync(mr(m[0]))];for(const[v,b]of m.entries())g.push(h(b,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw kr(m,d)}}function am(e,t){t=typeof t=="object"?t:{encoding:t},e=pn(e);const{fs:n,path:r}=Yn(md.call(this,e),this);let s;try{const a=n.statSync(r);if(Bs&&!Cr(this,a,$s))throw Ve.With("EACCES",r,"readdir");if(!zo(a))throw Ve.With("ENOTDIR",r,"readdir");s=n.readdirSync(r)}catch(a){throw kr(a,{[r]:e})}const i=[];for(const a of s){let o;try{o=n.statSync(_r(r,a))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new V0(a,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Gr.from(a)):i.push(a),!(!zo(o)||!(t!=null&&t.recursive)))for(const l of am.call(this,_r(e,a),t))l instanceof V0?(l.path=_r(a,l.path),i.push(l)):Gr.isBuffer(l)?i.push(Gr.from(_r(a,WA(l)))):i.push(_r(a,l))}return i}function lae(e,t){if(e=pn(e),!Qu(mr(e)).hasAccess($s,this))throw Ve.With("EACCES",mr(e),"link");if(t=pn(t),!Qu(mr(t)).hasAccess(fs,this))throw Ve.With("EACCES",mr(t),"link");const{fs:n,path:r}=Yn(e,this),s=Yn(t,this);if(n!=s.fs)throw Ve.With("EXDEV",t,"link");try{if(Bs&&!Cr(this,n.statSync(r),$s))throw Ve.With("EACCES",r,"link");return n.linkSync(r,s.path)}catch(i){throw kr(i,{[r]:e,[s.path]:t})}}function cae(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ve(ct.EINVAL,"Invalid type: "+n);t=pn(t);const s=$y(r,Kf.call(this,t,{flag:"wx",mode:420}),!1);s.write(lf(pn(e,!0))),s.chmod(Vc)}catch(s){r.error=s,r.hasError=!0}finally{By(r)}}function dT(e,t){const n=Gr.from(h9.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function uae(e,t,n){const r=j1.call(this,e,"r+");dR.call(this,r,t,n),Wf.call(this,r)}function dae(e,t,n){const r=M1.call(this,e,"r+");dR.call(this,r,t,n),Wf.call(this,r)}function fae(e,t){const n=j1.call(this,e,"r+");fR.call(this,n,t),Wf.call(this,n)}function hae(e,t){const n=M1.call(this,e,"r+");fR.call(this,n,t),Wf.call(this,n)}function m9(e,t,n){const r=j1.call(this,e,"r+");hR.call(this,r,t,n),Wf.call(this,r)}function pae(e,t,n){const r=M1.call(this,e,"r+");hR.call(this,r,t,n),Wf.call(this,r)}function fT(e,t,n){try{const l=Yn(t,e),c=l.fs.statSync(l.path);if(!Mp(c))return{...l,fullPath:t,stats:c};const d=Fc.call(e,mr(t),dT.call(e,t).toString());return fT(e,d)}catch{}const{base:r,dir:s}=ml(t),i=s=="/"?"/":md.call(e,s),a=_r(i,r),o=Yn(a,e);try{const l=o.fs.statSync(o.path);if(!Mp(l))return{...o,fullPath:a,stats:l};const c=Fc.call(e,i,dT.call(e,a).toString());return fT(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw kr(l,{[o.path]:a})}}function md(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=pn(e);const{fullPath:s}=fT(this,e);if(r=="utf8"||r=="utf-8")return s;const i=Gr.from(s,"utf-8");return r=="buffer"?i:i.toString(r)}function mae(e,t=384){if(!Cr(this,Qu.call(this,e),t))throw new Ve(ct.EACCES)}function g9(e,t){e=pn(e);let n;try{n=oR.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&Fr){case Ns:if(t!=null&&t.recursive)for(const r of am.call(this,e))g9.call(this,_r(e,r),t);p9.call(this,e);break;case Oo:case Vc:case qf:case Vf:lR.call(this,e);break;case Hf:case Uf:default:throw new Ve(ct.EPERM,"File type not supported",e,"rm")}}function gae(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",s="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return pR.call(this,s),n=="buffer"?Gr.from(s):s}function y9(e,t,n){if(e=pn(e),t=pn(t),n&&n&nR&&aR(t))throw new Ve(ct.EEXIST,"Destination file already exists",t,"copyFile");uR.call(this,t,cR(e)),hi(this,"rename",t.toString())}function yae(e,t,n){const r=ji(this,e);let s=0;for(const i of t)s+=r.read(i,0,i.byteLength,n+s);return s}function bae(e,t,n){const r=ji(this,e);let s=0;for(const i of t)s+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+s);return s}function vae(e,t){return e=pn(e),new mR(e,this)}function b9(e,t,n){e=pn(e),t=pn(t);const r=oR.call(this,e);if(n!=null&&n.errorOnExist&&aR.call(this,t))throw new Ve(ct.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Fr){case Ns:if(!(n!=null&&n.recursive))throw new Ve(ct.EISDIR,e+" is a directory (not copied)",e,"cp");pR.call(this,t,{recursive:!0});for(const s of am.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(_r(e,s.name),_r(t,s.name))||b9.call(this,_r(e,s.name),_r(t,s.name),n);break;case Oo:case Vc:y9.call(this,e,t);break;case qf:case Vf:case Hf:case Uf:default:throw new Ve(ct.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&m9.call(this,t,r.atime,r.mtime)}function wae(e,t){e=pn(e);const{fs:n}=Yn(e,this);return u9(n,t==null?void 0:t.bigint)}function xae(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:s=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),a=[];function o(l){const c=am(l,{withFileTypes:r,encoding:"utf8"});for(const d of c){const h=r?d.path:l+"/"+d;s(r?d:h)||(Qu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&o(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&a.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),a}class V0{get name(){return jp(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return Oie(this.stats)}isDirectory(){return zo(this.stats)}isBlockDevice(){return z0(this.stats)}isCharacterDevice(){return U0(this.stats)}isSymbolicLink(){return Mp(this.stats)}isFIFO(){return Fie(this.stats)}isSocket(){return Pie(this.stats)}}class mR{checkClosed(){if(this.closed)throw new Ve(ct.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await Yf.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=am.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var AE={exports:{}},RE={exports:{}},NE={},KM;function gd(){return KM||(KM=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=b;for(var r=[],s=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)r[o]=a[o],s[a.charCodeAt(o)]=o;s[45]=62,s[95]=63;function c(_){var E=_.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=_.indexOf("=");k===-1&&(k=E);var T=k===E?0:4-k%4;return[k,T]}function d(_){var E=c(_),k=E[0],T=E[1];return(k+T)*3/4-T}function h(_,E,k){return(E+k)*3/4-k}function m(_){var E,k=c(_),T=k[0],R=k[1],M=new i(h(_,T,R)),I=0,O=R>0?T-4:T,P;for(P=0;P<O;P+=4)E=s[_.charCodeAt(P)]<<18|s[_.charCodeAt(P+1)]<<12|s[_.charCodeAt(P+2)]<<6|s[_.charCodeAt(P+3)],M[I++]=E>>16&255,M[I++]=E>>8&255,M[I++]=E&255;return R===2&&(E=s[_.charCodeAt(P)]<<2|s[_.charCodeAt(P+1)]>>4,M[I++]=E&255),R===1&&(E=s[_.charCodeAt(P)]<<10|s[_.charCodeAt(P+1)]<<4|s[_.charCodeAt(P+2)]>>2,M[I++]=E>>8&255,M[I++]=E&255),M}function g(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function v(_,E,k){for(var T,R=[],M=E;M<k;M+=3)T=(_[M]<<16&16711680)+(_[M+1]<<8&65280)+(_[M+2]&255),R.push(g(T));return R.join("")}function b(_){for(var E,k=_.length,T=k%3,R=[],M=16383,I=0,O=k-T;I<O;I+=M)R.push(v(_,I,I+M>O?O:I+M));return T===1?(E=_[k-1],R.push(r[E>>2]+r[E<<4&63]+"==")):T===2&&(E=(_[k-2]<<8)+_[k-1],R.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),R.join("")}var w={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */w.read=function(_,E,k,T,R){var M,I,O=R*8-T-1,P=(1<<O)-1,U=P>>1,j=-7,V=k?R-1:0,$=k?-1:1,re=_[E+V];for(V+=$,M=re&(1<<-j)-1,re>>=-j,j+=O;j>0;M=M*256+_[E+V],V+=$,j-=8);for(I=M&(1<<-j)-1,M>>=-j,j+=T;j>0;I=I*256+_[E+V],V+=$,j-=8);if(M===0)M=1-U;else{if(M===P)return I?NaN:(re?-1:1)*(1/0);I=I+Math.pow(2,T),M=M-U}return(re?-1:1)*I*Math.pow(2,M-T)},w.write=function(_,E,k,T,R,M){var I,O,P,U=M*8-R-1,j=(1<<U)-1,V=j>>1,$=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=T?0:M-1,J=T?1:-1,te=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(O=isNaN(E)?1:0,I=j):(I=Math.floor(Math.log(E)/Math.LN2),E*(P=Math.pow(2,-I))<1&&(I--,P*=2),I+V>=1?E+=$/P:E+=$*Math.pow(2,1-V),E*P>=2&&(I++,P/=2),I+V>=j?(O=0,I=j):I+V>=1?(O=(E*P-1)*Math.pow(2,R),I=I+V):(O=E*Math.pow(2,V-1)*Math.pow(2,R),I=0));R>=8;_[k+re]=O&255,re+=J,O/=256,R-=8);for(I=I<<R|O,U+=R;U>0;_[k+re]=I&255,re+=J,I/=256,U-=8);_[k+re-J]|=te*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(_){const E=n,k=w,T=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_.Buffer=j,_.SlowBuffer=he,_.INSPECT_MAX_BYTES=50;const R=2147483647;_.kMaxLength=R;const{Uint8Array:M,ArrayBuffer:I,SharedArrayBuffer:O}=globalThis;j.TYPED_ARRAY_SUPPORT=P(),!j.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P(){try{const G=new M(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,M.prototype),Object.setPrototypeOf(G,q),G.foo()===42}catch{return!1}}Object.defineProperty(j.prototype,"parent",{enumerable:!0,get:function(){if(j.isBuffer(this))return this.buffer}}),Object.defineProperty(j.prototype,"offset",{enumerable:!0,get:function(){if(j.isBuffer(this))return this.byteOffset}});function U(G){if(G>R)throw new RangeError('The value "'+G+'" is invalid for option "size"');const q=new M(G);return Object.setPrototypeOf(q,j.prototype),q}function j(G,q,W){if(typeof G=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return J(G)}return V(G,q,W)}j.poolSize=8192;function V(G,q,W){if(typeof G=="string")return te(G,q);if(I.isView(G))return ie(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(ye(G,I)||G&&ye(G.buffer,I)||typeof O<"u"&&(ye(G,O)||G&&ye(G.buffer,O)))return Z(G,q,W);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ge=G.valueOf&&G.valueOf();if(ge!=null&&ge!==G)return j.from(ge,q,W);const Ie=ee(G);if(Ie)return Ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return j.from(G[Symbol.toPrimitive]("string"),q,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}j.from=function(G,q,W){return V(G,q,W)},Object.setPrototypeOf(j.prototype,M.prototype),Object.setPrototypeOf(j,M);function $(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function re(G,q,W){return $(G),G<=0?U(G):q!==void 0?typeof W=="string"?U(G).fill(q,W):U(G).fill(q):U(G)}j.alloc=function(G,q,W){return re(G,q,W)};function J(G){return $(G),U(G<0?0:Q(G)|0)}j.allocUnsafe=function(G){return J(G)},j.allocUnsafeSlow=function(G){return J(G)};function te(G,q){if((typeof q!="string"||q==="")&&(q="utf8"),!j.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const W=Se(G,q)|0;let ge=U(W);const Ie=ge.write(G,q);return Ie!==W&&(ge=ge.slice(0,Ie)),ge}function X(G){const q=G.length<0?0:Q(G.length)|0,W=U(q);for(let ge=0;ge<q;ge+=1)W[ge]=G[ge]&255;return W}function ie(G){if(ye(G,M)){const q=new M(G);return Z(q.buffer,q.byteOffset,q.byteLength)}return X(G)}function Z(G,q,W){if(q<0||G.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<q+(W||0))throw new RangeError('"length" is outside of buffer bounds');let ge;return q===void 0&&W===void 0?ge=new M(G):W===void 0?ge=new M(G,q):ge=new M(G,q,W),Object.setPrototypeOf(ge,j.prototype),ge}function ee(G){if(j.isBuffer(G)){const q=Q(G.length)|0,W=U(q);return W.length===0||G.copy(W,0,0,q),W}if(G.length!==void 0)return typeof G.length!="number"||we(G.length)?U(0):X(G);if(G.type==="Buffer"&&Array.isArray(G.data))return X(G.data)}function Q(G){if(G>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return G|0}function he(G){return+G!=G&&(G=0),j.alloc(+G)}j.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==j.prototype},j.compare=function(q,W){if(ye(q,M)&&(q=j.from(q,q.offset,q.byteLength)),ye(W,M)&&(W=j.from(W,W.offset,W.byteLength)),!j.isBuffer(q)||!j.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===W)return 0;let ge=q.length,Ie=W.length;for(let Ge=0,bt=Math.min(ge,Ie);Ge<bt;++Ge)if(q[Ge]!==W[Ge]){ge=q[Ge],Ie=W[Ge];break}return ge<Ie?-1:Ie<ge?1:0},j.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},j.concat=function(q,W){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return j.alloc(0);let ge;if(W===void 0)for(W=0,ge=0;ge<q.length;++ge)W+=q[ge].length;const Ie=j.allocUnsafe(W);let Ge=0;for(ge=0;ge<q.length;++ge){let bt=q[ge];if(ye(bt,M))Ge+bt.length>Ie.length?(j.isBuffer(bt)||(bt=j.from(bt)),bt.copy(Ie,Ge)):M.prototype.set.call(Ie,bt,Ge);else if(j.isBuffer(bt))bt.copy(Ie,Ge);else throw new TypeError('"list" argument must be an Array of Buffers');Ge+=bt.length}return Ie};function Se(G,q){if(j.isBuffer(G))return G.length;if(I.isView(G)||ye(G,I))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const W=G.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&W===0)return 0;let Ie=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ht(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return Be(G).length;default:if(Ie)return ge?-1:ht(G).length;q=(""+q).toLowerCase(),Ie=!0}}j.byteLength=Se;function ce(G,q,W){let ge=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,q>>>=0,W<=q))return"";for(G||(G="utf8");;)switch(G){case"hex":return Ee(this,q,W);case"utf8":case"utf-8":return ue(this,q,W);case"ascii":return oe(this,q,W);case"latin1":case"binary":return ne(this,q,W);case"base64":return H(this,q,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,q,W);default:if(ge)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),ge=!0}}j.prototype._isBuffer=!0;function je(G,q,W){const ge=G[q];G[q]=G[W],G[W]=ge}j.prototype.swap16=function(){const q=this.length;if(q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<q;W+=2)je(this,W,W+1);return this},j.prototype.swap32=function(){const q=this.length;if(q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<q;W+=4)je(this,W,W+3),je(this,W+1,W+2);return this},j.prototype.swap64=function(){const q=this.length;if(q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<q;W+=8)je(this,W,W+7),je(this,W+1,W+6),je(this,W+2,W+5),je(this,W+3,W+4);return this},j.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?ue(this,0,q):ce.apply(this,arguments)},j.prototype.toLocaleString=j.prototype.toString,j.prototype.equals=function(q){if(!j.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:j.compare(this,q)===0},j.prototype.inspect=function(){let q="";const W=_.INSPECT_MAX_BYTES;return q=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(q+=" ... "),"<Buffer "+q+">"},T&&(j.prototype[T]=j.prototype.inspect),j.prototype.compare=function(q,W,ge,Ie,Ge){if(ye(q,M)&&(q=j.from(q,q.offset,q.byteLength)),!j.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(W===void 0&&(W=0),ge===void 0&&(ge=q?q.length:0),Ie===void 0&&(Ie=0),Ge===void 0&&(Ge=this.length),W<0||ge>q.length||Ie<0||Ge>this.length)throw new RangeError("out of range index");if(Ie>=Ge&&W>=ge)return 0;if(Ie>=Ge)return-1;if(W>=ge)return 1;if(W>>>=0,ge>>>=0,Ie>>>=0,Ge>>>=0,this===q)return 0;let bt=Ge-Ie,Wt=ge-W;const yn=Math.min(bt,Wt),Ht=this.slice(Ie,Ge),Xt=q.slice(W,ge);for(let an=0;an<yn;++an)if(Ht[an]!==Xt[an]){bt=Ht[an],Wt=Xt[an];break}return bt<Wt?-1:Wt<bt?1:0};function De(G,q,W,ge,Ie){if(G.length===0)return-1;if(typeof W=="string"?(ge=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,we(W)&&(W=Ie?0:G.length-1),W<0&&(W=G.length+W),W>=G.length){if(Ie)return-1;W=G.length-1}else if(W<0)if(Ie)W=0;else return-1;if(typeof q=="string"&&(q=j.from(q,ge)),j.isBuffer(q))return q.length===0?-1:Re(G,q,W,ge,Ie);if(typeof q=="number")return q=q&255,typeof M.prototype.indexOf=="function"?Ie?M.prototype.indexOf.call(G,q,W):M.prototype.lastIndexOf.call(G,q,W):Re(G,[q],W,ge,Ie);throw new TypeError("val must be string, number or Buffer")}function Re(G,q,W,ge,Ie){let Ge=1,bt=G.length,Wt=q.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(G.length<2||q.length<2)return-1;Ge=2,bt/=2,Wt/=2,W/=2}function yn(Xt,an){return Ge===1?Xt[an]:Xt.readUInt16BE(an*Ge)}let Ht;if(Ie){let Xt=-1;for(Ht=W;Ht<bt;Ht++)if(yn(G,Ht)===yn(q,Xt===-1?0:Ht-Xt)){if(Xt===-1&&(Xt=Ht),Ht-Xt+1===Wt)return Xt*Ge}else Xt!==-1&&(Ht-=Ht-Xt),Xt=-1}else for(W+Wt>bt&&(W=bt-Wt),Ht=W;Ht>=0;Ht--){let Xt=!0;for(let an=0;an<Wt;an++)if(yn(G,Ht+an)!==yn(q,an)){Xt=!1;break}if(Xt)return Ht}return-1}j.prototype.includes=function(q,W,ge){return this.indexOf(q,W,ge)!==-1},j.prototype.indexOf=function(q,W,ge){return De(this,q,W,ge,!0)},j.prototype.lastIndexOf=function(q,W,ge){return De(this,q,W,ge,!1)};function xe(G,q,W,ge){W=Number(W)||0;const Ie=G.length-W;ge?(ge=Number(ge),ge>Ie&&(ge=Ie)):ge=Ie;const Ge=q.length;ge>Ge/2&&(ge=Ge/2);let bt;for(bt=0;bt<ge;++bt){const Wt=parseInt(q.substr(bt*2,2),16);if(we(Wt))return bt;G[W+bt]=Wt}return bt}function Fe(G,q,W,ge){return rt(ht(q,G.length-W),G,W,ge)}function st(G,q,W,ge){return rt(wt(q),G,W,ge)}function He(G,q,W,ge){return rt(Be(q),G,W,ge)}function Ne(G,q,W,ge){return rt(L(q,G.length-W),G,W,ge)}j.prototype.write=function(q,W,ge,Ie){if(W===void 0)Ie="utf8",ge=this.length,W=0;else if(ge===void 0&&typeof W=="string")Ie=W,ge=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(ge)?(ge=ge>>>0,Ie===void 0&&(Ie="utf8")):(Ie=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ge=this.length-W;if((ge===void 0||ge>Ge)&&(ge=Ge),q.length>0&&(ge<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");let bt=!1;for(;;)switch(Ie){case"hex":return xe(this,q,W,ge);case"utf8":case"utf-8":return Fe(this,q,W,ge);case"ascii":case"latin1":case"binary":return st(this,q,W,ge);case"base64":return He(this,q,W,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,q,W,ge);default:if(bt)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),bt=!0}},j.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(G,q,W){return q===0&&W===G.length?E.fromByteArray(G):E.fromByteArray(G.slice(q,W))}function ue(G,q,W){W=Math.min(G.length,W);const ge=[];let Ie=q;for(;Ie<W;){const Ge=G[Ie];let bt=null,Wt=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Ie+Wt<=W){let yn,Ht,Xt,an;switch(Wt){case 1:Ge<128&&(bt=Ge);break;case 2:yn=G[Ie+1],(yn&192)===128&&(an=(Ge&31)<<6|yn&63,an>127&&(bt=an));break;case 3:yn=G[Ie+1],Ht=G[Ie+2],(yn&192)===128&&(Ht&192)===128&&(an=(Ge&15)<<12|(yn&63)<<6|Ht&63,an>2047&&(an<55296||an>57343)&&(bt=an));break;case 4:yn=G[Ie+1],Ht=G[Ie+2],Xt=G[Ie+3],(yn&192)===128&&(Ht&192)===128&&(Xt&192)===128&&(an=(Ge&15)<<18|(yn&63)<<12|(Ht&63)<<6|Xt&63,an>65535&&an<1114112&&(bt=an))}}bt===null?(bt=65533,Wt=1):bt>65535&&(bt-=65536,ge.push(bt>>>10&1023|55296),bt=56320|bt&1023),ge.push(bt),Ie+=Wt}return ae(ge)}const ke=4096;function ae(G){const q=G.length;if(q<=ke)return String.fromCharCode.apply(String,G);let W="",ge=0;for(;ge<q;)W+=String.fromCharCode.apply(String,G.slice(ge,ge+=ke));return W}function oe(G,q,W){let ge="";W=Math.min(G.length,W);for(let Ie=q;Ie<W;++Ie)ge+=String.fromCharCode(G[Ie]&127);return ge}function ne(G,q,W){let ge="";W=Math.min(G.length,W);for(let Ie=q;Ie<W;++Ie)ge+=String.fromCharCode(G[Ie]);return ge}function Ee(G,q,W){const ge=G.length;(!q||q<0)&&(q=0),(!W||W<0||W>ge)&&(W=ge);let Ie="";for(let Ge=q;Ge<W;++Ge)Ie+=Ue[G[Ge]];return Ie}function Le(G,q,W){const ge=G.slice(q,W);let Ie="";for(let Ge=0;Ge<ge.length-1;Ge+=2)Ie+=String.fromCharCode(ge[Ge]+ge[Ge+1]*256);return Ie}j.prototype.slice=function(q,W){const ge=this.length;q=~~q,W=W===void 0?ge:~~W,q<0?(q+=ge,q<0&&(q=0)):q>ge&&(q=ge),W<0?(W+=ge,W<0&&(W=0)):W>ge&&(W=ge),W<q&&(W=q);const Ie=this.subarray(q,W);return Object.setPrototypeOf(Ie,j.prototype),Ie};function Te(G,q,W){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+q>W)throw new RangeError("Trying to access beyond buffer length")}j.prototype.readUintLE=j.prototype.readUIntLE=function(q,W,ge){q=q>>>0,W=W>>>0,ge||Te(q,W,this.length);let Ie=this[q],Ge=1,bt=0;for(;++bt<W&&(Ge*=256);)Ie+=this[q+bt]*Ge;return Ie},j.prototype.readUintBE=j.prototype.readUIntBE=function(q,W,ge){q=q>>>0,W=W>>>0,ge||Te(q,W,this.length);let Ie=this[q+--W],Ge=1;for(;W>0&&(Ge*=256);)Ie+=this[q+--W]*Ge;return Ie},j.prototype.readUint8=j.prototype.readUInt8=function(q,W){return q=q>>>0,W||Te(q,1,this.length),this[q]},j.prototype.readUint16LE=j.prototype.readUInt16LE=function(q,W){return q=q>>>0,W||Te(q,2,this.length),this[q]|this[q+1]<<8},j.prototype.readUint16BE=j.prototype.readUInt16BE=function(q,W){return q=q>>>0,W||Te(q,2,this.length),this[q]<<8|this[q+1]},j.prototype.readUint32LE=j.prototype.readUInt32LE=function(q,W){return q=q>>>0,W||Te(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},j.prototype.readUint32BE=j.prototype.readUInt32BE=function(q,W){return q=q>>>0,W||Te(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},j.prototype.readBigUInt64LE=Et(function(q){q=q>>>0,Oe(q,"offset");const W=this[q],ge=this[q+7];(W===void 0||ge===void 0)&&ve(q,this.length-8);const Ie=W+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,Ge=this[++q]+this[++q]*2**8+this[++q]*2**16+ge*2**24;return BigInt(Ie)+(BigInt(Ge)<<BigInt(32))}),j.prototype.readBigUInt64BE=Et(function(q){q=q>>>0,Oe(q,"offset");const W=this[q],ge=this[q+7];(W===void 0||ge===void 0)&&ve(q,this.length-8);const Ie=W*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],Ge=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+ge;return(BigInt(Ie)<<BigInt(32))+BigInt(Ge)}),j.prototype.readIntLE=function(q,W,ge){q=q>>>0,W=W>>>0,ge||Te(q,W,this.length);let Ie=this[q],Ge=1,bt=0;for(;++bt<W&&(Ge*=256);)Ie+=this[q+bt]*Ge;return Ge*=128,Ie>=Ge&&(Ie-=Math.pow(2,8*W)),Ie},j.prototype.readIntBE=function(q,W,ge){q=q>>>0,W=W>>>0,ge||Te(q,W,this.length);let Ie=W,Ge=1,bt=this[q+--Ie];for(;Ie>0&&(Ge*=256);)bt+=this[q+--Ie]*Ge;return Ge*=128,bt>=Ge&&(bt-=Math.pow(2,8*W)),bt},j.prototype.readInt8=function(q,W){return q=q>>>0,W||Te(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},j.prototype.readInt16LE=function(q,W){q=q>>>0,W||Te(q,2,this.length);const ge=this[q]|this[q+1]<<8;return ge&32768?ge|4294901760:ge},j.prototype.readInt16BE=function(q,W){q=q>>>0,W||Te(q,2,this.length);const ge=this[q+1]|this[q]<<8;return ge&32768?ge|4294901760:ge},j.prototype.readInt32LE=function(q,W){return q=q>>>0,W||Te(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},j.prototype.readInt32BE=function(q,W){return q=q>>>0,W||Te(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},j.prototype.readBigInt64LE=Et(function(q){q=q>>>0,Oe(q,"offset");const W=this[q],ge=this[q+7];(W===void 0||ge===void 0)&&ve(q,this.length-8);const Ie=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(ge<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(W+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24)}),j.prototype.readBigInt64BE=Et(function(q){q=q>>>0,Oe(q,"offset");const W=this[q],ge=this[q+7];(W===void 0||ge===void 0)&&ve(q,this.length-8);const Ie=(W<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+ge)}),j.prototype.readFloatLE=function(q,W){return q=q>>>0,W||Te(q,4,this.length),k.read(this,q,!0,23,4)},j.prototype.readFloatBE=function(q,W){return q=q>>>0,W||Te(q,4,this.length),k.read(this,q,!1,23,4)},j.prototype.readDoubleLE=function(q,W){return q=q>>>0,W||Te(q,8,this.length),k.read(this,q,!0,52,8)},j.prototype.readDoubleBE=function(q,W){return q=q>>>0,W||Te(q,8,this.length),k.read(this,q,!1,52,8)};function Xe(G,q,W,ge,Ie,Ge){if(!j.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>Ie||q<Ge)throw new RangeError('"value" argument is out of bounds');if(W+ge>G.length)throw new RangeError("Index out of range")}j.prototype.writeUintLE=j.prototype.writeUIntLE=function(q,W,ge,Ie){if(q=+q,W=W>>>0,ge=ge>>>0,!Ie){const Wt=Math.pow(2,8*ge)-1;Xe(this,q,W,ge,Wt,0)}let Ge=1,bt=0;for(this[W]=q&255;++bt<ge&&(Ge*=256);)this[W+bt]=q/Ge&255;return W+ge},j.prototype.writeUintBE=j.prototype.writeUIntBE=function(q,W,ge,Ie){if(q=+q,W=W>>>0,ge=ge>>>0,!Ie){const Wt=Math.pow(2,8*ge)-1;Xe(this,q,W,ge,Wt,0)}let Ge=ge-1,bt=1;for(this[W+Ge]=q&255;--Ge>=0&&(bt*=256);)this[W+Ge]=q/bt&255;return W+ge},j.prototype.writeUint8=j.prototype.writeUInt8=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,1,255,0),this[W]=q&255,W+1},j.prototype.writeUint16LE=j.prototype.writeUInt16LE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,2,65535,0),this[W]=q&255,this[W+1]=q>>>8,W+2},j.prototype.writeUint16BE=j.prototype.writeUInt16BE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,2,65535,0),this[W]=q>>>8,this[W+1]=q&255,W+2},j.prototype.writeUint32LE=j.prototype.writeUInt32LE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,4,4294967295,0),this[W+3]=q>>>24,this[W+2]=q>>>16,this[W+1]=q>>>8,this[W]=q&255,W+4},j.prototype.writeUint32BE=j.prototype.writeUInt32BE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,4,4294967295,0),this[W]=q>>>24,this[W+1]=q>>>16,this[W+2]=q>>>8,this[W+3]=q&255,W+4};function St(G,q,W,ge,Ie){pe(q,ge,Ie,G,W,7);let Ge=Number(q&BigInt(4294967295));G[W++]=Ge,Ge=Ge>>8,G[W++]=Ge,Ge=Ge>>8,G[W++]=Ge,Ge=Ge>>8,G[W++]=Ge;let bt=Number(q>>BigInt(32)&BigInt(4294967295));return G[W++]=bt,bt=bt>>8,G[W++]=bt,bt=bt>>8,G[W++]=bt,bt=bt>>8,G[W++]=bt,W}function dt(G,q,W,ge,Ie){pe(q,ge,Ie,G,W,7);let Ge=Number(q&BigInt(4294967295));G[W+7]=Ge,Ge=Ge>>8,G[W+6]=Ge,Ge=Ge>>8,G[W+5]=Ge,Ge=Ge>>8,G[W+4]=Ge;let bt=Number(q>>BigInt(32)&BigInt(4294967295));return G[W+3]=bt,bt=bt>>8,G[W+2]=bt,bt=bt>>8,G[W+1]=bt,bt=bt>>8,G[W]=bt,W+8}j.prototype.writeBigUInt64LE=Et(function(q,W=0){return St(this,q,W,BigInt(0),BigInt("0xffffffffffffffff"))}),j.prototype.writeBigUInt64BE=Et(function(q,W=0){return dt(this,q,W,BigInt(0),BigInt("0xffffffffffffffff"))}),j.prototype.writeIntLE=function(q,W,ge,Ie){if(q=+q,W=W>>>0,!Ie){const yn=Math.pow(2,8*ge-1);Xe(this,q,W,ge,yn-1,-yn)}let Ge=0,bt=1,Wt=0;for(this[W]=q&255;++Ge<ge&&(bt*=256);)q<0&&Wt===0&&this[W+Ge-1]!==0&&(Wt=1),this[W+Ge]=(q/bt>>0)-Wt&255;return W+ge},j.prototype.writeIntBE=function(q,W,ge,Ie){if(q=+q,W=W>>>0,!Ie){const yn=Math.pow(2,8*ge-1);Xe(this,q,W,ge,yn-1,-yn)}let Ge=ge-1,bt=1,Wt=0;for(this[W+Ge]=q&255;--Ge>=0&&(bt*=256);)q<0&&Wt===0&&this[W+Ge+1]!==0&&(Wt=1),this[W+Ge]=(q/bt>>0)-Wt&255;return W+ge},j.prototype.writeInt8=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,1,127,-128),q<0&&(q=255+q+1),this[W]=q&255,W+1},j.prototype.writeInt16LE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,2,32767,-32768),this[W]=q&255,this[W+1]=q>>>8,W+2},j.prototype.writeInt16BE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,2,32767,-32768),this[W]=q>>>8,this[W+1]=q&255,W+2},j.prototype.writeInt32LE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,4,2147483647,-2147483648),this[W]=q&255,this[W+1]=q>>>8,this[W+2]=q>>>16,this[W+3]=q>>>24,W+4},j.prototype.writeInt32BE=function(q,W,ge){return q=+q,W=W>>>0,ge||Xe(this,q,W,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[W]=q>>>24,this[W+1]=q>>>16,this[W+2]=q>>>8,this[W+3]=q&255,W+4},j.prototype.writeBigInt64LE=Et(function(q,W=0){return St(this,q,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),j.prototype.writeBigInt64BE=Et(function(q,W=0){return dt(this,q,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function It(G,q,W,ge,Ie,Ge){if(W+ge>G.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Vt(G,q,W,ge,Ie){return q=+q,W=W>>>0,Ie||It(G,q,W,4),k.write(G,q,W,ge,23,4),W+4}j.prototype.writeFloatLE=function(q,W,ge){return Vt(this,q,W,!0,ge)},j.prototype.writeFloatBE=function(q,W,ge){return Vt(this,q,W,!1,ge)};function Dt(G,q,W,ge,Ie){return q=+q,W=W>>>0,Ie||It(G,q,W,8),k.write(G,q,W,ge,52,8),W+8}j.prototype.writeDoubleLE=function(q,W,ge){return Dt(this,q,W,!0,ge)},j.prototype.writeDoubleBE=function(q,W,ge){return Dt(this,q,W,!1,ge)},j.prototype.copy=function(q,W,ge,Ie){if(!j.isBuffer(q))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!Ie&&Ie!==0&&(Ie=this.length),W>=q.length&&(W=q.length),W||(W=0),Ie>0&&Ie<ge&&(Ie=ge),Ie===ge||q.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),q.length-W<Ie-ge&&(Ie=q.length-W+ge);const Ge=Ie-ge;return this===q&&typeof M.prototype.copyWithin=="function"?this.copyWithin(W,ge,Ie):M.prototype.set.call(q,this.subarray(ge,Ie),W),Ge},j.prototype.fill=function(q,W,ge,Ie){if(typeof q=="string"){if(typeof W=="string"?(Ie=W,W=0,ge=this.length):typeof ge=="string"&&(Ie=ge,ge=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!j.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(q.length===1){const bt=q.charCodeAt(0);(Ie==="utf8"&&bt<128||Ie==="latin1")&&(q=bt)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(W<0||this.length<W||this.length<ge)throw new RangeError("Out of range index");if(ge<=W)return this;W=W>>>0,ge=ge===void 0?this.length:ge>>>0,q||(q=0);let Ge;if(typeof q=="number")for(Ge=W;Ge<ge;++Ge)this[Ge]=q;else{const bt=j.isBuffer(q)?q:j.from(q,Ie),Wt=bt.length;if(Wt===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(Ge=0;Ge<ge-W;++Ge)this[Ge+W]=bt[Ge%Wt]}return this};const Kt={};function be(G,q,W){Kt[G]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(G,q){return`The "${G}" argument must be of type number. Received type ${typeof q}`},TypeError),be("ERR_OUT_OF_RANGE",function(G,q,W){let ge=`The value of "${G}" is out of range.`,Ie=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Ie=D(String(W)):typeof W=="bigint"&&(Ie=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Ie=D(Ie)),Ie+="n"),ge+=` It must be ${q}. Received ${Ie}`,ge},RangeError);function D(G){let q="",W=G.length;const ge=G[0]==="-"?1:0;for(;W>=ge+4;W-=3)q=`_${G.slice(W-3,W)}${q}`;return`${G.slice(0,W)}${q}`}function K(G,q,W){Oe(q,"offset"),(G[q]===void 0||G[q+W]===void 0)&&ve(q,G.length-(W+1))}function pe(G,q,W,ge,Ie,Ge){if(G>W||G<q){const bt=typeof q=="bigint"?"n":"";let Wt;throw q===0||q===BigInt(0)?Wt=`>= 0${bt} and < 2${bt} ** ${(Ge+1)*8}${bt}`:Wt=`>= -(2${bt} ** ${(Ge+1)*8-1}${bt}) and < 2 ** ${(Ge+1)*8-1}${bt}`,new Kt.ERR_OUT_OF_RANGE("value",Wt,G)}K(ge,Ie,Ge)}function Oe(G,q){if(typeof G!="number")throw new Kt.ERR_INVALID_ARG_TYPE(q,"number",G)}function ve(G,q,W){throw Math.floor(G)!==G?(Oe(G,W),new Kt.ERR_OUT_OF_RANGE("offset","an integer",G)):q<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${q}`,G)}const Ae=/[^+/0-9A-Za-z-_]/g;function de(G){if(G=G.split("=")[0],G=G.trim().replace(Ae,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function ht(G,q){q=q||1/0;let W;const ge=G.length;let Ie=null;const Ge=[];for(let bt=0;bt<ge;++bt){if(W=G.charCodeAt(bt),W>55295&&W<57344){if(!Ie){if(W>56319){(q-=3)>-1&&Ge.push(239,191,189);continue}else if(bt+1===ge){(q-=3)>-1&&Ge.push(239,191,189);continue}Ie=W;continue}if(W<56320){(q-=3)>-1&&Ge.push(239,191,189),Ie=W;continue}W=(Ie-55296<<10|W-56320)+65536}else Ie&&(q-=3)>-1&&Ge.push(239,191,189);if(Ie=null,W<128){if((q-=1)<0)break;Ge.push(W)}else if(W<2048){if((q-=2)<0)break;Ge.push(W>>6|192,W&63|128)}else if(W<65536){if((q-=3)<0)break;Ge.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((q-=4)<0)break;Ge.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return Ge}function wt(G){const q=[];for(let W=0;W<G.length;++W)q.push(G.charCodeAt(W)&255);return q}function L(G,q){let W,ge,Ie;const Ge=[];for(let bt=0;bt<G.length&&!((q-=2)<0);++bt)W=G.charCodeAt(bt),ge=W>>8,Ie=W%256,Ge.push(Ie),Ge.push(ge);return Ge}function Be(G){return E.toByteArray(de(G))}function rt(G,q,W,ge){let Ie;for(Ie=0;Ie<ge&&!(Ie+W>=q.length||Ie>=G.length);++Ie)q[Ie+W]=G[Ie];return Ie}function ye(G,q){return G instanceof q||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===q.name}function we(G){return G!==G}const Ue=function(){const G="0123456789abcdef",q=new Array(256);for(let W=0;W<16;++W){const ge=W*16;for(let Ie=0;Ie<16;++Ie)q[ge+Ie]=G[W]+G[Ie]}return q}();function Et(G){return typeof BigInt>"u"?me:G}function me(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(NE)),NE}var IE,WM;function os(){if(WM)return IE;WM=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let s=0;s<n.length;s++)r+=`    ${n[s].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return IE={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},IE}var jE={exports:{}},ME,ZM;function v9(){return ZM||(ZM=1,ME={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const s=t.shift();return r==="f"?s.toFixed(6):r==="j"?JSON.stringify(s):r==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),ME}var DE,YM;function Ki(){if(YM)return DE;YM=1;const{format:e,inspect:t}=v9(),{AggregateError:n}=os(),r=globalThis.AggregateError||n,s=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function c(w,x){if(!w)throw new l.ERR_INTERNAL_ASSERTION(x)}function d(w){let x="",_=w.length;const E=w[0]==="-"?1:0;for(;_>=E+4;_-=3)x=`_${w.slice(_-3,_)}${x}`;return`${w.slice(0,_)}${x}`}function h(w,x,_){if(typeof x=="function")return c(x.length<=_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${x.length}).`),x(..._);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${E}).`),_.length===0?x:e(x,..._)}function m(w,x,_){_||(_=Error);class E extends _{constructor(...T){super(h(w,x,T))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=w,E.prototype[s]=!0,l[w]=E}function g(w){const x=o+w.name;return Object.defineProperty(w,"name",{value:x}),w}function v(w,x){if(w&&x&&w!==x){if(Array.isArray(x.errors))return x.errors.push(w),x;const _=new r([x,w],x.message);return _.code=x.code,_}return w||x}class b extends Error{constructor(x="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",_);super(x,_),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(w,x,_)=>{c(typeof w=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";w.endsWith(" argument")?E+=`${w} `:E+=`"${w}" ${w.includes(".")?"property":"argument"} `,E+="must be ";const k=[],T=[],R=[];for(const I of x)c(typeof I=="string","All expected entries have to be of type string"),i.includes(I)?k.push(I.toLowerCase()):a.test(I)?T.push(I):(c(I!=="object",'The value "object" should be written as "Object"'),R.push(I));if(T.length>0){const I=k.indexOf("object");I!==-1&&(k.splice(k,I,1),T.push("Object"))}if(k.length>0){switch(k.length){case 1:E+=`of type ${k[0]}`;break;case 2:E+=`one of type ${k[0]} or ${k[1]}`;break;default:{const I=k.pop();E+=`one of type ${k.join(", ")}, or ${I}`}}(T.length>0||R.length>0)&&(E+=" or ")}if(T.length>0){switch(T.length){case 1:E+=`an instance of ${T[0]}`;break;case 2:E+=`an instance of ${T[0]} or ${T[1]}`;break;default:{const I=T.pop();E+=`an instance of ${T.join(", ")}, or ${I}`}}R.length>0&&(E+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(E+="an "),E+=`${R[0]}`;break;case 2:E+=`one of ${R[0]} or ${R[1]}`;break;default:{const I=R.pop();E+=`one of ${R.join(", ")}, or ${I}`}}if(_==null)E+=`. Received ${_}`;else if(typeof _=="function"&&_.name)E+=`. Received function ${_.name}`;else if(typeof _=="object"){var M;if((M=_.constructor)!==null&&M!==void 0&&M.name)E+=`. Received an instance of ${_.constructor.name}`;else{const I=t(_,{depth:-1});E+=`. Received ${I}`}}else{let I=t(_,{colors:!1});I.length>25&&(I=`${I.slice(0,25)}...`),E+=`. Received type ${typeof _} (${I})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(w,x,_="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${_}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(w,x,_)=>{var E;const k=_!=null&&(E=_.constructor)!==null&&E!==void 0&&E.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${w} to be returned from the "${x}" function but got ${k}.`},TypeError),m("ERR_MISSING_ARGS",(...w)=>{c(w.length>0,"At least one arg needs to be specified");let x;const _=w.length;switch(w=(Array.isArray(w)?w:[w]).map(E=>`"${E}"`).join(" or "),_){case 1:x+=`The ${w[0]} argument`;break;case 2:x+=`The ${w[0]} and ${w[1]} arguments`;break;default:{const E=w.pop();x+=`The ${w.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(w,x,_)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(_)&&Math.abs(_)>2**32)E=d(String(_));else if(typeof _=="bigint"){E=String(_);const k=BigInt(2)**BigInt(32);(_>k||_<-k)&&(E=d(E)),E+="n"}else E=t(_);return`The value of "${w}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),DE={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:l},DE}var $g={exports:{}},XM;function H0(){if(XM)return $g.exports;XM=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return $g.exports=e,$g.exports.AbortSignal=t,$g.exports.default=e,$g.exports}var Gv={exports:{}},JM;function D1(){if(JM)return Gv.exports;JM=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(T,R,M){return Function.prototype.apply.call(T,R,M)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:n=function(T){return Object.getOwnPropertyNames(T)};function r(k){console&&console.warn&&console.warn(k)}var s=Number.isNaN||function(T){return T!==T};function i(){i.init.call(this)}Gv.exports=i,Gv.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function o(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");a=k}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function l(k){return k._maxListeners===void 0?i.defaultMaxListeners:k._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(T){for(var R=[],M=1;M<arguments.length;M++)R.push(arguments[M]);var I=T==="error",O=this._events;if(O!==void 0)I=I&&O.error===void 0;else if(!I)return!1;if(I){var P;if(R.length>0&&(P=R[0]),P instanceof Error)throw P;var U=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw U.context=P,U}var j=O[T];if(j===void 0)return!1;if(typeof j=="function")t(j,this,R);else for(var V=j.length,$=v(j,V),M=0;M<V;++M)t($[M],this,R);return!0};function c(k,T,R,M){var I,O,P;if(o(R),O=k._events,O===void 0?(O=k._events=Object.create(null),k._eventsCount=0):(O.newListener!==void 0&&(k.emit("newListener",T,R.listener?R.listener:R),O=k._events),P=O[T]),P===void 0)P=O[T]=R,++k._eventsCount;else if(typeof P=="function"?P=O[T]=M?[R,P]:[P,R]:M?P.unshift(R):P.push(R),I=l(k),I>0&&P.length>I&&!P.warned){P.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=k,U.type=T,U.count=P.length,r(U)}return k}i.prototype.addListener=function(T,R){return c(this,T,R,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(T,R){return c(this,T,R,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(k,T,R){var M={fired:!1,wrapFn:void 0,target:k,type:T,listener:R},I=d.bind(M);return I.listener=R,M.wrapFn=I,I}i.prototype.once=function(T,R){return o(R),this.on(T,h(this,T,R)),this},i.prototype.prependOnceListener=function(T,R){return o(R),this.prependListener(T,h(this,T,R)),this},i.prototype.removeListener=function(T,R){var M,I,O,P,U;if(o(R),I=this._events,I===void 0)return this;if(M=I[T],M===void 0)return this;if(M===R||M.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete I[T],I.removeListener&&this.emit("removeListener",T,M.listener||R));else if(typeof M!="function"){for(O=-1,P=M.length-1;P>=0;P--)if(M[P]===R||M[P].listener===R){U=M[P].listener,O=P;break}if(O<0)return this;O===0?M.shift():b(M,O),M.length===1&&(I[T]=M[0]),I.removeListener!==void 0&&this.emit("removeListener",T,U||R)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(T){var R,M,I;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[T]),this;if(arguments.length===0){var O=Object.keys(M),P;for(I=0;I<O.length;++I)P=O[I],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=M[T],typeof R=="function")this.removeListener(T,R);else if(R!==void 0)for(I=R.length-1;I>=0;I--)this.removeListener(T,R[I]);return this};function m(k,T,R){var M=k._events;if(M===void 0)return[];var I=M[T];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?w(I):v(I,I.length)}i.prototype.listeners=function(T){return m(this,T,!0)},i.prototype.rawListeners=function(T){return m(this,T,!1)},i.listenerCount=function(k,T){return typeof k.listenerCount=="function"?k.listenerCount(T):g.call(k,T)},i.prototype.listenerCount=g;function g(k){var T=this._events;if(T!==void 0){var R=T[k];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(k,T){for(var R=new Array(T),M=0;M<T;++M)R[M]=k[M];return R}function b(k,T){for(;T+1<k.length;T++)k[T]=k[T+1];k.pop()}function w(k){for(var T=new Array(k.length),R=0;R<T.length;++R)T[R]=k[R].listener||k[R];return T}function x(k,T){return new Promise(function(R,M){function I(P){k.removeListener(T,O),M(P)}function O(){typeof k.removeListener=="function"&&k.removeListener("error",I),R([].slice.call(arguments))}E(k,T,O,{once:!0}),T!=="error"&&_(k,I,{once:!0})})}function _(k,T,R){typeof k.on=="function"&&E(k,"error",T,R)}function E(k,T,R,M){if(typeof k.on=="function")M.once?k.once(T,R):k.on(T,R);else if(typeof k.addEventListener=="function")k.addEventListener(T,function I(O){M.once&&k.removeEventListener(T,I),R(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return Gv.exports}var QM;function la(){return QM||(QM=1,function(e){const t=gd(),{format:n,inspect:r}=v9(),{codes:{ERR_INVALID_ARG_TYPE:s}}=Ki(),{kResistStopPropagation:i,AggregateError:a,SymbolDispose:o}=os(),l=globalThis.AbortSignal||H0().AbortSignal,c=globalThis.AbortController||H0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(w){return w instanceof h}:function(w){return!1},g=(b,w)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new s(w,"AbortSignal",b)},v=(b,w)=>{if(typeof b!="function")throw new s(w,"Function",b)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(b){let w=!1;return function(...x){w||(w=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,w;return{promise:new Promise((_,E)=>{b=_,w=E}),resolve:b,reject:w}},promisify(b){return new Promise((w,x)=>{b((_,...E)=>_?x(_):w(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,w){return b},addAbortListener:D1().addAbortListener||function(w,x){if(w===void 0)throw new s("signal","AbortSignal",w);g(w,"signal"),v(x,"listener");let _;return w.aborted?queueMicrotask(()=>x()):(w.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),_=()=>{w.removeEventListener("abort",x)}),{__proto__:null,[o](){var E;(E=_)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const x=new c,_=()=>x.abort();return w.forEach(E=>{g(E,"signals"),E.addEventListener("abort",_,{once:!0})}),x.signal.addEventListener("abort",()=>{w.forEach(E=>E.removeEventListener("abort",_))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(jE)),jE.exports}var Kv={},OE,e6;function zy(){if(e6)return OE;e6=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:s,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=os(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=Ki(),{normalizeEncoding:k}=la(),{isAsyncFunction:T,isArrayBufferView:R}=la().types,M={};function I(ne){return ne===(ne|0)}function O(ne){return ne===ne>>>0}const P=/^[0-7]+$/,U="must be a 32-bit unsigned integer or an octal string";function j(ne,Ee,Le){if(typeof ne>"u"&&(ne=Le),typeof ne=="string"){if(d(P,ne)===null)throw new x(Ee,ne,U);ne=l(ne,8)}return re(ne,Ee),ne}const V=v((ne,Ee,Le=o,Te=a)=>{if(typeof ne!="number")throw new w(Ee,"number",ne);if(!s(ne))throw new _(Ee,"an integer",ne);if(ne<Le||ne>Te)throw new _(Ee,`>= ${Le} && <= ${Te}`,ne)}),$=v((ne,Ee,Le=-2147483648,Te=2147483647)=>{if(typeof ne!="number")throw new w(Ee,"number",ne);if(!s(ne))throw new _(Ee,"an integer",ne);if(ne<Le||ne>Te)throw new _(Ee,`>= ${Le} && <= ${Te}`,ne)}),re=v((ne,Ee,Le=!1)=>{if(typeof ne!="number")throw new w(Ee,"number",ne);if(!s(ne))throw new _(Ee,"an integer",ne);const Te=Le?1:0,Xe=4294967295;if(ne<Te||ne>Xe)throw new _(Ee,`>= ${Te} && <= ${Xe}`,ne)});function J(ne,Ee){if(typeof ne!="string")throw new w(Ee,"string",ne)}function te(ne,Ee,Le=void 0,Te){if(typeof ne!="number")throw new w(Ee,"number",ne);if(Le!=null&&ne<Le||Te!=null&&ne>Te||(Le!=null||Te!=null)&&i(ne))throw new _(Ee,`${Le!=null?`>= ${Le}`:""}${Le!=null&&Te!=null?" && ":""}${Te!=null?`<= ${Te}`:""}`,ne)}const X=v((ne,Ee,Le)=>{if(!t(Le,ne)){const Xe="must be one of: "+n(r(Le,St=>typeof St=="string"?`'${St}'`:h(St)),", ");throw new x(Ee,ne,Xe)}});function ie(ne,Ee){if(typeof ne!="boolean")throw new w(Ee,"boolean",ne)}function Z(ne,Ee,Le){return ne==null||!c(ne,Ee)?Le:ne[Ee]}const ee=v((ne,Ee,Le=null)=>{const Te=Z(Le,"allowArray",!1),Xe=Z(Le,"allowFunction",!1);if(!Z(Le,"nullable",!1)&&ne===null||!Te&&e(ne)||typeof ne!="object"&&(!Xe||typeof ne!="function"))throw new w(Ee,"Object",ne)}),Q=v((ne,Ee)=>{if(ne!=null&&typeof ne!="object"&&typeof ne!="function")throw new w(Ee,"a dictionary",ne)}),he=v((ne,Ee,Le=0)=>{if(!e(ne))throw new w(Ee,"Array",ne);if(ne.length<Le){const Te=`must be longer than ${Le}`;throw new x(Ee,ne,Te)}});function Se(ne,Ee){he(ne,Ee);for(let Le=0;Le<ne.length;Le++)J(ne[Le],`${Ee}[${Le}]`)}function ce(ne,Ee){he(ne,Ee);for(let Le=0;Le<ne.length;Le++)ie(ne[Le],`${Ee}[${Le}]`)}function je(ne,Ee){he(ne,Ee);for(let Le=0;Le<ne.length;Le++){const Te=ne[Le],Xe=`${Ee}[${Le}]`;if(Te==null)throw new w(Xe,"AbortSignal",Te);st(Te,Xe)}}function De(ne,Ee="signal"){if(J(ne,Ee),M[ne]===void 0)throw M[m(ne)]!==void 0?new E(ne+" (signals must use all capital letters)"):new E(ne)}const Re=v((ne,Ee="buffer")=>{if(!R(ne))throw new w(Ee,["Buffer","TypedArray","DataView"],ne)});function xe(ne,Ee){const Le=k(Ee),Te=ne.length;if(Le==="hex"&&Te%2!==0)throw new x("encoding",Ee,`is invalid for data of length ${Te}`)}function Fe(ne,Ee="Port",Le=!0){if(typeof ne!="number"&&typeof ne!="string"||typeof ne=="string"&&g(ne).length===0||+ne!==+ne>>>0||ne>65535||ne===0&&!Le)throw new b(Ee,ne,Le);return ne|0}const st=v((ne,Ee)=>{if(ne!==void 0&&(ne===null||typeof ne!="object"||!("aborted"in ne)))throw new w(Ee,"AbortSignal",ne)}),He=v((ne,Ee)=>{if(typeof ne!="function")throw new w(Ee,"Function",ne)}),Ne=v((ne,Ee)=>{if(typeof ne!="function"||T(ne))throw new w(Ee,"Function",ne)}),H=v((ne,Ee)=>{if(ne!==void 0)throw new w(Ee,"undefined",ne)});function ue(ne,Ee,Le){if(!t(Le,ne))throw new w(Ee,`('${n(Le,"|")}')`,ne)}const ke=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ae(ne,Ee){if(typeof ne>"u"||!d(ke,ne))throw new x(Ee,ne,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe(ne){if(typeof ne=="string")return ae(ne,"hints"),ne;if(e(ne)){const Ee=ne.length;let Le="";if(Ee===0)return Le;for(let Te=0;Te<Ee;Te++){const Xe=ne[Te];ae(Xe,"hints"),Le+=Xe,Te!==Ee-1&&(Le+=", ")}return Le}throw new x("hints",ne,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return OE={isInt32:I,isUint32:O,parseFileMode:j,validateArray:he,validateStringArray:Se,validateBooleanArray:ce,validateAbortSignalArray:je,validateBoolean:ie,validateBuffer:Re,validateDictionary:Q,validateEncoding:xe,validateFunction:He,validateInt32:$,validateInteger:V,validateNumber:te,validateObject:ee,validateOneOf:X,validatePlainFunction:Ne,validatePort:Fe,validateSignalName:De,validateString:J,validateUint32:re,validateUndefined:H,validateUnion:ue,validateAbortSignal:st,validateLinkHeaderValue:oe},OE}var Wv={exports:{}},PE={},t6;function Zf(){return t6||(t6=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}var n={exports:{}},r=n.exports={},s,i;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=a}catch{s=a}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(k){if(s===setTimeout)return setTimeout(k,0);if((s===a||!s)&&setTimeout)return s=setTimeout,setTimeout(k,0);try{return s(k,0)}catch{try{return s.call(null,k,0)}catch{return s.call(this,k,0)}}}function c(k){if(i===clearTimeout)return clearTimeout(k);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(k);try{return i(k)}catch{try{return i.call(null,k)}catch{return i.call(this,k)}}}var d=[],h=!1,m,g=-1;function v(){!h||!m||(h=!1,m.length?d=m.concat(d):g=-1,d.length&&b())}function b(){if(!h){var k=l(v);h=!0;for(var T=d.length;T;){for(m=d,d=[];++g<T;)m&&m[g].run();g=-1,T=d.length}m=null,h=!1,c(k)}}r.nextTick=function(k){var T=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)T[R-1]=arguments[R];d.push(new w(k,T)),d.length===1&&!h&&l(b)};function w(k,T){this.fun=k,this.array=T}w.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(k){return[]},r.binding=function(k){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(k){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var _=n.exports;const E=t(_);e.default=E,e.process=E}(PE)),PE}var FE,n6;function Gc(){if(n6)return FE;n6=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=os(),r=n("nodejs.stream.destroyed"),s=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),a=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function d(Z,ee=!1){var Q;return!!(Z&&typeof Z.pipe=="function"&&typeof Z.on=="function"&&(!ee||typeof Z.pause=="function"&&typeof Z.resume=="function")&&(!Z._writableState||((Q=Z._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!Z._writableState||Z._readableState))}function h(Z){var ee;return!!(Z&&typeof Z.write=="function"&&typeof Z.on=="function"&&(!Z._readableState||((ee=Z._writableState)===null||ee===void 0?void 0:ee.writable)!==!1))}function m(Z){return!!(Z&&typeof Z.pipe=="function"&&Z._readableState&&typeof Z.on=="function"&&typeof Z.write=="function")}function g(Z){return Z&&(Z._readableState||Z._writableState||typeof Z.write=="function"&&typeof Z.on=="function"||typeof Z.pipe=="function"&&typeof Z.on=="function")}function v(Z){return!!(Z&&!g(Z)&&typeof Z.pipeThrough=="function"&&typeof Z.getReader=="function"&&typeof Z.cancel=="function")}function b(Z){return!!(Z&&!g(Z)&&typeof Z.getWriter=="function"&&typeof Z.abort=="function")}function w(Z){return!!(Z&&!g(Z)&&typeof Z.readable=="object"&&typeof Z.writable=="object")}function x(Z){return v(Z)||b(Z)||w(Z)}function _(Z,ee){return Z==null?!1:ee===!0?typeof Z[e]=="function":ee===!1?typeof Z[t]=="function":typeof Z[e]=="function"||typeof Z[t]=="function"}function E(Z){if(!g(Z))return null;const ee=Z._writableState,Q=Z._readableState,he=ee||Q;return!!(Z.destroyed||Z[r]||he!=null&&he.destroyed)}function k(Z){if(!h(Z))return null;if(Z.writableEnded===!0)return!0;const ee=Z._writableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.ended)!="boolean"?null:ee.ended}function T(Z,ee){if(!h(Z))return null;if(Z.writableFinished===!0)return!0;const Q=Z._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||ee===!1&&Q.ended===!0&&Q.length===0)}function R(Z){if(!d(Z))return null;if(Z.readableEnded===!0)return!0;const ee=Z._readableState;return!ee||ee.errored?!1:typeof(ee==null?void 0:ee.ended)!="boolean"?null:ee.ended}function M(Z,ee){if(!d(Z))return null;const Q=Z._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||ee===!1&&Q.ended===!0&&Q.length===0)}function I(Z){return Z&&Z[i]!=null?Z[i]:typeof(Z==null?void 0:Z.readable)!="boolean"?null:E(Z)?!1:d(Z)&&Z.readable&&!M(Z)}function O(Z){return Z&&Z[a]!=null?Z[a]:typeof(Z==null?void 0:Z.writable)!="boolean"?null:E(Z)?!1:h(Z)&&Z.writable&&!k(Z)}function P(Z,ee){return g(Z)?E(Z)?!0:!((ee==null?void 0:ee.readable)!==!1&&I(Z)||(ee==null?void 0:ee.writable)!==!1&&O(Z)):null}function U(Z){var ee,Q;return g(Z)?Z.writableErrored?Z.writableErrored:(ee=(Q=Z._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&ee!==void 0?ee:null:null}function j(Z){var ee,Q;return g(Z)?Z.readableErrored?Z.readableErrored:(ee=(Q=Z._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&ee!==void 0?ee:null:null}function V(Z){if(!g(Z))return null;if(typeof Z.closed=="boolean")return Z.closed;const ee=Z._writableState,Q=Z._readableState;return typeof(ee==null?void 0:ee.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(ee==null?void 0:ee.closed)||(Q==null?void 0:Q.closed):typeof Z._closed=="boolean"&&$(Z)?Z._closed:null}function $(Z){return typeof Z._closed=="boolean"&&typeof Z._defaultKeepAlive=="boolean"&&typeof Z._removedConnection=="boolean"&&typeof Z._removedContLen=="boolean"}function re(Z){return typeof Z._sent100=="boolean"&&$(Z)}function J(Z){var ee;return typeof Z._consuming=="boolean"&&typeof Z._dumped=="boolean"&&((ee=Z.req)===null||ee===void 0?void 0:ee.upgradeOrConnect)===void 0}function te(Z){if(!g(Z))return null;const ee=Z._writableState,Q=Z._readableState,he=ee||Q;return!he&&re(Z)||!!(he&&he.autoDestroy&&he.emitClose&&he.closed===!1)}function X(Z){var ee;return!!(Z&&((ee=Z[o])!==null&&ee!==void 0?ee:Z.readableDidRead||Z.readableAborted))}function ie(Z){var ee,Q,he,Se,ce,je,De,Re,xe,Fe;return!!(Z&&((ee=(Q=(he=(Se=(ce=(je=Z[s])!==null&&je!==void 0?je:Z.readableErrored)!==null&&ce!==void 0?ce:Z.writableErrored)!==null&&Se!==void 0?Se:(De=Z._readableState)===null||De===void 0?void 0:De.errorEmitted)!==null&&he!==void 0?he:(Re=Z._writableState)===null||Re===void 0?void 0:Re.errorEmitted)!==null&&Q!==void 0?Q:(xe=Z._readableState)===null||xe===void 0?void 0:xe.errored)!==null&&ee!==void 0?ee:!((Fe=Z._writableState)===null||Fe===void 0)&&Fe.errored))}return FE={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:o,isErrored:ie,kIsErrored:s,isReadable:I,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:a,isClosed:V,isDuplexNodeStream:m,isFinished:P,isIterable:_,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:R,isReadableFinished:M,isReadableErrored:j,isNodeStream:g,isWebStream:x,isWritable:O,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:k,isWritableFinished:T,isWritableErrored:U,isServerRequest:J,isServerResponse:re,willEmitClose:te,isTransformStream:w},FE}var r6;function yd(){if(r6)return Wv.exports;r6=1;const e=Zf(),{AbortError:t,codes:n}=Ki(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:s}=n,{kEmptyObject:i,once:a}=la(),{validateAbortSignal:o,validateFunction:l,validateObject:c,validateBoolean:d}=zy(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=os(),{isClosed:v,isReadable:b,isReadableNodeStream:w,isReadableStream:x,isReadableFinished:_,isReadableErrored:E,isWritable:k,isWritableNodeStream:T,isWritableStream:R,isWritableFinished:M,isWritableErrored:I,isNodeStream:O,willEmitClose:P,kIsClosedPromise:U}=Gc();let j;function V(X){return X.setHeader&&typeof X.abort=="function"}const $=()=>{};function re(X,ie,Z){var ee,Q;if(arguments.length===2?(Z=ie,ie=i):ie==null?ie=i:c(ie,"options"),l(Z,"callback"),o(ie.signal,"options.signal"),Z=a(Z),x(X)||R(X))return J(X,ie,Z);if(!O(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const he=(ee=ie.readable)!==null&&ee!==void 0?ee:w(X),Se=(Q=ie.writable)!==null&&Q!==void 0?Q:T(X),ce=X._writableState,je=X._readableState,De=()=>{X.writable||Fe()};let Re=P(X)&&w(X)===he&&T(X)===Se,xe=M(X,!1);const Fe=()=>{xe=!0,X.destroyed&&(Re=!1),!(Re&&(!X.readable||he))&&(!he||st)&&Z.call(X)};let st=_(X,!1);const He=()=>{st=!0,X.destroyed&&(Re=!1),!(Re&&(!X.writable||Se))&&(!Se||xe)&&Z.call(X)},Ne=ne=>{Z.call(X,ne)};let H=v(X);const ue=()=>{H=!0;const ne=I(X)||E(X);if(ne&&typeof ne!="boolean")return Z.call(X,ne);if(he&&!st&&w(X,!0)&&!_(X,!1))return Z.call(X,new s);if(Se&&!xe&&!M(X,!1))return Z.call(X,new s);Z.call(X)},ke=()=>{H=!0;const ne=I(X)||E(X);if(ne&&typeof ne!="boolean")return Z.call(X,ne);Z.call(X)},ae=()=>{X.req.on("finish",Fe)};V(X)?(X.on("complete",Fe),Re||X.on("abort",ue),X.req?ae():X.on("request",ae)):Se&&!ce&&(X.on("end",De),X.on("close",De)),!Re&&typeof X.aborted=="boolean"&&X.on("aborted",ue),X.on("end",He),X.on("finish",Fe),ie.error!==!1&&X.on("error",Ne),X.on("close",ue),H?e.nextTick(ue):ce!=null&&ce.errorEmitted||je!=null&&je.errorEmitted?Re||e.nextTick(ke):(!he&&(!Re||b(X))&&(xe||k(X)===!1)||!Se&&(!Re||k(X))&&(st||b(X)===!1)||je&&X.req&&X.aborted)&&e.nextTick(ke);const oe=()=>{Z=$,X.removeListener("aborted",ue),X.removeListener("complete",Fe),X.removeListener("abort",ue),X.removeListener("request",ae),X.req&&X.req.removeListener("finish",Fe),X.removeListener("end",De),X.removeListener("close",De),X.removeListener("finish",Fe),X.removeListener("end",He),X.removeListener("error",Ne),X.removeListener("close",ue)};if(ie.signal&&!H){const ne=()=>{const Ee=Z;oe(),Ee.call(X,new t(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)e.nextTick(ne);else{j=j||la().addAbortListener;const Ee=j(ie.signal,ne),Le=Z;Z=a((...Te)=>{Ee[g](),Le.apply(X,Te)})}}return oe}function J(X,ie,Z){let ee=!1,Q=$;if(ie.signal)if(Q=()=>{ee=!0,Z.call(X,new t(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)e.nextTick(Q);else{j=j||la().addAbortListener;const Se=j(ie.signal,Q),ce=Z;Z=a((...je)=>{Se[g](),ce.apply(X,je)})}const he=(...Se)=>{ee||e.nextTick(()=>Z.apply(X,Se))};return m(X[U].promise,he,he),$}function te(X,ie){var Z;let ee=!1;return ie===null&&(ie=i),(Z=ie)!==null&&Z!==void 0&&Z.cleanup&&(d(ie.cleanup,"cleanup"),ee=ie.cleanup),new h((Q,he)=>{const Se=re(X,ie,ce=>{ee&&Se(),ce?he(ce):Q()})})}return Wv.exports=re,Wv.exports.finished=te,Wv.exports}var LE,s6;function om(){if(s6)return LE;s6=1;const e=Zf(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=Ki(),{Symbol:s}=os(),{kIsDestroyed:i,isDestroyed:a,isFinished:o,isServerRequest:l}=Gc(),c=s("kDestroy"),d=s("kConstruct");function h(P,U,j){P&&(P.stack,U&&!U.errored&&(U.errored=P),j&&!j.errored&&(j.errored=P))}function m(P,U){const j=this._readableState,V=this._writableState,$=V||j;return V!=null&&V.destroyed||j!=null&&j.destroyed?(typeof U=="function"&&U(),this):(h(P,V,j),V&&(V.destroyed=!0),j&&(j.destroyed=!0),$.constructed?g(this,P,U):this.once(c,function(re){g(this,t(re,P),U)}),this)}function g(P,U,j){let V=!1;function $(re){if(V)return;V=!0;const J=P._readableState,te=P._writableState;h(re,te,J),te&&(te.closed=!0),J&&(J.closed=!0),typeof j=="function"&&j(re),re?e.nextTick(v,P,re):e.nextTick(b,P)}try{P._destroy(U||null,$)}catch(re){$(re)}}function v(P,U){w(P,U),b(P)}function b(P){const U=P._readableState,j=P._writableState;j&&(j.closeEmitted=!0),U&&(U.closeEmitted=!0),(j!=null&&j.emitClose||U!=null&&U.emitClose)&&P.emit("close")}function w(P,U){const j=P._readableState,V=P._writableState;V!=null&&V.errorEmitted||j!=null&&j.errorEmitted||(V&&(V.errorEmitted=!0),j&&(j.errorEmitted=!0),P.emit("error",U))}function x(){const P=this._readableState,U=this._writableState;P&&(P.constructed=!0,P.closed=!1,P.closeEmitted=!1,P.destroyed=!1,P.errored=null,P.errorEmitted=!1,P.reading=!1,P.ended=P.readable===!1,P.endEmitted=P.readable===!1),U&&(U.constructed=!0,U.destroyed=!1,U.closed=!1,U.closeEmitted=!1,U.errored=null,U.errorEmitted=!1,U.finalCalled=!1,U.prefinished=!1,U.ended=U.writable===!1,U.ending=U.writable===!1,U.finished=U.writable===!1)}function _(P,U,j){const V=P._readableState,$=P._writableState;if($!=null&&$.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||$!=null&&$.autoDestroy?P.destroy(U):U&&(U.stack,$&&!$.errored&&($.errored=U),V&&!V.errored&&(V.errored=U),j?e.nextTick(w,P,U):w(P,U))}function E(P,U){if(typeof P._construct!="function")return;const j=P._readableState,V=P._writableState;j&&(j.constructed=!1),V&&(V.constructed=!1),P.once(d,U),!(P.listenerCount(d)>1)&&e.nextTick(k,P)}function k(P){let U=!1;function j(V){if(U){_(P,V??new n);return}U=!0;const $=P._readableState,re=P._writableState,J=re||$;$&&($.constructed=!0),re&&(re.constructed=!0),J.destroyed?P.emit(c,V):V?_(P,V,!0):e.nextTick(T,P)}try{P._construct(V=>{e.nextTick(j,V)})}catch(V){e.nextTick(j,V)}}function T(P){P.emit(d)}function R(P){return(P==null?void 0:P.setHeader)&&typeof P.abort=="function"}function M(P){P.emit("close")}function I(P,U){P.emit("error",U),e.nextTick(M,P)}function O(P,U){!P||a(P)||(!U&&!o(P)&&(U=new r),l(P)?(P.socket=null,P.destroy(U)):R(P)?P.abort():R(P.req)?P.req.abort():typeof P.destroy=="function"?P.destroy(U):typeof P.close=="function"?P.close():U?e.nextTick(I,P,U):e.nextTick(M,P),P.destroyed||(P[i]=!0))}return LE={construct:E,destroyer:O,destroy:m,undestroy:x,errorOrDestroy:_},LE}var $E,i6;function gR(){if(i6)return $E;i6=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=os(),{EventEmitter:n}=D1();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,a){const o=this;function l(b){i.writable&&i.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function c(){o.readable&&o.resume&&o.resume()}i.on("drain",c),!i._isStdio&&(!a||a.end!==!1)&&(o.on("end",h),o.on("close",m));let d=!1;function h(){d||(d=!0,i.end())}function m(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}s(o,"error",g),s(i,"error",g);function v(){o.removeListener("data",l),i.removeListener("drain",c),o.removeListener("end",h),o.removeListener("close",m),o.removeListener("error",g),i.removeListener("error",g),o.removeListener("end",v),o.removeListener("close",v),i.removeListener("close",v)}return o.on("end",v),o.on("close",v),i.on("close",v),i.emit("pipe",o),i};function s(i,a,o){if(typeof i.prependListener=="function")return i.prependListener(a,o);!i._events||!i._events[a]?i.on(a,o):e(i._events[a])?i._events[a].unshift(o):i._events[a]=[o,i._events[a]]}return $E={Stream:r,prependListener:s},$E}var BE={exports:{}},a6;function O1(){return a6||(a6=1,function(e){const{SymbolDispose:t}=os(),{AbortError:n,codes:r}=Ki(),{isNodeStream:s,isWebStream:i,kControllerErrorFunction:a}=Gc(),o=yd(),{ERR_INVALID_ARG_TYPE:l}=r;let c;const d=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new l(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(d(m,"signal"),!s(g)&&!i(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=s(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[a](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||la().addAbortListener;const v=c(h,g);o(m,v[t])}return m}}(BE)),BE.exports}var zE,o6;function _ae(){if(o6)return zE;o6=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=os(),{Buffer:s}=gd(),{inspect:i}=la();return zE=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,c=""+l.data;for(;(l=l.next)!==null;)c+=o+l.data;return c}concat(o){if(this.length===0)return s.alloc(0);const l=s.allocUnsafe(o>>>0);let c=this.head,d=0;for(;c;)n(l,c.data,d),d+=c.data.length,c=c.next;return l}consume(o,l){const c=this.head.data;if(o<c.length){const d=c.slice(0,o);return this.head.data=c.slice(o),d}return o===c.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",c=this.head,d=0;do{const h=c.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,c.next?this.head=c.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=c,c.data=e(h,o));break}++d}while((c=c.next)!==null);return this.length-=d,l}_getBuffer(o){const l=s.allocUnsafe(o),c=o;let d=this.head,h=0;do{const m=d.data;if(o>m.length)n(l,m,c-o),o-=m.length;else{o===m.length?(n(l,m,c-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(m.buffer,m.byteOffset,o),c-o),this.head=d,d.data=m.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},zE}var UE,l6;function P1(){if(l6)return UE;l6=1;const{MathFloor:e,NumberIsInteger:t}=os(),{validateInteger:n}=zy(),{ERR_INVALID_ARG_VALUE:r}=Ki().codes;let s=16*1024,i=16;function a(d,h,m){return d.highWaterMark!=null?d.highWaterMark:h?d[m]:null}function o(d){return d?i:s}function l(d,h){n(h,"value",0),d?i=h:s=h}function c(d,h,m,g){const v=a(h,g,m);if(v!=null){if(!t(v)||v<0){const b=g?`options.${m}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return o(d.objectMode)}return UE={getHighWaterMark:c,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},UE}var qE={},Zv={exports:{}},c6;function yR(){return c6||(c6=1,function(e,t){var n=gd(),r=n.Buffer;function s(a,o){for(var l in a)o[l]=a[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=i);function i(a,o,l){return r(a,o,l)}s(r,i),i.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,o,l)},i.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=r(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}}(Zv,Zv.exports)),Zv.exports}var u6;function Sae(){if(u6)return qE;u6=1;var e=yR().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var _;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(_)return;x=(""+x).toLowerCase(),_=!0}}function r(x){var _=n(x);if(typeof _!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return _||x}qE.StringDecoder=s;function s(x){this.encoding=r(x);var _;switch(this.encoding){case"utf16le":this.text=h,this.end=m,_=4;break;case"utf8":this.fillLast=l,_=4;break;case"base64":this.text=g,this.end=v,_=3;break;default:this.write=b,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}s.prototype.write=function(x){if(x.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(x),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?_?_+this.text(x,E):this.text(x,E):_||""},s.prototype.end=d,s.prototype.text=c,s.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function a(x,_,E){var k=_.length-1;if(k<E)return 0;var T=i(_[k]);return T>=0?(T>0&&(x.lastNeed=T-1),T):--k<E||T===-2?0:(T=i(_[k]),T>=0?(T>0&&(x.lastNeed=T-2),T):--k<E||T===-2?0:(T=i(_[k]),T>=0?(T>0&&(T===2?T=0:x.lastNeed=T-3),T):0))}function o(x,_,E){if((_[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var _=this.lastTotal-this.lastNeed,E=o(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,_,0,x.length),this.lastNeed-=x.length}function c(x,_){var E=a(this,x,_);if(!this.lastNeed)return x.toString("utf8",_);this.lastTotal=E;var k=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,k),x.toString("utf8",_,k)}function d(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+"":_}function h(x,_){if((x.length-_)%2===0){var E=x.toString("utf16le",_);if(E){var k=E.charCodeAt(E.length-1);if(k>=55296&&k<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",_,x.length-1)}function m(x){var _=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function g(x,_){var E=(x.length-_)%3;return E===0?x.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",_,x.length-E))}function v(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function b(x){return x.toString(this.encoding)}function w(x){return x&&x.length?this.write(x):""}return qE}var VE,d6;function w9(){if(d6)return VE;d6=1;const e=Zf(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=os(),{Buffer:s}=gd(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:a}=Ki().codes;function o(l,c,d){let h;if(typeof c=="string"||c instanceof s)return new l({objectMode:!0,...d,read(){this.push(c),this.push(null)}});let m;if(c&&c[n])m=!0,h=c[n]();else if(c&&c[r])m=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;g._read=function(){v||(v=!0,w())},g._destroy=function(x,_){t(b(x),()=>e.nextTick(_,x),E=>e.nextTick(_,E||x))};async function b(x){const _=x!=null,E=typeof h.throw=="function";if(_&&E){const{value:k,done:T}=await h.throw(x);if(await k,T)return}if(typeof h.return=="function"){const{value:k}=await h.return();await k}}async function w(){for(;;){try{const{value:x,done:_}=m?await h.next():h.next();if(_)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new a;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return VE=o,VE}var HE,f6;function F1(){if(f6)return HE;f6=1;const e=Zf(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:s,ObjectDefineProperties:i,ObjectKeys:a,ObjectSetPrototypeOf:o,Promise:l,SafeSet:c,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:m}=os();HE=Te,Te.ReadableState=Le;const{EventEmitter:g}=D1(),{Stream:v,prependListener:b}=gR(),{Buffer:w}=gd(),{addAbortSignal:x}=O1(),_=yd();let E=la().debuglog("stream",me=>{E=me});const k=_ae(),T=om(),{getHighWaterMark:R,getDefaultHighWaterMark:M}=P1(),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:P,ERR_OUT_OF_RANGE:U,ERR_STREAM_PUSH_AFTER_EOF:j,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:$}=Ki(),{validateObject:re}=zy(),J=m("kPaused"),{StringDecoder:te}=Sae(),X=w9();o(Te.prototype,v.prototype),o(Te,v);const ie=()=>{},{errorOrDestroy:Z}=T,ee=1,Q=2,he=4,Se=8,ce=16,je=32,De=64,Re=128,xe=256,Fe=512,st=1024,He=2048,Ne=4096,H=8192,ue=16384,ke=32768,ae=65536,oe=1<<17,ne=1<<18;function Ee(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(G){G?this.state|=me:this.state&=~me}}}i(Le.prototype,{objectMode:Ee(ee),ended:Ee(Q),endEmitted:Ee(he),reading:Ee(Se),constructed:Ee(ce),sync:Ee(je),needReadable:Ee(De),emittedReadable:Ee(Re),readableListening:Ee(xe),resumeScheduled:Ee(Fe),errorEmitted:Ee(st),emitClose:Ee(He),autoDestroy:Ee(Ne),destroyed:Ee(H),closed:Ee(ue),closeEmitted:Ee(ke),multiAwaitDrain:Ee(ae),readingMore:Ee(oe),dataEmitted:Ee(ne)});function Le(me,G,q){typeof q!="boolean"&&(q=G instanceof Lc()),this.state=He|Ne|ce|je,me&&me.objectMode&&(this.state|=ee),q&&me&&me.readableObjectMode&&(this.state|=ee),this.highWaterMark=me?R(this,me,"readableHighWaterMark",q):M(!1),this.buffer=new k,this.length=0,this.pipes=[],this.flowing=null,this[J]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new te(me.encoding),this.encoding=me.encoding)}function Te(me){if(!(this instanceof Te))return new Te(me);const G=this instanceof Lc();this._readableState=new Le(me,this,G),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!G&&x(me.signal,this)),v.call(this,me),T.construct(this,()=>{this._readableState.needReadable&&D(this,this._readableState)})}Te.prototype.destroy=T.destroy,Te.prototype._undestroy=T.undestroy,Te.prototype._destroy=function(me,G){G(me)},Te.prototype[g.captureRejectionSymbol]=function(me){this.destroy(me)},Te.prototype[d]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new $,this.destroy(me)),new l((G,q)=>_(this,W=>W&&W!==me?q(W):G(null)))},Te.prototype.push=function(me,G){return Xe(this,me,G,!1)},Te.prototype.unshift=function(me,G){return Xe(this,me,G,!0)};function Xe(me,G,q,W){E("readableAddChunk",G);const ge=me._readableState;let Ie;if((ge.state&ee)===0&&(typeof G=="string"?(q=q||ge.defaultEncoding,ge.encoding!==q&&(W&&ge.encoding?G=w.from(G,q).toString(ge.encoding):(G=w.from(G,q),q=""))):G instanceof w?q="":v._isUint8Array(G)?(G=v._uint8ArrayToBuffer(G),q=""):G!=null&&(Ie=new O("chunk",["string","Buffer","Uint8Array"],G))),Ie)Z(me,Ie);else if(G===null)ge.state&=-9,Dt(me,ge);else if((ge.state&ee)!==0||G&&G.length>0)if(W)if((ge.state&he)!==0)Z(me,new V);else{if(ge.destroyed||ge.errored)return!1;St(me,ge,G,!0)}else if(ge.ended)Z(me,new j);else{if(ge.destroyed||ge.errored)return!1;ge.state&=-9,ge.decoder&&!q?(G=ge.decoder.write(G),ge.objectMode||G.length!==0?St(me,ge,G,!1):D(me,ge)):St(me,ge,G,!1)}else W||(ge.state&=-9,D(me,ge));return!ge.ended&&(ge.length<ge.highWaterMark||ge.length===0)}function St(me,G,q,W){G.flowing&&G.length===0&&!G.sync&&me.listenerCount("data")>0?((G.state&ae)!==0?G.awaitDrainWriters.clear():G.awaitDrainWriters=null,G.dataEmitted=!0,me.emit("data",q)):(G.length+=G.objectMode?1:q.length,W?G.buffer.unshift(q):G.buffer.push(q),(G.state&De)!==0&&Kt(me)),D(me,G)}Te.prototype.isPaused=function(){const me=this._readableState;return me[J]===!0||me.flowing===!1},Te.prototype.setEncoding=function(me){const G=new te(me);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;const q=this._readableState.buffer;let W="";for(const ge of q)W+=G.write(ge);return q.clear(),W!==""&&q.push(W),this._readableState.length=W.length,this};const dt=1073741824;function It(me){if(me>dt)throw new U("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Vt(me,G){return me<=0||G.length===0&&G.ended?0:(G.state&ee)!==0?1:r(me)?G.flowing&&G.length?G.buffer.first().length:G.length:me<=G.length?me:G.ended?G.length:0}Te.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=s(me,10));const G=this._readableState,q=me;if(me>G.highWaterMark&&(G.highWaterMark=It(me)),me!==0&&(G.state&=-129),me===0&&G.needReadable&&((G.highWaterMark!==0?G.length>=G.highWaterMark:G.length>0)||G.ended))return E("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?rt(this):Kt(this),null;if(me=Vt(me,G),me===0&&G.ended)return G.length===0&&rt(this),null;let W=(G.state&De)!==0;if(E("need readable",W),(G.length===0||G.length-me<G.highWaterMark)&&(W=!0,E("length less than watermark",W)),G.ended||G.reading||G.destroyed||G.errored||!G.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),G.state|=Se|je,G.length===0&&(G.state|=De);try{this._read(G.highWaterMark)}catch(Ie){Z(this,Ie)}G.state&=-33,G.reading||(me=Vt(q,G))}let ge;return me>0?ge=Be(me,G):ge=null,ge===null?(G.needReadable=G.length<=G.highWaterMark,me=0):(G.length-=me,G.multiAwaitDrain?G.awaitDrainWriters.clear():G.awaitDrainWriters=null),G.length===0&&(G.ended||(G.needReadable=!0),q!==me&&G.ended&&rt(this)),ge!==null&&!G.errorEmitted&&!G.closeEmitted&&(G.dataEmitted=!0,this.emit("data",ge)),ge};function Dt(me,G){if(E("onEofChunk"),!G.ended){if(G.decoder){const q=G.decoder.end();q&&q.length&&(G.buffer.push(q),G.length+=G.objectMode?1:q.length)}G.ended=!0,G.sync?Kt(me):(G.needReadable=!1,G.emittedReadable=!0,be(me))}}function Kt(me){const G=me._readableState;E("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(E("emitReadable",G.flowing),G.emittedReadable=!0,e.nextTick(be,me))}function be(me){const G=me._readableState;E("emitReadable_",G.destroyed,G.length,G.ended),!G.destroyed&&!G.errored&&(G.length||G.ended)&&(me.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,ht(me)}function D(me,G){!G.readingMore&&G.constructed&&(G.readingMore=!0,e.nextTick(K,me,G))}function K(me,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&G.length===0);){const q=G.length;if(E("maybeReadMore read 0"),me.read(0),q===G.length)break}G.readingMore=!1}Te.prototype._read=function(me){throw new P("_read()")},Te.prototype.pipe=function(me,G){const q=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new c(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(me),E("pipe count=%d opts=%j",W.pipes.length,G);const Ie=(!G||G.end!==!1)&&me!==e.stdout&&me!==e.stderr?bt:Mr;W.endEmitted?e.nextTick(Ie):q.once("end",Ie),me.on("unpipe",Ge);function Ge(Vn,Mi){E("onunpipe"),Vn===q&&Mi&&Mi.hasUnpiped===!1&&(Mi.hasUnpiped=!0,Ht())}function bt(){E("onend"),me.end()}let Wt,yn=!1;function Ht(){E("cleanup"),me.removeListener("close",tr),me.removeListener("finish",jr),Wt&&me.removeListener("drain",Wt),me.removeListener("error",$n),me.removeListener("unpipe",Ge),q.removeListener("end",bt),q.removeListener("end",Mr),q.removeListener("data",an),yn=!0,Wt&&W.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Wt()}function Xt(){yn||(W.pipes.length===1&&W.pipes[0]===me?(E("false write response, pause",0),W.awaitDrainWriters=me,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(me)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(me)),q.pause()),Wt||(Wt=pe(q,me),me.on("drain",Wt))}q.on("data",an);function an(Vn){E("ondata");const Mi=me.write(Vn);E("dest.write",Mi),Mi===!1&&Xt()}function $n(Vn){if(E("onerror",Vn),Mr(),me.removeListener("error",$n),me.listenerCount("error")===0){const Mi=me._writableState||me._readableState;Mi&&!Mi.errorEmitted?Z(me,Vn):me.emit("error",Vn)}}b(me,"error",$n);function tr(){me.removeListener("finish",jr),Mr()}me.once("close",tr);function jr(){E("onfinish"),me.removeListener("close",tr),Mr()}me.once("finish",jr);function Mr(){E("unpipe"),q.unpipe(me)}return me.emit("pipe",q),me.writableNeedDrain===!0?Xt():W.flowing||(E("pipe resume"),q.resume()),me};function pe(me,G){return function(){const W=me._readableState;W.awaitDrainWriters===G?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(G)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}Te.prototype.unpipe=function(me){const G=this._readableState,q={hasUnpiped:!1};if(G.pipes.length===0)return this;if(!me){const ge=G.pipes;G.pipes=[],this.pause();for(let Ie=0;Ie<ge.length;Ie++)ge[Ie].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(G.pipes,me);return W===-1?this:(G.pipes.splice(W,1),G.pipes.length===0&&this.pause(),me.emit("unpipe",this,q),this)},Te.prototype.on=function(me,G){const q=v.prototype.on.call(this,me,G),W=this._readableState;return me==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):me==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Kt(this):W.reading||e.nextTick(ve,this)),q},Te.prototype.addListener=Te.prototype.on,Te.prototype.removeListener=function(me,G){const q=v.prototype.removeListener.call(this,me,G);return me==="readable"&&e.nextTick(Oe,this),q},Te.prototype.off=Te.prototype.removeListener,Te.prototype.removeAllListeners=function(me){const G=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(Oe,this),G};function Oe(me){const G=me._readableState;G.readableListening=me.listenerCount("readable")>0,G.resumeScheduled&&G[J]===!1?G.flowing=!0:me.listenerCount("data")>0?me.resume():G.readableListening||(G.flowing=null)}function ve(me){E("readable nexttick read 0"),me.read(0)}Te.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,Ae(this,me)),me[J]=!1,this};function Ae(me,G){G.resumeScheduled||(G.resumeScheduled=!0,e.nextTick(de,me,G))}function de(me,G){E("resume",G.reading),G.reading||me.read(0),G.resumeScheduled=!1,me.emit("resume"),ht(me),G.flowing&&!G.reading&&me.read(0)}Te.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[J]=!0,this};function ht(me){const G=me._readableState;for(E("flow",G.flowing);G.flowing&&me.read()!==null;);}Te.prototype.wrap=function(me){let G=!1;me.on("data",W=>{!this.push(W)&&me.pause&&(G=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",W=>{Z(this,W)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{G&&me.resume&&(G=!1,me.resume())};const q=a(me);for(let W=1;W<q.length;W++){const ge=q[W];this[ge]===void 0&&typeof me[ge]=="function"&&(this[ge]=me[ge].bind(me))}return this},Te.prototype[h]=function(){return wt(this)},Te.prototype.iterator=function(me){return me!==void 0&&re(me,"options"),wt(this,me)};function wt(me,G){typeof me.read!="function"&&(me=Te.wrap(me,{objectMode:!0}));const q=L(me,G);return q.stream=me,q}async function*L(me,G){let q=ie;function W(Ge){this===me?(q(),q=ie):q=Ge}me.on("readable",W);let ge;const Ie=_(me,{writable:!1},Ge=>{ge=Ge?I(ge,Ge):null,q(),q=ie});try{for(;;){const Ge=me.destroyed?null:me.read();if(Ge!==null)yield Ge;else{if(ge)throw ge;if(ge===null)return;await new l(W)}}}catch(Ge){throw ge=I(ge,Ge),ge}finally{(ge||(G==null?void 0:G.destroyOnReturn)!==!1)&&(ge===void 0||me._readableState.autoDestroy)?T.destroyer(me,null):(me.off("readable",W),Ie())}}i(Te.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[J]!==!1},set(me){this[J]=!!me}}}),Te._fromList=Be;function Be(me,G){if(G.length===0)return null;let q;return G.objectMode?q=G.buffer.shift():!me||me>=G.length?(G.decoder?q=G.buffer.join(""):G.buffer.length===1?q=G.buffer.first():q=G.buffer.concat(G.length),G.buffer.clear()):q=G.buffer.consume(me,G.decoder),q}function rt(me){const G=me._readableState;E("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,e.nextTick(ye,G,me))}function ye(me,G){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,G.emit("end"),G.writable&&G.allowHalfOpen===!1)e.nextTick(we,G);else if(me.autoDestroy){const q=G._writableState;(!q||q.autoDestroy&&(q.finished||q.writable===!1))&&G.destroy()}}}function we(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}Te.from=function(me,G){return X(Te,me,G)};let Ue;function Et(){return Ue===void 0&&(Ue={}),Ue}return Te.fromWeb=function(me,G){return Et().newStreamReadableFromReadableStream(me,G)},Te.toWeb=function(me,G){return Et().newReadableStreamFromStreamReadable(me,G)},Te.wrap=function(me,G){var q,W;return new Te({objectMode:(q=(W=me.readableObjectMode)!==null&&W!==void 0?W:me.objectMode)!==null&&q!==void 0?q:!0,...G,destroy(ge,Ie){T.destroyer(me,ge),Ie(ge)}}).wrap(me)},HE}var GE,h6;function bR(){if(h6)return GE;h6=1;const e=Zf(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:s,ObjectDefineProperties:i,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:c}=os();GE=re,re.WritableState=V;const{EventEmitter:d}=D1(),h=gR().Stream,{Buffer:m}=gd(),g=om(),{addAbortSignal:v}=O1(),{getHighWaterMark:b,getDefaultHighWaterMark:w}=P1(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:k,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:M,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:O}=Ki().codes,{errorOrDestroy:P}=g;a(re.prototype,h.prototype),a(re,h);function U(){}const j=l("kOnFinished");function V(Ne,H,ue){typeof ue!="boolean"&&(ue=H instanceof Lc()),this.objectMode=!!(Ne&&Ne.objectMode),ue&&(this.objectMode=this.objectMode||!!(Ne&&Ne.writableObjectMode)),this.highWaterMark=Ne?b(this,Ne,"writableHighWaterMark",ue):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ke=!!(Ne&&Ne.decodeStrings===!1);this.decodeStrings=!ke,this.defaultEncoding=Ne&&Ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Z.bind(void 0,H),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,$(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ne||Ne.emitClose!==!1,this.autoDestroy=!Ne||Ne.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[j]=[]}function $(Ne){Ne.buffered=[],Ne.bufferedIndex=0,Ne.allBuffers=!0,Ne.allNoop=!0}V.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},s(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function re(Ne){const H=this instanceof Lc();if(!H&&!r(re,this))return new re(Ne);this._writableState=new V(Ne,this,H),Ne&&(typeof Ne.write=="function"&&(this._write=Ne.write),typeof Ne.writev=="function"&&(this._writev=Ne.writev),typeof Ne.destroy=="function"&&(this._destroy=Ne.destroy),typeof Ne.final=="function"&&(this._final=Ne.final),typeof Ne.construct=="function"&&(this._construct=Ne.construct),Ne.signal&&v(Ne.signal,this)),h.call(this,Ne),g.construct(this,()=>{const ue=this._writableState;ue.writing||Se(this,ue),Re(this,ue)})}s(re,c,{__proto__:null,value:function(Ne){return r(this,Ne)?!0:this!==re?!1:Ne&&Ne._writableState instanceof V}}),re.prototype.pipe=function(){P(this,new k)};function J(Ne,H,ue,ke){const ae=Ne._writableState;if(typeof ue=="function")ke=ue,ue=ae.defaultEncoding;else{if(!ue)ue=ae.defaultEncoding;else if(ue!=="buffer"&&!m.isEncoding(ue))throw new O(ue);typeof ke!="function"&&(ke=U)}if(H===null)throw new M;if(!ae.objectMode)if(typeof H=="string")ae.decodeStrings!==!1&&(H=m.from(H,ue),ue="buffer");else if(H instanceof m)ue="buffer";else if(h._isUint8Array(H))H=h._uint8ArrayToBuffer(H),ue="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],H);let oe;return ae.ending?oe=new I:ae.destroyed&&(oe=new T("write")),oe?(e.nextTick(ke,oe),P(Ne,oe,!0),oe):(ae.pendingcb++,te(Ne,ae,H,ue,ke))}re.prototype.write=function(Ne,H,ue){return J(this,Ne,H,ue)===!0},re.prototype.cork=function(){this._writableState.corked++},re.prototype.uncork=function(){const Ne=this._writableState;Ne.corked&&(Ne.corked--,Ne.writing||Se(this,Ne))},re.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=o(H)),!m.isEncoding(H))throw new O(H);return this._writableState.defaultEncoding=H,this};function te(Ne,H,ue,ke,ae){const oe=H.objectMode?1:ue.length;H.length+=oe;const ne=H.length<H.highWaterMark;return ne||(H.needDrain=!0),H.writing||H.corked||H.errored||!H.constructed?(H.buffered.push({chunk:ue,encoding:ke,callback:ae}),H.allBuffers&&ke!=="buffer"&&(H.allBuffers=!1),H.allNoop&&ae!==U&&(H.allNoop=!1)):(H.writelen=oe,H.writecb=ae,H.writing=!0,H.sync=!0,Ne._write(ue,ke,H.onwrite),H.sync=!1),ne&&!H.errored&&!H.destroyed}function X(Ne,H,ue,ke,ae,oe,ne){H.writelen=ke,H.writecb=ne,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new T("write")):ue?Ne._writev(ae,H.onwrite):Ne._write(ae,oe,H.onwrite),H.sync=!1}function ie(Ne,H,ue,ke){--H.pendingcb,ke(ue),he(H),P(Ne,ue)}function Z(Ne,H){const ue=Ne._writableState,ke=ue.sync,ae=ue.writecb;if(typeof ae!="function"){P(Ne,new E);return}ue.writing=!1,ue.writecb=null,ue.length-=ue.writelen,ue.writelen=0,H?(H.stack,ue.errored||(ue.errored=H),Ne._readableState&&!Ne._readableState.errored&&(Ne._readableState.errored=H),ke?e.nextTick(ie,Ne,ue,H,ae):ie(Ne,ue,H,ae)):(ue.buffered.length>ue.bufferedIndex&&Se(Ne,ue),ke?ue.afterWriteTickInfo!==null&&ue.afterWriteTickInfo.cb===ae?ue.afterWriteTickInfo.count++:(ue.afterWriteTickInfo={count:1,cb:ae,stream:Ne,state:ue},e.nextTick(ee,ue.afterWriteTickInfo)):Q(Ne,ue,1,ae))}function ee({stream:Ne,state:H,count:ue,cb:ke}){return H.afterWriteTickInfo=null,Q(Ne,H,ue,ke)}function Q(Ne,H,ue,ke){for(!H.ending&&!Ne.destroyed&&H.length===0&&H.needDrain&&(H.needDrain=!1,Ne.emit("drain"));ue-- >0;)H.pendingcb--,ke();H.destroyed&&he(H),Re(Ne,H)}function he(Ne){if(Ne.writing)return;for(let ae=Ne.bufferedIndex;ae<Ne.buffered.length;++ae){var H;const{chunk:oe,callback:ne}=Ne.buffered[ae],Ee=Ne.objectMode?1:oe.length;Ne.length-=Ee,ne((H=Ne.errored)!==null&&H!==void 0?H:new T("write"))}const ue=Ne[j].splice(0);for(let ae=0;ae<ue.length;ae++){var ke;ue[ae]((ke=Ne.errored)!==null&&ke!==void 0?ke:new T("end"))}$(Ne)}function Se(Ne,H){if(H.corked||H.bufferProcessing||H.destroyed||!H.constructed)return;const{buffered:ue,bufferedIndex:ke,objectMode:ae}=H,oe=ue.length-ke;if(!oe)return;let ne=ke;if(H.bufferProcessing=!0,oe>1&&Ne._writev){H.pendingcb-=oe-1;const Ee=H.allNoop?U:Te=>{for(let Xe=ne;Xe<ue.length;++Xe)ue[Xe].callback(Te)},Le=H.allNoop&&ne===0?ue:t(ue,ne);Le.allBuffers=H.allBuffers,X(Ne,H,!0,H.length,Le,"",Ee),$(H)}else{do{const{chunk:Ee,encoding:Le,callback:Te}=ue[ne];ue[ne++]=null;const Xe=ae?1:Ee.length;X(Ne,H,!1,Xe,Ee,Le,Te)}while(ne<ue.length&&!H.writing);ne===ue.length?$(H):ne>256?(ue.splice(0,ne),H.bufferedIndex=0):H.bufferedIndex=ne}H.bufferProcessing=!1}re.prototype._write=function(Ne,H,ue){if(this._writev)this._writev([{chunk:Ne,encoding:H}],ue);else throw new _("_write()")},re.prototype._writev=null,re.prototype.end=function(Ne,H,ue){const ke=this._writableState;typeof Ne=="function"?(ue=Ne,Ne=null,H=null):typeof H=="function"&&(ue=H,H=null);let ae;if(Ne!=null){const oe=J(this,Ne,H);oe instanceof n&&(ae=oe)}return ke.corked&&(ke.corked=1,this.uncork()),ae||(!ke.errored&&!ke.ending?(ke.ending=!0,Re(this,ke,!0),ke.ended=!0):ke.finished?ae=new R("end"):ke.destroyed&&(ae=new T("end"))),typeof ue=="function"&&(ae||ke.finished?e.nextTick(ue,ae):ke[j].push(ue)),this};function ce(Ne){return Ne.ending&&!Ne.destroyed&&Ne.constructed&&Ne.length===0&&!Ne.errored&&Ne.buffered.length===0&&!Ne.finished&&!Ne.writing&&!Ne.errorEmitted&&!Ne.closeEmitted}function je(Ne,H){let ue=!1;function ke(ae){if(ue){P(Ne,ae??E());return}if(ue=!0,H.pendingcb--,ae){const oe=H[j].splice(0);for(let ne=0;ne<oe.length;ne++)oe[ne](ae);P(Ne,ae,H.sync)}else ce(H)&&(H.prefinished=!0,Ne.emit("prefinish"),H.pendingcb++,e.nextTick(xe,Ne,H))}H.sync=!0,H.pendingcb++;try{Ne._final(ke)}catch(ae){ke(ae)}H.sync=!1}function De(Ne,H){!H.prefinished&&!H.finalCalled&&(typeof Ne._final=="function"&&!H.destroyed?(H.finalCalled=!0,je(Ne,H)):(H.prefinished=!0,Ne.emit("prefinish")))}function Re(Ne,H,ue){ce(H)&&(De(Ne,H),H.pendingcb===0&&(ue?(H.pendingcb++,e.nextTick((ke,ae)=>{ce(ae)?xe(ke,ae):ae.pendingcb--},Ne,H)):ce(H)&&(H.pendingcb++,xe(Ne,H))))}function xe(Ne,H){H.pendingcb--,H.finished=!0;const ue=H[j].splice(0);for(let ke=0;ke<ue.length;ke++)ue[ke]();if(Ne.emit("finish"),H.autoDestroy){const ke=Ne._readableState;(!ke||ke.autoDestroy&&(ke.endEmitted||ke.readable===!1))&&Ne.destroy()}}i(re.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ne){this._writableState&&(this._writableState.destroyed=Ne)}},writable:{__proto__:null,get(){const Ne=this._writableState;return!!Ne&&Ne.writable!==!1&&!Ne.destroyed&&!Ne.errored&&!Ne.ending&&!Ne.ended},set(Ne){this._writableState&&(this._writableState.writable=!!Ne)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ne=this._writableState;return Ne?!Ne.destroyed&&!Ne.ending&&Ne.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Fe=g.destroy;re.prototype.destroy=function(Ne,H){const ue=this._writableState;return!ue.destroyed&&(ue.bufferedIndex<ue.buffered.length||ue[j].length)&&e.nextTick(he,ue),Fe.call(this,Ne,H),this},re.prototype._undestroy=g.undestroy,re.prototype._destroy=function(Ne,H){H(Ne)},re.prototype[d.captureRejectionSymbol]=function(Ne){this.destroy(Ne)};let st;function He(){return st===void 0&&(st={}),st}return re.fromWeb=function(Ne,H){return He().newStreamWritableFromWritableStream(Ne,H)},re.toWeb=function(Ne){return He().newWritableStreamFromStreamWritable(Ne)},GE}var KE,p6;function Eae(){if(p6)return KE;p6=1;const e=Zf(),t=gd(),{isReadable:n,isWritable:r,isIterable:s,isNodeStream:i,isReadableNodeStream:a,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:d}=Gc(),h=yd(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=Ki(),{destroyer:b}=om(),w=Lc(),x=F1(),_=bR(),{createDeferredPromise:E}=la(),k=w9(),T=globalThis.Blob||t.Blob,R=typeof T<"u"?function(V){return V instanceof T}:function(V){return!1},M=globalThis.AbortController||H0().AbortController,{FunctionPrototypeCall:I}=os();class O extends w{constructor(V){super(V),(V==null?void 0:V.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(V==null?void 0:V.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}KE=function j(V,$){if(l(V))return V;if(a(V))return U({readable:V});if(o(V))return U({writable:V});if(i(V))return U({writable:!1,readable:!1});if(c(V))return U({readable:x.fromWeb(V)});if(d(V))return U({writable:_.fromWeb(V)});if(typeof V=="function"){const{value:J,write:te,final:X,destroy:ie}=P(V);if(s(J))return k(O,J,{objectMode:!0,write:te,final:X,destroy:ie});const Z=J==null?void 0:J.then;if(typeof Z=="function"){let ee;const Q=I(Z,J,he=>{if(he!=null)throw new v("nully","body",he)},he=>{b(ee,he)});return ee=new O({objectMode:!0,readable:!1,write:te,final(he){X(async()=>{try{await Q,e.nextTick(he,null)}catch(Se){e.nextTick(he,Se)}})},destroy:ie})}throw new v("Iterable, AsyncIterable or AsyncFunction",$,J)}if(R(V))return j(V.arrayBuffer());if(s(V))return k(O,V,{objectMode:!0,writable:!1});if(c(V==null?void 0:V.readable)&&d(V==null?void 0:V.writable))return O.fromWeb(V);if(typeof(V==null?void 0:V.writable)=="object"||typeof(V==null?void 0:V.readable)=="object"){const J=V!=null&&V.readable?a(V==null?void 0:V.readable)?V==null?void 0:V.readable:j(V.readable):void 0,te=V!=null&&V.writable?o(V==null?void 0:V.writable)?V==null?void 0:V.writable:j(V.writable):void 0;return U({readable:J,writable:te})}const re=V==null?void 0:V.then;if(typeof re=="function"){let J;return I(re,V,te=>{te!=null&&J.push(te),J.push(null)},te=>{b(J,te)}),J=new O({objectMode:!0,writable:!1,read(){}})}throw new g($,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function P(j){let{promise:V,resolve:$}=E();const re=new M,J=re.signal;return{value:j(async function*(){for(;;){const X=V;V=null;const{chunk:ie,done:Z,cb:ee}=await X;if(e.nextTick(ee),Z)return;if(J.aborted)throw new m(void 0,{cause:J.reason});({promise:V,resolve:$}=E()),yield ie}}(),{signal:J}),write(X,ie,Z){const ee=$;$=null,ee({chunk:X,done:!1,cb:Z})},final(X){const ie=$;$=null,ie({done:!0,cb:X})},destroy(X,ie){re.abort(),ie(X)}}}function U(j){const V=j.readable&&typeof j.readable.read!="function"?x.wrap(j.readable):j.readable,$=j.writable;let re=!!n(V),J=!!r($),te,X,ie,Z,ee;function Q(he){const Se=Z;Z=null,Se?Se(he):he&&ee.destroy(he)}return ee=new O({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!($!=null&&$.writableObjectMode),readable:re,writable:J}),J&&(h($,he=>{J=!1,he&&b(V,he),Q(he)}),ee._write=function(he,Se,ce){$.write(he,Se)?ce():te=ce},ee._final=function(he){$.end(),X=he},$.on("drain",function(){if(te){const he=te;te=null,he()}}),$.on("finish",function(){if(X){const he=X;X=null,he()}})),re&&(h(V,he=>{re=!1,he&&b(V,he),Q(he)}),V.on("readable",function(){if(ie){const he=ie;ie=null,he()}}),V.on("end",function(){ee.push(null)}),ee._read=function(){for(;;){const he=V.read();if(he===null){ie=ee._read;return}if(!ee.push(he))return}}),ee._destroy=function(he,Se){!he&&Z!==null&&(he=new m),ie=null,te=null,X=null,Z===null?Se(he):(Z=Se,b($,he),b(V,he))},ee}return KE}var WE,m6;function Lc(){if(m6)return WE;m6=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=os();WE=a;const s=F1(),i=bR();r(a.prototype,s.prototype),r(a,s);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const m=d[h];a.prototype[m]||(a.prototype[m]=i.prototype[m])}}function a(d){if(!(this instanceof a))return new a(d);s.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(a.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}a.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},a.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let c;return a.from=function(d){return c||(c=Eae()),c(d,"body")},WE}var ZE,g6;function x9(){if(g6)return ZE;g6=1;const{ObjectSetPrototypeOf:e,Symbol:t}=os();ZE=a;const{ERR_METHOD_NOT_IMPLEMENTED:n}=Ki().codes,r=Lc(),{getHighWaterMark:s}=P1();e(a.prototype,r.prototype),e(a,r);const i=t("kCallback");function a(c){if(!(this instanceof a))return new a(c);const d=c?s(this,c,"readableHighWaterMark",!0):null;d===0&&(c={...c,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function o(c){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){c?c(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function l(){this._final!==o&&o.call(this)}return a.prototype._final=o,a.prototype._transform=function(c,d,h){throw new n("_transform()")},a.prototype._write=function(c,d,h){const m=this._readableState,g=this._writableState,v=m.length;this._transform(c,d,(b,w)=>{if(b){h(b);return}w!=null&&this.push(w),g.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},a.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},ZE}var YE,y6;function _9(){if(y6)return YE;y6=1;const{ObjectSetPrototypeOf:e}=os();YE=n;const t=x9();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,s,i){i(null,r)},YE}var XE,b6;function vR(){if(b6)return XE;b6=1;const e=Zf(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:s}=os(),i=yd(),{once:a}=la(),o=om(),l=Lc(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=Ki(),{validateFunction:w,validateAbortSignal:x}=zy(),{isIterable:_,isReadable:E,isReadableNodeStream:k,isNodeStream:T,isTransformStream:R,isWebStream:M,isReadableStream:I,isReadableFinished:O}=Gc(),P=globalThis.AbortController||H0().AbortController;let U,j,V;function $(he,Se,ce){let je=!1;he.on("close",()=>{je=!0});const De=i(he,{readable:Se,writable:ce},Re=>{je=!Re});return{destroy:Re=>{je||(je=!0,o.destroyer(he,Re||new g("pipe")))},cleanup:De}}function re(he){return w(he[he.length-1],"streams[stream.length - 1]"),he.pop()}function J(he){if(_(he))return he;if(k(he))return te(he);throw new d("val",["Readable","Iterable","AsyncIterable"],he)}async function*te(he){j||(j=F1()),yield*j.prototype[r].call(he)}async function X(he,Se,ce,{end:je}){let De,Re=null;const xe=He=>{if(He&&(De=He),Re){const Ne=Re;Re=null,Ne()}},Fe=()=>new n((He,Ne)=>{De?Ne(De):Re=()=>{De?Ne(De):He()}});Se.on("drain",xe);const st=i(Se,{readable:!1},xe);try{Se.writableNeedDrain&&await Fe();for await(const He of he)Se.write(He)||await Fe();je&&(Se.end(),await Fe()),ce()}catch(He){ce(De!==He?c(De,He):He)}finally{st(),Se.off("drain",xe)}}async function ie(he,Se,ce,{end:je}){R(Se)&&(Se=Se.writable);const De=Se.getWriter();try{for await(const Re of he)await De.ready,De.write(Re).catch(()=>{});await De.ready,je&&await De.close(),ce()}catch(Re){try{await De.abort(Re),ce(Re)}catch(xe){ce(xe)}}}function Z(...he){return ee(he,a(re(he)))}function ee(he,Se,ce){if(he.length===1&&t(he[0])&&(he=he[0]),he.length<2)throw new m("streams");const je=new P,De=je.signal,Re=ce==null?void 0:ce.signal,xe=[];x(Re,"options.signal");function Fe(){ae(new b)}V=V||la().addAbortListener;let st;Re&&(st=V(Re,Fe));let He,Ne;const H=[];let ue=0;function ke(Te){ae(Te,--ue===0)}function ae(Te,Xe){var St;if(Te&&(!He||He.code==="ERR_STREAM_PREMATURE_CLOSE")&&(He=Te),!(!He&&!Xe)){for(;H.length;)H.shift()(He);(St=st)===null||St===void 0||St[s](),je.abort(),Xe&&(He||xe.forEach(dt=>dt()),e.nextTick(Se,He,Ne))}}let oe;for(let Te=0;Te<he.length;Te++){const Xe=he[Te],St=Te<he.length-1,dt=Te>0,It=St||(ce==null?void 0:ce.end)!==!1,Vt=Te===he.length-1;if(T(Xe)){let Dt=function(Kt){Kt&&Kt.name!=="AbortError"&&Kt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ke(Kt)};var Le=Dt;if(It){const{destroy:Kt,cleanup:be}=$(Xe,St,dt);H.push(Kt),E(Xe)&&Vt&&xe.push(be)}Xe.on("error",Dt),E(Xe)&&Vt&&xe.push(()=>{Xe.removeListener("error",Dt)})}if(Te===0)if(typeof Xe=="function"){if(oe=Xe({signal:De}),!_(oe))throw new h("Iterable, AsyncIterable or Stream","source",oe)}else _(Xe)||k(Xe)||R(Xe)?oe=Xe:oe=l.from(Xe);else if(typeof Xe=="function"){if(R(oe)){var ne;oe=J((ne=oe)===null||ne===void 0?void 0:ne.readable)}else oe=J(oe);if(oe=Xe(oe,{signal:De}),St){if(!_(oe,!0))throw new h("AsyncIterable",`transform[${Te-1}]`,oe)}else{var Ee;U||(U=_9());const Dt=new U({objectMode:!0}),Kt=(Ee=oe)===null||Ee===void 0?void 0:Ee.then;if(typeof Kt=="function")ue++,Kt.call(oe,K=>{Ne=K,K!=null&&Dt.write(K),It&&Dt.end(),e.nextTick(ke)},K=>{Dt.destroy(K),e.nextTick(ke,K)});else if(_(oe,!0))ue++,X(oe,Dt,ke,{end:It});else if(I(oe)||R(oe)){const K=oe.readable||oe;ue++,X(K,Dt,ke,{end:It})}else throw new h("AsyncIterable or Promise","destination",oe);oe=Dt;const{destroy:be,cleanup:D}=$(oe,!1,!0);H.push(be),Vt&&xe.push(D)}}else if(T(Xe)){if(k(oe)){ue+=2;const Dt=Q(oe,Xe,ke,{end:It});E(Xe)&&Vt&&xe.push(Dt)}else if(R(oe)||I(oe)){const Dt=oe.readable||oe;ue++,X(Dt,Xe,ke,{end:It})}else if(_(oe))ue++,X(oe,Xe,ke,{end:It});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=Xe}else if(M(Xe)){if(k(oe))ue++,ie(J(oe),Xe,ke,{end:It});else if(I(oe)||_(oe))ue++,ie(oe,Xe,ke,{end:It});else if(R(oe))ue++,ie(oe.readable,Xe,ke,{end:It});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=Xe}else oe=l.from(Xe)}return(De!=null&&De.aborted||Re!=null&&Re.aborted)&&e.nextTick(Fe),oe}function Q(he,Se,ce,{end:je}){let De=!1;if(Se.on("close",()=>{De||ce(new v)}),he.pipe(Se,{end:!1}),je){let xe=function(){De=!0,Se.end()};var Re=xe;O(he)?e.nextTick(xe):he.once("end",xe)}else ce();return i(he,{readable:!0,writable:!1},xe=>{const Fe=he._readableState;xe&&xe.code==="ERR_STREAM_PREMATURE_CLOSE"&&Fe&&Fe.ended&&!Fe.errored&&!Fe.errorEmitted?he.once("end",ce).once("error",ce):ce(xe)}),i(Se,{readable:!1,writable:!0},ce)}return XE={pipelineImpl:ee,pipeline:Z},XE}var JE,v6;function S9(){if(v6)return JE;v6=1;const{pipeline:e}=vR(),t=Lc(),{destroyer:n}=om(),{isNodeStream:r,isReadable:s,isWritable:i,isWebStream:a,isTransformStream:o,isWritableStream:l,isReadableStream:c}=Gc(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=Ki(),g=yd();return JE=function(...b){if(b.length===0)throw new m("streams");if(b.length===1)return t.from(b[0]);const w=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const U=b.length-1;b[U]=t.from(b[U])}for(let U=0;U<b.length;++U)if(!(!r(b[U])&&!a(b[U]))){if(U<b.length-1&&!(s(b[U])||c(b[U])||o(b[U])))throw new h(`streams[${U}]`,w[U],"must be readable");if(U>0&&!(i(b[U])||l(b[U])||o(b[U])))throw new h(`streams[${U}]`,w[U],"must be writable")}let x,_,E,k,T;function R(U){const j=k;k=null,j?j(U):U?T.destroy(U):!P&&!O&&T.destroy()}const M=b[0],I=e(b,R),O=!!(i(M)||l(M)||o(M)),P=!!(s(I)||c(I)||o(I));if(T=new t({writableObjectMode:!!(M!=null&&M.writableObjectMode),readableObjectMode:!!(I!=null&&I.readableObjectMode),writable:O,readable:P}),O){if(r(M))T._write=function(j,V,$){M.write(j,V)?$():x=$},T._final=function(j){M.end(),_=j},M.on("drain",function(){if(x){const j=x;x=null,j()}});else if(a(M)){const V=(o(M)?M.writable:M).getWriter();T._write=async function($,re,J){try{await V.ready,V.write($).catch(()=>{}),J()}catch(te){J(te)}},T._final=async function($){try{await V.ready,V.close().catch(()=>{}),_=$}catch(re){$(re)}}}const U=o(I)?I.readable:I;g(U,()=>{if(_){const j=_;_=null,j()}})}if(P){if(r(I))I.on("readable",function(){if(E){const U=E;E=null,U()}}),I.on("end",function(){T.push(null)}),T._read=function(){for(;;){const U=I.read();if(U===null){E=T._read;return}if(!T.push(U))return}};else if(a(I)){const j=(o(I)?I.readable:I).getReader();T._read=async function(){for(;;)try{const{value:V,done:$}=await j.read();if(!T.push(V))return;if($){T.push(null);return}}catch{return}}}}return T._destroy=function(U,j){!U&&k!==null&&(U=new d),E=null,x=null,_=null,k===null?j(U):(k=j,r(I)&&n(I,U))},T},JE}var w6;function Cae(){if(w6)return Kv;w6=1;const e=globalThis.AbortController||H0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:s},AbortError:i}=Ki(),{validateAbortSignal:a,validateInteger:o,validateObject:l}=zy(),c=os().Symbol("kWeak"),d=os().Symbol("kResistStopPropagation"),{finished:h}=yd(),m=S9(),{addAbortSignalNoValidate:g}=O1(),{isWritable:v,isNodeStream:b}=Gc(),{deprecate:w}=la(),{ArrayPrototypePush:x,Boolean:_,MathFloor:E,Number:k,NumberIsNaN:T,Promise:R,PromiseReject:M,PromiseResolve:I,PromisePrototypeThen:O,Symbol:P}=os(),U=P("kEmpty"),j=P("kEof");function V(Re,xe){if(xe!=null&&l(xe,"options"),(xe==null?void 0:xe.signal)!=null&&a(xe.signal,"options.signal"),b(Re)&&!v(Re))throw new t("stream",Re,"must be writable");const Fe=m(this,Re);return xe!=null&&xe.signal&&g(xe.signal,Fe),Fe}function $(Re,xe){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);xe!=null&&l(xe,"options"),(xe==null?void 0:xe.signal)!=null&&a(xe.signal,"options.signal");let Fe=1;(xe==null?void 0:xe.concurrency)!=null&&(Fe=E(xe.concurrency));let st=Fe-1;return(xe==null?void 0:xe.highWaterMark)!=null&&(st=E(xe.highWaterMark)),o(Fe,"options.concurrency",1),o(st,"options.highWaterMark",0),st+=Fe,(async function*(){const Ne=la().AbortSignalAny([xe==null?void 0:xe.signal].filter(_)),H=this,ue=[],ke={signal:Ne};let ae,oe,ne=!1,Ee=0;function Le(){ne=!0,Te()}function Te(){Ee-=1,Xe()}function Xe(){oe&&!ne&&Ee<Fe&&ue.length<st&&(oe(),oe=null)}async function St(){try{for await(let dt of H){if(ne)return;if(Ne.aborted)throw new i;try{if(dt=Re(dt,ke),dt===U)continue;dt=I(dt)}catch(It){dt=M(It)}Ee+=1,O(dt,Te,Le),ue.push(dt),ae&&(ae(),ae=null),!ne&&(ue.length>=st||Ee>=Fe)&&await new R(It=>{oe=It})}ue.push(j)}catch(dt){const It=M(dt);O(It,Te,Le),ue.push(It)}finally{ne=!0,ae&&(ae(),ae=null)}}St();try{for(;;){for(;ue.length>0;){const dt=await ue[0];if(dt===j)return;if(Ne.aborted)throw new i;dt!==U&&(yield dt),ue.shift(),Xe()}await new R(dt=>{ae=dt})}}finally{ne=!0,oe&&(oe(),oe=null)}}).call(this)}function re(Re=void 0){return Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&a(Re.signal,"options.signal"),(async function*(){let Fe=0;for await(const He of this){var st;if(Re!=null&&(st=Re.signal)!==null&&st!==void 0&&st.aborted)throw new i({cause:Re.signal.reason});yield[Fe++,He]}}).call(this)}async function J(Re,xe=void 0){for await(const Fe of Z.call(this,Re,xe))return!0;return!1}async function te(Re,xe=void 0){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);return!await J.call(this,async(...Fe)=>!await Re(...Fe),xe)}async function X(Re,xe){for await(const Fe of Z.call(this,Re,xe))return Fe}async function ie(Re,xe){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(st,He){return await Re(st,He),U}for await(const st of $.call(this,Fe,xe));}function Z(Re,xe){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(st,He){return await Re(st,He)?st:U}return $.call(this,Fe,xe)}class ee extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Re,xe,Fe){var st;if(typeof Re!="function")throw new n("reducer",["Function","AsyncFunction"],Re);Fe!=null&&l(Fe,"options"),(Fe==null?void 0:Fe.signal)!=null&&a(Fe.signal,"options.signal");let He=arguments.length>1;if(Fe!=null&&(st=Fe.signal)!==null&&st!==void 0&&st.aborted){const ae=new i(void 0,{cause:Fe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ae)),ae}const Ne=new e,H=Ne.signal;if(Fe!=null&&Fe.signal){const ae={once:!0,[c]:this,[d]:!0};Fe.signal.addEventListener("abort",()=>Ne.abort(),ae)}let ue=!1;try{for await(const ae of this){var ke;if(ue=!0,Fe!=null&&(ke=Fe.signal)!==null&&ke!==void 0&&ke.aborted)throw new i;He?xe=await Re(xe,ae,{signal:H}):(xe=ae,He=!0)}if(!ue&&!He)throw new ee}finally{Ne.abort()}return xe}async function he(Re){Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&a(Re.signal,"options.signal");const xe=[];for await(const st of this){var Fe;if(Re!=null&&(Fe=Re.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new i(void 0,{cause:Re.signal.reason});x(xe,st)}return xe}function Se(Re,xe){const Fe=$.call(this,Re,xe);return(async function*(){for await(const He of Fe)yield*He}).call(this)}function ce(Re){if(Re=k(Re),T(Re))return 0;if(Re<0)throw new s("number",">= 0",Re);return Re}function je(Re,xe=void 0){return xe!=null&&l(xe,"options"),(xe==null?void 0:xe.signal)!=null&&a(xe.signal,"options.signal"),Re=ce(Re),(async function*(){var st;if(xe!=null&&(st=xe.signal)!==null&&st!==void 0&&st.aborted)throw new i;for await(const Ne of this){var He;if(xe!=null&&(He=xe.signal)!==null&&He!==void 0&&He.aborted)throw new i;Re--<=0&&(yield Ne)}}).call(this)}function De(Re,xe=void 0){return xe!=null&&l(xe,"options"),(xe==null?void 0:xe.signal)!=null&&a(xe.signal,"options.signal"),Re=ce(Re),(async function*(){var st;if(xe!=null&&(st=xe.signal)!==null&&st!==void 0&&st.aborted)throw new i;for await(const Ne of this){var He;if(xe!=null&&(He=xe.signal)!==null&&He!==void 0&&He.aborted)throw new i;if(Re-- >0&&(yield Ne),Re<=0)return}}).call(this)}return Kv.streamReturningOperators={asIndexedPairs:w(re,"readable.asIndexedPairs will be removed in a future version."),drop:je,filter:Z,flatMap:Se,map:$,take:De,compose:V},Kv.promiseReturningOperators={every:te,forEach:ie,reduce:Q,toArray:he,some:J,find:X},Kv}var QE,x6;function E9(){if(x6)return QE;x6=1;const{ArrayPrototypePop:e,Promise:t}=os(),{isIterable:n,isNodeStream:r,isWebStream:s}=Gc(),{pipelineImpl:i}=vR(),{finished:a}=yd();C9();function o(...l){return new t((c,d)=>{let h,m;const g=l[l.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!s(g)){const v=e(l);h=v.signal,m=v.end}i(l,(v,b)=>{v?d(v):c(b)},{signal:h,end:m})})}return QE={finished:a,pipeline:o},QE}var _6;function C9(){if(_6)return RE.exports;_6=1;const{Buffer:e}=gd(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=os(),{promisify:{custom:s}}=la(),{streamReturningOperators:i,promiseReturningOperators:a}=Cae(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Ki(),l=S9(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:d}=P1(),{pipeline:h}=vR(),{destroyer:m}=om(),g=yd(),v=E9(),b=Gc(),w=RE.exports=gR().Stream;w.isDestroyed=b.isDestroyed,w.isDisturbed=b.isDisturbed,w.isErrored=b.isErrored,w.isReadable=b.isReadable,w.isWritable=b.isWritable,w.Readable=F1();for(const E of n(i)){let T=function(...R){if(new.target)throw o();return w.Readable.from(r(k,this,R))};var _=T;const k=i[E];t(T,"name",{__proto__:null,value:k.name}),t(T,"length",{__proto__:null,value:k.length}),t(w.Readable.prototype,E,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(a)){let T=function(...M){if(new.target)throw o();return r(k,this,M)};var _=T;const k=a[E];t(T,"name",{__proto__:null,value:k.name}),t(T,"length",{__proto__:null,value:k.length}),t(w.Readable.prototype,E,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}w.Writable=bR(),w.Duplex=Lc(),w.Transform=x9(),w.PassThrough=_9(),w.pipeline=h;const{addAbortSignal:x}=O1();return w.addAbortSignal=x,w.finished=g,w.destroy=m,w.compose=l,w.setDefaultHighWaterMark=c,w.getDefaultHighWaterMark=d,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,s,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,s,{__proto__:null,enumerable:!0,get(){return v.finished}}),w.Stream=w,w._isUint8Array=function(k){return k instanceof Uint8Array},w._uint8ArrayToBuffer=function(k){return e.from(k.buffer,k.byteOffset,k.byteLength)},RE.exports}var S6;function kae(){return S6||(S6=1,function(e){const t=C9(),n=E9(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(AE)),AE.exports}var k9=kae();class wR extends k9.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(s=>{this._path=s.path;const i=s.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(s=>{this.destroy(s)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ve(ct.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ve(ct.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class xR extends k9.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const s=r.writableWebStream({start:t.start});this.writer=s.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Ci(new Ve(ct.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Ci(new Ve(ct.ENOTSUP,"Unsupported encoding for stream",this._path)));const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(s),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ve(ct.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ve(ct.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ve(ct.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var uo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},fo=function(e){return function(t){function n(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,s=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(a).then(i,function(o){return n(o),i()})}else s|=1}catch(o){n(o)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Ai{get position(){return this.flag&Nf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ji(t,n);Object.assign(this,Bf(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&I1||this.inode.flags&sa.Sync)}_emitChange(){hi(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ve.With("EBADF",this.path,"chown");this.dirty=!0,s9(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=pd(t,-1);if(n<0)throw new Ve(ct.EINVAL,"Invalid mode");if(this.closed)throw Ve.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>Fr?-61441:Fr)|n,(this._isSync||n>Fr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ve.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ve.With("EBADF",this.path,"truncate");if(t<0)throw new Ve(ct.EINVAL);if(this.dirty=!0,!(this.flag&Ei||this.flag&xc))throw new Ve(ct.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ve.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=hx(t),this.inode.mtimeMs=hx(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=_c(n,"utf8","a",420);if(!(Sc(r.flag)&Nf))throw new Ve(ct.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ve(ct.EINVAL,"Encoding not specified");const i=typeof t=="string"?Gr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,s=this.position){if(this.closed)throw Ve.With("EBADF",this.path,"read");if(this.flag&Ei)throw new Ve(ct.EPERM,"File not opened with a readable mode");this.inode.flags&sa.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=s+r;!U0(this.inode)&&!z0(this.inode)&&i>this.inode.size&&(i=s+Math.max(this.inode.size-s,0)),this._position=i;const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,a.subarray(n,n+r),s,i),this._isSync&&await this.sync(),{bytesRead:i-s,buffer:t}}async read(t,n,r,s){typeof n=="object"&&n!=null&&(s=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(s=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(s)?s:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=_c(t,null,"r",292);if(Sc(n.flag)&Ei)throw new Ve(ct.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:s}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(s),0,s,0),a=Gr.from(i);return n.encoding?a.toString(n.encoding):a}readableWebStream(t={}){if(this.closed)throw Ve.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ve.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&sa.Immutable)throw new Ve(ct.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Ei)throw Ve.With("EBADF",this.path,"readLines");return Hie({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ve.With("EBADF",this.path,"stat");if(!Cr(this.context,this.inode,$s))throw Ve.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Gf(this.inode):new Hc(this.inode)}async _write(t,n=0,r=t.byteLength-n,s=this.position){if(this.closed)throw Ve.With("EBADF",this.path,"write");if(this.inode.flags&sa.Immutable)throw new Ve(ct.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Ei||this.flag&xc))throw new Ve(ct.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=s+r,a=t.subarray(n,n+r);return!U0(this.inode)&&!z0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=s+a.byteLength,await this.fs.write(this.internalPath,a,s),this._isSync&&await this.sync(),a.byteLength}async write(t,n,r,s){let i,a,o;typeof n=="object"&&n!=null&&(r=n.length,s=n.position,n=n.offset),typeof t=="string"?(s=typeof n=="number"?n:null,a=0,i=Gr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n??0,o=typeof r=="number"?r:i.byteLength,s=typeof s=="number"?s:null),s??(s=this.position);const l=await this._write(i,a,o,s);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=_c(n,"utf8","w",420),s=Sc(r.flag);if(!(s&Ei||s&xc))throw new Ve(ct.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ve(ct.EINVAL,"Encoding not specified");const i=typeof t=="string"?Gr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ve.With("EBADF",this.path,"close");await this.sync(),this.dispose(),o9(this.context,this.fd)}dispose(t){if(this.closed)throw Ve.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ve.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const s of t)r+=(await this.write(s)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const s of t)r+=(await this.read(s)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Ei)throw Ve.With("EBADF",this.path,"createReadStream");return new wR(t,this)}createWriteStream(t={}){if(this.closed)throw Ve.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&sa.Immutable)throw new Ve(ct.EPERM,"File is immutable",this.path,"createWriteStream");return new xR(t,this)}}async function T9(e,t){e=pn(e),t=pn(t);const n=Yn(e,this),r=Yn(t,this);if(!(await lm.call(this,mr(e))).hasAccess(fs,this))throw Ve.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),hi(this,"rename",e.toString()),hi(this,"change",t.toString());return}await z1.call(this,t,await B1(e)),await $1.call(this,e),hi(this,"rename",e.toString())}catch(s){throw kr(s,{[n.path]:e,[r.path]:t})}}async function Uy(e){try{const{fs:t,path:n}=Yn(await bd.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ve&&t.code=="ENOENT")return!1;throw t}}async function lm(e,t){e=pn(e);const{fs:n,path:r}=Yn(await bd.call(this,e),this);try{const s=await n.stat(r);if(Bs&&!Cr(this,s,$s))throw Ve.With("EACCES",r,"stat");return t!=null&&t.bigint?new Gf(s):new Hc(s)}catch(s){throw kr(s,{[r]:e})}}async function L1(e,t){e=pn(e);const{fs:n,path:r}=Yn(e,this);try{const s=await n.stat(r);if(Bs&&!Cr(this,s,$s))throw Ve.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Gf(s):new Hc(s)}catch(s){throw kr(s,{[r]:e})}}async function A9(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await uo(n,await ho.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=fo(n);r&&await r}}async function $1(e){e=pn(e);const{fs:t,path:n}=Yn(e,this);try{if(Bs&&!Cr(this,await t.stat(n),fs))throw Ve.With("EACCES",n,"unlink");await t.unlink(n),hi(this,"rename",e.toString())}catch(r){throw kr(r,{[n]:e})}}async function cm(e,t,n){var r;t=pn(t);const s=pd(n.mode,420),i=Sc(n.flag),{fullPath:a,fs:o,path:l,stats:c}=await yx(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&A1))throw Ve.With("ENOENT",a,"_open");const h=await o.stat(mr(l));if(!Cr(e,h,fs))throw Ve.With("EACCES",mr(a),"_open");if(!zo(h))throw Ve.With("ENOTDIR",mr(a),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Vo.credentials,v=await o.createFile(l,{mode:s,uid:h.mode&Fy?h.uid:m,gid:h.mode&Ly?h.gid:g});return new Ai(e,mx(new px(e,t,o,l,i,v)))}if(!Cr(e,c,l9(i)))throw Ve.With("EACCES",a,"_open");if(i&R1)throw Ve.With("EEXIST",a,"_open");const d=new Ai(e,mx(new px(e,t,o,l,i,c)));return i&N1&&await d.truncate(0),d}async function ho(e,t="r",n=420){return await cm(this,e,{flag:t,mode:n})}async function B1(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=_c(t,null,"r",292);return await uo(n,typeof e=="object"&&"fd"in e?e:await ho.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=fo(n);r&&await r}}async function z1(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const s=_c(n,"utf8","w+",420),i=uo(r,e instanceof Ai?e:await ho.call(this,e.toString(),s.flag,s.mode),!0),a=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof a!="string"&&!(a instanceof Uint8Array))throw new Ve(ct.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(a,s)}catch(s){r.error=s,r.hasError=!0}finally{const s=fo(r);s&&await s}}async function R9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const s=_c(n,"utf8","a",420);if(!(Sc(s.flag)&Nf))throw new Ve(ct.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!s.encoding)throw new Ve(ct.EINVAL,"Encoding not specified");const a=typeof t=="string"?Gr.from(t,s.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await uo(r,typeof e=="object"&&"fd"in e?e:await ho.call(this,e,s.flag,s.mode),!0).appendFile(a,s)}catch(s){r.error=s,r.hasError=!0}finally{const s=fo(r);s&&await s}}async function _R(e){e=await bd.call(this,e);const{fs:t,path:n}=Yn(e,this);try{const r=await t.stat(n);if(!r)throw Ve.With("ENOENT",e,"rmdir");if(!zo(r))throw Ve.With("ENOTDIR",n,"rmdir");if(Bs&&!Cr(this,r,fs))throw Ve.With("EACCES",n,"rmdir");await t.rmdir(n),hi(this,"rename",e.toString())}catch(r){throw kr(r,{[n]:e})}}async function U1(e,t){var n,r;const{euid:s,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Vo.credentials;t=typeof t=="object"?t:{mode:t};const a=pd(t==null?void 0:t.mode,511);e=await bd.call(this,e);const{fs:o,path:l,root:c}=Yn(e,this),d={[l]:e},h=async(m,g)=>{if(!Cr(this,g,fs))throw Ve.With("EACCES",mr(m),"mkdir");const v=await o.mkdir(m,{mode:a,uid:g.mode&Fy?g.uid:s,gid:g.mode&Ly?g.gid:i});return hi(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(mr(l)));return}const m=[];for(let v=l,b=e;!await o.exists(v);v=mr(v),b=mr(b))m.unshift(v),d[v]=b;if(!m.length)return;const g=[await o.stat(mr(m[0]))];for(const[v,b]of m.entries())g.push(await h(b,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw kr(m,d)}}async function Yf(e,t){t=typeof t=="object"?t:{encoding:t},e=await bd.call(this,e);const{fs:n,path:r}=Yn(e,this),s=await n.stat(r).catch(l=>Rr(kr(l,{[r]:e})));if(!s)throw Ve.With("ENOENT",e,"readdir");if(!Cr(this,s,$s))throw Ve.With("EACCES",e,"readdir");if(!zo(s))throw Ve.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>Rr(kr(l,{[r]:e}))),a=[],o=async l=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(_r(r,l)).catch(d=>{if(d.code!="ENOENT")throw kr(d,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?a.push(new V0(l,c)):(t==null?void 0:t.encoding)=="buffer"?a.push(Gr.from(l)):a.push(l),!(!(t!=null&&t.recursive)||!zo(c))))for(const d of await Yf.call(this,_r(e,l),t))d instanceof V0?(d.path=_r(l,d.path),a.push(d)):Gr.isBuffer(d)?a.push(Gr.from(_r(l,WA(d)))):a.push(_r(l,d))};return await Promise.all(i.map(o)),a}async function N9(e,t){e=pn(e),t=pn(t);const{fs:n,path:r}=Yn(e,this),s=Yn(t,this);if(n!=s.fs)throw Ve.With("EXDEV",t,"link");try{if(Bs&&!Cr(this,await n.stat(mr(r)),$s))throw Ve.With("EACCES",mr(r),"link");if(Bs&&!(await lm.call(this,mr(t))).hasAccess(fs,this))throw Ve.With("EACCES",mr(t),"link");if(Bs&&!Cr(this,await n.stat(r),$s))throw Ve.With("EACCES",r,"link");return await n.link(r,s.path)}catch(i){throw kr(i,{[s.path]:t,[r]:e})}}async function I9(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ve(ct.EINVAL,"Invalid symlink type: "+n);if(t=pn(t),await Uy.call(this,t))throw Ve.With("EEXIST",t,"symlink");const s=uo(r,await cm(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await s.writeFile(pn(e,!0)),await s.chmod(Vc)}catch(s){r.error=s,r.hasError=!0}finally{const s=fo(r);s&&await s}}async function gx(e,t){const n={stack:[],error:void 0,hasError:!1};try{const s=await uo(n,await cm(this,pn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?s:s.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=fo(n);r&&await r}}async function j9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await uo(r,await ho.call(this,e,"r+"),!0).chown(t,n)}catch(s){r.error=s,r.hasError=!0}finally{const s=fo(r);s&&await s}}async function M9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await uo(r,await cm(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(s){r.error=s,r.hasError=!0}finally{const s=fo(r);s&&await s}}async function D9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await uo(n,await ho.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=fo(n);r&&await r}}async function O9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await uo(n,await cm(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=fo(n);r&&await r}}async function SR(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await uo(r,await ho.call(this,e,"r+"),!0).utimes(t,n)}catch(s){r.error=s,r.hasError=!0}finally{const s=fo(r);s&&await s}}async function P9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await uo(r,await cm(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(s){r.error=s,r.hasError=!0}finally{const s=fo(r);s&&await s}}async function yx(e,t,n){if(n){const l=Yn(t,e),c=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:c}}try{const l=Yn(t,e),c=await l.fs.stat(l.path);if(!Mp(c))return{...l,fullPath:t,stats:c};const d=Fc.call(e,mr(t),(await gx.call(e,t)).toString());return await yx(e,d)}catch{}const{base:r,dir:s}=ml(t),i=s=="/"?"/":await bd.call(e,s),a=_r(i,r),o=Yn(a,e);try{const l=await o.fs.stat(o.path);if(!Mp(l))return{...o,fullPath:a,stats:l};const c=Fc.call(e,i,(await gx.call(e,a)).toString());return await yx(e,c)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw kr(l,{[o.path]:a})}}async function bd(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=pn(e);const{fullPath:s}=await yx(this,e);if(r=="utf8"||r=="utf-8")return s;const i=Gr.from(s,"utf-8");return r=="buffer"?i:i.toString(r)}function Tae(e,t={}){const n=new f9(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let s=!1;n.on("change",(a,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:a,filename:o},done:!1})});function i(){s=!0,n.close();for(const a of r)a({value:null,done:s});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(s)return Promise.resolve({value:null,done:s});const{promise:a,resolve:o}=Promise.withResolvers();return r.push(o),a},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function F9(e,t=tR){if(!(await lm.call(this,e)).hasAccess(t,this))throw new Ve(ct.EACCES)}async function ER(e,t){e=pn(e);const n=await L1.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&Fr){case Ns:if(t!=null&&t.recursive)for(const r of await Yf.call(this,e))await ER.call(this,_r(e,r),t);await _R.call(this,e);break;case Oo:case Vc:case qf:case Vf:await $1.call(this,e);break;case Hf:case Uf:default:throw new Ve(ct.EPERM,"File type not supported",e,"rm")}}async function L9(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",s="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await U1.call(this,s),n=="buffer"?Gr.from(s):s}async function CR(e,t,n){if(e=pn(e),t=pn(t),n&&n&nR&&await Uy.call(this,t))throw new Ve(ct.EEXIST,"Destination file already exists",t,"copyFile");await z1.call(this,t,await B1.call(this,e)),hi(this,"rename",t.toString())}function $9(e,t){return e=pn(e),Promise.resolve(new mR(e,this))}async function kR(e,t,n){e=pn(e),t=pn(t);const r=await L1.call(this,e);if(n!=null&&n.errorOnExist&&await Uy.call(this,t))throw new Ve(ct.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Fr){case Ns:{if(!(n!=null&&n.recursive))throw new Ve(ct.EISDIR,e+" is a directory (not copied)",e,"cp");const[s]=await Promise.all([Yf.call(this,e,{withFileTypes:!0}),U1.call(this,t,{recursive:!0})]),i=async a=>{n.filter&&!n.filter(_r(e,a.name),_r(t,a.name))||await kR.call(this,_r(e,a.name),_r(t,a.name),n)};await Promise.all(s.map(i));break}case Oo:case Vc:await CR.call(this,e,t);break;case qf:case Vf:case Hf:case Uf:default:throw new Ve(ct.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await SR.call(this,t,r.atime,r.mtime)}async function B9(e,t){e=pn(e);const{fs:n}=Yn(e,this);return Promise.resolve(u9(n,t==null?void 0:t.bigint))}function z9(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:s=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*a(o){const l=await Yf(o,{withFileTypes:r,encoding:"utf8"});for(const c of l){const d=r?c.path:o+"/"+c;s(r?c:d)||((await lm(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*a(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?c:d.replace(/^\/+/g,"")))}}return a(n)}const Aae=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Ai,access:F9,appendFile:R9,chmod:D9,chown:j9,constants:n9,copyFile:CR,cp:kR,exists:Uy,glob:z9,lchmod:O9,lchown:M9,link:N9,lstat:L1,lutimes:P9,mkdir:U1,mkdtemp:L9,open:ho,opendir:$9,readFile:B1,readdir:Yf,readlink:gx,realpath:bd,rename:T9,rm:ER,rmdir:_R,stat:lm,statfs:B9,symlink:I9,truncate:A9,unlink:$1,utimes:SR,watch:Tae,writeFile:z1},Symbol.toStringTag,{value:"Module"})),Dn=()=>{};async function Rae(e){const t=[];for await(const n of e)t.push(n);return t}function Nae(e,t,n=Dn){T9.call(this,e,t).then(()=>n()).catch(n)}function Iae(e,t=Dn){Uy.call(this,e).then(t).catch(()=>t(!1))}function jae(e,t,n=Dn){n=typeof t=="function"?t:n,lm.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Mae(e,t,n=Dn){n=typeof t=="function"?t:n,L1.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function Dae(e,t=0,n=Dn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;A9.call(this,e,r).then(()=>n()).catch(n)}function Oae(e,t=Dn){$1.call(this,e).then(()=>t()).catch(t)}function Pae(e,t,n,r=Dn){const s=pd(n,420);r=typeof n=="function"?n:r,ho.call(this,e,t,s).then(i=>r(void 0,i.fd)).catch(r)}function Fae(e,t,n=Dn){n=typeof t=="function"?t:n,B1.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Lae(e,t,n,r=Dn){r=typeof n=="function"?n:r,z1.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function $ae(e,t,n,r=Dn){const s=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,R9.call(this,e,t,s).then(()=>r()).catch(r)}function Bae(e,t,n=Dn){n=typeof t=="function"?t:n,new Ai(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Gf(r):r)).catch(n)}function zae(e,t=Dn){new Ai(this,e).close().then(()=>t()).catch(t)}function Uae(e,t,n=Dn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const s=new Ai(this,e);if(r<0)throw new Ve(ct.EINVAL);s.truncate(r).then(()=>n()).catch(n)}function qae(e,t=Dn){new Ai(this,e).sync().then(()=>t()).catch(t)}function Vae(e,t=Dn){new Ai(this,e).datasync().then(()=>t()).catch(t)}function Hae(e,t,n,r,s,i=Dn){let a,o,l,c,d;const h=new Ai(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":c=n,d=typeof r=="string"?r:"utf8",i=typeof s=="function"?s:i;break;default:i=typeof r=="function"?r:typeof s=="function"?s:i,i(new Ve(ct.EINVAL,"Invalid arguments"));return}a=Gr.from(t),o=0,l=a.length;const m=i;h.write(a,o,l,c).then(({bytesWritten:g})=>m(void 0,g,a.toString(d))).catch(m)}else{a=Gr.from(t.buffer),o=n,l=r,c=typeof s=="number"?s:null;const m=typeof s=="function"?s:i;h.write(a,o,l,c).then(({bytesWritten:g})=>m(void 0,g,a)).catch(m)}}function Gae(e,t,n,r,s,i=Dn){new Ai(this,e).read(t,n,r,s).then(({bytesRead:a,buffer:o})=>i(void 0,a,o)).catch(i)}function Kae(e,t,n,r=Dn){new Ai(this,e).chown(t,n).then(()=>r()).catch(r)}function Wae(e,t,n){new Ai(this,e).chmod(t).then(()=>n()).catch(n)}function Zae(e,t,n,r=Dn){new Ai(this,e).utimes(t,n).then(()=>r()).catch(r)}function Yae(e,t=Dn){_R.call(this,e).then(()=>t()).catch(t)}function Xae(e,t,n=Dn){U1.call(this,e,t).then(()=>n()).catch(n)}function Jae(e,t,n=Dn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};Yf.call(this,e,r).then(s=>n(void 0,s)).catch(n)}function Qae(e,t,n=Dn){N9.call(this,e,t).then(()=>n()).catch(n)}function eoe(e,t,n,r=Dn){const s=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,I9.call(this,e,t,s).then(()=>r()).catch(r)}function toe(e,t,n=Dn){n=typeof t=="function"?t:n,gx.call(this,e).then(r=>n(void 0,r)).catch(n)}function noe(e,t,n,r=Dn){j9.call(this,e,t,n).then(()=>r()).catch(r)}function roe(e,t,n,r=Dn){M9.call(this,e,t,n).then(()=>r()).catch(r)}function soe(e,t,n=Dn){D9.call(this,e,t).then(()=>n()).catch(n)}function ioe(e,t,n=Dn){O9.call(this,e,t).then(()=>n()).catch(n)}function aoe(e,t,n,r=Dn){SR.call(this,e,t,n).then(()=>r()).catch(r)}function ooe(e,t,n,r=Dn){P9.call(this,e,t,n).then(()=>r()).catch(r)}function loe(e,t,n=Dn){n=typeof t=="function"?t:n,bd.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function coe(e,t,n=Dn){const r=typeof t=="number"?t:$s;n=typeof t=="function"?t:n,F9.call(this,e,r).then(()=>n()).catch(n)}const ap=new Map;function uoe(e,t,n){const r=pn(e),s=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ve(ct.EINVAL,"No listener specified",e.toString(),"watchFile");if(ap.has(r)){const a=ap.get(r);a&&a.listeners.add(n);return}const i=new Yie(this,r,s);i.on("change",(a,o)=>{const l=ap.get(r);if(l)for(const c of l.listeners)c(a,o)}),ap.set(r,{watcher:i,listeners:new Set})}function doe(e,t=Dn){const n=pn(e),r=ap.get(n);r&&(t&&t!==Dn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),ap.delete(n)))}function foe(e,t,n){const r=new f9(this,pn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Dn),r}function hoe(e,t){t=typeof t=="object"?t:{encoding:t};const n=ho.call(this,e,"r",t==null?void 0:t.mode);return new wR({...t,autoClose:!0},n)}function poe(e,t){t=typeof t=="object"?t:{encoding:t};const n=ho.call(this,e,"w",t==null?void 0:t.mode);return new xR(t,n)}function moe(e,t,n=Dn){n=typeof t=="function"?t:n,ER.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function goe(e,t,n=Dn){n=typeof t=="function"?t:n,L9.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function yoe(e,t,n,r=Dn){r=typeof n=="function"?n:r,CR.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function boe(e,t,n,r=Dn){r=typeof n=="function"?n:r,new Ai(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:s,bytesRead:i})=>r(void 0,i,s)).catch(r)}function voe(e,t,n,r=Dn){r=typeof n=="function"?n:r,new Ai(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:s,bytesWritten:i})=>r(void 0,i,s)).catch(r)}function woe(e,t,n=Dn){n=typeof t=="function"?t:n,$9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function xoe(e,t,n,r=Dn){r=typeof n=="function"?n:r,kR.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function _oe(e,t,n=Dn){n=typeof t=="function"?t:n,B9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function Soe(e,t){const n=await ho.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function Eoe(e,t,n=Dn){n=typeof t=="function"?t:n;const r=z9.call(this,e,typeof t=="function"?void 0:t);Rae(r).then(s=>{var i;return n(null,(i=s)!==null&&i!==void 0?i:[])}).catch(s=>n(s))}var Jd=function(e,t,n,r,s,i){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=a(w.get))&&(d.get=h),(h=a(w.set))&&(d.set=h),(h=a(w.init))&&s.unshift(h)}else(h=a(w))&&(o==="field"?s.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),m=!0},Ea=function(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0},Coe=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},bx;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(bx||(bx={}));let U9=(()=>{var e,t,n,r,s;let i=[zf()],a,o=[],l,c,d=[],h=[],m,g=[],v=[],b,w=[],x=[],_,E=[],k=[],T,R=[],M=[],I,O=[],P=[];return l=class{constructor(U=Rr(new Ve(ct.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Ea(this,d,0),this.extsize=(Ea(this,h),Ea(this,g,0)),this.nextents=(Ea(this,v),Ea(this,w,0)),this.projid=(Ea(this,x),Ea(this,E,0)),this.cowextsize=(Ea(this,k),Ea(this,R,0)),this.pad=(Ea(this,M),Ea(this,O,[])),Ea(this,P),this.extsize=U.size,this.nextents=1,this.projid=U.uid,this.cowextsize=U.size;for(const j of Object.keys(sa))U.flags&sa[j]&&j in bx&&(this.xflags|=bx[j])}},Coe(l,"fsxattr"),(()=>{const U=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=Sn).uint32.bind(e)],m=[(t=Sn).uint32.bind(t)],b=[(n=Sn).uint32.bind(n)],_=[(r=Sn).uint32.bind(r)],T=[(s=Sn).uint32.bind(s)],I=[Sn.char(8)],Jd(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:j=>"xflags"in j,get:j=>j.xflags,set:(j,V)=>{j.xflags=V}},metadata:U},d,h),Jd(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:j=>"extsize"in j,get:j=>j.extsize,set:(j,V)=>{j.extsize=V}},metadata:U},g,v),Jd(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:j=>"nextents"in j,get:j=>j.nextents,set:(j,V)=>{j.nextents=V}},metadata:U},w,x),Jd(null,null,_,{kind:"field",name:"projid",static:!1,private:!1,access:{has:j=>"projid"in j,get:j=>j.projid,set:(j,V)=>{j.projid=V}},metadata:U},E,k),Jd(null,null,T,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:j=>"cowextsize"in j,get:j=>j.cowextsize,set:(j,V)=>{j.cowextsize=V}},metadata:U},R,M),Jd(null,null,I,{kind:"field",name:"pad",static:!1,private:!1,access:{has:j=>"pad"in j,get:j=>j.pad,set:(j,V)=>{j.pad=V}},metadata:U},O,P),Jd(null,a={value:l},i,{kind:"class",name:l.name,metadata:U},null,o),l=a.value,U&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:U}),Ea(l,o)})(),l})();var Xr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Xr||(Xr={}));var No;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(No||(No={}));async function koe(e,t,...n){e=pn(e);const{fs:r,path:s}=Yn(e,this);try{const i=new As(await r.stat(s));switch(t){case Xr.GetFlags:case No.GetFlags:return i.flags;case Xr.SetFlags:case No.SetFlags:i.flags=n[0],await r.touch(s,i);return;case Xr.GetVersion:case No.GetVersion:return i.version;case Xr.SetVersion:case No.SetVersion:i.version=n[0],await r.touch(s,i);return;case Xr.Fiemap:break;case Xr.GetXattr:return new U9(i);case Xr.SetXattr:break;case Xr.GetLabel:return r.label;case Xr.SetLabel:r.label=n[0];return;case Xr.GetUUID:return r.uuid;case Xr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw kr(i,{[s]:e})}throw new Ve(ct.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function Toe(e,t,...n){e=pn(e);const{fs:r,path:s}=Yn(e,this);try{const i=new As(r.statSync(s));switch(t){case Xr.GetFlags:case No.GetFlags:return i.flags;case Xr.SetFlags:case No.SetFlags:i.flags=n[0],r.touchSync(s,i);return;case Xr.GetVersion:case No.GetVersion:return i.version;case Xr.SetVersion:case No.SetVersion:i.version=n[0],r.touchSync(s,i);return;case Xr.Fiemap:break;case Xr.GetXattr:return new U9(i);case Xr.SetXattr:break;case Xr.GetLabel:return r.label;case Xr.SetLabel:r.label=n[0];return;case Xr.GetUUID:return r.uuid;case Xr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw kr(i,{[s]:e})}throw new Ve(ct.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const Aoe=[];function um(e,t,n,r){if(!t.startsWith("user.")&&!Aoe.includes(t))throw new Ve(ct.EPERM,"Only attributes in the user namespace are supported",n,r)}async function Roe(e,t,n={}){var r;e=pn(e);const{fs:s,path:i}=Yn(e,this);um(this,t,e,"xattr.get");try{const a=await s.stat(i);if(Bs&&!Cr(this,a,$s))throw Ve.With("EACCES",i,"xattr.get");(r=a.attributes)!==null&&r!==void 0||(a.attributes=new Ju);const o=a.attributes.get(t);if(!o)throw Ve.With("ENODATA",i,"xattr.get");const l=Gr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(a){throw kr(a,{[i]:e})}}function Noe(e,t,n={}){var r;e=pn(e),um(this,t,e,"xattr.get");const{fs:s,path:i}=Yn(e,this);try{const a=s.statSync(i);if(Bs&&!Cr(this,a,$s))throw Ve.With("EACCES",i,"xattr.get");(r=a.attributes)!==null&&r!==void 0||(a.attributes=new Ju);const o=a.attributes.get(t);if(!o)throw Ve.With("ENODATA",i,"xattr.get");const l=Gr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(a){throw kr(a,{[i]:e})}}async function Ioe(e,t,n,r={}){var s;e=pn(e);const{fs:i,path:a}=Yn(e,this);um(this,t,e,"xattr.set");try{const o=await i.stat(a);if(Bs&&!Cr(this,o,fs))throw Ve.With("EACCES",a,"xattr.set");(s=o.attributes)!==null&&s!==void 0||(o.attributes=new Ju);const l=o.attributes.get(t);if(r.create&&l)throw Ve.With("EEXIST",a,"xattr.set");if(r.replace&&!l)throw Ve.With("ENODATA",a,"xattr.set");o.attributes.set(t,Gr.from(n)),await i.touch(a,Bf(o,"attributes"))}catch(o){throw kr(o,{[a]:e})}}function joe(e,t,n,r={}){var s;e=pn(e);const{fs:i,path:a}=Yn(e,this);um(this,t,e,"xattr.set");try{const o=i.statSync(a);if(Bs&&!Cr(this,o,fs))throw Ve.With("EACCES",a,"xattr.set");(s=o.attributes)!==null&&s!==void 0||(o.attributes=new Ju);const l=o.attributes.get(t);if(r.create&&l)throw Ve.With("EEXIST",a,"xattr.set");if(r.replace&&!l)throw Ve.With("ENODATA",a,"xattr.set");o.attributes.set(t,Gr.from(n)),i.touchSync(a,Bf(o,"attributes"))}catch(o){throw kr(o,{[a]:e})}}async function Moe(e,t){var n;e=pn(e);const{fs:r,path:s}=Yn(e,this);um(this,t,e,"xattr.remove");try{const i=await r.stat(s);if(Bs&&!Cr(this,i,fs))throw Ve.With("EACCES",s,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Ju),!i.attributes.get(t))throw Ve.With("ENODATA",s,"xattr.remove");i.attributes.remove(t),await r.touch(s,Bf(i,"attributes"))}catch(i){throw kr(i,{[s]:e})}}function Doe(e,t){var n;e=pn(e);const{fs:r,path:s}=Yn(e,this);um(this,t,e,"xattr.remove");try{const i=r.statSync(s);if(Bs&&!Cr(this,i,fs))throw Ve.With("EACCES",s,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Ju),!i.attributes.get(t))throw Ve.With("ENODATA",s,"xattr.remove");i.attributes.remove(t),r.touchSync(s,Bf(i,"attributes"))}catch(i){throw kr(i,{[s]:e})}}async function Ooe(e){e=pn(e);const{fs:t,path:n}=Yn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw kr(r,{[n]:e})}}function Poe(e){e=pn(e);const{fs:t,path:n}=Yn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw kr(r,{[n]:e})}}const Foe=Object.freeze(Object.defineProperty({__proto__:null,get:Roe,getSync:Noe,list:Ooe,listSync:Poe,remove:Moe,removeSync:Doe,set:Ioe,setSync:joe},Symbol.toStringTag,{value:"Module"})),ai=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:jie,Dir:mR,Dirent:V0,get IOC(){return Xr},get IOC32(){return No},ReadStream:wR,Stats:Hc,StatsFs:Iie,WriteStream:xR,access:coe,accessSync:mae,appendFile:$ae,appendFileSync:tae,chmod:soe,chmodSync:fae,chown:noe,chownSync:uae,chroot:Wie,close:zae,closeSync:Wf,constants:n9,copyFile:yoe,copyFileSync:y9,cp:xoe,cpSync:b9,createReadStream:hoe,createWriteStream:poe,exists:Iae,existsSync:aR,fchmod:Wae,fchmodSync:fR,fchown:Kae,fchownSync:dR,fdatasync:Vae,fdatasyncSync:iae,fstat:Bae,fstatSync:nae,fsync:qae,fsyncSync:sae,ftruncate:Uae,ftruncateSync:rae,futimes:Zae,futimesSync:hR,glob:Eoe,globSync:xae,ioctl:koe,ioctlSync:Toe,lchmod:ioe,lchmodSync:hae,lchown:roe,lchownSync:dae,link:Qae,linkSync:lae,lopenSync:M1,lstat:Mae,lstatSync:oR,lutimes:ooe,lutimesSync:pae,mkdir:Xae,mkdirSync:pR,mkdtemp:goe,mkdtempSync:gae,mount:iR,open:Pae,openAsBlob:Soe,openSync:j1,opendir:woe,opendirSync:vae,promises:Aae,read:Gae,readFile:Fae,readFileSync:cR,readSync:oae,readdir:Jae,readdirSync:am,readlink:toe,readlinkSync:dT,readv:boe,readvSync:yae,realpath:loe,realpathSync:md,rename:Nae,renameSync:Qie,rm:moe,rmSync:g9,rmdir:Yae,rmdirSync:p9,stat:jae,statSync:Qu,statfs:_oe,statfsSync:wae,symlink:eoe,symlinkSync:cae,truncate:Dae,truncateSync:eae,umount:c9,unlink:Oae,unlinkSync:lR,unwatchFile:doe,utimes:aoe,utimesSync:m9,watch:foe,watchFile:uoe,write:Hae,writeFile:Lae,writeFileSync:uR,writeSync:aae,writev:voe,writevSync:bae,xattr:Foe},Symbol.toStringTag,{value:"Module"}));function E6(e){return HL(e)||eR(e)||e instanceof sR}async function q9(e,t=0){if(typeof e!="object"||e==null)throw ra(new Ve(ct.EINVAL,"Invalid options on mount configuration"));if(!E6(e))throw ra(new Ve(ct.EINVAL,"Invalid mount configuration"));if(e instanceof sR)return await e.ready(),e;eR(e)&&(e={backend:e});for(const[s,i]of Object.entries(e))if(s!="backend"&&E6(i)){if(VL("Resolving nested mount configuration: "+s),t>10)throw ra(new Ve(ct.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[s]=await q9(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw ra(new Ve(ct.EPERM,"Backend not available: "+n.name));pie(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function Loe(e){if(!HL(e))throw new TypeError("Invalid single mount point configuration");const t=await q9(e);c9("/"),iR("/",t)}const $oe=["delete"];Math.max(...$oe.map(e=>e.length));hie("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const V9=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;V9[e]=t}function Boe(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^V9[(t^e[n])&255];return(t^4294967295)>>>0}var Yr=function(e,t,n,r,s,i){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=a(w.get))&&(d.get=h),(h=a(w.set))&&(d.set=h),(h=a(w.init))&&s.unshift(h)}else(h=a(w))&&(o==="field"?s.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),m=!0},Rn=function(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0},TR=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let C6=(()=>{var e,t,n,r;let s=[zf()],i,a=[],o,l,c=[],d=[],h,m=[],g=[],v,b=[],w=[],x,_=[],E=[];return o=class{constructor(){this.id=Rn(this,c,0),this.offset_=(Rn(this,d),Rn(this,m,0)),this.offset=(Rn(this,g),Rn(this,b,0)),this.size=(Rn(this,w),Rn(this,_,0)),Rn(this,E)}},TR(o,"MetadataEntry"),(()=>{const k=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=Sn).uint32.bind(e)],h=[(t=Sn).uint32.bind(t)],v=[(n=Sn).uint32.bind(n)],x=[(r=Sn).uint32.bind(r)],Yr(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:T=>"id"in T,get:T=>T.id,set:(T,R)=>{T.id=R}},metadata:k},c,d),Yr(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:T=>"offset_"in T,get:T=>T.offset_,set:(T,R)=>{T.offset_=R}},metadata:k},m,g),Yr(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:T=>"offset"in T,get:T=>T.offset,set:(T,R)=>{T.offset=R}},metadata:k},b,w),Yr(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:T=>"size"in T,get:T=>T.size,set:(T,R)=>{T.size=R}},metadata:k},_,E),Yr(null,i={value:o},s,{kind:"class",name:o.name,metadata:k},null,a),o=i.value,k&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k}),Rn(o,a)})(),o})();const k6=255;let Qd=(()=>{var e,t,n,r;let s=[zf()],i,a=[],o,l,c=[],d=[],h,m=[],g=[],v,b=[],w=[],x,_=[],E=[],k,T=[],R=[];var M=o=class{constructor(I=Rr(new Ve(ct.EINVAL,"Metadata block must be initialized with a superblock")),O=0){if(this.superblock=I,this.offset=O,this.checksum=Rn(this,c,0),this.timestamp=(Rn(this,d),Rn(this,m,Date.now())),this.previous_offset_=(Rn(this,g),Rn(this,b,0)),this.previous_offset=(Rn(this,w),Rn(this,_,0)),this._previous=Rn(this,E),this.entries=Rn(this,T,Array.from({length:k6},()=>new C6)),Rn(this,R),this.superblock=I,this.offset=O,!!O&&(k1(this,I.store._buffer.subarray(O,O+Jr(M))),!H9(this)))throw T1(new Ve(ct.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+O.toString(16)))}get previous(){var I;if(this.previous_offset)return(I=this._previous)!==null&&I!==void 0||(this._previous=new M(this.superblock,this.previous_offset)),this._previous}};return TR(o,"MetadataBlock"),(()=>{const I=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=Sn).uint32.bind(e)],h=[(t=Sn).uint32.bind(t)],v=[(n=Sn).uint32.bind(n)],x=[(r=Sn).uint32.bind(r)],k=[B0(C6,k6)],Yr(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:O=>"checksum"in O,get:O=>O.checksum,set:(O,P)=>{O.checksum=P}},metadata:I},c,d),Yr(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:O=>"timestamp"in O,get:O=>O.timestamp,set:(O,P)=>{O.timestamp=P}},metadata:I},m,g),Yr(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:O=>"previous_offset_"in O,get:O=>O.previous_offset_,set:(O,P)=>{O.previous_offset_=P}},metadata:I},b,w),Yr(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:O=>"previous_offset"in O,get:O=>O.previous_offset,set:(O,P)=>{O.previous_offset=P}},metadata:I},_,E),Yr(null,null,k,{kind:"field",name:"entries",static:!1,private:!1,access:{has:O=>"entries"in O,get:O=>O.entries,set:(O,P)=>{O.entries=P}},metadata:I},T,R),Yr(null,i={value:o},s,{kind:"class",name:o.name,metadata:I},null,a),M=o=i.value,I&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:I}),Rn(o,a)})(),M=o})();const T6=2049864546;(()=>{var e,t,n,r,s,i,a,o,l,c,d;let h=[zf()],m,g=[],v,b,w=[],x=[],_,E=[],k=[],T,R=[],M=[],I,O=[],P=[],U,j=[],V=[],$,re=[],J=[],te,X=[],ie=[],Z,ee=[],Q=[],he,Se=[],ce=[],je,De=[],Re=[],xe,Fe=[],st=[],He,Ne=[],H=[],ue,ke=[],ae=[];var oe=v=class{constructor(ne=Rr(new Ve(ct.EINVAL,"Super block must be initialized with a store"))){if(this.store=ne,this.checksum=Rn(this,w,0),this.magic=(Rn(this,x),Rn(this,E,T6)),this.version=(Rn(this,k),Rn(this,R,1)),this.inode_format=(Rn(this,M),Rn(this,O,Die)),this.flags=(Rn(this,P),Rn(this,j,0)),this.used_bytes=(Rn(this,V),Rn(this,re,BigInt(0))),this.total_bytes=(Rn(this,J),Rn(this,X,BigInt(0))),this.uuid=(Rn(this,ie),Rn(this,ee,BigInt(0))),this.metadata_block_size=(Rn(this,Q),Rn(this,Se,Jr(Qd))),this.metadata_offset_=(Rn(this,ce),Rn(this,De,0)),this.metadata_offset=(Rn(this,Re),Rn(this,Fe,0)),this.metadata=Rn(this,st),this.label=Rn(this,Ne,""),this._padding=(Rn(this,H),Rn(this,ke,new Array(132).fill(0))),Rn(this,ae),this.store=ne,ne._view.getUint32(Xse(oe,"magic"),!0)!=T6){Ci("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Qd(this),this.metadata.offset=Jr(oe),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Jr(oe)+Jr(Qd)),this.total_bytes=BigInt(ne._buffer.byteLength),ne._write(this),ne._write(this.metadata);return}if(k1(this,ne._buffer.subarray(0,Jr(oe))),!H9(this))throw T1(new Ve(ct.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Qd(this,this.metadata_offset)}rotateMetadata(){const ne=new Qd(this);return ne.offset=Number(this.used_bytes),ne.previous_offset=this.metadata_offset,this.metadata=ne,this.metadata_offset=ne.offset,this.store._write(ne),this.used_bytes+=BigInt(Jr(Qd)),this.store._write(this),ne}isUnused(ne,Ee){if(!Ee)return!0;if(ne+Ee>this.total_bytes||ne<Jr(oe))return!1;for(let Le=this.metadata;Le;Le=Le.previous){if(ne<Le.offset+Jr(Qd)&&ne+Ee>Le.offset)return!1;for(const Te of Le.entries)if(Te.offset&&(ne>=Te.offset&&ne<Te.offset+Te.size||ne+Ee>Te.offset&&ne+Ee<=Te.offset+Te.size||ne<=Te.offset&&ne+Ee>=Te.offset+Te.size))return!1}return!0}};return TR(v,"SuperBlock"),(()=>{const ne=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=Sn).uint32.bind(e)],_=[(t=Sn).uint32.bind(t)],T=[(n=Sn).uint16.bind(n)],I=[(r=Sn).uint16.bind(r)],U=[(s=Sn).uint32.bind(s)],$=[(i=Sn).uint64.bind(i)],te=[(a=Sn).uint64.bind(a)],Z=[(o=Sn).uint128.bind(o)],he=[(l=Sn).uint32.bind(l)],je=[(c=Sn).uint32.bind(c)],xe=[(d=Sn).uint32.bind(d)],He=[Sn.char(64)],ue=[Sn.char(132)],Yr(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:Ee=>"checksum"in Ee,get:Ee=>Ee.checksum,set:(Ee,Le)=>{Ee.checksum=Le}},metadata:ne},w,x),Yr(null,null,_,{kind:"field",name:"magic",static:!1,private:!1,access:{has:Ee=>"magic"in Ee,get:Ee=>Ee.magic,set:(Ee,Le)=>{Ee.magic=Le}},metadata:ne},E,k),Yr(null,null,T,{kind:"field",name:"version",static:!1,private:!1,access:{has:Ee=>"version"in Ee,get:Ee=>Ee.version,set:(Ee,Le)=>{Ee.version=Le}},metadata:ne},R,M),Yr(null,null,I,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:Ee=>"inode_format"in Ee,get:Ee=>Ee.inode_format,set:(Ee,Le)=>{Ee.inode_format=Le}},metadata:ne},O,P),Yr(null,null,U,{kind:"field",name:"flags",static:!1,private:!1,access:{has:Ee=>"flags"in Ee,get:Ee=>Ee.flags,set:(Ee,Le)=>{Ee.flags=Le}},metadata:ne},j,V),Yr(null,null,$,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:Ee=>"used_bytes"in Ee,get:Ee=>Ee.used_bytes,set:(Ee,Le)=>{Ee.used_bytes=Le}},metadata:ne},re,J),Yr(null,null,te,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:Ee=>"total_bytes"in Ee,get:Ee=>Ee.total_bytes,set:(Ee,Le)=>{Ee.total_bytes=Le}},metadata:ne},X,ie),Yr(null,null,Z,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:Ee=>"uuid"in Ee,get:Ee=>Ee.uuid,set:(Ee,Le)=>{Ee.uuid=Le}},metadata:ne},ee,Q),Yr(null,null,he,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:Ee=>"metadata_block_size"in Ee,get:Ee=>Ee.metadata_block_size,set:(Ee,Le)=>{Ee.metadata_block_size=Le}},metadata:ne},Se,ce),Yr(null,null,je,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:Ee=>"metadata_offset_"in Ee,get:Ee=>Ee.metadata_offset_,set:(Ee,Le)=>{Ee.metadata_offset_=Le}},metadata:ne},De,Re),Yr(null,null,xe,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:Ee=>"metadata_offset"in Ee,get:Ee=>Ee.metadata_offset,set:(Ee,Le)=>{Ee.metadata_offset=Le}},metadata:ne},Fe,st),Yr(null,null,He,{kind:"field",name:"label",static:!1,private:!1,access:{has:Ee=>"label"in Ee,get:Ee=>Ee.label,set:(Ee,Le)=>{Ee.label=Le}},metadata:ne},Ne,H),Yr(null,null,ue,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:Ee=>"_padding"in Ee,get:Ee=>Ee._padding,set:(Ee,Le)=>{Ee._padding=Le}},metadata:ne},ke,ae),Yr(null,m={value:v},h,{kind:"class",name:v.name,metadata:ne},null,g),oe=v=m.value,ne&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ne}),Rn(v,g)})(),oe=v})();function H9(e){const t=di(e),n=Boe(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=ai;function zoe(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function hT(e,t,n){if(e instanceof Ve)return e;const r=e instanceof DOMException?ct[zoe(e)]:ct.EIO,s=new Ve(r,e.message,t,n);return s.stack=e.stack,s.cause=e.cause,s}function op(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(hT(e.error))}})}class Uoe extends uT{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await op(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await op(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await op(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),op(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(hT(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(hT(this.tx.error)),this.tx.abort(),t}}async function qoe(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Ci("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await op(n)}class Voe{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new Uoe(t,this)}}const Hoe={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await op(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await qoe(e.storeName||"zenfs",e.idbFactory),n=new Voe(t),r=new a9(n);if(e!=null&&e.disableAsyncCache)return QA("Async preloading disabled for IndexedDB"),r;const s=n.transaction();for(const i of await s.keys())await s.get(i);return r}},Goe=Hoe,sn={vfsKeyChanged:"vfs.key.changed",nodesUpdated:"vfs.nodes.updated",selectionChanged:"vfs.selection.changed",loadingStateChanged:"vfs.loading.state.changed",fsInstanceChanged:"vfs.instance.changed",vfsEnabledChanged:"vfs.enabled.changed",fileWritten:"vfs.sdk.fileWritten",fileRead:"vfs.sdk.fileRead",fileDeleted:"vfs.sdk.fileDeleted",setVfsKeyRequest:"vfs.set.vfs.key.request",initializeVFSRequest:"vfs.initialize.vfs.request",fetchNodesRequest:"vfs.fetch.nodes.request",setCurrentPathRequest:"vfs.set.current.path.request",createDirectoryRequest:"vfs.create.directory.request",uploadFilesRequest:"vfs.upload.files.request",deleteNodesRequest:"vfs.delete.nodes.request",renameNodeRequest:"vfs.rename.node.request",downloadFileRequest:"vfs.download.file.request",selectFileRequest:"vfs.select.file.request",deselectFileRequest:"vfs.deselect.file.request",clearSelectionRequest:"vfs.clear.selection.request",setEnableVfsRequest:"vfs.set.enable.vfs.request"};function Yv(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var eC={exports:{}},A6;function Koe(){return A6||(A6=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function a(c,d){if(!s[c]){if(!r[c]){var h=typeof Yv=="function"&&Yv;if(!d&&h)return h(c,!0);if(o)return o(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var g=s[c]={exports:{}};r[c][0].call(g.exports,function(v){var b=r[c][1][v];return a(b||v)},g,g.exports,n,r,s,i)}return s[c].exports}for(var o=typeof Yv=="function"&&Yv,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(n,r,s){var i=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,d,h,m,g,v,b,w=[],x=0,_=l.length,E=_,k=i.getTypeOf(l)!=="string";x<l.length;)E=_-x,h=k?(c=l[x++],d=x<_?l[x++]:0,x<_?l[x++]:0):(c=l.charCodeAt(x++),d=x<_?l.charCodeAt(x++):0,x<_?l.charCodeAt(x++):0),m=c>>2,g=(3&c)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,w.push(o.charAt(m)+o.charAt(g)+o.charAt(v)+o.charAt(b));return w.join("")},s.decode=function(l){var c,d,h,m,g,v,b=0,w=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var _,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=a.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)c=o.indexOf(l.charAt(b++))<<2|(m=o.indexOf(l.charAt(b++)))>>4,d=(15&m)<<4|(g=o.indexOf(l.charAt(b++)))>>2,h=(3&g)<<6|(v=o.indexOf(l.charAt(b++))),_[w++]=c,g!==64&&(_[w++]=d),v!==64&&(_[w++]=h);return _}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(d,h,m,g,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var d=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,m){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(c,d,h,m){var g=a,v=m+h;c^=-1;for(var b=m;b<v;b++)c=c>>>8^g[255&(c^d[b])];return-1^c}(0|l,o,o.length,0):function(c,d,h,m){var g=a,v=m+h;c^=-1;for(var b=m;b<v;b++)c=c>>>8^g[255&(c^d.charCodeAt(b))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function d(h,m){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}s.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},s.compressWorker=function(h){return new d("Deflate",h)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(g,v){var b,w="";for(b=0;b<v;b++)w+=String.fromCharCode(255&g),g>>>=8;return w}function a(g,v,b,w,x,_){var E,k,T=g.file,R=g.compression,M=_!==c.utf8encode,I=o.transformTo("string",_(T.name)),O=o.transformTo("string",c.utf8encode(T.name)),P=T.comment,U=o.transformTo("string",_(P)),j=o.transformTo("string",c.utf8encode(P)),V=O.length!==T.name.length,$=j.length!==P.length,re="",J="",te="",X=T.dir,ie=T.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(Z.crc32=g.crc32,Z.compressedSize=g.compressedSize,Z.uncompressedSize=g.uncompressedSize);var ee=0;v&&(ee|=8),M||!V&&!$||(ee|=2048);var Q=0,he=0;X&&(Q|=16),x==="UNIX"?(he=798,Q|=function(ce,je){var De=ce;return ce||(De=je?16893:33204),(65535&De)<<16}(T.unixPermissions,X)):(he=20,Q|=function(ce){return 63&(ce||0)}(T.dosPermissions)),E=ie.getUTCHours(),E<<=6,E|=ie.getUTCMinutes(),E<<=5,E|=ie.getUTCSeconds()/2,k=ie.getUTCFullYear()-1980,k<<=4,k|=ie.getUTCMonth()+1,k<<=5,k|=ie.getUTCDate(),V&&(J=i(1,1)+i(d(I),4)+O,re+="up"+i(J.length,2)+J),$&&(te=i(1,1)+i(d(U),4)+j,re+="uc"+i(te.length,2)+te);var Se="";return Se+=`
\0`,Se+=i(ee,2),Se+=R.magic,Se+=i(E,2),Se+=i(k,2),Se+=i(Z.crc32,4),Se+=i(Z.compressedSize,4),Se+=i(Z.uncompressedSize,4),Se+=i(I.length,2),Se+=i(re.length,2),{fileRecord:h.LOCAL_FILE_HEADER+Se+I+re,dirRecord:h.CENTRAL_FILE_HEADER+i(he,2)+Se+i(U.length,2)+"\0\0\0\0"+i(Q,4)+i(w,4)+I+re+U}}var o=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),h=n("../signature");function m(g,v,b,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=w,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,l),m.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-w-1))/b:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=a(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=a(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(w){return h.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,w=function(x,_,E,k,T){var R=o.transformTo("string",T(k));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(_,4)+i(E,4)+i(R.length,2)+R}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),a=n("./ZipFileWorker");s.generateWorker=function(o,l,c){var d=new a(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{o.forEach(function(m,g){h++;var v=function(_,E){var k=_||E,T=i[k];if(!T)throw new Error(k+" is not a valid compression method !");return T}(g.options.compression,l.compression),b=g.options.compressionOptions||l.compressionOptions||{},w=g.dir,x=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:m,dir:w,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(a,o){return new i().loadAsync(a,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),a=n("./external"),o=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(m){return new a.Promise(function(g,v){var b=m.decompressed.getContentWorker().pipe(new c);b.on("error",function(w){v(w)}).on("end",function(){b.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(b){var w=new l(g);return w.load(b),w}).then(function(b){var w=[a.Promise.resolve(b)],x=b.files;if(g.checkCRC32)for(var _=0;_<x.length;_++)w.push(h(x[_]));return a.Promise.all(w)}).then(function(b){for(var w=b.shift(),x=w.files,_=0;_<x.length;_++){var E=x[_],k=E.fileNameStr,T=i.resolve(E.fileNameStr);v.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(T).unsafeOriginalName=k)}return w.zipComment.length&&(v.comment=w.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),a=n("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function a(o,l,c){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,m){d.push(h)||d._helper.pause(),c&&c(m)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Jt<"u",newBufferFrom:function(i,a){if(Jt.from&&Jt.from!==Uint8Array.from)return Jt.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Jt(i,a)},allocBuffer:function(i){if(Jt.alloc)return Jt.alloc(i);var a=new Jt(i);return a.fill(0),a},isBuffer:function(i){return Jt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(T,R,M){var I,O=o.getTypeOf(R),P=o.extend(M||{},d);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(T=x(T)),P.createFolders&&(I=w(T))&&_.call(this,I,!0);var U=O==="string"&&P.binary===!1&&P.base64===!1;M&&M.binary!==void 0||(P.binary=!U),(R instanceof h&&R.uncompressedSize===0||P.dir||!R||R.length===0)&&(P.base64=!1,P.binary=!0,R="",P.compression="STORE",O="string");var j=null;j=R instanceof h||R instanceof l?R:v.isNode&&v.isStream(R)?new b(T,R):o.prepareContent(T,R,P.binary,P.optimizedBinaryString,P.base64);var V=new m(T,j,P);this.files[T]=V}var a=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),w=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var R=T.lastIndexOf("/");return 0<R?T.substring(0,R):""},x=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},_=function(T,R){return R=R!==void 0?R:d.createFolders,T=x(T),this.files[T]||i.call(this,T,null,{dir:!0,createFolders:R}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var R,M,I;for(R in this.files)I=this.files[R],(M=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&T(M,I)},filter:function(T){var R=[];return this.forEach(function(M,I){T(M,I)&&R.push(I)}),R},file:function(T,R,M){if(arguments.length!==1)return T=this.root+T,i.call(this,T,R,M),this;if(E(T)){var I=T;return this.filter(function(P,U){return!U.dir&&I.test(P)})}var O=this.files[this.root+T];return O&&!O.dir?O:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(O,P){return P.dir&&T.test(O)});var R=this.root+T,M=_.call(this,R),I=this.clone();return I.root=M.name,I},remove:function(T){T=this.root+T;var R=this.files[T];if(R||(T.slice(-1)!=="/"&&(T+="/"),R=this.files[T]),R&&!R.dir)delete this.files[T];else for(var M=this.filter(function(O,P){return P.name.slice(0,T.length)===T}),I=0;I<M.length;I++)delete this.files[M[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var R,M={};try{if((M=o.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");o.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var I=M.comment||this.comment||"";R=g.generateWorker(this,M,I)}catch(O){(R=new l("error")).error(O)}return new c(R,M.type||"string",M.mimeType)},generateAsync:function(T,R){return this.generateInternalStream(T).accumulate(R)},generateNodeStream:function(T,R){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(R)}};r.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function a(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===c&&this.data[m+2]===d&&this.data[m+3]===h)return m-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.readData(4);return l===m[0]&&c===m[1]&&d===m[2]&&h===m[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function a(o){i.call(this,o)}n("../utils").inherits(a,i),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),a=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||a.uint8array?m==="nodebuffer"?new c(h):a.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),a=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),a=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),c=n("../support"),d=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,b){return new d.Promise(function(w,x){var _=[],E=v._internalType,k=v._outputType,T=v._mimeType;v.on("data",function(R,M){_.push(R),b&&b(M)}).on("error",function(R){_=[],x(R)}).on("end",function(){try{var R=function(M,I,O){switch(M){case"blob":return i.newBlob(i.transformTo("arraybuffer",I),O);case"base64":return l.encode(I);default:return i.transformTo(M,I)}}(k,function(M,I){var O,P=0,U=null,j=0;for(O=0;O<I.length;O++)j+=I[O].length;switch(M){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(U=new Uint8Array(j),O=0;O<I.length;O++)U.set(I[O],P),P+=I[O].length;return U;case"nodebuffer":return Jt.concat(I);default:throw new Error("concat : unsupported type '"+M+"'")}}(E,_),T);w(R)}catch(M){x(M)}_=[]}).resume()})}function g(v,b,w){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=w,i.checkSupport(x),this._worker=v.pipe(new a(x)),v.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,b){var w=this;return v==="data"?this._worker.on(v,function(x){b.call(w,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Jt<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}s.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var b,w,x,_,E,k=v.length,T=0;for(_=0;_<k;_++)(64512&(w=v.charCodeAt(_)))==55296&&_+1<k&&(64512&(x=v.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),_++),T+=w<128?1:w<2048?2:w<65536?3:4;for(b=a.uint8array?new Uint8Array(T):new Array(T),_=E=0;E<T;_++)(64512&(w=v.charCodeAt(_)))==55296&&_+1<k&&(64512&(x=v.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),_++),w<128?b[E++]=w:(w<2048?b[E++]=192|w>>>6:(w<65536?b[E++]=224|w>>>12:(b[E++]=240|w>>>18,b[E++]=128|w>>>12&63),b[E++]=128|w>>>6&63),b[E++]=128|63&w);return b}(g)},s.utf8decode=function(g){return a.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,w,x,_,E=v.length,k=new Array(2*E);for(b=w=0;b<E;)if((x=v[b++])<128)k[w++]=x;else if(4<(_=c[x]))k[w++]=65533,b+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&b<E;)x=x<<6|63&v[b++],_--;1<_?k[w++]=65533:x<65536?k[w++]=x:(x-=65536,k[w++]=55296|x>>10&1023,k[w++]=56320|1023&x)}return k.length!==w&&(k.subarray?k=k.subarray(0,w):k.length=w),i.applyFromCharCode(k)}(g=i.transformTo(a.uint8array?"uint8array":"array",g))},i.inherits(h,l),h.prototype.processChunk=function(g){var v=i.transformTo(a.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var w=function(_,E){var k;for((E=E||_.length)>_.length&&(E=_.length),k=E-1;0<=k&&(192&_[k])==128;)k--;return k<0||k===0?E:k+c[_[k]]>E?k:E}(v),x=v;w!==v.length&&(a.uint8array?(x=v.subarray(0,w),this.leftOver=v.subarray(w,v.length)):(x=v.slice(0,w),this.leftOver=v.slice(w,v.length))),this.push({data:s.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=h,i.inherits(m,l),m.prototype.processChunk=function(g){this.push({data:s.utf8encode(g.data),meta:g.meta})},s.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function c(b){return b}function d(b,w){for(var x=0;x<b.length;++x)w[x]=255&b.charCodeAt(x);return w}n("setimmediate"),s.newBlob=function(b,w){s.checkSupport("blob");try{return new Blob([b],{type:w})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,w,x){var _=[],E=0,k=b.length;if(k<=x)return String.fromCharCode.apply(null,b);for(;E<k;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,k)))):_.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,k)))),E+=x;return _.join("")},stringifyByChar:function(b){for(var w="",x=0;x<b.length;x++)w+=String.fromCharCode(b[x]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(b){var w=65536,x=s.getTypeOf(b),_=!0;if(x==="uint8array"?_=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return h.stringifyByChunk(b,x,w)}catch{w=Math.floor(w/2)}return h.stringifyByChar(b)}function g(b,w){for(var x=0;x<b.length;x++)w[x]=b[x];return w}s.applyFromCharCode=m;var v={};v.string={string:c,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,o.allocBuffer(b.length))}},v.array={string:m,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return m(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:c},s.transformTo=function(b,w){if(w=w||"",!b)return w;s.checkSupport(b);var x=s.getTypeOf(w);return v[x][b](w)},s.resolve=function(b){for(var w=b.split("/"),x=[],_=0;_<w.length;_++){var E=w[_];E==="."||E===""&&_!==0&&_!==w.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},s.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(b){var w,x,_="";for(x=0;x<(b||"").length;x++)_+="\\x"+((w=b.charCodeAt(x))<16?"0":"")+w.toString(16).toUpperCase();return _},s.delay=function(b,w,x){setImmediate(function(){b.apply(x||null,w||[])})},s.inherits=function(b,w){function x(){}x.prototype=w.prototype,b.prototype=new x},s.extend=function(){var b,w,x={};for(b=0;b<arguments.length;b++)for(w in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],w)&&x[w]===void 0&&(x[w]=arguments[b][w]);return x},s.prepareContent=function(b,w,x,_,E){return l.Promise.resolve(w).then(function(k){return i.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new l.Promise(function(T,R){var M=new FileReader;M.onload=function(I){T(I.target.result)},M.onerror=function(I){R(I.target.error)},M.readAsArrayBuffer(k)}):k}).then(function(k){var T=s.getTypeOf(k);return T?(T==="arraybuffer"?k=s.transformTo("uint8array",k):T==="string"&&(E?k=a.decode(k):x&&_!==!0&&(k=function(R){return d(R,i.uint8array?new Uint8Array(R.length):new Array(R.length))}(k))),k):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),l=n("./zipEntry"),c=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(m)+", expected "+a.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=c.uint8array?"uint8array":"array",g=a.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),d=n("./compressions"),h=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(w){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===w)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,w,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),b=g.readInt(2),w=g.readData(b),this.extraFields[v]={id:v,length:b,value:w};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=a.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var x=a.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(v,b,w){this.name=v,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=b,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,w="string";try{if(!v)throw new Error("No output type specified.");var x=(w=v.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),b=this._decompressWorker();var _=!this._dataBinary;_&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!_&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new a(b,w,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(w,v,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var a,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),a=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,a=function(){m.port2.postMessage(0)}}var g=[];function v(){var b,w;o=!0;for(var x=g.length;x;){for(w=g,g=[],b=-1;++b<x;)w[b]();x=g.length}o=!1}r.exports=function(b){g.push(b)!==1||o||a()}}).call(this,typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==a&&b(this,x)}function m(x,_,E){this.promise=x,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,_,E){i(function(){var k;try{k=_(E)}catch(T){return o.reject(x,T)}k===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,k)})}function v(x){var _=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof _=="function")return function(){_.apply(x,arguments)}}function b(x,_){var E=!1;function k(M){E||(E=!0,o.reject(x,M))}function T(M){E||(E=!0,o.resolve(x,M))}var R=w(function(){_(T,k)});R.status==="error"&&k(R.value)}function w(x,_){var E={};try{E.value=x(_),E.status="success"}catch(k){E.status="error",E.value=k}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var _=this.constructor;return this.then(function(E){return _.resolve(x()).then(function(){return E})},function(E){return _.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,_){if(typeof x!="function"&&this.state===c||typeof _!="function"&&this.state===l)return this;var E=new this.constructor(a);return this.state!==d?g(E,this.state===c?x:_,this.outcome):this.queue.push(new m(E,x,_)),E},m.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){o.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},o.resolve=function(x,_){var E=w(v,_);if(E.status==="error")return o.reject(x,E.value);var k=E.value;if(k)b(x,k);else{x.state=c,x.outcome=_;for(var T=-1,R=x.queue.length;++T<R;)x.queue[T].callFulfilled(_)}return x},o.reject=function(x,_){x.state=l,x.outcome=_;for(var E=-1,k=x.queue.length;++E<k;)x.queue[E].callRejected(_);return x},h.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},h.reject=function(x){var _=new this(a);return o.reject(_,x)},h.all=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,k=!1;if(!E)return this.resolve([]);for(var T=new Array(E),R=0,M=-1,I=new this(a);++M<E;)O(x[M],M);return I;function O(P,U){_.resolve(P).then(function(j){T[U]=j,++R!==E||k||(k=!0,o.resolve(I,T))},function(j){k||(k=!0,o.reject(I,j))})}},h.race=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,k=!1;if(!E)return this.resolve([]);for(var T=-1,R=new this(a);++T<E;)M=x[T],_.resolve(M).then(function(I){k||(k=!0,o.resolve(R,I))},function(I){k||(k=!0,o.reject(R,I))});var M;return R}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,h=0,m=-1,g=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(E!==h)throw new Error(l[E]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var k;if(k=typeof _.dictionary=="string"?o.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(E=i.deflateSetDictionary(this.strm,k))!==h)throw new Error(l[E]);this._dict_set=!0}}function w(x,_){var E=new b(_);if(E.push(x,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(x,_){var E,k,T=this.strm,R=this.options.chunkSize;if(this.ended)return!1;k=_===~~_?_:_===!0?4:0,typeof x=="string"?T.input=o.string2buf(x):d.call(x)==="[object ArrayBuffer]"?T.input=new Uint8Array(x):T.input=x,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new a.Buf8(R),T.next_out=0,T.avail_out=R),(E=i.deflate(T,k))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(T.output,T.next_out))):this.onData(a.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return k===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):k!==2||(this.onEnd(h),!(T.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Deflate=b,s.deflate=w,s.deflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},s.gzip=function(x,_){return(_=_||{}).gzip=!0,w(x,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||b&&b.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,w.windowBits);if(x!==l.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,w){var x=new g(w);if(x.push(b,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(b,w){var x,_,E,k,T,R,M=this.strm,I=this.options.chunkSize,O=this.options.dictionary,P=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?M.input=o.binstring2buf(b):m.call(b)==="[object ArrayBuffer]"?M.input=new Uint8Array(b):M.input=b,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new a.Buf8(I),M.next_out=0,M.avail_out=I),(x=i.inflate(M,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&O&&(R=typeof O=="string"?o.string2buf(O):m.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,x=i.inflateSetDictionary(this.strm,R)),x===l.Z_BUF_ERROR&&P===!0&&(x=l.Z_OK,P=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&x!==l.Z_STREAM_END&&(M.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(M.output,M.next_out),k=M.next_out-E,T=o.buf2string(M.output,E),M.next_out=k,M.avail_out=I-k,k&&a.arraySet(M.output,M.output,E,k,0),this.onData(T)):this.onData(a.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(P=!0)}while((0<M.avail_in||M.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(M.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},s.Inflate=g,s.inflate=v,s.inflateRaw=function(b,w){return(w=w||{}).raw=!0,v(b,w)},s.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,d,h,m){if(c.subarray&&l.subarray)l.set(c.subarray(d,d+h),m);else for(var g=0;g<h;g++)l[m+g]=c[d+g]},flattenChunks:function(l){var c,d,h,m,g,v;for(c=h=0,d=l.length;c<d;c++)h+=l[c].length;for(v=new Uint8Array(h),c=m=0,d=l.length;c<d;c++)g=l[c],v.set(g,m),m+=g.length;return v}},o={arraySet:function(l,c,d,h,m){for(var g=0;g<h;g++)l[m+g]=c[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,o))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(h,m){if(m<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(h[v]);return g}l[254]=l[254]=1,s.string2buf=function(h){var m,g,v,b,w,x=h.length,_=0;for(b=0;b<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),_+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(_),b=w=0;w<_;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?m[w++]=g:(g<2048?m[w++]=192|g>>>6:(g<65536?m[w++]=224|g>>>12:(m[w++]=240|g>>>18,m[w++]=128|g>>>12&63),m[w++]=128|g>>>6&63),m[w++]=128|63&g);return m},s.buf2binstring=function(h){return d(h,h.length)},s.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,v=m.length;g<v;g++)m[g]=h.charCodeAt(g);return m},s.buf2string=function(h,m){var g,v,b,w,x=m||h.length,_=new Array(2*x);for(g=v=0;g<x;)if((b=h[g++])<128)_[v++]=b;else if(4<(w=l[b]))_[v++]=65533,g+=w-1;else{for(b&=w===2?31:w===3?15:7;1<w&&g<x;)b=b<<6|63&h[g++],w--;1<w?_[v++]=65533:b<65536?_[v++]=b:(b-=65536,_[v++]=55296|b>>10&1023,_[v++]=56320|1023&b)}return d(_,v)},s.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+l[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,a,o,l){for(var c=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(c=c+a[l++]|0)|0,--h;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();r.exports=function(a,o,l,c){var d=i,h=c+l;a^=-1;for(var m=c;m<h;m++)a=a>>>8^d[255&(a^o[m])];return-1^a}},{}],46:[function(n,r,s){var i,a=n("../utils/common"),o=n("./trees"),l=n("./adler32"),c=n("./crc32"),d=n("./messages"),h=0,m=4,g=0,v=-2,b=-1,w=4,x=2,_=8,E=9,k=286,T=30,R=19,M=2*k+1,I=15,O=3,P=258,U=P+O+1,j=42,V=113,$=1,re=2,J=3,te=4;function X(H,ue){return H.msg=d[ue],ue}function ie(H){return(H<<1)-(4<H?9:0)}function Z(H){for(var ue=H.length;0<=--ue;)H[ue]=0}function ee(H){var ue=H.state,ke=ue.pending;ke>H.avail_out&&(ke=H.avail_out),ke!==0&&(a.arraySet(H.output,ue.pending_buf,ue.pending_out,ke,H.next_out),H.next_out+=ke,ue.pending_out+=ke,H.total_out+=ke,H.avail_out-=ke,ue.pending-=ke,ue.pending===0&&(ue.pending_out=0))}function Q(H,ue){o._tr_flush_block(H,0<=H.block_start?H.block_start:-1,H.strstart-H.block_start,ue),H.block_start=H.strstart,ee(H.strm)}function he(H,ue){H.pending_buf[H.pending++]=ue}function Se(H,ue){H.pending_buf[H.pending++]=ue>>>8&255,H.pending_buf[H.pending++]=255&ue}function ce(H,ue){var ke,ae,oe=H.max_chain_length,ne=H.strstart,Ee=H.prev_length,Le=H.nice_match,Te=H.strstart>H.w_size-U?H.strstart-(H.w_size-U):0,Xe=H.window,St=H.w_mask,dt=H.prev,It=H.strstart+P,Vt=Xe[ne+Ee-1],Dt=Xe[ne+Ee];H.prev_length>=H.good_match&&(oe>>=2),Le>H.lookahead&&(Le=H.lookahead);do if(Xe[(ke=ue)+Ee]===Dt&&Xe[ke+Ee-1]===Vt&&Xe[ke]===Xe[ne]&&Xe[++ke]===Xe[ne+1]){ne+=2,ke++;do;while(Xe[++ne]===Xe[++ke]&&Xe[++ne]===Xe[++ke]&&Xe[++ne]===Xe[++ke]&&Xe[++ne]===Xe[++ke]&&Xe[++ne]===Xe[++ke]&&Xe[++ne]===Xe[++ke]&&Xe[++ne]===Xe[++ke]&&Xe[++ne]===Xe[++ke]&&ne<It);if(ae=P-(It-ne),ne=It-P,Ee<ae){if(H.match_start=ue,Le<=(Ee=ae))break;Vt=Xe[ne+Ee-1],Dt=Xe[ne+Ee]}}while((ue=dt[ue&St])>Te&&--oe!=0);return Ee<=H.lookahead?Ee:H.lookahead}function je(H){var ue,ke,ae,oe,ne,Ee,Le,Te,Xe,St,dt=H.w_size;do{if(oe=H.window_size-H.lookahead-H.strstart,H.strstart>=dt+(dt-U)){for(a.arraySet(H.window,H.window,dt,dt,0),H.match_start-=dt,H.strstart-=dt,H.block_start-=dt,ue=ke=H.hash_size;ae=H.head[--ue],H.head[ue]=dt<=ae?ae-dt:0,--ke;);for(ue=ke=dt;ae=H.prev[--ue],H.prev[ue]=dt<=ae?ae-dt:0,--ke;);oe+=dt}if(H.strm.avail_in===0)break;if(Ee=H.strm,Le=H.window,Te=H.strstart+H.lookahead,Xe=oe,St=void 0,St=Ee.avail_in,Xe<St&&(St=Xe),ke=St===0?0:(Ee.avail_in-=St,a.arraySet(Le,Ee.input,Ee.next_in,St,Te),Ee.state.wrap===1?Ee.adler=l(Ee.adler,Le,St,Te):Ee.state.wrap===2&&(Ee.adler=c(Ee.adler,Le,St,Te)),Ee.next_in+=St,Ee.total_in+=St,St),H.lookahead+=ke,H.lookahead+H.insert>=O)for(ne=H.strstart-H.insert,H.ins_h=H.window[ne],H.ins_h=(H.ins_h<<H.hash_shift^H.window[ne+1])&H.hash_mask;H.insert&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[ne+O-1])&H.hash_mask,H.prev[ne&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=ne,ne++,H.insert--,!(H.lookahead+H.insert<O)););}while(H.lookahead<U&&H.strm.avail_in!==0)}function De(H,ue){for(var ke,ae;;){if(H.lookahead<U){if(je(H),H.lookahead<U&&ue===h)return $;if(H.lookahead===0)break}if(ke=0,H.lookahead>=O&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,ke=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),ke!==0&&H.strstart-ke<=H.w_size-U&&(H.match_length=ce(H,ke)),H.match_length>=O)if(ae=o._tr_tally(H,H.strstart-H.match_start,H.match_length-O),H.lookahead-=H.match_length,H.match_length<=H.max_lazy_match&&H.lookahead>=O){for(H.match_length--;H.strstart++,H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,ke=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart,--H.match_length!=0;);H.strstart++}else H.strstart+=H.match_length,H.match_length=0,H.ins_h=H.window[H.strstart],H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+1])&H.hash_mask;else ae=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++;if(ae&&(Q(H,!1),H.strm.avail_out===0))return $}return H.insert=H.strstart<O-1?H.strstart:O-1,ue===m?(Q(H,!0),H.strm.avail_out===0?J:te):H.last_lit&&(Q(H,!1),H.strm.avail_out===0)?$:re}function Re(H,ue){for(var ke,ae,oe;;){if(H.lookahead<U){if(je(H),H.lookahead<U&&ue===h)return $;if(H.lookahead===0)break}if(ke=0,H.lookahead>=O&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,ke=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),H.prev_length=H.match_length,H.prev_match=H.match_start,H.match_length=O-1,ke!==0&&H.prev_length<H.max_lazy_match&&H.strstart-ke<=H.w_size-U&&(H.match_length=ce(H,ke),H.match_length<=5&&(H.strategy===1||H.match_length===O&&4096<H.strstart-H.match_start)&&(H.match_length=O-1)),H.prev_length>=O&&H.match_length<=H.prev_length){for(oe=H.strstart+H.lookahead-O,ae=o._tr_tally(H,H.strstart-1-H.prev_match,H.prev_length-O),H.lookahead-=H.prev_length-1,H.prev_length-=2;++H.strstart<=oe&&(H.ins_h=(H.ins_h<<H.hash_shift^H.window[H.strstart+O-1])&H.hash_mask,ke=H.prev[H.strstart&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=H.strstart),--H.prev_length!=0;);if(H.match_available=0,H.match_length=O-1,H.strstart++,ae&&(Q(H,!1),H.strm.avail_out===0))return $}else if(H.match_available){if((ae=o._tr_tally(H,0,H.window[H.strstart-1]))&&Q(H,!1),H.strstart++,H.lookahead--,H.strm.avail_out===0)return $}else H.match_available=1,H.strstart++,H.lookahead--}return H.match_available&&(ae=o._tr_tally(H,0,H.window[H.strstart-1]),H.match_available=0),H.insert=H.strstart<O-1?H.strstart:O-1,ue===m?(Q(H,!0),H.strm.avail_out===0?J:te):H.last_lit&&(Q(H,!1),H.strm.avail_out===0)?$:re}function xe(H,ue,ke,ae,oe){this.good_length=H,this.max_lazy=ue,this.nice_length=ke,this.max_chain=ae,this.func=oe}function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*M),this.dyn_dtree=new a.Buf16(2*(2*T+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(I+1),this.heap=new a.Buf16(2*k+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*k+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(H){var ue;return H&&H.state?(H.total_in=H.total_out=0,H.data_type=x,(ue=H.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?j:V,H.adler=ue.wrap===2?0:1,ue.last_flush=h,o._tr_init(ue),g):X(H,v)}function He(H){var ue=st(H);return ue===g&&function(ke){ke.window_size=2*ke.w_size,Z(ke.head),ke.max_lazy_match=i[ke.level].max_lazy,ke.good_match=i[ke.level].good_length,ke.nice_match=i[ke.level].nice_length,ke.max_chain_length=i[ke.level].max_chain,ke.strstart=0,ke.block_start=0,ke.lookahead=0,ke.insert=0,ke.match_length=ke.prev_length=O-1,ke.match_available=0,ke.ins_h=0}(H.state),ue}function Ne(H,ue,ke,ae,oe,ne){if(!H)return v;var Ee=1;if(ue===b&&(ue=6),ae<0?(Ee=0,ae=-ae):15<ae&&(Ee=2,ae-=16),oe<1||E<oe||ke!==_||ae<8||15<ae||ue<0||9<ue||ne<0||w<ne)return X(H,v);ae===8&&(ae=9);var Le=new Fe;return(H.state=Le).strm=H,Le.wrap=Ee,Le.gzhead=null,Le.w_bits=ae,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=oe+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+O-1)/O),Le.window=new a.Buf8(2*Le.w_size),Le.head=new a.Buf16(Le.hash_size),Le.prev=new a.Buf16(Le.w_size),Le.lit_bufsize=1<<oe+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new a.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=ue,Le.strategy=ne,Le.method=ke,He(H)}i=[new xe(0,0,0,0,function(H,ue){var ke=65535;for(ke>H.pending_buf_size-5&&(ke=H.pending_buf_size-5);;){if(H.lookahead<=1){if(je(H),H.lookahead===0&&ue===h)return $;if(H.lookahead===0)break}H.strstart+=H.lookahead,H.lookahead=0;var ae=H.block_start+ke;if((H.strstart===0||H.strstart>=ae)&&(H.lookahead=H.strstart-ae,H.strstart=ae,Q(H,!1),H.strm.avail_out===0)||H.strstart-H.block_start>=H.w_size-U&&(Q(H,!1),H.strm.avail_out===0))return $}return H.insert=0,ue===m?(Q(H,!0),H.strm.avail_out===0?J:te):(H.strstart>H.block_start&&(Q(H,!1),H.strm.avail_out),$)}),new xe(4,4,8,4,De),new xe(4,5,16,8,De),new xe(4,6,32,32,De),new xe(4,4,16,16,Re),new xe(8,16,32,32,Re),new xe(8,16,128,128,Re),new xe(8,32,128,256,Re),new xe(32,128,258,1024,Re),new xe(32,258,258,4096,Re)],s.deflateInit=function(H,ue){return Ne(H,ue,_,15,8,0)},s.deflateInit2=Ne,s.deflateReset=He,s.deflateResetKeep=st,s.deflateSetHeader=function(H,ue){return H&&H.state?H.state.wrap!==2?v:(H.state.gzhead=ue,g):v},s.deflate=function(H,ue){var ke,ae,oe,ne;if(!H||!H.state||5<ue||ue<0)return H?X(H,v):v;if(ae=H.state,!H.output||!H.input&&H.avail_in!==0||ae.status===666&&ue!==m)return X(H,H.avail_out===0?-5:v);if(ae.strm=H,ke=ae.last_flush,ae.last_flush=ue,ae.status===j)if(ae.wrap===2)H.adler=0,he(ae,31),he(ae,139),he(ae,8),ae.gzhead?(he(ae,(ae.gzhead.text?1:0)+(ae.gzhead.hcrc?2:0)+(ae.gzhead.extra?4:0)+(ae.gzhead.name?8:0)+(ae.gzhead.comment?16:0)),he(ae,255&ae.gzhead.time),he(ae,ae.gzhead.time>>8&255),he(ae,ae.gzhead.time>>16&255),he(ae,ae.gzhead.time>>24&255),he(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),he(ae,255&ae.gzhead.os),ae.gzhead.extra&&ae.gzhead.extra.length&&(he(ae,255&ae.gzhead.extra.length),he(ae,ae.gzhead.extra.length>>8&255)),ae.gzhead.hcrc&&(H.adler=c(H.adler,ae.pending_buf,ae.pending,0)),ae.gzindex=0,ae.status=69):(he(ae,0),he(ae,0),he(ae,0),he(ae,0),he(ae,0),he(ae,ae.level===9?2:2<=ae.strategy||ae.level<2?4:0),he(ae,3),ae.status=V);else{var Ee=_+(ae.w_bits-8<<4)<<8;Ee|=(2<=ae.strategy||ae.level<2?0:ae.level<6?1:ae.level===6?2:3)<<6,ae.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,ae.status=V,Se(ae,Ee),ae.strstart!==0&&(Se(ae,H.adler>>>16),Se(ae,65535&H.adler)),H.adler=1}if(ae.status===69)if(ae.gzhead.extra){for(oe=ae.pending;ae.gzindex<(65535&ae.gzhead.extra.length)&&(ae.pending!==ae.pending_buf_size||(ae.gzhead.hcrc&&ae.pending>oe&&(H.adler=c(H.adler,ae.pending_buf,ae.pending-oe,oe)),ee(H),oe=ae.pending,ae.pending!==ae.pending_buf_size));)he(ae,255&ae.gzhead.extra[ae.gzindex]),ae.gzindex++;ae.gzhead.hcrc&&ae.pending>oe&&(H.adler=c(H.adler,ae.pending_buf,ae.pending-oe,oe)),ae.gzindex===ae.gzhead.extra.length&&(ae.gzindex=0,ae.status=73)}else ae.status=73;if(ae.status===73)if(ae.gzhead.name){oe=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>oe&&(H.adler=c(H.adler,ae.pending_buf,ae.pending-oe,oe)),ee(H),oe=ae.pending,ae.pending===ae.pending_buf_size)){ne=1;break}ne=ae.gzindex<ae.gzhead.name.length?255&ae.gzhead.name.charCodeAt(ae.gzindex++):0,he(ae,ne)}while(ne!==0);ae.gzhead.hcrc&&ae.pending>oe&&(H.adler=c(H.adler,ae.pending_buf,ae.pending-oe,oe)),ne===0&&(ae.gzindex=0,ae.status=91)}else ae.status=91;if(ae.status===91)if(ae.gzhead.comment){oe=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>oe&&(H.adler=c(H.adler,ae.pending_buf,ae.pending-oe,oe)),ee(H),oe=ae.pending,ae.pending===ae.pending_buf_size)){ne=1;break}ne=ae.gzindex<ae.gzhead.comment.length?255&ae.gzhead.comment.charCodeAt(ae.gzindex++):0,he(ae,ne)}while(ne!==0);ae.gzhead.hcrc&&ae.pending>oe&&(H.adler=c(H.adler,ae.pending_buf,ae.pending-oe,oe)),ne===0&&(ae.status=103)}else ae.status=103;if(ae.status===103&&(ae.gzhead.hcrc?(ae.pending+2>ae.pending_buf_size&&ee(H),ae.pending+2<=ae.pending_buf_size&&(he(ae,255&H.adler),he(ae,H.adler>>8&255),H.adler=0,ae.status=V)):ae.status=V),ae.pending!==0){if(ee(H),H.avail_out===0)return ae.last_flush=-1,g}else if(H.avail_in===0&&ie(ue)<=ie(ke)&&ue!==m)return X(H,-5);if(ae.status===666&&H.avail_in!==0)return X(H,-5);if(H.avail_in!==0||ae.lookahead!==0||ue!==h&&ae.status!==666){var Le=ae.strategy===2?function(Te,Xe){for(var St;;){if(Te.lookahead===0&&(je(Te),Te.lookahead===0)){if(Xe===h)return $;break}if(Te.match_length=0,St=o._tr_tally(Te,0,Te.window[Te.strstart]),Te.lookahead--,Te.strstart++,St&&(Q(Te,!1),Te.strm.avail_out===0))return $}return Te.insert=0,Xe===m?(Q(Te,!0),Te.strm.avail_out===0?J:te):Te.last_lit&&(Q(Te,!1),Te.strm.avail_out===0)?$:re}(ae,ue):ae.strategy===3?function(Te,Xe){for(var St,dt,It,Vt,Dt=Te.window;;){if(Te.lookahead<=P){if(je(Te),Te.lookahead<=P&&Xe===h)return $;if(Te.lookahead===0)break}if(Te.match_length=0,Te.lookahead>=O&&0<Te.strstart&&(dt=Dt[It=Te.strstart-1])===Dt[++It]&&dt===Dt[++It]&&dt===Dt[++It]){Vt=Te.strstart+P;do;while(dt===Dt[++It]&&dt===Dt[++It]&&dt===Dt[++It]&&dt===Dt[++It]&&dt===Dt[++It]&&dt===Dt[++It]&&dt===Dt[++It]&&dt===Dt[++It]&&It<Vt);Te.match_length=P-(Vt-It),Te.match_length>Te.lookahead&&(Te.match_length=Te.lookahead)}if(Te.match_length>=O?(St=o._tr_tally(Te,1,Te.match_length-O),Te.lookahead-=Te.match_length,Te.strstart+=Te.match_length,Te.match_length=0):(St=o._tr_tally(Te,0,Te.window[Te.strstart]),Te.lookahead--,Te.strstart++),St&&(Q(Te,!1),Te.strm.avail_out===0))return $}return Te.insert=0,Xe===m?(Q(Te,!0),Te.strm.avail_out===0?J:te):Te.last_lit&&(Q(Te,!1),Te.strm.avail_out===0)?$:re}(ae,ue):i[ae.level].func(ae,ue);if(Le!==J&&Le!==te||(ae.status=666),Le===$||Le===J)return H.avail_out===0&&(ae.last_flush=-1),g;if(Le===re&&(ue===1?o._tr_align(ae):ue!==5&&(o._tr_stored_block(ae,0,0,!1),ue===3&&(Z(ae.head),ae.lookahead===0&&(ae.strstart=0,ae.block_start=0,ae.insert=0))),ee(H),H.avail_out===0))return ae.last_flush=-1,g}return ue!==m?g:ae.wrap<=0?1:(ae.wrap===2?(he(ae,255&H.adler),he(ae,H.adler>>8&255),he(ae,H.adler>>16&255),he(ae,H.adler>>24&255),he(ae,255&H.total_in),he(ae,H.total_in>>8&255),he(ae,H.total_in>>16&255),he(ae,H.total_in>>24&255)):(Se(ae,H.adler>>>16),Se(ae,65535&H.adler)),ee(H),0<ae.wrap&&(ae.wrap=-ae.wrap),ae.pending!==0?g:1)},s.deflateEnd=function(H){var ue;return H&&H.state?(ue=H.state.status)!==j&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==V&&ue!==666?X(H,v):(H.state=null,ue===V?X(H,-3):g):v},s.deflateSetDictionary=function(H,ue){var ke,ae,oe,ne,Ee,Le,Te,Xe,St=ue.length;if(!H||!H.state||(ne=(ke=H.state).wrap)===2||ne===1&&ke.status!==j||ke.lookahead)return v;for(ne===1&&(H.adler=l(H.adler,ue,St,0)),ke.wrap=0,St>=ke.w_size&&(ne===0&&(Z(ke.head),ke.strstart=0,ke.block_start=0,ke.insert=0),Xe=new a.Buf8(ke.w_size),a.arraySet(Xe,ue,St-ke.w_size,ke.w_size,0),ue=Xe,St=ke.w_size),Ee=H.avail_in,Le=H.next_in,Te=H.input,H.avail_in=St,H.next_in=0,H.input=ue,je(ke);ke.lookahead>=O;){for(ae=ke.strstart,oe=ke.lookahead-(O-1);ke.ins_h=(ke.ins_h<<ke.hash_shift^ke.window[ae+O-1])&ke.hash_mask,ke.prev[ae&ke.w_mask]=ke.head[ke.ins_h],ke.head[ke.ins_h]=ae,ae++,--oe;);ke.strstart=ae,ke.lookahead=O-1,je(ke)}return ke.strstart+=ke.lookahead,ke.block_start=ke.strstart,ke.insert=ke.lookahead,ke.lookahead=0,ke.match_length=ke.prev_length=O-1,ke.match_available=0,H.next_in=Le,H.input=Te,H.avail_in=Ee,ke.wrap=ne,g},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,a){var o,l,c,d,h,m,g,v,b,w,x,_,E,k,T,R,M,I,O,P,U,j,V,$,re;o=i.state,l=i.next_in,$=i.input,c=l+(i.avail_in-5),d=i.next_out,re=i.output,h=d-(a-i.avail_out),m=d+(i.avail_out-257),g=o.dmax,v=o.wsize,b=o.whave,w=o.wnext,x=o.window,_=o.hold,E=o.bits,k=o.lencode,T=o.distcode,R=(1<<o.lenbits)-1,M=(1<<o.distbits)-1;e:do{E<15&&(_+=$[l++]<<E,E+=8,_+=$[l++]<<E,E+=8),I=k[_&R];t:for(;;){if(_>>>=O=I>>>24,E-=O,(O=I>>>16&255)===0)re[d++]=65535&I;else{if(!(16&O)){if((64&O)==0){I=k[(65535&I)+(_&(1<<O)-1)];continue t}if(32&O){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}P=65535&I,(O&=15)&&(E<O&&(_+=$[l++]<<E,E+=8),P+=_&(1<<O)-1,_>>>=O,E-=O),E<15&&(_+=$[l++]<<E,E+=8,_+=$[l++]<<E,E+=8),I=T[_&M];n:for(;;){if(_>>>=O=I>>>24,E-=O,!(16&(O=I>>>16&255))){if((64&O)==0){I=T[(65535&I)+(_&(1<<O)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(U=65535&I,E<(O&=15)&&(_+=$[l++]<<E,(E+=8)<O&&(_+=$[l++]<<E,E+=8)),g<(U+=_&(1<<O)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=O,E-=O,(O=d-h)<U){if(b<(O=U-O)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(V=x,(j=0)===w){if(j+=v-O,O<P){for(P-=O;re[d++]=x[j++],--O;);j=d-U,V=re}}else if(w<O){if(j+=v+w-O,(O-=w)<P){for(P-=O;re[d++]=x[j++],--O;);if(j=0,w<P){for(P-=O=w;re[d++]=x[j++],--O;);j=d-U,V=re}}}else if(j+=w-O,O<P){for(P-=O;re[d++]=x[j++],--O;);j=d-U,V=re}for(;2<P;)re[d++]=V[j++],re[d++]=V[j++],re[d++]=V[j++],P-=3;P&&(re[d++]=V[j++],1<P&&(re[d++]=V[j++]))}else{for(j=d-U;re[d++]=re[j++],re[d++]=re[j++],re[d++]=re[j++],2<(P-=3););P&&(re[d++]=re[j++],1<P&&(re[d++]=re[j++]))}break}}break}}while(l<c&&d<m);l-=P=E>>3,_&=(1<<(E-=P<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=d<m?m-d+257:257-(d-m),o.hold=_,o.bits=E}},{}],49:[function(n,r,s){var i=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),d=1,h=2,m=0,g=-2,v=1,b=852,w=592;function x(j){return(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(j){var V;return j&&j.state?(V=j.state,j.total_in=j.total_out=V.total=0,j.msg="",V.wrap&&(j.adler=1&V.wrap),V.mode=v,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new i.Buf32(b),V.distcode=V.distdyn=new i.Buf32(w),V.sane=1,V.back=-1,m):g}function k(j){var V;return j&&j.state?((V=j.state).wsize=0,V.whave=0,V.wnext=0,E(j)):g}function T(j,V){var $,re;return j&&j.state?(re=j.state,V<0?($=0,V=-V):($=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?g:(re.window!==null&&re.wbits!==V&&(re.window=null),re.wrap=$,re.wbits=V,k(j))):g}function R(j,V){var $,re;return j?(re=new _,(j.state=re).window=null,($=T(j,V))!==m&&(j.state=null),$):g}var M,I,O=!0;function P(j){if(O){var V;for(M=new i.Buf32(512),I=new i.Buf32(32),V=0;V<144;)j.lens[V++]=8;for(;V<256;)j.lens[V++]=9;for(;V<280;)j.lens[V++]=7;for(;V<288;)j.lens[V++]=8;for(c(d,j.lens,0,288,M,0,j.work,{bits:9}),V=0;V<32;)j.lens[V++]=5;c(h,j.lens,0,32,I,0,j.work,{bits:5}),O=!1}j.lencode=M,j.lenbits=9,j.distcode=I,j.distbits=5}function U(j,V,$,re){var J,te=j.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new i.Buf8(te.wsize)),re>=te.wsize?(i.arraySet(te.window,V,$-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(re<(J=te.wsize-te.wnext)&&(J=re),i.arraySet(te.window,V,$-re,J,te.wnext),(re-=J)?(i.arraySet(te.window,V,$-re,re,0),te.wnext=re,te.whave=te.wsize):(te.wnext+=J,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=J))),0}s.inflateReset=k,s.inflateReset2=T,s.inflateResetKeep=E,s.inflateInit=function(j){return R(j,15)},s.inflateInit2=R,s.inflate=function(j,V){var $,re,J,te,X,ie,Z,ee,Q,he,Se,ce,je,De,Re,xe,Fe,st,He,Ne,H,ue,ke,ae,oe=0,ne=new i.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return g;($=j.state).mode===12&&($.mode=13),X=j.next_out,J=j.output,Z=j.avail_out,te=j.next_in,re=j.input,ie=j.avail_in,ee=$.hold,Q=$.bits,he=ie,Se=Z,ue=m;e:for(;;)switch($.mode){case v:if($.wrap===0){$.mode=13;break}for(;Q<16;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if(2&$.wrap&&ee===35615){ne[$.check=0]=255&ee,ne[1]=ee>>>8&255,$.check=o($.check,ne,2,0),Q=ee=0,$.mode=2;break}if($.flags=0,$.head&&($.head.done=!1),!(1&$.wrap)||(((255&ee)<<8)+(ee>>8))%31){j.msg="incorrect header check",$.mode=30;break}if((15&ee)!=8){j.msg="unknown compression method",$.mode=30;break}if(Q-=4,H=8+(15&(ee>>>=4)),$.wbits===0)$.wbits=H;else if(H>$.wbits){j.msg="invalid window size",$.mode=30;break}$.dmax=1<<H,j.adler=$.check=1,$.mode=512&ee?10:12,Q=ee=0;break;case 2:for(;Q<16;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if($.flags=ee,(255&$.flags)!=8){j.msg="unknown compression method",$.mode=30;break}if(57344&$.flags){j.msg="unknown header flags set",$.mode=30;break}$.head&&($.head.text=ee>>8&1),512&$.flags&&(ne[0]=255&ee,ne[1]=ee>>>8&255,$.check=o($.check,ne,2,0)),Q=ee=0,$.mode=3;case 3:for(;Q<32;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}$.head&&($.head.time=ee),512&$.flags&&(ne[0]=255&ee,ne[1]=ee>>>8&255,ne[2]=ee>>>16&255,ne[3]=ee>>>24&255,$.check=o($.check,ne,4,0)),Q=ee=0,$.mode=4;case 4:for(;Q<16;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}$.head&&($.head.xflags=255&ee,$.head.os=ee>>8),512&$.flags&&(ne[0]=255&ee,ne[1]=ee>>>8&255,$.check=o($.check,ne,2,0)),Q=ee=0,$.mode=5;case 5:if(1024&$.flags){for(;Q<16;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}$.length=ee,$.head&&($.head.extra_len=ee),512&$.flags&&(ne[0]=255&ee,ne[1]=ee>>>8&255,$.check=o($.check,ne,2,0)),Q=ee=0}else $.head&&($.head.extra=null);$.mode=6;case 6:if(1024&$.flags&&(ie<(ce=$.length)&&(ce=ie),ce&&($.head&&(H=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),i.arraySet($.head.extra,re,te,ce,H)),512&$.flags&&($.check=o($.check,re,ce,te)),ie-=ce,te+=ce,$.length-=ce),$.length))break e;$.length=0,$.mode=7;case 7:if(2048&$.flags){if(ie===0)break e;for(ce=0;H=re[te+ce++],$.head&&H&&$.length<65536&&($.head.name+=String.fromCharCode(H)),H&&ce<ie;);if(512&$.flags&&($.check=o($.check,re,ce,te)),ie-=ce,te+=ce,H)break e}else $.head&&($.head.name=null);$.length=0,$.mode=8;case 8:if(4096&$.flags){if(ie===0)break e;for(ce=0;H=re[te+ce++],$.head&&H&&$.length<65536&&($.head.comment+=String.fromCharCode(H)),H&&ce<ie;);if(512&$.flags&&($.check=o($.check,re,ce,te)),ie-=ce,te+=ce,H)break e}else $.head&&($.head.comment=null);$.mode=9;case 9:if(512&$.flags){for(;Q<16;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if(ee!==(65535&$.check)){j.msg="header crc mismatch",$.mode=30;break}Q=ee=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),j.adler=$.check=0,$.mode=12;break;case 10:for(;Q<32;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}j.adler=$.check=x(ee),Q=ee=0,$.mode=11;case 11:if($.havedict===0)return j.next_out=X,j.avail_out=Z,j.next_in=te,j.avail_in=ie,$.hold=ee,$.bits=Q,2;j.adler=$.check=1,$.mode=12;case 12:if(V===5||V===6)break e;case 13:if($.last){ee>>>=7&Q,Q-=7&Q,$.mode=27;break}for(;Q<3;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}switch($.last=1&ee,Q-=1,3&(ee>>>=1)){case 0:$.mode=14;break;case 1:if(P($),$.mode=20,V!==6)break;ee>>>=2,Q-=2;break e;case 2:$.mode=17;break;case 3:j.msg="invalid block type",$.mode=30}ee>>>=2,Q-=2;break;case 14:for(ee>>>=7&Q,Q-=7&Q;Q<32;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if((65535&ee)!=(ee>>>16^65535)){j.msg="invalid stored block lengths",$.mode=30;break}if($.length=65535&ee,Q=ee=0,$.mode=15,V===6)break e;case 15:$.mode=16;case 16:if(ce=$.length){if(ie<ce&&(ce=ie),Z<ce&&(ce=Z),ce===0)break e;i.arraySet(J,re,te,ce,X),ie-=ce,te+=ce,Z-=ce,X+=ce,$.length-=ce;break}$.mode=12;break;case 17:for(;Q<14;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if($.nlen=257+(31&ee),ee>>>=5,Q-=5,$.ndist=1+(31&ee),ee>>>=5,Q-=5,$.ncode=4+(15&ee),ee>>>=4,Q-=4,286<$.nlen||30<$.ndist){j.msg="too many length or distance symbols",$.mode=30;break}$.have=0,$.mode=18;case 18:for(;$.have<$.ncode;){for(;Q<3;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}$.lens[Ee[$.have++]]=7&ee,ee>>>=3,Q-=3}for(;$.have<19;)$.lens[Ee[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,ke={bits:$.lenbits},ue=c(0,$.lens,0,19,$.lencode,0,$.work,ke),$.lenbits=ke.bits,ue){j.msg="invalid code lengths set",$.mode=30;break}$.have=0,$.mode=19;case 19:for(;$.have<$.nlen+$.ndist;){for(;xe=(oe=$.lencode[ee&(1<<$.lenbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=Q);){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if(Fe<16)ee>>>=Re,Q-=Re,$.lens[$.have++]=Fe;else{if(Fe===16){for(ae=Re+2;Q<ae;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if(ee>>>=Re,Q-=Re,$.have===0){j.msg="invalid bit length repeat",$.mode=30;break}H=$.lens[$.have-1],ce=3+(3&ee),ee>>>=2,Q-=2}else if(Fe===17){for(ae=Re+3;Q<ae;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}Q-=Re,H=0,ce=3+(7&(ee>>>=Re)),ee>>>=3,Q-=3}else{for(ae=Re+7;Q<ae;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}Q-=Re,H=0,ce=11+(127&(ee>>>=Re)),ee>>>=7,Q-=7}if($.have+ce>$.nlen+$.ndist){j.msg="invalid bit length repeat",$.mode=30;break}for(;ce--;)$.lens[$.have++]=H}}if($.mode===30)break;if($.lens[256]===0){j.msg="invalid code -- missing end-of-block",$.mode=30;break}if($.lenbits=9,ke={bits:$.lenbits},ue=c(d,$.lens,0,$.nlen,$.lencode,0,$.work,ke),$.lenbits=ke.bits,ue){j.msg="invalid literal/lengths set",$.mode=30;break}if($.distbits=6,$.distcode=$.distdyn,ke={bits:$.distbits},ue=c(h,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,ke),$.distbits=ke.bits,ue){j.msg="invalid distances set",$.mode=30;break}if($.mode=20,V===6)break e;case 20:$.mode=21;case 21:if(6<=ie&&258<=Z){j.next_out=X,j.avail_out=Z,j.next_in=te,j.avail_in=ie,$.hold=ee,$.bits=Q,l(j,Se),X=j.next_out,J=j.output,Z=j.avail_out,te=j.next_in,re=j.input,ie=j.avail_in,ee=$.hold,Q=$.bits,$.mode===12&&($.back=-1);break}for($.back=0;xe=(oe=$.lencode[ee&(1<<$.lenbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=Q);){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if(xe&&(240&xe)==0){for(st=Re,He=xe,Ne=Fe;xe=(oe=$.lencode[Ne+((ee&(1<<st+He)-1)>>st)])>>>16&255,Fe=65535&oe,!(st+(Re=oe>>>24)<=Q);){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}ee>>>=st,Q-=st,$.back+=st}if(ee>>>=Re,Q-=Re,$.back+=Re,$.length=Fe,xe===0){$.mode=26;break}if(32&xe){$.back=-1,$.mode=12;break}if(64&xe){j.msg="invalid literal/length code",$.mode=30;break}$.extra=15&xe,$.mode=22;case 22:if($.extra){for(ae=$.extra;Q<ae;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}$.length+=ee&(1<<$.extra)-1,ee>>>=$.extra,Q-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=23;case 23:for(;xe=(oe=$.distcode[ee&(1<<$.distbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=Q);){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if((240&xe)==0){for(st=Re,He=xe,Ne=Fe;xe=(oe=$.distcode[Ne+((ee&(1<<st+He)-1)>>st)])>>>16&255,Fe=65535&oe,!(st+(Re=oe>>>24)<=Q);){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}ee>>>=st,Q-=st,$.back+=st}if(ee>>>=Re,Q-=Re,$.back+=Re,64&xe){j.msg="invalid distance code",$.mode=30;break}$.offset=Fe,$.extra=15&xe,$.mode=24;case 24:if($.extra){for(ae=$.extra;Q<ae;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}$.offset+=ee&(1<<$.extra)-1,ee>>>=$.extra,Q-=$.extra,$.back+=$.extra}if($.offset>$.dmax){j.msg="invalid distance too far back",$.mode=30;break}$.mode=25;case 25:if(Z===0)break e;if(ce=Se-Z,$.offset>ce){if((ce=$.offset-ce)>$.whave&&$.sane){j.msg="invalid distance too far back",$.mode=30;break}je=ce>$.wnext?(ce-=$.wnext,$.wsize-ce):$.wnext-ce,ce>$.length&&(ce=$.length),De=$.window}else De=J,je=X-$.offset,ce=$.length;for(Z<ce&&(ce=Z),Z-=ce,$.length-=ce;J[X++]=De[je++],--ce;);$.length===0&&($.mode=21);break;case 26:if(Z===0)break e;J[X++]=$.length,Z--,$.mode=21;break;case 27:if($.wrap){for(;Q<32;){if(ie===0)break e;ie--,ee|=re[te++]<<Q,Q+=8}if(Se-=Z,j.total_out+=Se,$.total+=Se,Se&&(j.adler=$.check=$.flags?o($.check,J,Se,X-Se):a($.check,J,Se,X-Se)),Se=Z,($.flags?ee:x(ee))!==$.check){j.msg="incorrect data check",$.mode=30;break}Q=ee=0}$.mode=28;case 28:if($.wrap&&$.flags){for(;Q<32;){if(ie===0)break e;ie--,ee+=re[te++]<<Q,Q+=8}if(ee!==(4294967295&$.total)){j.msg="incorrect length check",$.mode=30;break}Q=ee=0}$.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return g}return j.next_out=X,j.avail_out=Z,j.next_in=te,j.avail_in=ie,$.hold=ee,$.bits=Q,($.wsize||Se!==j.avail_out&&$.mode<30&&($.mode<27||V!==4))&&U(j,j.output,j.next_out,Se-j.avail_out)?($.mode=31,-4):(he-=j.avail_in,Se-=j.avail_out,j.total_in+=he,j.total_out+=Se,$.total+=Se,$.wrap&&Se&&(j.adler=$.check=$.flags?o($.check,J,Se,j.next_out-Se):a($.check,J,Se,j.next_out-Se)),j.data_type=$.bits+($.last?64:0)+($.mode===12?128:0)+($.mode===20||$.mode===15?256:0),(he==0&&Se===0||V===4)&&ue===m&&(ue=-5),ue)},s.inflateEnd=function(j){if(!j||!j.state)return g;var V=j.state;return V.window&&(V.window=null),j.state=null,m},s.inflateGetHeader=function(j,V){var $;return j&&j.state?(2&($=j.state).wrap)==0?g:(($.head=V).done=!1,m):g},s.inflateSetDictionary=function(j,V){var $,re=V.length;return j&&j.state?($=j.state).wrap!==0&&$.mode!==11?g:$.mode===11&&a(1,V,re,0)!==$.check?-3:U(j,V,re,re)?($.mode=31,-4):($.havedict=1,m):g},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,m,g,v,b,w,x){var _,E,k,T,R,M,I,O,P,U=x.bits,j=0,V=0,$=0,re=0,J=0,te=0,X=0,ie=0,Z=0,ee=0,Q=null,he=0,Se=new i.Buf16(16),ce=new i.Buf16(16),je=null,De=0;for(j=0;j<=15;j++)Se[j]=0;for(V=0;V<g;V++)Se[h[m+V]]++;for(J=U,re=15;1<=re&&Se[re]===0;re--);if(re<J&&(J=re),re===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for($=1;$<re&&Se[$]===0;$++);for(J<$&&(J=$),j=ie=1;j<=15;j++)if(ie<<=1,(ie-=Se[j])<0)return-1;if(0<ie&&(d===0||re!==1))return-1;for(ce[1]=0,j=1;j<15;j++)ce[j+1]=ce[j]+Se[j];for(V=0;V<g;V++)h[m+V]!==0&&(w[ce[h[m+V]]++]=V);if(M=d===0?(Q=je=w,19):d===1?(Q=a,he-=257,je=o,De-=257,256):(Q=l,je=c,-1),j=$,R=b,X=V=ee=0,k=-1,T=(Z=1<<(te=J))-1,d===1&&852<Z||d===2&&592<Z)return 1;for(;;){for(I=j-X,P=w[V]<M?(O=0,w[V]):w[V]>M?(O=je[De+w[V]],Q[he+w[V]]):(O=96,0),_=1<<j-X,$=E=1<<te;v[R+(ee>>X)+(E-=_)]=I<<24|O<<16|P|0,E!==0;);for(_=1<<j-1;ee&_;)_>>=1;if(_!==0?(ee&=_-1,ee+=_):ee=0,V++,--Se[j]==0){if(j===re)break;j=h[m+w[V]]}if(J<j&&(ee&T)!==k){for(X===0&&(X=J),R+=$,ie=1<<(te=j-X);te+X<re&&!((ie-=Se[te+X])<=0);)te++,ie<<=1;if(Z+=1<<te,d===1&&852<Z||d===2&&592<Z)return 1;v[k=ee&T]=J<<24|te<<16|R-b|0}}return ee!==0&&(v[R+ee]=j-X<<24|64<<16|0),x.bits=J,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),a=0,o=1;function l(oe){for(var ne=oe.length;0<=--ne;)oe[ne]=0}var c=0,d=29,h=256,m=h+1+d,g=30,v=19,b=2*m+1,w=15,x=16,_=7,E=256,k=16,T=17,R=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(m+2));l(U);var j=new Array(2*g);l(j);var V=new Array(512);l(V);var $=new Array(256);l($);var re=new Array(d);l(re);var J,te,X,ie=new Array(g);function Z(oe,ne,Ee,Le,Te){this.static_tree=oe,this.extra_bits=ne,this.extra_base=Ee,this.elems=Le,this.max_length=Te,this.has_stree=oe&&oe.length}function ee(oe,ne){this.dyn_tree=oe,this.max_code=0,this.stat_desc=ne}function Q(oe){return oe<256?V[oe]:V[256+(oe>>>7)]}function he(oe,ne){oe.pending_buf[oe.pending++]=255&ne,oe.pending_buf[oe.pending++]=ne>>>8&255}function Se(oe,ne,Ee){oe.bi_valid>x-Ee?(oe.bi_buf|=ne<<oe.bi_valid&65535,he(oe,oe.bi_buf),oe.bi_buf=ne>>x-oe.bi_valid,oe.bi_valid+=Ee-x):(oe.bi_buf|=ne<<oe.bi_valid&65535,oe.bi_valid+=Ee)}function ce(oe,ne,Ee){Se(oe,Ee[2*ne],Ee[2*ne+1])}function je(oe,ne){for(var Ee=0;Ee|=1&oe,oe>>>=1,Ee<<=1,0<--ne;);return Ee>>>1}function De(oe,ne,Ee){var Le,Te,Xe=new Array(w+1),St=0;for(Le=1;Le<=w;Le++)Xe[Le]=St=St+Ee[Le-1]<<1;for(Te=0;Te<=ne;Te++){var dt=oe[2*Te+1];dt!==0&&(oe[2*Te]=je(Xe[dt]++,dt))}}function Re(oe){var ne;for(ne=0;ne<m;ne++)oe.dyn_ltree[2*ne]=0;for(ne=0;ne<g;ne++)oe.dyn_dtree[2*ne]=0;for(ne=0;ne<v;ne++)oe.bl_tree[2*ne]=0;oe.dyn_ltree[2*E]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function xe(oe){8<oe.bi_valid?he(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Fe(oe,ne,Ee,Le){var Te=2*ne,Xe=2*Ee;return oe[Te]<oe[Xe]||oe[Te]===oe[Xe]&&Le[ne]<=Le[Ee]}function st(oe,ne,Ee){for(var Le=oe.heap[Ee],Te=Ee<<1;Te<=oe.heap_len&&(Te<oe.heap_len&&Fe(ne,oe.heap[Te+1],oe.heap[Te],oe.depth)&&Te++,!Fe(ne,Le,oe.heap[Te],oe.depth));)oe.heap[Ee]=oe.heap[Te],Ee=Te,Te<<=1;oe.heap[Ee]=Le}function He(oe,ne,Ee){var Le,Te,Xe,St,dt=0;if(oe.last_lit!==0)for(;Le=oe.pending_buf[oe.d_buf+2*dt]<<8|oe.pending_buf[oe.d_buf+2*dt+1],Te=oe.pending_buf[oe.l_buf+dt],dt++,Le===0?ce(oe,Te,ne):(ce(oe,(Xe=$[Te])+h+1,ne),(St=M[Xe])!==0&&Se(oe,Te-=re[Xe],St),ce(oe,Xe=Q(--Le),Ee),(St=I[Xe])!==0&&Se(oe,Le-=ie[Xe],St)),dt<oe.last_lit;);ce(oe,E,ne)}function Ne(oe,ne){var Ee,Le,Te,Xe=ne.dyn_tree,St=ne.stat_desc.static_tree,dt=ne.stat_desc.has_stree,It=ne.stat_desc.elems,Vt=-1;for(oe.heap_len=0,oe.heap_max=b,Ee=0;Ee<It;Ee++)Xe[2*Ee]!==0?(oe.heap[++oe.heap_len]=Vt=Ee,oe.depth[Ee]=0):Xe[2*Ee+1]=0;for(;oe.heap_len<2;)Xe[2*(Te=oe.heap[++oe.heap_len]=Vt<2?++Vt:0)]=1,oe.depth[Te]=0,oe.opt_len--,dt&&(oe.static_len-=St[2*Te+1]);for(ne.max_code=Vt,Ee=oe.heap_len>>1;1<=Ee;Ee--)st(oe,Xe,Ee);for(Te=It;Ee=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],st(oe,Xe,1),Le=oe.heap[1],oe.heap[--oe.heap_max]=Ee,oe.heap[--oe.heap_max]=Le,Xe[2*Te]=Xe[2*Ee]+Xe[2*Le],oe.depth[Te]=(oe.depth[Ee]>=oe.depth[Le]?oe.depth[Ee]:oe.depth[Le])+1,Xe[2*Ee+1]=Xe[2*Le+1]=Te,oe.heap[1]=Te++,st(oe,Xe,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],function(Dt,Kt){var be,D,K,pe,Oe,ve,Ae=Kt.dyn_tree,de=Kt.max_code,ht=Kt.stat_desc.static_tree,wt=Kt.stat_desc.has_stree,L=Kt.stat_desc.extra_bits,Be=Kt.stat_desc.extra_base,rt=Kt.stat_desc.max_length,ye=0;for(pe=0;pe<=w;pe++)Dt.bl_count[pe]=0;for(Ae[2*Dt.heap[Dt.heap_max]+1]=0,be=Dt.heap_max+1;be<b;be++)rt<(pe=Ae[2*Ae[2*(D=Dt.heap[be])+1]+1]+1)&&(pe=rt,ye++),Ae[2*D+1]=pe,de<D||(Dt.bl_count[pe]++,Oe=0,Be<=D&&(Oe=L[D-Be]),ve=Ae[2*D],Dt.opt_len+=ve*(pe+Oe),wt&&(Dt.static_len+=ve*(ht[2*D+1]+Oe)));if(ye!==0){do{for(pe=rt-1;Dt.bl_count[pe]===0;)pe--;Dt.bl_count[pe]--,Dt.bl_count[pe+1]+=2,Dt.bl_count[rt]--,ye-=2}while(0<ye);for(pe=rt;pe!==0;pe--)for(D=Dt.bl_count[pe];D!==0;)de<(K=Dt.heap[--be])||(Ae[2*K+1]!==pe&&(Dt.opt_len+=(pe-Ae[2*K+1])*Ae[2*K],Ae[2*K+1]=pe),D--)}}(oe,ne),De(Xe,Vt,oe.bl_count)}function H(oe,ne,Ee){var Le,Te,Xe=-1,St=ne[1],dt=0,It=7,Vt=4;for(St===0&&(It=138,Vt=3),ne[2*(Ee+1)+1]=65535,Le=0;Le<=Ee;Le++)Te=St,St=ne[2*(Le+1)+1],++dt<It&&Te===St||(dt<Vt?oe.bl_tree[2*Te]+=dt:Te!==0?(Te!==Xe&&oe.bl_tree[2*Te]++,oe.bl_tree[2*k]++):dt<=10?oe.bl_tree[2*T]++:oe.bl_tree[2*R]++,Xe=Te,Vt=(dt=0)===St?(It=138,3):Te===St?(It=6,3):(It=7,4))}function ue(oe,ne,Ee){var Le,Te,Xe=-1,St=ne[1],dt=0,It=7,Vt=4;for(St===0&&(It=138,Vt=3),Le=0;Le<=Ee;Le++)if(Te=St,St=ne[2*(Le+1)+1],!(++dt<It&&Te===St)){if(dt<Vt)for(;ce(oe,Te,oe.bl_tree),--dt!=0;);else Te!==0?(Te!==Xe&&(ce(oe,Te,oe.bl_tree),dt--),ce(oe,k,oe.bl_tree),Se(oe,dt-3,2)):dt<=10?(ce(oe,T,oe.bl_tree),Se(oe,dt-3,3)):(ce(oe,R,oe.bl_tree),Se(oe,dt-11,7));Xe=Te,Vt=(dt=0)===St?(It=138,3):Te===St?(It=6,3):(It=7,4)}}l(ie);var ke=!1;function ae(oe,ne,Ee,Le){Se(oe,(c<<1)+(Le?1:0),3),function(Te,Xe,St,dt){xe(Te),he(Te,St),he(Te,~St),i.arraySet(Te.pending_buf,Te.window,Xe,St,Te.pending),Te.pending+=St}(oe,ne,Ee)}s._tr_init=function(oe){ke||(function(){var ne,Ee,Le,Te,Xe,St=new Array(w+1);for(Te=Le=0;Te<d-1;Te++)for(re[Te]=Le,ne=0;ne<1<<M[Te];ne++)$[Le++]=Te;for($[Le-1]=Te,Te=Xe=0;Te<16;Te++)for(ie[Te]=Xe,ne=0;ne<1<<I[Te];ne++)V[Xe++]=Te;for(Xe>>=7;Te<g;Te++)for(ie[Te]=Xe<<7,ne=0;ne<1<<I[Te]-7;ne++)V[256+Xe++]=Te;for(Ee=0;Ee<=w;Ee++)St[Ee]=0;for(ne=0;ne<=143;)U[2*ne+1]=8,ne++,St[8]++;for(;ne<=255;)U[2*ne+1]=9,ne++,St[9]++;for(;ne<=279;)U[2*ne+1]=7,ne++,St[7]++;for(;ne<=287;)U[2*ne+1]=8,ne++,St[8]++;for(De(U,m+1,St),ne=0;ne<g;ne++)j[2*ne+1]=5,j[2*ne]=je(ne,5);J=new Z(U,M,h+1,m,w),te=new Z(j,I,0,g,w),X=new Z(new Array(0),O,0,v,_)}(),ke=!0),oe.l_desc=new ee(oe.dyn_ltree,J),oe.d_desc=new ee(oe.dyn_dtree,te),oe.bl_desc=new ee(oe.bl_tree,X),oe.bi_buf=0,oe.bi_valid=0,Re(oe)},s._tr_stored_block=ae,s._tr_flush_block=function(oe,ne,Ee,Le){var Te,Xe,St=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=function(dt){var It,Vt=4093624447;for(It=0;It<=31;It++,Vt>>>=1)if(1&Vt&&dt.dyn_ltree[2*It]!==0)return a;if(dt.dyn_ltree[18]!==0||dt.dyn_ltree[20]!==0||dt.dyn_ltree[26]!==0)return o;for(It=32;It<h;It++)if(dt.dyn_ltree[2*It]!==0)return o;return a}(oe)),Ne(oe,oe.l_desc),Ne(oe,oe.d_desc),St=function(dt){var It;for(H(dt,dt.dyn_ltree,dt.l_desc.max_code),H(dt,dt.dyn_dtree,dt.d_desc.max_code),Ne(dt,dt.bl_desc),It=v-1;3<=It&&dt.bl_tree[2*P[It]+1]===0;It--);return dt.opt_len+=3*(It+1)+5+5+4,It}(oe),Te=oe.opt_len+3+7>>>3,(Xe=oe.static_len+3+7>>>3)<=Te&&(Te=Xe)):Te=Xe=Ee+5,Ee+4<=Te&&ne!==-1?ae(oe,ne,Ee,Le):oe.strategy===4||Xe===Te?(Se(oe,2+(Le?1:0),3),He(oe,U,j)):(Se(oe,4+(Le?1:0),3),function(dt,It,Vt,Dt){var Kt;for(Se(dt,It-257,5),Se(dt,Vt-1,5),Se(dt,Dt-4,4),Kt=0;Kt<Dt;Kt++)Se(dt,dt.bl_tree[2*P[Kt]+1],3);ue(dt,dt.dyn_ltree,It-1),ue(dt,dt.dyn_dtree,Vt-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,St+1),He(oe,oe.dyn_ltree,oe.dyn_dtree)),Re(oe),Le&&xe(oe)},s._tr_tally=function(oe,ne,Ee){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=ne>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&ne,oe.pending_buf[oe.l_buf+oe.last_lit]=255&Ee,oe.last_lit++,ne===0?oe.dyn_ltree[2*Ee]++:(oe.matches++,ne--,oe.dyn_ltree[2*($[Ee]+h+1)]++,oe.dyn_dtree[2*Q(ne)]++),oe.last_lit===oe.lit_bufsize-1},s._tr_align=function(oe){Se(oe,2,3),ce(oe,E,U),function(ne){ne.bi_valid===16?(he(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}(oe)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(a,o){if(!a.setImmediate){var l,c,d,h,m=1,g={},v=!1,b=a.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(a);w=w&&w.setTimeout?w:a,l={}.toString.call(a.process)==="[object process]"?function(k){vs.nextTick(function(){_(k)})}:function(){if(a.postMessage&&!a.importScripts){var k=!0,T=a.onmessage;return a.onmessage=function(){k=!1},a.postMessage("","*"),a.onmessage=T,k}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",E,!1):a.attachEvent("onmessage",E),function(k){a.postMessage(h+k,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(k){_(k.data)},function(k){d.port2.postMessage(k)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(k){var T=b.createElement("script");T.onreadystatechange=function(){_(k),T.onreadystatechange=null,c.removeChild(T),T=null},c.appendChild(T)}):function(k){setTimeout(_,0,k)},w.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var T=new Array(arguments.length-1),R=0;R<T.length;R++)T[R]=arguments[R+1];var M={callback:k,args:T};return g[m]=M,l(m),m++},w.clearImmediate=x}function x(k){delete g[k]}function _(k){if(v)setTimeout(_,0,k);else{var T=g[k];if(T){v=!0;try{(function(R){var M=R.callback,I=R.args;switch(I.length){case 0:M();break;case 1:M(I[0]);break;case 2:M(I[0],I[1]);break;case 3:M(I[0],I[1],I[2]);break;default:M.apply(o,I)}})(T)}finally{x(k),v=!1}}}}function E(k){k.source===a&&typeof k.data=="string"&&k.data.indexOf(h)===0&&_(+k.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(eC)),eC.exports}var Woe=Koe();const G9=Ni(Woe),G0=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+s[i]},or=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Dl=(...e)=>or(e.map(t=>t.trim()).filter(Boolean).join("/")),q1=e=>{const t=or(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ws=e=>{const t=or(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},pT=(e,t)=>or(e==="/"?`/${t}`:`${e}/${t}`);var tC,R6;function Zoe(){if(R6)return tC;R6=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof vs>"u"||typeof vs.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,s){if(Array.isArray(t))return this._acquireBatch(t,n,r,s);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,a=null,o=null;typeof r!="function"&&(s=r,r=null,o=new this.Promise(function(E,k){i=E,a=k})),s=s||{};var l=!1,c=null,d=null,h=null,m=this,g=function(E,k,T){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),l||(o?k?a(k):i(T):typeof r=="function"&&r(k,T),l=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(l)return g(E);c&&(clearTimeout(c),c=null),m.domainReentrant&&E&&(m.domains[t]=vs.domain);var k=s.maxExecutionTime||m.maxExecutionTime;if(k&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},k)),n.length===1){var T=!1;try{n(function(R,M){T||(T=!0,g(E,R,M))})}catch(R){T||(T=!0,g(E,R))}}else m._promiseTry(function(){return n()}).then(function(R){g(E,void 0,R)},function(R){g(E,R)})};m.domainReentrant&&vs.domain&&(v=vs.domain.bind(v));var b=s.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&vs.domain&&vs.domain===m.domains[t])v(!1);else if(m.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var w=function(){v(!0)};s.skipQueue?m.queues[t].unshift(w):m.queues[t].push(w);var x=s.timeout||m.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var _=s.maxOccupationTime||m.maxOccupationTime;if(_&&(d=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},_)),o)return o},e.prototype._acquireBatch=function(t,n,r,s){typeof r!="function"&&(s=r,r=null);var i=this,a=function(l,c){return function(d){i.acquire(l,c,d,s)}},o=t.reduceRight(function(l,c){return a(c,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,c){o.length===1?o(function(d,h){d?c(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},tC=e,tC}var nC,N6;function Yoe(){return N6||(N6=1,nC=Zoe()),nC}var Xoe=Yoe();const K0=Ni(Xoe);var Xv={exports:{}},I6;function Joe(){return I6||(I6=1,typeof Object.create=="function"?Xv.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Xv.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Xv.exports}var rC,j6;function Qoe(){if(j6)return rC;j6=1;var e=yR().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var s=this._block,i=this._blockSize,a=n.length,o=this._len,l=0;l<a;){for(var c=o%i,d=Math.min(a-l,i-c),h=0;h<d;h++)s[c+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(s)}return this._len+=a,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var i=(s&4294967295)>>>0,a=(s-i)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},rC=t,rC}var sC,M6;function ele(){if(M6)return sC;M6=1;var e=Joe(),t=Qoe(),n=yR().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function i(){this.init(),this._w=s,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function a(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function c(d,h,m,g){return d===0?h&m|~h&g:d===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(d){for(var h=this._w,m=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,w=this._e|0,x=0;x<16;++x)h[x]=d.readInt32BE(x*4);for(;x<80;++x)h[x]=a(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var _=0;_<80;++_){var E=~~(_/20),k=o(m)+c(E,g,v,b)+w+h[_]+r[E]|0;w=b,b=v,v=l(g),g=m,m=k}this._a=m+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=w+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},sC=i,sC}var tle=ele();const K9=Ni(tle);var iC,D6;function nle(){if(D6)return iC;D6=1;function e(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function t(s,i){for(var a="",o=0,l=-1,c=0,d,h=0;h<=s.length;++h){if(h<s.length)d=s.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||c===1))if(l!==h-1&&c===2){if(a.length<2||o!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",o=0):(a=a.slice(0,m),o=a.length-1-a.lastIndexOf("/")),l=h,c=0;continue}}else if(a.length===2||a.length===1){a="",o=0,l=h,c=0;continue}}i&&(a.length>0?a+="/..":a="..",o=2)}else a.length>0?a+="/"+s.slice(l+1,h):a=s.slice(l+1,h),o=h-l-1;l=h,c=0}else d===46&&c!==-1?++c:c=-1}return a}function n(s,i){var a=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return a?a===i.root?a+o:a+s+o:o}var r={resolve:function(){for(var i="",a=!1,o,l=arguments.length-1;l>=-1&&!a;l--){var c;l>=0?c=arguments[l]:(o===void 0&&(o=vs.cwd()),c=o),e(c),c.length!==0&&(i=c+"/"+i,a=c.charCodeAt(0)===47)}return i=t(i,!a),a?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var a=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!a),i.length===0&&!a&&(i="."),i.length>0&&o&&(i+="/"),a?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,a=0;a<arguments.length;++a){var o=arguments[a];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,a){if(e(i),e(a),i===a||(i=r.resolve(i),a=r.resolve(a),i===a))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,c=l-o,d=1;d<a.length&&a.charCodeAt(d)===47;++d);for(var h=a.length,m=h-d,g=c<m?c:m,v=-1,b=0;b<=g;++b){if(b===g){if(m>g){if(a.charCodeAt(d+b)===47)return a.slice(d+b+1);if(b===0)return a.slice(d+b)}else c>g&&(i.charCodeAt(o+b)===47?v=b:b===0&&(v=0));break}var w=i.charCodeAt(o+b),x=a.charCodeAt(d+b);if(w!==x)break;w===47&&(v=b)}var _="";for(b=o+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+a.slice(d+v):(d+=v,a.charCodeAt(d)===47&&++d,a.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var a=i.charCodeAt(0),o=a===47,l=-1,c=!0,d=i.length-1;d>=1;--d)if(a=i.charCodeAt(d),a===47){if(!c){l=d;break}}else c=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,c=!0,d;if(a!==void 0&&a.length>0&&a.length<=i.length){if(a.length===i.length&&a===i)return"";var h=a.length-1,m=-1;for(d=i.length-1;d>=0;--d){var g=i.charCodeAt(d);if(g===47){if(!c){o=d+1;break}}else m===-1&&(c=!1,m=d+1),h>=0&&(g===a.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=m))}return o===l?l=m:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!c){o=d+1;break}}else l===-1&&(c=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var a=-1,o=0,l=-1,c=!0,d=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!c){o=h+1;break}continue}l===-1&&(c=!1,l=h+1),m===46?a===-1?a=h:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||l===-1||d===0||d===1&&a===l-1&&a===o+1?"":i.slice(a,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var a={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return a;var o=i.charCodeAt(0),l=o===47,c;l?(a.root="/",c=1):c=0;for(var d=-1,h=0,m=-1,g=!0,v=i.length-1,b=0;v>=c;--v){if(o=i.charCodeAt(v),o===47){if(!g){h=v+1;break}continue}m===-1&&(g=!1,m=v+1),o===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||m===-1||b===0||b===1&&d===m-1&&d===h+1?m!==-1&&(h===0&&l?a.base=a.name=i.slice(1,m):a.base=a.name=i.slice(h,m)):(h===0&&l?(a.name=i.slice(1,d),a.base=i.slice(1,m)):(a.name=i.slice(h,d),a.base=i.slice(h,m)),a.ext=i.slice(d,m)),h>0?a.dir=i.slice(0,h-1):l&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,iC=r,iC}var Mt=nle(),aC={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var O6;function rle(){return O6||(O6=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var I=0,O=new Array(256),P=0;P!=256;++P)I=P,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,O[P]=I;return typeof Int32Array<"u"?new Int32Array(O):O}var r=n();function s(I){var O=0,P=0,U=0,j=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)j[U]=I[U];for(U=0;U!=256;++U)for(P=I[U],O=256+U;O<4096;O+=256)P=j[O]=P>>>8^I[P&255];var V=[];for(U=1;U!=16;++U)V[U-1]=typeof Int32Array<"u"?j.subarray(U*256,U*256+256):j.slice(U*256,U*256+256);return V}var i=s(r),a=i[0],o=i[1],l=i[2],c=i[3],d=i[4],h=i[5],m=i[6],g=i[7],v=i[8],b=i[9],w=i[10],x=i[11],_=i[12],E=i[13],k=i[14];function T(I,O){for(var P=O^-1,U=0,j=I.length;U<j;)P=P>>>8^r[(P^I.charCodeAt(U++))&255];return~P}function R(I,O){for(var P=O^-1,U=I.length-15,j=0;j<U;)P=k[I[j++]^P&255]^E[I[j++]^P>>8&255]^_[I[j++]^P>>16&255]^x[I[j++]^P>>>24]^w[I[j++]]^b[I[j++]]^v[I[j++]]^g[I[j++]]^m[I[j++]]^h[I[j++]]^d[I[j++]]^c[I[j++]]^l[I[j++]]^o[I[j++]]^a[I[j++]]^r[I[j++]];for(U+=15;j<U;)P=P>>>8^r[(P^I[j++])&255];return~P}function M(I,O){for(var P=O^-1,U=0,j=I.length,V=0,$=0;U<j;)V=I.charCodeAt(U++),V<128?P=P>>>8^r[(P^V)&255]:V<2048?(P=P>>>8^r[(P^(192|V>>6&31))&255],P=P>>>8^r[(P^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,$=I.charCodeAt(U++)&1023,P=P>>>8^r[(P^(240|V>>8&7))&255],P=P>>>8^r[(P^(128|V>>2&63))&255],P=P>>>8^r[(P^(128|$>>6&15|(V&3)<<4))&255],P=P>>>8^r[(P^(128|$&63))&255]):(P=P>>>8^r[(P^(224|V>>12&15))&255],P=P>>>8^r[(P^(128|V>>6&63))&255],P=P>>>8^r[(P^(128|V&63))&255]);return~P}t.table=r,t.bstr=T,t.buf=R,t.str=M})}(aC)),aC}var sle=rle();const ile=Ni(sle);var oC={},P6;function vd(){return P6||(P6=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,a){return Object.prototype.hasOwnProperty.call(i,a)}e.assign=function(i){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,a){return i.length===a?i:i.subarray?i.subarray(0,a):(i.length=a,i)};var r={arraySet:function(i,a,o,l,c){if(a.subarray&&i.subarray){i.set(a.subarray(o,o+l),c);return}for(var d=0;d<l;d++)i[c+d]=a[o+d]},flattenChunks:function(i){var a,o,l,c,d,h;for(l=0,a=0,o=i.length;a<o;a++)l+=i[a].length;for(h=new Uint8Array(l),c=0,a=0,o=i.length;a<o;a++)d=i[a],h.set(d,c),c+=d.length;return h}},s={arraySet:function(i,a,o,l,c){for(var d=0;d<l;d++)i[c+d]=a[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(t)}(oC)),oC}var Kh={},wo={},ef={},F6;function ale(){if(F6)return ef;F6=1;var e=vd(),t=4,n=0,r=1,s=2;function i(D){for(var K=D.length;--K>=0;)D[K]=0}var a=0,o=1,l=2,c=3,d=258,h=29,m=256,g=m+1+h,v=30,b=19,w=2*g+1,x=15,_=16,E=7,k=256,T=16,R=17,M=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=512,V=new Array((g+2)*2);i(V);var $=new Array(v*2);i($);var re=new Array(j);i(re);var J=new Array(d-c+1);i(J);var te=new Array(h);i(te);var X=new Array(v);i(X);function ie(D,K,pe,Oe,ve){this.static_tree=D,this.extra_bits=K,this.extra_base=pe,this.elems=Oe,this.max_length=ve,this.has_stree=D&&D.length}var Z,ee,Q;function he(D,K){this.dyn_tree=D,this.max_code=0,this.stat_desc=K}function Se(D){return D<256?re[D]:re[256+(D>>>7)]}function ce(D,K){D.pending_buf[D.pending++]=K&255,D.pending_buf[D.pending++]=K>>>8&255}function je(D,K,pe){D.bi_valid>_-pe?(D.bi_buf|=K<<D.bi_valid&65535,ce(D,D.bi_buf),D.bi_buf=K>>_-D.bi_valid,D.bi_valid+=pe-_):(D.bi_buf|=K<<D.bi_valid&65535,D.bi_valid+=pe)}function De(D,K,pe){je(D,pe[K*2],pe[K*2+1])}function Re(D,K){var pe=0;do pe|=D&1,D>>>=1,pe<<=1;while(--K>0);return pe>>>1}function xe(D){D.bi_valid===16?(ce(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function Fe(D,K){var pe=K.dyn_tree,Oe=K.max_code,ve=K.stat_desc.static_tree,Ae=K.stat_desc.has_stree,de=K.stat_desc.extra_bits,ht=K.stat_desc.extra_base,wt=K.stat_desc.max_length,L,Be,rt,ye,we,Ue,Et=0;for(ye=0;ye<=x;ye++)D.bl_count[ye]=0;for(pe[D.heap[D.heap_max]*2+1]=0,L=D.heap_max+1;L<w;L++)Be=D.heap[L],ye=pe[pe[Be*2+1]*2+1]+1,ye>wt&&(ye=wt,Et++),pe[Be*2+1]=ye,!(Be>Oe)&&(D.bl_count[ye]++,we=0,Be>=ht&&(we=de[Be-ht]),Ue=pe[Be*2],D.opt_len+=Ue*(ye+we),Ae&&(D.static_len+=Ue*(ve[Be*2+1]+we)));if(Et!==0){do{for(ye=wt-1;D.bl_count[ye]===0;)ye--;D.bl_count[ye]--,D.bl_count[ye+1]+=2,D.bl_count[wt]--,Et-=2}while(Et>0);for(ye=wt;ye!==0;ye--)for(Be=D.bl_count[ye];Be!==0;)rt=D.heap[--L],!(rt>Oe)&&(pe[rt*2+1]!==ye&&(D.opt_len+=(ye-pe[rt*2+1])*pe[rt*2],pe[rt*2+1]=ye),Be--)}}function st(D,K,pe){var Oe=new Array(x+1),ve=0,Ae,de;for(Ae=1;Ae<=x;Ae++)Oe[Ae]=ve=ve+pe[Ae-1]<<1;for(de=0;de<=K;de++){var ht=D[de*2+1];ht!==0&&(D[de*2]=Re(Oe[ht]++,ht))}}function He(){var D,K,pe,Oe,ve,Ae=new Array(x+1);for(pe=0,Oe=0;Oe<h-1;Oe++)for(te[Oe]=pe,D=0;D<1<<I[Oe];D++)J[pe++]=Oe;for(J[pe-1]=Oe,ve=0,Oe=0;Oe<16;Oe++)for(X[Oe]=ve,D=0;D<1<<O[Oe];D++)re[ve++]=Oe;for(ve>>=7;Oe<v;Oe++)for(X[Oe]=ve<<7,D=0;D<1<<O[Oe]-7;D++)re[256+ve++]=Oe;for(K=0;K<=x;K++)Ae[K]=0;for(D=0;D<=143;)V[D*2+1]=8,D++,Ae[8]++;for(;D<=255;)V[D*2+1]=9,D++,Ae[9]++;for(;D<=279;)V[D*2+1]=7,D++,Ae[7]++;for(;D<=287;)V[D*2+1]=8,D++,Ae[8]++;for(st(V,g+1,Ae),D=0;D<v;D++)$[D*2+1]=5,$[D*2]=Re(D,5);Z=new ie(V,I,m+1,g,x),ee=new ie($,O,0,v,x),Q=new ie(new Array(0),P,0,b,E)}function Ne(D){var K;for(K=0;K<g;K++)D.dyn_ltree[K*2]=0;for(K=0;K<v;K++)D.dyn_dtree[K*2]=0;for(K=0;K<b;K++)D.bl_tree[K*2]=0;D.dyn_ltree[k*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function H(D){D.bi_valid>8?ce(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function ue(D,K,pe,Oe){H(D),ce(D,pe),ce(D,~pe),e.arraySet(D.pending_buf,D.window,K,pe,D.pending),D.pending+=pe}function ke(D,K,pe,Oe){var ve=K*2,Ae=pe*2;return D[ve]<D[Ae]||D[ve]===D[Ae]&&Oe[K]<=Oe[pe]}function ae(D,K,pe){for(var Oe=D.heap[pe],ve=pe<<1;ve<=D.heap_len&&(ve<D.heap_len&&ke(K,D.heap[ve+1],D.heap[ve],D.depth)&&ve++,!ke(K,Oe,D.heap[ve],D.depth));)D.heap[pe]=D.heap[ve],pe=ve,ve<<=1;D.heap[pe]=Oe}function oe(D,K,pe){var Oe,ve,Ae=0,de,ht;if(D.last_lit!==0)do Oe=D.pending_buf[D.d_buf+Ae*2]<<8|D.pending_buf[D.d_buf+Ae*2+1],ve=D.pending_buf[D.l_buf+Ae],Ae++,Oe===0?De(D,ve,K):(de=J[ve],De(D,de+m+1,K),ht=I[de],ht!==0&&(ve-=te[de],je(D,ve,ht)),Oe--,de=Se(Oe),De(D,de,pe),ht=O[de],ht!==0&&(Oe-=X[de],je(D,Oe,ht)));while(Ae<D.last_lit);De(D,k,K)}function ne(D,K){var pe=K.dyn_tree,Oe=K.stat_desc.static_tree,ve=K.stat_desc.has_stree,Ae=K.stat_desc.elems,de,ht,wt=-1,L;for(D.heap_len=0,D.heap_max=w,de=0;de<Ae;de++)pe[de*2]!==0?(D.heap[++D.heap_len]=wt=de,D.depth[de]=0):pe[de*2+1]=0;for(;D.heap_len<2;)L=D.heap[++D.heap_len]=wt<2?++wt:0,pe[L*2]=1,D.depth[L]=0,D.opt_len--,ve&&(D.static_len-=Oe[L*2+1]);for(K.max_code=wt,de=D.heap_len>>1;de>=1;de--)ae(D,pe,de);L=Ae;do de=D.heap[1],D.heap[1]=D.heap[D.heap_len--],ae(D,pe,1),ht=D.heap[1],D.heap[--D.heap_max]=de,D.heap[--D.heap_max]=ht,pe[L*2]=pe[de*2]+pe[ht*2],D.depth[L]=(D.depth[de]>=D.depth[ht]?D.depth[de]:D.depth[ht])+1,pe[de*2+1]=pe[ht*2+1]=L,D.heap[1]=L++,ae(D,pe,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],Fe(D,K),st(pe,wt,D.bl_count)}function Ee(D,K,pe){var Oe,ve=-1,Ae,de=K[0*2+1],ht=0,wt=7,L=4;for(de===0&&(wt=138,L=3),K[(pe+1)*2+1]=65535,Oe=0;Oe<=pe;Oe++)Ae=de,de=K[(Oe+1)*2+1],!(++ht<wt&&Ae===de)&&(ht<L?D.bl_tree[Ae*2]+=ht:Ae!==0?(Ae!==ve&&D.bl_tree[Ae*2]++,D.bl_tree[T*2]++):ht<=10?D.bl_tree[R*2]++:D.bl_tree[M*2]++,ht=0,ve=Ae,de===0?(wt=138,L=3):Ae===de?(wt=6,L=3):(wt=7,L=4))}function Le(D,K,pe){var Oe,ve=-1,Ae,de=K[0*2+1],ht=0,wt=7,L=4;for(de===0&&(wt=138,L=3),Oe=0;Oe<=pe;Oe++)if(Ae=de,de=K[(Oe+1)*2+1],!(++ht<wt&&Ae===de)){if(ht<L)do De(D,Ae,D.bl_tree);while(--ht!==0);else Ae!==0?(Ae!==ve&&(De(D,Ae,D.bl_tree),ht--),De(D,T,D.bl_tree),je(D,ht-3,2)):ht<=10?(De(D,R,D.bl_tree),je(D,ht-3,3)):(De(D,M,D.bl_tree),je(D,ht-11,7));ht=0,ve=Ae,de===0?(wt=138,L=3):Ae===de?(wt=6,L=3):(wt=7,L=4)}}function Te(D){var K;for(Ee(D,D.dyn_ltree,D.l_desc.max_code),Ee(D,D.dyn_dtree,D.d_desc.max_code),ne(D,D.bl_desc),K=b-1;K>=3&&D.bl_tree[U[K]*2+1]===0;K--);return D.opt_len+=3*(K+1)+5+5+4,K}function Xe(D,K,pe,Oe){var ve;for(je(D,K-257,5),je(D,pe-1,5),je(D,Oe-4,4),ve=0;ve<Oe;ve++)je(D,D.bl_tree[U[ve]*2+1],3);Le(D,D.dyn_ltree,K-1),Le(D,D.dyn_dtree,pe-1)}function St(D){var K=4093624447,pe;for(pe=0;pe<=31;pe++,K>>>=1)if(K&1&&D.dyn_ltree[pe*2]!==0)return n;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return r;for(pe=32;pe<m;pe++)if(D.dyn_ltree[pe*2]!==0)return r;return n}var dt=!1;function It(D){dt||(He(),dt=!0),D.l_desc=new he(D.dyn_ltree,Z),D.d_desc=new he(D.dyn_dtree,ee),D.bl_desc=new he(D.bl_tree,Q),D.bi_buf=0,D.bi_valid=0,Ne(D)}function Vt(D,K,pe,Oe){je(D,(a<<1)+(Oe?1:0),3),ue(D,K,pe)}function Dt(D){je(D,o<<1,3),De(D,k,V),xe(D)}function Kt(D,K,pe,Oe){var ve,Ae,de=0;D.level>0?(D.strm.data_type===s&&(D.strm.data_type=St(D)),ne(D,D.l_desc),ne(D,D.d_desc),de=Te(D),ve=D.opt_len+3+7>>>3,Ae=D.static_len+3+7>>>3,Ae<=ve&&(ve=Ae)):ve=Ae=pe+5,pe+4<=ve&&K!==-1?Vt(D,K,pe,Oe):D.strategy===t||Ae===ve?(je(D,(o<<1)+(Oe?1:0),3),oe(D,V,$)):(je(D,(l<<1)+(Oe?1:0),3),Xe(D,D.l_desc.max_code+1,D.d_desc.max_code+1,de+1),oe(D,D.dyn_ltree,D.dyn_dtree)),Ne(D),Oe&&H(D)}function be(D,K,pe){return D.pending_buf[D.d_buf+D.last_lit*2]=K>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=K&255,D.pending_buf[D.l_buf+D.last_lit]=pe&255,D.last_lit++,K===0?D.dyn_ltree[pe*2]++:(D.matches++,K--,D.dyn_ltree[(J[pe]+m+1)*2]++,D.dyn_dtree[Se(K)*2]++),D.last_lit===D.lit_bufsize-1}return ef._tr_init=It,ef._tr_stored_block=Vt,ef._tr_flush_block=Kt,ef._tr_tally=be,ef._tr_align=Dt,ef}var lC,L6;function W9(){if(L6)return lC;L6=1;function e(t,n,r,s){for(var i=t&65535|0,a=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[s++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0}return lC=e,lC}var cC,$6;function Z9(){if($6)return cC;$6=1;function e(){for(var r,s=[],i=0;i<256;i++){r=i;for(var a=0;a<8;a++)r=r&1?3988292384^r>>>1:r>>>1;s[i]=r}return s}var t=e();function n(r,s,i,a){var o=t,l=a+i;r^=-1;for(var c=a;c<l;c++)r=r>>>8^o[(r^s[c])&255];return r^-1}return cC=n,cC}var uC,B6;function AR(){return B6||(B6=1,uC={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),uC}var z6;function ole(){if(z6)return wo;z6=1;var e=vd(),t=ale(),n=W9(),r=Z9(),s=AR(),i=0,a=1,o=3,l=4,c=5,d=0,h=1,m=-2,g=-3,v=-5,b=-1,w=1,x=2,_=3,E=4,k=0,T=2,R=8,M=9,I=15,O=8,P=29,U=256,j=U+1+P,V=30,$=19,re=2*j+1,J=15,te=3,X=258,ie=X+te+1,Z=32,ee=42,Q=69,he=73,Se=91,ce=103,je=113,De=666,Re=1,xe=2,Fe=3,st=4,He=3;function Ne(L,Be){return L.msg=s[Be],Be}function H(L){return(L<<1)-(L>4?9:0)}function ue(L){for(var Be=L.length;--Be>=0;)L[Be]=0}function ke(L){var Be=L.state,rt=Be.pending;rt>L.avail_out&&(rt=L.avail_out),rt!==0&&(e.arraySet(L.output,Be.pending_buf,Be.pending_out,rt,L.next_out),L.next_out+=rt,Be.pending_out+=rt,L.total_out+=rt,L.avail_out-=rt,Be.pending-=rt,Be.pending===0&&(Be.pending_out=0))}function ae(L,Be){t._tr_flush_block(L,L.block_start>=0?L.block_start:-1,L.strstart-L.block_start,Be),L.block_start=L.strstart,ke(L.strm)}function oe(L,Be){L.pending_buf[L.pending++]=Be}function ne(L,Be){L.pending_buf[L.pending++]=Be>>>8&255,L.pending_buf[L.pending++]=Be&255}function Ee(L,Be,rt,ye){var we=L.avail_in;return we>ye&&(we=ye),we===0?0:(L.avail_in-=we,e.arraySet(Be,L.input,L.next_in,we,rt),L.state.wrap===1?L.adler=n(L.adler,Be,we,rt):L.state.wrap===2&&(L.adler=r(L.adler,Be,we,rt)),L.next_in+=we,L.total_in+=we,we)}function Le(L,Be){var rt=L.max_chain_length,ye=L.strstart,we,Ue,Et=L.prev_length,me=L.nice_match,G=L.strstart>L.w_size-ie?L.strstart-(L.w_size-ie):0,q=L.window,W=L.w_mask,ge=L.prev,Ie=L.strstart+X,Ge=q[ye+Et-1],bt=q[ye+Et];L.prev_length>=L.good_match&&(rt>>=2),me>L.lookahead&&(me=L.lookahead);do if(we=Be,!(q[we+Et]!==bt||q[we+Et-1]!==Ge||q[we]!==q[ye]||q[++we]!==q[ye+1])){ye+=2,we++;do;while(q[++ye]===q[++we]&&q[++ye]===q[++we]&&q[++ye]===q[++we]&&q[++ye]===q[++we]&&q[++ye]===q[++we]&&q[++ye]===q[++we]&&q[++ye]===q[++we]&&q[++ye]===q[++we]&&ye<Ie);if(Ue=X-(Ie-ye),ye=Ie-X,Ue>Et){if(L.match_start=Be,Et=Ue,Ue>=me)break;Ge=q[ye+Et-1],bt=q[ye+Et]}}while((Be=ge[Be&W])>G&&--rt!==0);return Et<=L.lookahead?Et:L.lookahead}function Te(L){var Be=L.w_size,rt,ye,we,Ue,Et;do{if(Ue=L.window_size-L.lookahead-L.strstart,L.strstart>=Be+(Be-ie)){e.arraySet(L.window,L.window,Be,Be,0),L.match_start-=Be,L.strstart-=Be,L.block_start-=Be,ye=L.hash_size,rt=ye;do we=L.head[--rt],L.head[rt]=we>=Be?we-Be:0;while(--ye);ye=Be,rt=ye;do we=L.prev[--rt],L.prev[rt]=we>=Be?we-Be:0;while(--ye);Ue+=Be}if(L.strm.avail_in===0)break;if(ye=Ee(L.strm,L.window,L.strstart+L.lookahead,Ue),L.lookahead+=ye,L.lookahead+L.insert>=te)for(Et=L.strstart-L.insert,L.ins_h=L.window[Et],L.ins_h=(L.ins_h<<L.hash_shift^L.window[Et+1])&L.hash_mask;L.insert&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[Et+te-1])&L.hash_mask,L.prev[Et&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=Et,Et++,L.insert--,!(L.lookahead+L.insert<te)););}while(L.lookahead<ie&&L.strm.avail_in!==0)}function Xe(L,Be){var rt=65535;for(rt>L.pending_buf_size-5&&(rt=L.pending_buf_size-5);;){if(L.lookahead<=1){if(Te(L),L.lookahead===0&&Be===i)return Re;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;var ye=L.block_start+rt;if((L.strstart===0||L.strstart>=ye)&&(L.lookahead=L.strstart-ye,L.strstart=ye,ae(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-ie&&(ae(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,Be===l?(ae(L,!0),L.strm.avail_out===0?Fe:st):(L.strstart>L.block_start&&(ae(L,!1),L.strm.avail_out===0),Re)}function St(L,Be){for(var rt,ye;;){if(L.lookahead<ie){if(Te(L),L.lookahead<ie&&Be===i)return Re;if(L.lookahead===0)break}if(rt=0,L.lookahead>=te&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+te-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),rt!==0&&L.strstart-rt<=L.w_size-ie&&(L.match_length=Le(L,rt)),L.match_length>=te)if(ye=t._tr_tally(L,L.strstart-L.match_start,L.match_length-te),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=te){L.match_length--;do L.strstart++,L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+te-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart;while(--L.match_length!==0);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+1])&L.hash_mask;else ye=t._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(ye&&(ae(L,!1),L.strm.avail_out===0))return Re}return L.insert=L.strstart<te-1?L.strstart:te-1,Be===l?(ae(L,!0),L.strm.avail_out===0?Fe:st):L.last_lit&&(ae(L,!1),L.strm.avail_out===0)?Re:xe}function dt(L,Be){for(var rt,ye,we;;){if(L.lookahead<ie){if(Te(L),L.lookahead<ie&&Be===i)return Re;if(L.lookahead===0)break}if(rt=0,L.lookahead>=te&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+te-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=te-1,rt!==0&&L.prev_length<L.max_lazy_match&&L.strstart-rt<=L.w_size-ie&&(L.match_length=Le(L,rt),L.match_length<=5&&(L.strategy===w||L.match_length===te&&L.strstart-L.match_start>4096)&&(L.match_length=te-1)),L.prev_length>=te&&L.match_length<=L.prev_length){we=L.strstart+L.lookahead-te,ye=t._tr_tally(L,L.strstart-1-L.prev_match,L.prev_length-te),L.lookahead-=L.prev_length-1,L.prev_length-=2;do++L.strstart<=we&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+te-1])&L.hash_mask,rt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart);while(--L.prev_length!==0);if(L.match_available=0,L.match_length=te-1,L.strstart++,ye&&(ae(L,!1),L.strm.avail_out===0))return Re}else if(L.match_available){if(ye=t._tr_tally(L,0,L.window[L.strstart-1]),ye&&ae(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return Re}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(ye=t._tr_tally(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<te-1?L.strstart:te-1,Be===l?(ae(L,!0),L.strm.avail_out===0?Fe:st):L.last_lit&&(ae(L,!1),L.strm.avail_out===0)?Re:xe}function It(L,Be){for(var rt,ye,we,Ue,Et=L.window;;){if(L.lookahead<=X){if(Te(L),L.lookahead<=X&&Be===i)return Re;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=te&&L.strstart>0&&(we=L.strstart-1,ye=Et[we],ye===Et[++we]&&ye===Et[++we]&&ye===Et[++we])){Ue=L.strstart+X;do;while(ye===Et[++we]&&ye===Et[++we]&&ye===Et[++we]&&ye===Et[++we]&&ye===Et[++we]&&ye===Et[++we]&&ye===Et[++we]&&ye===Et[++we]&&we<Ue);L.match_length=X-(Ue-we),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=te?(rt=t._tr_tally(L,1,L.match_length-te),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(rt=t._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),rt&&(ae(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,Be===l?(ae(L,!0),L.strm.avail_out===0?Fe:st):L.last_lit&&(ae(L,!1),L.strm.avail_out===0)?Re:xe}function Vt(L,Be){for(var rt;;){if(L.lookahead===0&&(Te(L),L.lookahead===0)){if(Be===i)return Re;break}if(L.match_length=0,rt=t._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,rt&&(ae(L,!1),L.strm.avail_out===0))return Re}return L.insert=0,Be===l?(ae(L,!0),L.strm.avail_out===0?Fe:st):L.last_lit&&(ae(L,!1),L.strm.avail_out===0)?Re:xe}function Dt(L,Be,rt,ye,we){this.good_length=L,this.max_lazy=Be,this.nice_length=rt,this.max_chain=ye,this.func=we}var Kt;Kt=[new Dt(0,0,0,0,Xe),new Dt(4,4,8,4,St),new Dt(4,5,16,8,St),new Dt(4,6,32,32,St),new Dt(4,4,16,16,dt),new Dt(8,16,32,32,dt),new Dt(8,16,128,128,dt),new Dt(8,32,128,256,dt),new Dt(32,128,258,1024,dt),new Dt(32,258,258,4096,dt)];function be(L){L.window_size=2*L.w_size,ue(L.head),L.max_lazy_match=Kt[L.level].max_lazy,L.good_match=Kt[L.level].good_length,L.nice_match=Kt[L.level].nice_length,L.max_chain_length=Kt[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=te-1,L.match_available=0,L.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(re*2),this.dyn_dtree=new e.Buf16((2*V+1)*2),this.bl_tree=new e.Buf16((2*$+1)*2),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(J+1),this.heap=new e.Buf16(2*j+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*j+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function K(L){var Be;return!L||!L.state?Ne(L,m):(L.total_in=L.total_out=0,L.data_type=T,Be=L.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?ee:je,L.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),d)}function pe(L){var Be=K(L);return Be===d&&be(L.state),Be}function Oe(L,Be){return!L||!L.state||L.state.wrap!==2?m:(L.state.gzhead=Be,d)}function ve(L,Be,rt,ye,we,Ue){if(!L)return m;var Et=1;if(Be===b&&(Be=6),ye<0?(Et=0,ye=-ye):ye>15&&(Et=2,ye-=16),we<1||we>M||rt!==R||ye<8||ye>15||Be<0||Be>9||Ue<0||Ue>E)return Ne(L,m);ye===8&&(ye=9);var me=new D;return L.state=me,me.strm=L,me.wrap=Et,me.gzhead=null,me.w_bits=ye,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=we+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+te-1)/te),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<we+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=Be,me.strategy=Ue,me.method=rt,pe(L)}function Ae(L,Be){return ve(L,Be,R,I,O,k)}function de(L,Be){var rt,ye,we,Ue;if(!L||!L.state||Be>c||Be<0)return L?Ne(L,m):m;if(ye=L.state,!L.output||!L.input&&L.avail_in!==0||ye.status===De&&Be!==l)return Ne(L,L.avail_out===0?v:m);if(ye.strm=L,rt=ye.last_flush,ye.last_flush=Be,ye.status===ee)if(ye.wrap===2)L.adler=0,oe(ye,31),oe(ye,139),oe(ye,8),ye.gzhead?(oe(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),oe(ye,ye.gzhead.time&255),oe(ye,ye.gzhead.time>>8&255),oe(ye,ye.gzhead.time>>16&255),oe(ye,ye.gzhead.time>>24&255),oe(ye,ye.level===9?2:ye.strategy>=x||ye.level<2?4:0),oe(ye,ye.gzhead.os&255),ye.gzhead.extra&&ye.gzhead.extra.length&&(oe(ye,ye.gzhead.extra.length&255),oe(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&(L.adler=r(L.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=Q):(oe(ye,0),oe(ye,0),oe(ye,0),oe(ye,0),oe(ye,0),oe(ye,ye.level===9?2:ye.strategy>=x||ye.level<2?4:0),oe(ye,He),ye.status=je);else{var Et=R+(ye.w_bits-8<<4)<<8,me=-1;ye.strategy>=x||ye.level<2?me=0:ye.level<6?me=1:ye.level===6?me=2:me=3,Et|=me<<6,ye.strstart!==0&&(Et|=Z),Et+=31-Et%31,ye.status=je,ne(ye,Et),ye.strstart!==0&&(ne(ye,L.adler>>>16),ne(ye,L.adler&65535)),L.adler=1}if(ye.status===Q)if(ye.gzhead.extra){for(we=ye.pending;ye.gzindex<(ye.gzhead.extra.length&65535)&&!(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>we&&(L.adler=r(L.adler,ye.pending_buf,ye.pending-we,we)),ke(L),we=ye.pending,ye.pending===ye.pending_buf_size));)oe(ye,ye.gzhead.extra[ye.gzindex]&255),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>we&&(L.adler=r(L.adler,ye.pending_buf,ye.pending-we,we)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=he)}else ye.status=he;if(ye.status===he)if(ye.gzhead.name){we=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>we&&(L.adler=r(L.adler,ye.pending_buf,ye.pending-we,we)),ke(L),we=ye.pending,ye.pending===ye.pending_buf_size)){Ue=1;break}ye.gzindex<ye.gzhead.name.length?Ue=ye.gzhead.name.charCodeAt(ye.gzindex++)&255:Ue=0,oe(ye,Ue)}while(Ue!==0);ye.gzhead.hcrc&&ye.pending>we&&(L.adler=r(L.adler,ye.pending_buf,ye.pending-we,we)),Ue===0&&(ye.gzindex=0,ye.status=Se)}else ye.status=Se;if(ye.status===Se)if(ye.gzhead.comment){we=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>we&&(L.adler=r(L.adler,ye.pending_buf,ye.pending-we,we)),ke(L),we=ye.pending,ye.pending===ye.pending_buf_size)){Ue=1;break}ye.gzindex<ye.gzhead.comment.length?Ue=ye.gzhead.comment.charCodeAt(ye.gzindex++)&255:Ue=0,oe(ye,Ue)}while(Ue!==0);ye.gzhead.hcrc&&ye.pending>we&&(L.adler=r(L.adler,ye.pending_buf,ye.pending-we,we)),Ue===0&&(ye.status=ce)}else ye.status=ce;if(ye.status===ce&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&ke(L),ye.pending+2<=ye.pending_buf_size&&(oe(ye,L.adler&255),oe(ye,L.adler>>8&255),L.adler=0,ye.status=je)):ye.status=je),ye.pending!==0){if(ke(L),L.avail_out===0)return ye.last_flush=-1,d}else if(L.avail_in===0&&H(Be)<=H(rt)&&Be!==l)return Ne(L,v);if(ye.status===De&&L.avail_in!==0)return Ne(L,v);if(L.avail_in!==0||ye.lookahead!==0||Be!==i&&ye.status!==De){var G=ye.strategy===x?Vt(ye,Be):ye.strategy===_?It(ye,Be):Kt[ye.level].func(ye,Be);if((G===Fe||G===st)&&(ye.status=De),G===Re||G===Fe)return L.avail_out===0&&(ye.last_flush=-1),d;if(G===xe&&(Be===a?t._tr_align(ye):Be!==c&&(t._tr_stored_block(ye,0,0,!1),Be===o&&(ue(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),ke(L),L.avail_out===0))return ye.last_flush=-1,d}return Be!==l?d:ye.wrap<=0?h:(ye.wrap===2?(oe(ye,L.adler&255),oe(ye,L.adler>>8&255),oe(ye,L.adler>>16&255),oe(ye,L.adler>>24&255),oe(ye,L.total_in&255),oe(ye,L.total_in>>8&255),oe(ye,L.total_in>>16&255),oe(ye,L.total_in>>24&255)):(ne(ye,L.adler>>>16),ne(ye,L.adler&65535)),ke(L),ye.wrap>0&&(ye.wrap=-ye.wrap),ye.pending!==0?d:h)}function ht(L){var Be;return!L||!L.state?m:(Be=L.state.status,Be!==ee&&Be!==Q&&Be!==he&&Be!==Se&&Be!==ce&&Be!==je&&Be!==De?Ne(L,m):(L.state=null,Be===je?Ne(L,g):d))}function wt(L,Be){var rt=Be.length,ye,we,Ue,Et,me,G,q,W;if(!L||!L.state||(ye=L.state,Et=ye.wrap,Et===2||Et===1&&ye.status!==ee||ye.lookahead))return m;for(Et===1&&(L.adler=n(L.adler,Be,rt,0)),ye.wrap=0,rt>=ye.w_size&&(Et===0&&(ue(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),W=new e.Buf8(ye.w_size),e.arraySet(W,Be,rt-ye.w_size,ye.w_size,0),Be=W,rt=ye.w_size),me=L.avail_in,G=L.next_in,q=L.input,L.avail_in=rt,L.next_in=0,L.input=Be,Te(ye);ye.lookahead>=te;){we=ye.strstart,Ue=ye.lookahead-(te-1);do ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[we+te-1])&ye.hash_mask,ye.prev[we&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=we,we++;while(--Ue);ye.strstart=we,ye.lookahead=te-1,Te(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=te-1,ye.match_available=0,L.next_in=G,L.input=q,L.avail_in=me,ye.wrap=Et,d}return wo.deflateInit=Ae,wo.deflateInit2=ve,wo.deflateReset=pe,wo.deflateResetKeep=K,wo.deflateSetHeader=Oe,wo.deflate=de,wo.deflateEnd=ht,wo.deflateSetDictionary=wt,wo.deflateInfo="pako deflate (from Nodeca project)",wo}var tf={},U6;function Y9(){if(U6)return tf;U6=1;var e=vd(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),s=0;s<256;s++)r[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;r[254]=r[254]=1,tf.string2buf=function(a){var o,l,c,d,h,m=a.length,g=0;for(d=0;d<m;d++)l=a.charCodeAt(d),(l&64512)===55296&&d+1<m&&(c=a.charCodeAt(d+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),d++)),g+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(g),h=0,d=0;h<g;d++)l=a.charCodeAt(d),(l&64512)===55296&&d+1<m&&(c=a.charCodeAt(d+1),(c&64512)===56320&&(l=65536+(l-55296<<10)+(c-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(a,o){if(o<65534&&(a.subarray&&n||!a.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(a,o));for(var l="",c=0;c<o;c++)l+=String.fromCharCode(a[c]);return l}return tf.buf2binstring=function(a){return i(a,a.length)},tf.binstring2buf=function(a){for(var o=new e.Buf8(a.length),l=0,c=o.length;l<c;l++)o[l]=a.charCodeAt(l);return o},tf.buf2string=function(a,o){var l,c,d,h,m=o||a.length,g=new Array(m*2);for(c=0,l=0;l<m;){if(d=a[l++],d<128){g[c++]=d;continue}if(h=r[d],h>4){g[c++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<m;)d=d<<6|a[l++]&63,h--;if(h>1){g[c++]=65533;continue}d<65536?g[c++]=d:(d-=65536,g[c++]=55296|d>>10&1023,g[c++]=56320|d&1023)}return i(g,c)},tf.utf8border=function(a,o){var l;for(o=o||a.length,o>a.length&&(o=a.length),l=o-1;l>=0&&(a[l]&192)===128;)l--;return l<0||l===0?o:l+r[a[l]]>o?l:o},tf}var dC,q6;function X9(){if(q6)return dC;q6=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return dC=e,dC}var V6;function lle(){if(V6)return Kh;V6=1;var e=ole(),t=vd(),n=Y9(),r=AR(),s=X9(),i=Object.prototype.toString,a=0,o=4,l=0,c=1,d=2,h=-1,m=0,g=8;function v(_){if(!(this instanceof v))return new v(_);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},_||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var k=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(k!==l)throw new Error(r[k]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var T;if(typeof E.dictionary=="string"?T=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?T=new Uint8Array(E.dictionary):T=E.dictionary,k=e.deflateSetDictionary(this.strm,T),k!==l)throw new Error(r[k]);this._dict_set=!0}}v.prototype.push=function(_,E){var k=this.strm,T=this.options.chunkSize,R,M;if(this.ended)return!1;M=E===~~E?E:E===!0?o:a,typeof _=="string"?k.input=n.string2buf(_):i.call(_)==="[object ArrayBuffer]"?k.input=new Uint8Array(_):k.input=_,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new t.Buf8(T),k.next_out=0,k.avail_out=T),R=e.deflate(k,M),R!==c&&R!==l)return this.onEnd(R),this.ended=!0,!1;(k.avail_out===0||k.avail_in===0&&(M===o||M===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(k.output,k.next_out))):this.onData(t.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&R!==c);return M===o?(R=e.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===l):(M===d&&(this.onEnd(l),k.avail_out=0),!0)},v.prototype.onData=function(_){this.chunks.push(_)},v.prototype.onEnd=function(_){_===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function b(_,E){var k=new v(E);if(k.push(_,!0),k.err)throw k.msg||r[k.err];return k.result}function w(_,E){return E=E||{},E.raw=!0,b(_,E)}function x(_,E){return E=E||{},E.gzip=!0,b(_,E)}return Kh.Deflate=v,Kh.deflate=b,Kh.deflateRaw=w,Kh.gzip=x,Kh}var Wh={},Ha={},fC,H6;function cle(){if(H6)return fC;H6=1;var e=30,t=12;return fC=function(r,s){var i,a,o,l,c,d,h,m,g,v,b,w,x,_,E,k,T,R,M,I,O,P,U,j,V;i=r.state,a=r.next_in,j=r.input,o=a+(r.avail_in-5),l=r.next_out,V=r.output,c=l-(s-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,v=i.wnext,b=i.window,w=i.hold,x=i.bits,_=i.lencode,E=i.distcode,k=(1<<i.lenbits)-1,T=(1<<i.distbits)-1;e:do{x<15&&(w+=j[a++]<<x,x+=8,w+=j[a++]<<x,x+=8),R=_[w&k];t:for(;;){if(M=R>>>24,w>>>=M,x-=M,M=R>>>16&255,M===0)V[l++]=R&65535;else if(M&16){I=R&65535,M&=15,M&&(x<M&&(w+=j[a++]<<x,x+=8),I+=w&(1<<M)-1,w>>>=M,x-=M),x<15&&(w+=j[a++]<<x,x+=8,w+=j[a++]<<x,x+=8),R=E[w&T];n:for(;;){if(M=R>>>24,w>>>=M,x-=M,M=R>>>16&255,M&16){if(O=R&65535,M&=15,x<M&&(w+=j[a++]<<x,x+=8,x<M&&(w+=j[a++]<<x,x+=8)),O+=w&(1<<M)-1,O>h){r.msg="invalid distance too far back",i.mode=e;break e}if(w>>>=M,x-=M,M=l-c,O>M){if(M=O-M,M>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(P=0,U=b,v===0){if(P+=m-M,M<I){I-=M;do V[l++]=b[P++];while(--M);P=l-O,U=V}}else if(v<M){if(P+=m+v-M,M-=v,M<I){I-=M;do V[l++]=b[P++];while(--M);if(P=0,v<I){M=v,I-=M;do V[l++]=b[P++];while(--M);P=l-O,U=V}}}else if(P+=v-M,M<I){I-=M;do V[l++]=b[P++];while(--M);P=l-O,U=V}for(;I>2;)V[l++]=U[P++],V[l++]=U[P++],V[l++]=U[P++],I-=3;I&&(V[l++]=U[P++],I>1&&(V[l++]=U[P++]))}else{P=l-O;do V[l++]=V[P++],V[l++]=V[P++],V[l++]=V[P++],I-=3;while(I>2);I&&(V[l++]=V[P++],I>1&&(V[l++]=V[P++]))}}else if((M&64)===0){R=E[(R&65535)+(w&(1<<M)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((M&64)===0){R=_[(R&65535)+(w&(1<<M)-1)];continue t}else if(M&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(a<o&&l<d);I=x>>3,a-=I,x-=I<<3,w&=(1<<x)-1,r.next_in=a,r.next_out=l,r.avail_in=a<o?5+(o-a):5-(a-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=w,i.bits=x},fC}var hC,G6;function ule(){if(G6)return hC;G6=1;var e=vd(),t=15,n=852,r=592,s=0,i=1,a=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return hC=function(m,g,v,b,w,x,_,E){var k=E.bits,T=0,R=0,M=0,I=0,O=0,P=0,U=0,j=0,V=0,$=0,re,J,te,X,ie,Z=null,ee=0,Q,he=new e.Buf16(t+1),Se=new e.Buf16(t+1),ce=null,je=0,De,Re,xe;for(T=0;T<=t;T++)he[T]=0;for(R=0;R<b;R++)he[g[v+R]]++;for(O=k,I=t;I>=1&&he[I]===0;I--);if(O>I&&(O=I),I===0)return w[x++]=1<<24|64<<16|0,w[x++]=1<<24|64<<16|0,E.bits=1,0;for(M=1;M<I&&he[M]===0;M++);for(O<M&&(O=M),j=1,T=1;T<=t;T++)if(j<<=1,j-=he[T],j<0)return-1;if(j>0&&(m===s||I!==1))return-1;for(Se[1]=0,T=1;T<t;T++)Se[T+1]=Se[T]+he[T];for(R=0;R<b;R++)g[v+R]!==0&&(_[Se[g[v+R]]++]=R);if(m===s?(Z=ce=_,Q=19):m===i?(Z=o,ee-=257,ce=l,je-=257,Q=256):(Z=c,ce=d,Q=-1),$=0,R=0,T=M,ie=x,P=O,U=0,te=-1,V=1<<O,X=V-1,m===i&&V>n||m===a&&V>r)return 1;for(;;){De=T-U,_[R]<Q?(Re=0,xe=_[R]):_[R]>Q?(Re=ce[je+_[R]],xe=Z[ee+_[R]]):(Re=96,xe=0),re=1<<T-U,J=1<<P,M=J;do J-=re,w[ie+($>>U)+J]=De<<24|Re<<16|xe|0;while(J!==0);for(re=1<<T-1;$&re;)re>>=1;if(re!==0?($&=re-1,$+=re):$=0,R++,--he[T]===0){if(T===I)break;T=g[v+_[R]]}if(T>O&&($&X)!==te){for(U===0&&(U=O),ie+=M,P=T-U,j=1<<P;P+U<I&&(j-=he[P+U],!(j<=0));)P++,j<<=1;if(V+=1<<P,m===i&&V>n||m===a&&V>r)return 1;te=$&X,w[te]=O<<24|P<<16|ie-x|0}}return $!==0&&(w[ie+$]=T-U<<24|64<<16|0),E.bits=O,0},hC}var K6;function dle(){if(K6)return Ha;K6=1;var e=vd(),t=W9(),n=Z9(),r=cle(),s=ule(),i=0,a=1,o=2,l=4,c=5,d=6,h=0,m=1,g=2,v=-2,b=-3,w=-4,x=-5,_=8,E=1,k=2,T=3,R=4,M=5,I=6,O=7,P=8,U=9,j=10,V=11,$=12,re=13,J=14,te=15,X=16,ie=17,Z=18,ee=19,Q=20,he=21,Se=22,ce=23,je=24,De=25,Re=26,xe=27,Fe=28,st=29,He=30,Ne=31,H=32,ue=852,ke=592,ae=15,oe=ae;function ne(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function Ee(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Le(ve){var Ae;return!ve||!ve.state?v:(Ae=ve.state,ve.total_in=ve.total_out=Ae.total=0,ve.msg="",Ae.wrap&&(ve.adler=Ae.wrap&1),Ae.mode=E,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new e.Buf32(ue),Ae.distcode=Ae.distdyn=new e.Buf32(ke),Ae.sane=1,Ae.back=-1,h)}function Te(ve){var Ae;return!ve||!ve.state?v:(Ae=ve.state,Ae.wsize=0,Ae.whave=0,Ae.wnext=0,Le(ve))}function Xe(ve,Ae){var de,ht;return!ve||!ve.state||(ht=ve.state,Ae<0?(de=0,Ae=-Ae):(de=(Ae>>4)+1,Ae<48&&(Ae&=15)),Ae&&(Ae<8||Ae>15))?v:(ht.window!==null&&ht.wbits!==Ae&&(ht.window=null),ht.wrap=de,ht.wbits=Ae,Te(ve))}function St(ve,Ae){var de,ht;return ve?(ht=new Ee,ve.state=ht,ht.window=null,de=Xe(ve,Ae),de!==h&&(ve.state=null),de):v}function dt(ve){return St(ve,oe)}var It=!0,Vt,Dt;function Kt(ve){if(It){var Ae;for(Vt=new e.Buf32(512),Dt=new e.Buf32(32),Ae=0;Ae<144;)ve.lens[Ae++]=8;for(;Ae<256;)ve.lens[Ae++]=9;for(;Ae<280;)ve.lens[Ae++]=7;for(;Ae<288;)ve.lens[Ae++]=8;for(s(a,ve.lens,0,288,Vt,0,ve.work,{bits:9}),Ae=0;Ae<32;)ve.lens[Ae++]=5;s(o,ve.lens,0,32,Dt,0,ve.work,{bits:5}),It=!1}ve.lencode=Vt,ve.lenbits=9,ve.distcode=Dt,ve.distbits=5}function be(ve,Ae,de,ht){var wt,L=ve.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new e.Buf8(L.wsize)),ht>=L.wsize?(e.arraySet(L.window,Ae,de-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(wt=L.wsize-L.wnext,wt>ht&&(wt=ht),e.arraySet(L.window,Ae,de-ht,wt,L.wnext),ht-=wt,ht?(e.arraySet(L.window,Ae,de-ht,ht,0),L.wnext=ht,L.whave=L.wsize):(L.wnext+=wt,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=wt))),0}function D(ve,Ae){var de,ht,wt,L,Be,rt,ye,we,Ue,Et,me,G,q,W,ge=0,Ie,Ge,bt,Wt,yn,Ht,Xt,an,$n=new e.Buf8(4),tr,jr,Mr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return v;de=ve.state,de.mode===$&&(de.mode=re),Be=ve.next_out,wt=ve.output,ye=ve.avail_out,L=ve.next_in,ht=ve.input,rt=ve.avail_in,we=de.hold,Ue=de.bits,Et=rt,me=ye,an=h;e:for(;;)switch(de.mode){case E:if(de.wrap===0){de.mode=re;break}for(;Ue<16;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(de.wrap&2&&we===35615){de.check=0,$n[0]=we&255,$n[1]=we>>>8&255,de.check=n(de.check,$n,2,0),we=0,Ue=0,de.mode=k;break}if(de.flags=0,de.head&&(de.head.done=!1),!(de.wrap&1)||(((we&255)<<8)+(we>>8))%31){ve.msg="incorrect header check",de.mode=He;break}if((we&15)!==_){ve.msg="unknown compression method",de.mode=He;break}if(we>>>=4,Ue-=4,Xt=(we&15)+8,de.wbits===0)de.wbits=Xt;else if(Xt>de.wbits){ve.msg="invalid window size",de.mode=He;break}de.dmax=1<<Xt,ve.adler=de.check=1,de.mode=we&512?j:$,we=0,Ue=0;break;case k:for(;Ue<16;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(de.flags=we,(de.flags&255)!==_){ve.msg="unknown compression method",de.mode=He;break}if(de.flags&57344){ve.msg="unknown header flags set",de.mode=He;break}de.head&&(de.head.text=we>>8&1),de.flags&512&&($n[0]=we&255,$n[1]=we>>>8&255,de.check=n(de.check,$n,2,0)),we=0,Ue=0,de.mode=T;case T:for(;Ue<32;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}de.head&&(de.head.time=we),de.flags&512&&($n[0]=we&255,$n[1]=we>>>8&255,$n[2]=we>>>16&255,$n[3]=we>>>24&255,de.check=n(de.check,$n,4,0)),we=0,Ue=0,de.mode=R;case R:for(;Ue<16;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}de.head&&(de.head.xflags=we&255,de.head.os=we>>8),de.flags&512&&($n[0]=we&255,$n[1]=we>>>8&255,de.check=n(de.check,$n,2,0)),we=0,Ue=0,de.mode=M;case M:if(de.flags&1024){for(;Ue<16;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}de.length=we,de.head&&(de.head.extra_len=we),de.flags&512&&($n[0]=we&255,$n[1]=we>>>8&255,de.check=n(de.check,$n,2,0)),we=0,Ue=0}else de.head&&(de.head.extra=null);de.mode=I;case I:if(de.flags&1024&&(G=de.length,G>rt&&(G=rt),G&&(de.head&&(Xt=de.head.extra_len-de.length,de.head.extra||(de.head.extra=new Array(de.head.extra_len)),e.arraySet(de.head.extra,ht,L,G,Xt)),de.flags&512&&(de.check=n(de.check,ht,G,L)),rt-=G,L+=G,de.length-=G),de.length))break e;de.length=0,de.mode=O;case O:if(de.flags&2048){if(rt===0)break e;G=0;do Xt=ht[L+G++],de.head&&Xt&&de.length<65536&&(de.head.name+=String.fromCharCode(Xt));while(Xt&&G<rt);if(de.flags&512&&(de.check=n(de.check,ht,G,L)),rt-=G,L+=G,Xt)break e}else de.head&&(de.head.name=null);de.length=0,de.mode=P;case P:if(de.flags&4096){if(rt===0)break e;G=0;do Xt=ht[L+G++],de.head&&Xt&&de.length<65536&&(de.head.comment+=String.fromCharCode(Xt));while(Xt&&G<rt);if(de.flags&512&&(de.check=n(de.check,ht,G,L)),rt-=G,L+=G,Xt)break e}else de.head&&(de.head.comment=null);de.mode=U;case U:if(de.flags&512){for(;Ue<16;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(we!==(de.check&65535)){ve.msg="header crc mismatch",de.mode=He;break}we=0,Ue=0}de.head&&(de.head.hcrc=de.flags>>9&1,de.head.done=!0),ve.adler=de.check=0,de.mode=$;break;case j:for(;Ue<32;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}ve.adler=de.check=ne(we),we=0,Ue=0,de.mode=V;case V:if(de.havedict===0)return ve.next_out=Be,ve.avail_out=ye,ve.next_in=L,ve.avail_in=rt,de.hold=we,de.bits=Ue,g;ve.adler=de.check=1,de.mode=$;case $:if(Ae===c||Ae===d)break e;case re:if(de.last){we>>>=Ue&7,Ue-=Ue&7,de.mode=xe;break}for(;Ue<3;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}switch(de.last=we&1,we>>>=1,Ue-=1,we&3){case 0:de.mode=J;break;case 1:if(Kt(de),de.mode=Q,Ae===d){we>>>=2,Ue-=2;break e}break;case 2:de.mode=ie;break;case 3:ve.msg="invalid block type",de.mode=He}we>>>=2,Ue-=2;break;case J:for(we>>>=Ue&7,Ue-=Ue&7;Ue<32;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if((we&65535)!==(we>>>16^65535)){ve.msg="invalid stored block lengths",de.mode=He;break}if(de.length=we&65535,we=0,Ue=0,de.mode=te,Ae===d)break e;case te:de.mode=X;case X:if(G=de.length,G){if(G>rt&&(G=rt),G>ye&&(G=ye),G===0)break e;e.arraySet(wt,ht,L,G,Be),rt-=G,L+=G,ye-=G,Be+=G,de.length-=G;break}de.mode=$;break;case ie:for(;Ue<14;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(de.nlen=(we&31)+257,we>>>=5,Ue-=5,de.ndist=(we&31)+1,we>>>=5,Ue-=5,de.ncode=(we&15)+4,we>>>=4,Ue-=4,de.nlen>286||de.ndist>30){ve.msg="too many length or distance symbols",de.mode=He;break}de.have=0,de.mode=Z;case Z:for(;de.have<de.ncode;){for(;Ue<3;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}de.lens[Mr[de.have++]]=we&7,we>>>=3,Ue-=3}for(;de.have<19;)de.lens[Mr[de.have++]]=0;if(de.lencode=de.lendyn,de.lenbits=7,tr={bits:de.lenbits},an=s(i,de.lens,0,19,de.lencode,0,de.work,tr),de.lenbits=tr.bits,an){ve.msg="invalid code lengths set",de.mode=He;break}de.have=0,de.mode=ee;case ee:for(;de.have<de.nlen+de.ndist;){for(;ge=de.lencode[we&(1<<de.lenbits)-1],Ie=ge>>>24,Ge=ge>>>16&255,bt=ge&65535,!(Ie<=Ue);){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(bt<16)we>>>=Ie,Ue-=Ie,de.lens[de.have++]=bt;else{if(bt===16){for(jr=Ie+2;Ue<jr;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(we>>>=Ie,Ue-=Ie,de.have===0){ve.msg="invalid bit length repeat",de.mode=He;break}Xt=de.lens[de.have-1],G=3+(we&3),we>>>=2,Ue-=2}else if(bt===17){for(jr=Ie+3;Ue<jr;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}we>>>=Ie,Ue-=Ie,Xt=0,G=3+(we&7),we>>>=3,Ue-=3}else{for(jr=Ie+7;Ue<jr;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}we>>>=Ie,Ue-=Ie,Xt=0,G=11+(we&127),we>>>=7,Ue-=7}if(de.have+G>de.nlen+de.ndist){ve.msg="invalid bit length repeat",de.mode=He;break}for(;G--;)de.lens[de.have++]=Xt}}if(de.mode===He)break;if(de.lens[256]===0){ve.msg="invalid code -- missing end-of-block",de.mode=He;break}if(de.lenbits=9,tr={bits:de.lenbits},an=s(a,de.lens,0,de.nlen,de.lencode,0,de.work,tr),de.lenbits=tr.bits,an){ve.msg="invalid literal/lengths set",de.mode=He;break}if(de.distbits=6,de.distcode=de.distdyn,tr={bits:de.distbits},an=s(o,de.lens,de.nlen,de.ndist,de.distcode,0,de.work,tr),de.distbits=tr.bits,an){ve.msg="invalid distances set",de.mode=He;break}if(de.mode=Q,Ae===d)break e;case Q:de.mode=he;case he:if(rt>=6&&ye>=258){ve.next_out=Be,ve.avail_out=ye,ve.next_in=L,ve.avail_in=rt,de.hold=we,de.bits=Ue,r(ve,me),Be=ve.next_out,wt=ve.output,ye=ve.avail_out,L=ve.next_in,ht=ve.input,rt=ve.avail_in,we=de.hold,Ue=de.bits,de.mode===$&&(de.back=-1);break}for(de.back=0;ge=de.lencode[we&(1<<de.lenbits)-1],Ie=ge>>>24,Ge=ge>>>16&255,bt=ge&65535,!(Ie<=Ue);){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(Ge&&(Ge&240)===0){for(Wt=Ie,yn=Ge,Ht=bt;ge=de.lencode[Ht+((we&(1<<Wt+yn)-1)>>Wt)],Ie=ge>>>24,Ge=ge>>>16&255,bt=ge&65535,!(Wt+Ie<=Ue);){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}we>>>=Wt,Ue-=Wt,de.back+=Wt}if(we>>>=Ie,Ue-=Ie,de.back+=Ie,de.length=bt,Ge===0){de.mode=Re;break}if(Ge&32){de.back=-1,de.mode=$;break}if(Ge&64){ve.msg="invalid literal/length code",de.mode=He;break}de.extra=Ge&15,de.mode=Se;case Se:if(de.extra){for(jr=de.extra;Ue<jr;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}de.length+=we&(1<<de.extra)-1,we>>>=de.extra,Ue-=de.extra,de.back+=de.extra}de.was=de.length,de.mode=ce;case ce:for(;ge=de.distcode[we&(1<<de.distbits)-1],Ie=ge>>>24,Ge=ge>>>16&255,bt=ge&65535,!(Ie<=Ue);){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if((Ge&240)===0){for(Wt=Ie,yn=Ge,Ht=bt;ge=de.distcode[Ht+((we&(1<<Wt+yn)-1)>>Wt)],Ie=ge>>>24,Ge=ge>>>16&255,bt=ge&65535,!(Wt+Ie<=Ue);){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}we>>>=Wt,Ue-=Wt,de.back+=Wt}if(we>>>=Ie,Ue-=Ie,de.back+=Ie,Ge&64){ve.msg="invalid distance code",de.mode=He;break}de.offset=bt,de.extra=Ge&15,de.mode=je;case je:if(de.extra){for(jr=de.extra;Ue<jr;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}de.offset+=we&(1<<de.extra)-1,we>>>=de.extra,Ue-=de.extra,de.back+=de.extra}if(de.offset>de.dmax){ve.msg="invalid distance too far back",de.mode=He;break}de.mode=De;case De:if(ye===0)break e;if(G=me-ye,de.offset>G){if(G=de.offset-G,G>de.whave&&de.sane){ve.msg="invalid distance too far back",de.mode=He;break}G>de.wnext?(G-=de.wnext,q=de.wsize-G):q=de.wnext-G,G>de.length&&(G=de.length),W=de.window}else W=wt,q=Be-de.offset,G=de.length;G>ye&&(G=ye),ye-=G,de.length-=G;do wt[Be++]=W[q++];while(--G);de.length===0&&(de.mode=he);break;case Re:if(ye===0)break e;wt[Be++]=de.length,ye--,de.mode=he;break;case xe:if(de.wrap){for(;Ue<32;){if(rt===0)break e;rt--,we|=ht[L++]<<Ue,Ue+=8}if(me-=ye,ve.total_out+=me,de.total+=me,me&&(ve.adler=de.check=de.flags?n(de.check,wt,me,Be-me):t(de.check,wt,me,Be-me)),me=ye,(de.flags?we:ne(we))!==de.check){ve.msg="incorrect data check",de.mode=He;break}we=0,Ue=0}de.mode=Fe;case Fe:if(de.wrap&&de.flags){for(;Ue<32;){if(rt===0)break e;rt--,we+=ht[L++]<<Ue,Ue+=8}if(we!==(de.total&4294967295)){ve.msg="incorrect length check",de.mode=He;break}we=0,Ue=0}de.mode=st;case st:an=m;break e;case He:an=b;break e;case Ne:return w;case H:default:return v}return ve.next_out=Be,ve.avail_out=ye,ve.next_in=L,ve.avail_in=rt,de.hold=we,de.bits=Ue,(de.wsize||me!==ve.avail_out&&de.mode<He&&(de.mode<xe||Ae!==l))&&be(ve,ve.output,ve.next_out,me-ve.avail_out),Et-=ve.avail_in,me-=ve.avail_out,ve.total_in+=Et,ve.total_out+=me,de.total+=me,de.wrap&&me&&(ve.adler=de.check=de.flags?n(de.check,wt,me,ve.next_out-me):t(de.check,wt,me,ve.next_out-me)),ve.data_type=de.bits+(de.last?64:0)+(de.mode===$?128:0)+(de.mode===Q||de.mode===te?256:0),(Et===0&&me===0||Ae===l)&&an===h&&(an=x),an}function K(ve){if(!ve||!ve.state)return v;var Ae=ve.state;return Ae.window&&(Ae.window=null),ve.state=null,h}function pe(ve,Ae){var de;return!ve||!ve.state||(de=ve.state,(de.wrap&2)===0)?v:(de.head=Ae,Ae.done=!1,h)}function Oe(ve,Ae){var de=Ae.length,ht,wt,L;return!ve||!ve.state||(ht=ve.state,ht.wrap!==0&&ht.mode!==V)?v:ht.mode===V&&(wt=1,wt=t(wt,Ae,de,0),wt!==ht.check)?b:(L=be(ve,Ae,de,de),L?(ht.mode=Ne,w):(ht.havedict=1,h))}return Ha.inflateReset=Te,Ha.inflateReset2=Xe,Ha.inflateResetKeep=Le,Ha.inflateInit=dt,Ha.inflateInit2=St,Ha.inflate=D,Ha.inflateEnd=K,Ha.inflateGetHeader=pe,Ha.inflateSetDictionary=Oe,Ha.inflateInfo="pako inflate (from Nodeca project)",Ha}var pC,W6;function J9(){return W6||(W6=1,pC={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),pC}var mC,Z6;function fle(){if(Z6)return mC;Z6=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return mC=e,mC}var Y6;function hle(){if(Y6)return Wh;Y6=1;var e=dle(),t=vd(),n=Y9(),r=J9(),s=AR(),i=X9(),a=fle(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(s[g]);if(this.header=new a,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):o.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(s[g])}l.prototype.push=function(h,m){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,w,x,_,E,k,T=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),w=e.inflate(g,r.Z_NO_FLUSH),w===r.Z_NEED_DICT&&b&&(w=e.inflateSetDictionary(this.strm,b)),w===r.Z_BUF_ERROR&&T===!0&&(w=r.Z_OK,T=!1),w!==r.Z_STREAM_END&&w!==r.Z_OK)return this.onEnd(w),this.ended=!0,!1;g.next_out&&(g.avail_out===0||w===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(_=n.utf8border(g.output,g.next_out),E=g.next_out-_,k=n.buf2string(g.output,_),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,_,E,0),this.onData(k)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(T=!0)}while((g.avail_in>0||g.avail_out===0)&&w!==r.Z_STREAM_END);return w===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(w=e.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,m){var g=new l(m);if(g.push(h,!0),g.err)throw g.msg||s[g.err];return g.result}function d(h,m){return m=m||{},m.raw=!0,c(h,m)}return Wh.Inflate=l,Wh.inflate=c,Wh.inflateRaw=d,Wh.ungzip=c,Wh}var gC,X6;function ple(){if(X6)return gC;X6=1;var e=vd().assign,t=lle(),n=hle(),r=J9(),s={};return e(s,t,n,r),gC=s,gC}var mle=ple();const RR=Ni(mle);var yC,J6;function gle(){if(J6)return yC;J6=1;const e=(t,n)=>function(...r){const s=n.promiseModule;return new s((i,a)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?a(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?a(o):i(l)}):r.push(i),t.apply(this,r)})};return yC=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const s=a=>{const o=l=>typeof l=="string"?a===l:l.test(a);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...a){return n.excludeMain?t(...a):e(t,n).apply(this,a)}:i=Object.create(Object.getPrototypeOf(t));for(const a in t){const o=t[a];i[a]=typeof o=="function"&&s(a)?e(o,n):o}return i},yC}var yle=gle();const bC=Ni(yle);var vC,Q6;function ble(){if(Q6)return vC;Q6=1;var e={};function t(te){return Array.isArray(te)?te:[te]}const n="",r=" ",s="\\",i=/^\s+$/,a=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,c=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,v=(te,X,ie)=>Object.defineProperty(te,X,{value:ie}),b=/([0-z])-([0-z])/g,w=()=>!1,x=te=>te.replace(b,(X,ie,Z)=>ie.charCodeAt(0)<=Z.charCodeAt(0)?X:n),_=te=>{const{length:X}=te;return te.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(te,X,ie)=>X+(ie.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(te,X)=>{const{length:ie}=X;return X.slice(0,ie-ie%2)+r}],[/[\\$.|*+(){^]/g,te=>`\\${te}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(te,X,ie)=>X+6<ie.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(te,X,ie)=>{const Z=ie.replace(/\\\*/g,"[^\\/]*");return X+Z}],[/\\\\\\(?=[$.|*+(){^])/g,()=>s],[/\\\\/g,()=>s],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(te,X,ie,Z,ee)=>X===s?`\\[${ie}${_(Z)}${ee}`:ee==="]"&&Z.length%2===0?`[${x(ie)}${Z}]`:"[]"],[/(?:[^*])$/,te=>/\/$/.test(te)?`${te}$`:`${te}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(te,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],k=Object.create(null),T=(te,X)=>{let ie=k[te];return ie||(ie=E.reduce((Z,[ee,Q])=>Z.replace(ee,Q.bind(te)),te),k[te]=ie),X?new RegExp(ie,"i"):new RegExp(ie)},R=te=>typeof te=="string",M=te=>te&&R(te)&&!i.test(te)&&!a.test(te)&&te.indexOf("#")!==0,I=te=>te.split(c);class O{constructor(X,ie,Z,ee){this.origin=X,this.pattern=ie,this.negative=Z,this.regex=ee}}const P=(te,X)=>{const ie=te;let Z=!1;te.indexOf("!")===0&&(Z=!0,te=te.substr(1)),te=te.replace(o,"!").replace(l,"#");const ee=T(te,X);return new O(ie,te,Z,ee)},U=(te,X)=>{throw new X(te)},j=(te,X,ie)=>R(te)?te?j.isNotRelative(te)?ie(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ie("path must not be empty",TypeError):ie(`path must be a string, but got \`${X}\``,TypeError),V=te=>d.test(te);j.isNotRelative=V,j.convert=te=>te;class ${constructor({ignorecase:X=!0,ignoreCase:ie=X,allowRelativePaths:Z=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ie,this._allowRelativePaths=Z,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[g]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(M(X)){const ie=P(X,this._ignoreCase);this._added=!0,this._rules.push(ie)}}add(X){return this._added=!1,t(R(X)?I(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ie){let Z=!1,ee=!1;return this._rules.forEach(Q=>{const{negative:he}=Q;if(ee===he&&Z!==ee||he&&!Z&&!ee&&!ie)return;Q.regex.test(X)&&(Z=!he,ee=he)}),{ignored:Z,unignored:ee}}_test(X,ie,Z,ee){const Q=X&&j.convert(X);return j(Q,X,this._allowRelativePaths?w:U),this._t(Q,ie,Z,ee)}_t(X,ie,Z,ee){if(X in ie)return ie[X];if(ee||(ee=X.split(h)),ee.pop(),!ee.length)return ie[X]=this._testOne(X,Z);const Q=this._t(ee.join(h)+h,ie,Z,ee);return ie[X]=Q.ignored?Q:this._testOne(X,Z)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const re=te=>new $(te),J=te=>j(te&&j.convert(te),te,w);if(re.isPathValid=J,re.default=re,vC=re,typeof vs<"u"&&(e&&e.IGNORE_TEST_WIN32||vs.platform==="win32")){const te=ie=>/^\\\\\?\\/.test(ie)||/["<>|\u0000-\u001F]+/u.test(ie)?ie:ie.replace(/\\/g,"/");j.convert=te;const X=/^[a-z]:\//i;j.isNotRelative=ie=>X.test(ie)||V(ie)}return vC}var vle=ble();const wle=Ni(vle);var wC,eD;function xle(){if(eD)return wC;eD=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,s,i){return s=s instanceof RegExp?s:new RegExp(e(s),"g"),r.replace(s,i)}var n={clean:function(s){if(typeof s!="string")throw new Error("Expected a string, received: "+s);return s=t(s,"./","/"),s=t(s,"..","."),s=t(s," ","-"),s=t(s,/^[~^:?*\\\-]/g,""),s=t(s,/[~^:?*\\]/g,"-"),s=t(s,/[~^:?*\\\-]$/g,""),s=t(s,"@{","-"),s=t(s,/\.$/g,""),s=t(s,/\/$/g,""),s=t(s,/\.lock$/g,""),s}};return wC=n,wC}var _le=xle();const xl=Ni(_le);var xC,tD;function Sle(){return tD||(tD=1,xC=function(e,t){var n=e,r=t,s=n.length,i=r.length,a=!1,o=null,l=s+1,c=[],d=[],h=[],m="",g=-1,v=0,b=1,w,x,_=function(){s>=i&&(w=n,x=s,n=r,r=w,s=i,i=x,a=!0,l=s+1)},E=function(M,I,O){return{x:M,y:I,k:O}},k=function(M,I){return{elem:M,t:I}},T=function(M,I,O){var P,U,j;for(I>O?P=c[M-1+l]:P=c[M+1+l],j=Math.max(I,O),U=j-M;U<s&&j<i&&n[U]===r[j];)++U,++j;return c[M+l]=d.length,d[d.length]=new E(U,j,P),j},R=function(M){var I,O,P;for(I=O=0,P=M.length-1;P>=0;--P)for(;I<M[P].x||O<M[P].y;)M[P].y-M[P].x>O-I?(a?h[h.length]=new k(r[O],g):h[h.length]=new k(r[O],b),++O):M[P].y-M[P].x<O-I?(a?h[h.length]=new k(n[I],b):h[h.length]=new k(n[I],g),++I):(h[h.length]=new k(n[I],v),m+=n[I],++I,++O)};return _(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return m},getses:function(){return h},compose:function(){var M,I,O,P,U,j,V,$;for(M=i-s,I=s+i+3,O={},V=0;V<I;++V)O[V]=-1,c[V]=-1;P=-1;do{for(++P,$=-P;$<=M-1;++$)O[$+l]=T($,O[$-1+l]+1,O[$+1+l]);for($=M+P;$>=M+1;--$)O[$+l]=T($,O[$-1+l]+1,O[$+1+l]);O[M+l]=T(M,O[M-1+l]+1,O[M+1+l])}while(O[M+l]!==i);for(o=M+2*P,U=c[M+l],j=[];U!==-1;)j[j.length]=new E(d[U].x,d[U].y,null),U=d[U].k;R(j)}}}),xC}var _C,nD;function Ele(){if(nD)return _C;nD=1;var e=Sle();function t(i,a){var o=new e(i,a);o.compose();for(var l=o.getses(),c,d,h=i.length-1,m=a.length-1,g=l.length-1;g>=0;--g)l[g].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:m,chain:null},d=d.chain):(c={file1index:h,file2index:m,chain:null},d=c),h--,m--):l[g].t===o.SES_DELETE?h--:l[g].t===o.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,c):v}function n(i,a){for(var o=[],l=i.length,c=a.length,d=t(i,a);d!==null;d=d.chain){var h=l-d.file1index-1,m=c-d.file2index-1;l=d.file1index,c=d.file2index,(h||m)&&o.push({file1:[l+1,h],file2:[c+1,m]})}return o.reverse(),o}function r(i,a,o){var l,c=n(a,i),d=n(a,o),h=[];function m(X,ie){h.push([X.file1[0],ie,X.file1[1],X.file2[0],X.file2[1]])}for(l=0;l<c.length;l++)m(c[l],0);for(l=0;l<d.length;l++)m(d[l],2);h.sort(function(X,ie){return X[0]-ie[0]});var g=[],v=0;function b(X){X>v&&(g.push([1,v,X-v]),v=X)}for(var w=0;w<h.length;w++){for(var x=w,_=h[w],E=_[0],k=E+_[2];w<h.length-1;){var T=h[w+1],R=T[0];if(R>k)break;k=Math.max(k,R+T[2]),w++}if(b(E),x==w)_[4]>0&&g.push([_[1],_[3],_[4]]);else{var M={0:[i.length,-1,a.length,-1],2:[o.length,-1,a.length,-1]};for(l=x;l<=w;l++){_=h[l];var I=_[1],O=M[I],P=_[0],U=P+_[2],j=_[3],V=j+_[4];O[0]=Math.min(j,O[0]),O[1]=Math.max(V,O[1]),O[2]=Math.min(P,O[2]),O[3]=Math.max(U,O[3])}var $=M[0][0]+(E-M[0][2]),re=M[0][1]+(k-M[0][3]),J=M[2][0]+(E-M[2][2]),te=M[2][1]+(k-M[2][3]);g.push([-1,$,re-$,E,k-E,J,te-J])}v=k}return b(a.length),g}function s(i,a,o){var l=[],c=[i,a,o],d=r(i,a,o),h=[];function m(){h.length&&l.push({ok:h}),h=[]}function g(_){for(var E=0;E<_.length;E++)h.push(_[E])}function v(_){if(_[2]!=_[6])return!0;for(var E=_[1],k=_[5],T=0;T<_[2];T++)if(i[T+E]!=o[T+k])return!0;return!1}for(var b=0;b<d.length;b++){var w=d[b],x=w[0];x==-1?v(w)?(m(),l.push({conflict:{a:i.slice(w[1],w[1]+w[2]),aIndex:w[1],o:a.slice(w[3],w[3]+w[4]),oIndex:w[3],b:o.slice(w[5],w[5]+w[6]),bIndex:w[5]}})):g(c[0].slice(w[1],w[1]+w[2])):g(c[x].slice(w[1],w[1]+w[2]))}return m(),l}return _C=s,_C}var Cle=Ele();const kle=Ni(Cle);class yr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new yr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class qy extends yr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=qy.code,this.data={filepaths:t}}}qy.code="UnmergedPathsError";class Pn extends yr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Pn.code,this.data={message:t}}}Pn.code="InternalError";class dm extends yr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=dm.code,this.data={filepath:t}}}dm.code="UnsafeFilepathError";class vl{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const s=this.buffer.write(t,this._start,n,r);return this._start+=n,s}copy(t,n,r){const s=t.copy(this.buffer,this._start,n,r);return this._start+=s,s}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function V1(e,t){return-(e<t)||+(e>t)}function Q9(e,t){return V1(e.path,t.path)}function e$(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const fl=2**32;function rD(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const s=Math.floor(n/1e3),i=(n-s*1e3)*1e6;return[s,i]}function Dp(e){const[t,n]=rD(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,s]=rD(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%fl,ctimeNanoseconds:n%fl,mtimeSeconds:r%fl,mtimeNanoseconds:s%fl,dev:e.dev%fl,ino:e.ino%fl,mode:e$(e.mode%fl),uid:e.uid%fl,gid:e.gid%fl,size:e.size>-1?e.size%fl:0}}function Tle(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let SC=null;async function $c(e){return SC===null&&(SC=await Rle()),SC?t$(e):Ale(e)}function Ale(e){return new K9().update(e).digest("hex")}async function t$(e){const t=await crypto.subtle.digest("SHA-1",e);return Tle(t)}async function Rle(){try{if(await t$(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function Nle(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function Ile(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Jt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class cf{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Jt.isBuffer(t))return cf.fromBuffer(t);if(t===null)return new cf(null);throw new Pn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Pn("Index file is empty (.git/index)");const n=new cf,r=new vl(t),s=r.toString("utf8",4);if(s!=="DIRC")throw new Pn(`Invalid dircache magic file number: ${s}`);const i=await $c(t.slice(0,-20)),a=t.slice(-20).toString("hex");if(a!==i)throw new Pn(`Invalid checksum in GitIndex buffer: expected ${a} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new Pn(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let c=0;for(;!r.eof()&&c<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=Nle(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new Pn(`Got a path length of: ${m}`);if(d.path=r.toString("utf8",m),d.path.includes("..\\")||d.path.includes("../"))throw new dm(d.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new Pn(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new Pn("Unexpected end of file")}d.stages=[],n._addEntry(d),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(Q9)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:s=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Dp(n);const i=Jt.from(t),a={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:s,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(a),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Jt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,s=Jt.alloc(r),i=new vl(s),a=Dp(t);return i.writeUInt32BE(a.ctimeSeconds),i.writeUInt32BE(a.ctimeNanoseconds),i.writeUInt32BE(a.mtimeSeconds),i.writeUInt32BE(a.mtimeNanoseconds),i.writeUInt32BE(a.dev),i.writeUInt32BE(a.ino),i.writeUInt32BE(a.mode),i.writeUInt32BE(a.uid),i.writeUInt32BE(a.gid),i.writeUInt32BE(a.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(Ile(t)),i.write(t.path,n.length,"utf8"),s}async toObject(){const t=Jt.alloc(12),n=new vl(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(cf._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(cf._entryToBuffer(l));r=await Promise.all(r);const s=Jt.concat(r),i=Jt.concat([t,s]),a=await $c(i);return Jt.concat([i,Jt.from(a,"hex")])}}function vx(e,t,n=!0,r=!0){const s=Dp(e),i=Dp(t);return n&&s.mode!==i.mode||s.mtimeSeconds!==i.mtimeSeconds||s.ctimeSeconds!==i.ctimeSeconds||s.uid!==i.uid||s.gid!==i.gid||r&&s.ino!==i.ino||s.size!==i.size}let EC=null;const CC=Symbol("IndexCache");function jle(){return{map:new Map,stats:new Map}}async function Mle(e,t,n){const[r,s]=await Promise.all([e.lstat(t),e.read(t)]),i=await cf.from(s);n.map.set(t,i),n.stats.set(t,r)}async function Dle(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const s=await e.lstat(t);return s===null?!1:vx(r,s)}class ti{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:s=!0},i){r[CC]||(r[CC]=jle());const a=`${n}/index`;EC===null&&(EC=new K0({maxPending:1/0}));let o,l=[];return await EC.acquire(a,async()=>{const c=r[CC];await Dle(t,a,c)&&await Mle(t,a,c);const d=c.map.get(a);if(l=d.unmergedPaths,l.length&&!s)throw new qy(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(a,h),c.stats.set(a,await t.lstat(a)),d._dirty=!1}}),o}}function wx(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Op(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function n$(e){const t=new Map,n=function(s){if(!t.has(s)){const i={type:"tree",fullpath:s,basename:wx(s),metadata:{},children:[]};t.set(s,i),i.parent=n(Op(s)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(s)},r=function(s,i){if(!t.has(s)){const a={type:"blob",fullpath:s,basename:wx(s),metadata:i,parent:n(Op(s)),children:[]};a.parent&&a.parent.children.push(a),t.set(s,a)}return t.get(s)};n(".");for(const s of e)r(s.path,s);return t}function Ole(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Pn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class Ple{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=ti.acquire({fs:t,gitdir:n,cache:r},async function(i){return n$(i.entries)});const s=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(t){const n=t._fullpath,s=(await this.treePromise).get(n);if(!s||s.type==="blob")return null;if(s.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=s.children.map(a=>a.fullpath);return i.sort(V1),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const s=r.type==="tree"?{}:Dp(r.metadata);t._type=r.type==="tree"?"tree":Ole(s.mode),t._mode=s.mode,r.type==="tree"?t._stat=void 0:t._stat=s}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const H1=Symbol("GitWalkSymbol");function fm(){const e=Object.create(null);return Object.defineProperty(e,H1,{value:function({fs:t,gitdir:n,cache:r}){return new Ple({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class $r extends yr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=$r.code,this.data={what:t}}}$r.code="NotFoundError";class Wi extends yr{constructor(t,n,r,s){super(`Object ${t} ${s?`at ${s}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Wi.code,this.data={oid:t,actual:n,expected:r,filepath:s}}}Wi.code="ObjectTypeError";class ed extends yr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=ed.code,this.data={value:t}}}ed.code="InvalidOidError";class Vy extends yr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=Vy.code,this.data={remote:t}}}Vy.code="NoRefspecError";class xx{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const s=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,s);return n=r.slice(s+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new xx(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class _x{constructor({remotePath:t,localPath:n,force:r,matchPrefix:s}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:s})}static from(t){const[n,r,s,i,a]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=s==="*";if(l!==(a==="*"))throw new Pn("Invalid refspec");return new _x({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class NR{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(_x.from(r));return new NR(n)}add(t){const n=_x.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const s of t){const i=r.translate(s);i&&n.push([s,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const s=r.translate(t);s&&(n=s)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function Fle(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),s=-(n<r)||+(n>r);return s===0?e.endsWith("^{}")?1:-1:s}const Lle=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Bg=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},sD={core:{filemode:Bg,bare:Bg,logallrefupdates:Bg,symlinks:Bg,ignorecase:Bg,bigFileThreshold:Lle}},$le=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,Ble=/^[A-Za-z0-9-.]+$/,zle=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Ule=/^[A-Za-z][A-Za-z-]*$/,qle=/^(.*?)( *[#;].*)$/,Vle=e=>{const t=$le.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},Hle=e=>{const t=zle.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),s=Gle(r),i=Kle(s);return[n,i]}return null},Gle=e=>{const t=qle.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return iD(n)&&iD(r)?`${n}${r}`:n},iD=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Kle=e=>e.split("").reduce((t,n,r,s)=>{const i=n==='"'&&s[r-1]!=="\\",a=n==="\\"&&s[r+1]==='"';return i||a?t:t+n},""),aD=e=>e!=null?e.toLowerCase():null,mT=(e,t,n)=>[aD(e),t,aD(n)].filter(r=>r!=null).join("."),oD=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),s=t.length?t.join("."):void 0;return{section:n,subsection:s,name:r,path:mT(n,s,r),sectionPath:mT(n,s,null),isSection:!!n}},Wle=(e,t)=>e.reduce((n,r,s)=>t(r)?s:n,-1);class IR{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(s=>{let i=null,a=null;const o=s.trim(),l=Vle(o),c=l!=null;if(c)[n,r]=l;else{const h=Hle(o);h!=null&&([i,a]=h)}const d=mT(n,r,i);return{line:s,isSection:c,section:n,subsection:r,name:i,value:a,path:d}}):[]}static from(t){return new IR(t)}async get(t,n=!1){const r=oD(t).path,s=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:a,value:o})=>{const l=sD[i]&&sD[i][a];return l?l(o):o});return n?s:s.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:s,subsection:i,name:a,path:o,sectionPath:l,isSection:c}=oD(t),d=Wle(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],m=Object.assign({},h,{name:a,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,m):this.parsedConfig[d]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===l),m={section:s,subsection:i,name:a,value:n,modified:!0,path:o};if(Ble.test(s)&&Ule.test(a))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:c,section:s,subsection:i,modified:!0,path:l};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:s,value:i,modified:a=!1})=>a?s!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${s} = "${i}"`:`	${s} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class js{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return IR.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Jv=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Zle=["config","description","index","shallow","commondir"];let kC;async function Iu(e,t){return kC===void 0&&(kC=new K0),kC.acquire(e,t)}class $t{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:s,symrefs:i,tags:a,refspecs:o=void 0,prune:l=!1,pruneTags:c=!1}){for(const w of s.values())if(!w.match(/[0-9a-f]{40}/))throw new ed(w);const d=await js.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new Vy(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=NR.from(o),m=new Map;if(c){const w=await $t.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await $t.deleteRefs({fs:t,gitdir:n,refs:w.map(x=>`refs/tags/${x}`)})}if(a){for(const w of s.keys())if(w.startsWith("refs/tags")&&!w.endsWith("^{}")&&!await $t.exists({fs:t,gitdir:n,ref:w})){const x=s.get(w);m.set(w,x)}}const g=h.translate([...s.keys()]);for(const[w,x]of g){const _=s.get(w);m.set(x,_)}const v=h.translate([...i.keys()]);for(const[w,x]of v){const _=i.get(w),E=h.translateOne(_);E&&m.set(x,`ref: ${E}`)}const b=[];if(l){for(const w of h.localNamespaces()){const x=(await $t.listRefs({fs:t,gitdir:n,filepath:w})).map(_=>`${w}/${_}`);for(const _ of x)m.has(_)||b.push(_)}b.length>0&&await $t.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[w,x]of m)await Iu(w,async()=>t.write(Mt.join(n,w),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:s}){if(!s.match(/[0-9a-f]{40}/))throw new ed(s);await Iu(r,async()=>t.write(Mt.join(n,r),`${s.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:s}){await Iu(r,async()=>t.write(Mt.join(n,r),`ref: ${s.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return $t.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Mt.join(n,o))));let s=await Iu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=xx.from(s),a=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<a&&(s=i.toString(),await Iu("packed-refs",async()=>t.write(`${n}/packed-refs`,s,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:s=void 0}){if(s!==void 0&&(s--,s===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),$t.resolve({fs:t,gitdir:n,ref:r,depth:s});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await $t.packedRefs({fs:t,gitdir:n}),a=Jv(r).filter(o=>!Zle.includes(o));for(const o of a){const l=await Iu(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return $t.resolve({fs:t,gitdir:n,ref:l.trim(),depth:s})}throw new $r(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await $t.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const s=await $t.packedRefs({fs:t,gitdir:n}),i=Jv(r);for(const a of i)if(await Iu(a,async()=>t.exists(`${n}/${a}`))||s.has(a))return a;throw new $r(r)}static async expandAgainstMap({ref:t,map:n}){const r=Jv(t);for(const s of r)if(await n.has(s))return s;throw new $r(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:s}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),$t.resolveAgainstMap({ref:t,fullref:n,depth:r,map:s});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=Jv(t);for(const a of i){const o=s.get(a);if(o)return $t.resolveAgainstMap({ref:o.trim(),fullref:a,depth:r,map:s})}throw new $r(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Iu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return xx.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const s=$t.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(a=>a.replace(`${n}/${r}/`,""))}catch{i=[]}for(let a of(await s).keys())a.startsWith(r)&&(a=a.replace(r+"/",""),i.includes(a)||i.push(a));return i.sort(Fle),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?$t.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):$t.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await $t.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(s=>!s.endsWith("^{}"))}}function Yle(e,t){return V1(lD(e),lD(t))}function lD(e){return e.mode==="040000"?e.path+"/":e.path}function r$(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Pn(`Unexpected GitTree entry mode: ${e}`)}function Xle(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Pn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const s=e.indexOf(0,n);if(s===-1)throw new Pn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const a=r$(i),o=e.slice(r+1,s).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new dm(o);const l=e.slice(s+1,s+21).toString("hex");n=s+21,t.push({mode:i,path:o,oid:l,type:a})}return t}function Jle(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Pn(`Could not understand file mode: ${e}`)}function Qle(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Jle(e.mode),e.type||(e.type=r$(e.mode)),e}class ua{constructor(t){if(Jt.isBuffer(t))this._entries=Xle(t);else if(Array.isArray(t))this._entries=t.map(Qle);else throw new Pn("invalid type passed to GitTree constructor");this._entries.sort(Q9)}static from(t){return new ua(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Yle),Jt.concat(t.map(n=>{const r=Jt.from(n.mode.replace(/^0/,"")),s=Jt.from(" "),i=Jt.from(n.path,"utf8"),a=Jt.from([0]),o=Jt.from(n.oid,"hex");return Jt.concat([r,s,i,a,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class hm{static wrap({type:t,object:n}){return Jt.concat([Jt.from(`${t} ${n.byteLength.toString()}\0`),Jt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),s=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),a=t.length-(r+1);if(parseInt(i)!==a)throw new Pn(`Length mismatch: expected ${i} bytes but got ${a} instead.`);return{type:s,object:Jt.from(t.slice(r+1))}}}async function s$({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,s=await e.read(`${t}/${r}`);return s?{object:s,format:"deflated",source:r}:null}function ece(e,t){const n=new vl(e),r=cD(n);if(r!==t.byteLength)throw new Pn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const s=cD(n);let i;const a=dD(n,t);if(a.byteLength===s)i=a;else{i=Jt.alloc(s);const o=new vl(i);for(o.copy(a);!n.eof();)o.copy(dD(n,t));const l=o.tell();if(s!==l)throw new Pn(`applyDelta expected target buffer to be ${s} bytes but the resulting buffer was ${l} bytes`)}return i}function cD(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function uD(e,t,n){let r=0,s=0;for(;n--;)t&1&&(r|=e.readUInt8()<<s),t>>=1,s+=8;return r}function dD(e,t){const n=e.readUInt8(),r=128,s=15,i=112;if(n&r){const a=uD(e,n&s,4);let o=uD(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(a,a+o)}else return e.slice(n)}function tce(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function i$(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:tce(e)}class a${constructor(t){if(typeof Jt>"u")throw new Error("Missing Buffer dependency");this.stream=i$(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Jt.alloc(0):(n&&(n=Jt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>nce(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Jt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function nce(e){return e.reduce((t,n)=>t+n.length,0)}async function rce(e,t){const n=new a$(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Pn(`Invalid PACK header '${r}'`);let s=await n.read(4);if(s=s.readUInt32BE(0),s!==2)throw new Pn(`Invalid packfile version: ${s}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const a=n.tell(),{type:o,length:l,ofs:c,reference:d}=await sce(n),h=new RR.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new Pn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new Pn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:o,num:i,offset:a,end:g,reference:d,ofs:c})}}}}async function sce(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let a=4;do t=await e.byte(),r|=(t&127)<<a,a+=7;while(t&128)}let s,i;if(n===6){let a=0;s=0;const o=[];do t=await e.byte(),s|=(t&127)<<a,a+=7,o.push(t);while(t&128);i=Jt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:s,reference:i}}async function o$(e){return RR.inflate(e)}function ice(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const s=n&127;t.push(s),r=n&128}while(r);return t.reduce((s,i)=>s+1<<7|i,-1)}function ace(e,t){let n=t,r=4,s=null;do s=e.readUInt8(),n|=(s&127)<<r,r+=7;while(s&128);return n}class Pp{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new vl(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Pn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Pn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const a=r.readUInt32BE(),o=[];for(let d=0;d<a;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*a);const l=new Map;for(let d=0;d<a;d++)l.set(o[d],r.readUInt32BE());const c=r.slice(20).toString("hex");return new Pp({hashes:o,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const s={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},a=t.slice(-20).toString("hex"),o=[],l={},c=new Map;let d=null,h=null;await rce([t],async({data:w,type:x,reference:_,offset:E,num:k})=>{d===null&&(d=k);const T=Math.floor((d-k)*100/d);T!==h&&r&&await r({phase:"Receiving objects",loaded:d-k,total:d}),h=T,x=s[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[w,x]of m.entries()){const _=w+1===m.length?t.byteLength-20:m[w+1],E=i[x],k=ile.buf(t.slice(x,_))>>>0;E.end=_,E.crc=k}const g=new Pp({pack:Promise.resolve(t),packfileSha:a,crcs:l,hashes:o,offsets:c,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let w in i){w=Number(w);const x=Math.floor(v*100/d);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=x;const _=i[w];if(!_.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:k}=await g.readSlice({start:w});b[g.readDepth]+=1;const T=await $c(hm.wrap({type:E,object:k}));_.oid=T,o.push(T),c.set(T,w),l[T]=_.crc}catch{continue}}return o.sort(),g}async toBuffer(){const t=[],n=(c,d)=>{t.push(Jt.from(c,d))};n("ff744f63","hex"),n("00000002","hex");const r=new vl(Jt.alloc(256*4));for(let c=0;c<256;c++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const s=new vl(Jt.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.crcs[c]);t.push(s.buffer);const i=new vl(Jt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const a=Jt.concat(t),o=await $c(a),l=Jt.alloc(20);return l.write(o,"hex"),Jt.concat([a,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Pn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Pn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),s=new vl(r),i=s.readUInt8(),a=i&112;let o=n[a];if(o===void 0)throw new Pn("Unrecognized type: 0b"+a.toString(2));const l=i&15;let c=l;i&128&&(c=ace(s,l));let h=null,m=null;if(o==="ofs_delta"){const v=ice(s),b=t-v;({object:h,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const v=s.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:v}))}const g=r.slice(s.tell());if(m=Jt.from(await o$(g)),m.byteLength!==c)throw new Pn(`Packfile told us object would have length ${c} but it had length ${m.byteLength}`);return h&&(m=Jt.from(ece(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:m}),{type:o,format:"content",object:m}}}const Qv=Symbol("PackfileCache");async function oce({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:s}){const i=await e.read(t);return Pp.fromIdx({idx:i,getExternalRefDelta:n})}function jR({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:s,emitterPrefix:i}){t[Qv]||(t[Qv]=new Map);let a=t[Qv].get(n);return a||(a=oce({fs:e,filename:n,getExternalRefDelta:r,emitter:s,emitterPrefix:i}),t[Qv].set(n,a)),a}async function lce({fs:e,cache:t,gitdir:n,oid:r,format:s="content",getExternalRefDelta:i}){let a=await e.readdir(Mt.join(n,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const l=`${n}/objects/pack/${o}`,c=await jR({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(c.error)throw new Pn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=l.replace(/idx$/,"pack");c.pack=e.read(h)}const d=await c.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function ns({fs:e,cache:t,gitdir:n,oid:r,format:s="content"}){const i=d=>ns({fs:e,cache:t,gitdir:n,oid:d});let a;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(a={format:"wrapped",object:Jt.from("tree 0\0")}),a||(a=await s$({fs:e,gitdir:n,oid:r})),!a){if(a=await lce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!a)throw new $r(r);return a}if(s==="deflated"||(a.format==="deflated"&&(a.object=Jt.from(await o$(a.object)),a.format="wrapped"),s==="wrapped"))return a;const o=await $c(a.object);if(o!==r)throw new Pn(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:c}=hm.unwrap(a.object);if(a.type=c,a.object=l,a.format="content",s==="content")return a;throw new Pn(`invalid requested format "${s}"`)}class Ho extends yr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Ho.code,this.data={noun:t,where:n,canForce:r}}}Ho.code="AlreadyExistsError";class Hy extends yr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Hy.code,this.data={nouns:t,short:n,matches:r}}}Hy.code="AmbiguousError";class Gy extends yr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=Gy.code,this.data={filepaths:t}}}Gy.code="CheckoutConflictError";class Ky extends yr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Ky.code,this.data={ref:t,oid:n}}}Ky.code="CommitNotFetchedError";class Wy extends yr{constructor(){super("Empty response from git server."),this.code=this.name=Wy.code,this.data={}}}Wy.code="EmptyServerResponseError";class Zy extends yr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=Zy.code,this.data={}}}Zy.code="FastForwardError";class Yy extends yr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=Yy.code,this.data={prettyDetails:t,result:n}}}Yy.code="GitPushError";class Fp extends yr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Fp.code,this.data={statusCode:t,statusMessage:n,response:r}}}Fp.code="HttpError";class td extends yr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=td.code,this.data={reason:t}}}td.code="InvalidFilepathError";class Uo extends yr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Uo.code,this.data={ref:t,suggestion:n}}}Uo.code="InvalidRefNameError";class Xy extends yr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=Xy.code,this.data={depth:t}}}Xy.code="MaxDepthError";class pm extends yr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=pm.code,this.data={}}}pm.code="MergeNotSupportedError";class mm extends yr{constructor(t,n,r,s){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=mm.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:s}}}mm.code="MergeConflictError";class Ri extends yr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Ri.code,this.data={role:t}}}Ri.code="MissingNameError";class ca extends yr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=ca.code,this.data={parameter:t}}}ca.code="MissingParameterError";class Jy extends yr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Jy.code,this.data={errors:t},this.errors=t}}Jy.code="MultipleGitError";class Xf extends yr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=Xf.code,this.data={expected:t,actual:n}}}Xf.code="ParseError";class Lp extends yr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Lp.code,this.data={reason:t}}}Lp.code="PushRejectedError";class $u extends yr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=$u.code,this.data={capability:t,parameter:n}}}$u.code="RemoteCapabilityError";class Qy extends yr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Qy.code,this.data={preview:t,response:n}}}Qy.code="SmartHttpError";class eb extends yr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=eb.code,this.data={url:t,transport:n,suggestion:r}}}eb.code="UnknownTransportError";class tb extends yr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=tb.code,this.data={url:t}}}tb.code="UrlParseError";class gm extends yr{constructor(){super("The operation was canceled."),this.code=this.name=gm.code,this.data={}}}gm.code="UserCanceledError";class nb extends yr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=nb.code,this.data={filepath:t}}}nb.code="IndexResetError";class rb extends yr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=rb.code,this.data={ref:t}}}rb.code="NoCommitError";var cce=Object.freeze({__proto__:null,AlreadyExistsError:Ho,AmbiguousError:Hy,CheckoutConflictError:Gy,CommitNotFetchedError:Ky,EmptyServerResponseError:Wy,FastForwardError:Zy,GitPushError:Yy,HttpError:Fp,InternalError:Pn,InvalidFilepathError:td,InvalidOidError:ed,InvalidRefNameError:Uo,MaxDepthError:Xy,MergeNotSupportedError:pm,MergeConflictError:mm,MissingNameError:Ri,MissingParameterError:ca,MultipleGitError:Jy,NoRefspecError:Vy,NotFoundError:$r,ObjectTypeError:Wi,ParseError:Xf,PushRejectedError:Lp,RemoteCapabilityError:$u,SmartHttpError:Qy,UnknownTransportError:eb,UnsafeFilepathError:dm,UrlParseError:tb,UserCanceledError:gm,UnmergedPathsError:qy,IndexResetError:nb,NoCommitError:rb});function gT({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=uce(r),`${e} <${t}> ${n} ${r}`}function uce(e){const t=dce(fce(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),s=String(e);return r.length<2&&(r="0"+r),s.length<2&&(s="0"+s),(t===-1?"-":"+")+r+s}function dce(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function fce(e){return e===0?e:-e}function yc(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Sx(e){const[,t,n,r,s]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:hce(s)}}function hce(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),pce(r)}function pce(e){return e===0?e:-e}class Ui{constructor(t){if(typeof t=="string")this._tag=t;else if(Jt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=Ui.render(t);else throw new Pn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new Ui(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${gT(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const s of t)s[0]===" "?n[n.length-1]+=`
`+s.slice(1):n.push(s);const r={};for(const s of n){const i=s.slice(0,s.indexOf(" ")),a=s.slice(s.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(a):r[i]=a}return r.tagger&&(r.tagger=Sx(r.tagger)),r.committer&&(r.committer=Sx(r.committer)),r}withoutSignature(){const t=yc(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return yc(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Jt.from(this._tag,"utf8")}static async sign(t,n,r){const s=t.payload();let{signature:i}=await n({payload:s,secretKey:r});i=yc(i);const a=s+i;return Ui.from(a)}}function TC(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function mce(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class es{constructor(t){if(typeof t=="string")this._commit=t;else if(Jt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=es.render(t);else throw new Pn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=es.justHeaders(t),s=es.justMessage(t),i=yc(r+`
gpgsig`+TC(n)+`
`+s);return new es(i)}static from(t){return new es(t)}toObject(){return Jt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return es.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return yc(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=es.justHeaders(this._commit).split(`
`),n=[];for(const s of t)s[0]===" "?n[n.length-1]+=`
`+s.slice(1):n.push(s);const r={parent:[]};for(const s of n){const i=s.slice(0,s.indexOf(" ")),a=s.slice(s.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(a):r[i]=a}return r.author&&(r.author=Sx(r.author)),r.committer&&(r.committer=Sx(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Pn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${gT(r)}
`;const s=t.committer||t.author;return n+=`committer ${gT(s)}
`,t.gpgsig&&(n+="gpgsig"+TC(t.gpgsig)),n}static render(t){return es.renderHeaders(t)+`
`+yc(t.message)}render(){return this._commit}withoutSignature(){const t=yc(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return yc(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return mce(t)}static async sign(t,n,r){const s=t.withoutSignature(),i=es.justMessage(t._commit);let{signature:a}=await n({payload:s,secretKey:r});a=yc(a);const l=es.justHeaders(t._commit)+`
gpgsig`+TC(a)+`
`+i;return es.from(l)}}async function $p({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:ua.from([]),oid:r};const{type:s,object:i}=await ns({fs:e,cache:t,gitdir:n,oid:r});if(s==="tag")return r=Ui.from(i).parse().object,$p({fs:e,cache:t,gitdir:n,oid:r});if(s==="commit")return r=es.from(i).parse().tree,$p({fs:e,cache:t,gitdir:n,oid:r});if(s!=="tree")throw new Wi(r,s,"tree");return{tree:ua.from(i),oid:r}}class gce{constructor({fs:t,gitdir:n,ref:r,cache:s}){this.fs=t,this.cache=s,this.gitdir=n,this.mapPromise=(async()=>{const a=new Map;let o;try{o=await $t.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof $r&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await $p({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",a.set(".",l),a})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:s,gitdir:i}=this,a=await this.mapPromise,o=a.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:c,object:d}=await ns({fs:r,cache:s,gitdir:i,oid:l});if(c!==o.type)throw new Wi(l,c,o.type);const h=ua.from(d);for(const m of h)a.set(Mt.join(n,m.path),m);return h.entries().map(m=>Mt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=e$(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:s,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:c}=await ns({fs:r,cache:s,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function to({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,H1,{value:function({fs:n,gitdir:r,cache:s}){return new gce({fs:n,gitdir:r,ref:e,cache:s})}}),Object.freeze(t),t}class yce{constructor({fs:t,dir:n,gitdir:r,cache:s}){this.fs=t,this.cache=s,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:s}=this,i=await r.readdir(Mt.join(s,n));return i===null?null:i.map(a=>Mt.join(n,a))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let s=await n.lstat(`${r}/${t._fullpath}`);if(!s)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=s.isDirectory()?"tree":"blob";i==="blob"&&!s.isFile()&&!s.isSymbolicLink()&&(i="special"),t._type=i,s=Dp(s),t._mode=s.mode,s.size===-1&&t._actualSize&&(s.size=t._actualSize),t._stat=s}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:s}=this;if(await t.type()==="tree")t._content=void 0;else{const a=await(await this._getGitConfig(n,s)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:a});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:s,cache:i}=this;let a;await ti.acquire({fs:r,gitdir:s,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,s)).get("core.filemode"),m=typeof vs<"u"?vs.platform!=="win32":!0;if(!l||vx(c,l,h,m)){const g=await t.content();g===void 0?a=void 0:(a=await $c(hm.wrap({type:"blob",object:g})),l&&a===l.oid&&(!h||c.mode===l.mode)&&vx(c,l,h,m)&&o.insert({filepath:t._fullpath,stats:c,oid:a}))}else a=l.oid}),t._oid=a}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await js.get({fs:t,gitdir:n}),this.config)}}function sb(){const e=Object.create(null);return Object.defineProperty(e,H1,{value:function({fs:t,dir:n,gitdir:r,cache:s}){return new yce({fs:t,dir:n,gitdir:r,cache:s})}}),Object.freeze(e),e}function bce(e,t){const n=t-e;return Array.from({length:n},(r,s)=>e+s)}const l$=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class vce{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*wce(e){const t=new vce;let n;const r=[],s=e.length;for(let i=0;i<s;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let a=0;a<s;a++)r[a]!==void 0&&r[a]===n?(i[a]=r[a],r[a]=e[a].next().value):i[a]=null,r[a]!==void 0&&t.consider(r[a]);if(yield i,t.value===null)return}}async function nd({fs:e,cache:t,dir:n,gitdir:r,trees:s,map:i=async(l,c)=>c,reduce:a=async(l,c)=>{const d=l$(c);return l!==void 0&&d.unshift(l),d},iterate:o=(l,c)=>Promise.all([...c].map(l))}){const l=s.map(g=>g[H1]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(l.length).fill("."),d=bce(0,l.length),h=async g=>{d.map(w=>{const x=g[w];g[w]=x&&new l[w].ConstructEntry(x)});const b=(await Promise.all(d.map(w=>{const x=g[w];return x?l[w].readdir(x):[]}))).map(w=>(w===null?[]:w)[Symbol.iterator]());return{entries:g,children:wce(b)}},m=async g=>{const{entries:v,children:b}=await h(g),w=v.find(_=>_&&_._fullpath)._fullpath,x=await i(w,v);if(x!==null){let _=await o(m,b);return _=_.filter(E=>E!==void 0),a(x,_)}};return m(c)}async function yT(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const s=Mt.join(t,r);return e.lstat(s).then(i=>{if(i)return i.isDirectory()?yT(e,s):e.rm(s)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function xce(e){return _ce(e)&&fD(e.then)&&fD(e.catch)}function _ce(e){return e&&typeof e=="object"}function fD(e){return typeof e=="function"}function hD(e){return xce((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const pD=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function mD(e,t){if(hD(t))for(const n of pD)e[`_${n}`]=t[n].bind(t);else for(const n of pD)e[`_${n}`]=bC(t[n].bind(t));hD(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=yT.bind(null,e):t.rm?e._rm=bC(t.rm.bind(t)):t.rmdir.length>2?e._rm=bC(t.rmdir.bind(t)):e._rm=yT.bind(null,e)}class un{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?mD(this,t.promises):mD(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Jt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Op(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const s=Op(t);if(s==="."||s==="/"||s===t)throw r;await this.mkdir(s),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(V1),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async s=>{const i=t+"/"+s;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((s,i)=>s.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Jt.isBuffer(r)?r:Jt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function tt(e,t){if(t===void 0)throw new ca(e)}async function Ex(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function Sce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),commit:r="HEAD",cache:s={}}){try{tt("fs",e),tt("dir",t),tt("gitdir",n);const i=new un(e),a=[to({ref:r}),sb(),fm()];let o=[];await ti.acquire({fs:i,gitdir:n,cache:s},async function(c){o=c.unmergedPaths});const l=await nd({fs:i,cache:s,dir:t,gitdir:n,trees:a,map:async function(c,[d,h,m]){const g=!await Ex(h,m),v=o.includes(c),b=!await Ex(m,d);if(g||v)return d?{path:c,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new nb(c)}});await ti.acquire({fs:i,gitdir:n,cache:s},async function(c){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),c.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),c.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class ym{static async isIgnored({fs:t,dir:n,gitdir:r=Mt.join(n,".git"),filepath:s}){if(wx(s)===".git")return!0;if(s===".")return!1;let i="";const a=Mt.join(r,"info","exclude");await t.exists(a)&&(i=await t.read(a,"utf8"));const o=[{gitignore:Mt.join(n,".gitignore"),filepath:s}],l=s.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),m=l.slice(d).join("/");o.push({gitignore:Mt.join(n,h,".gitignore"),filepath:m})}let c=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=wle().add(i);m.add(h);const g=Op(d.filepath);if(g!=="."&&m.ignores(g))return!0;c?c=!m.test(d.filepath).unignored:c=m.test(d.filepath).ignored}return c}}async function Ece({fs:e,gitdir:t,object:n,format:r,oid:s}){const i=`objects/${s.slice(0,2)}/${s.slice(2)}`,a=`${t}/${i}`;await e.exists(a)||await e.write(a,n)}let AC=null;async function c$(e){return AC===null&&(AC=kce()),AC?Cce(e):RR.deflate(e)}async function Cce(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function kce(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function ha({fs:e,gitdir:t,type:n,object:r,format:s="content",oid:i=void 0,dryRun:a=!1}){return s!=="deflated"&&(s!=="wrapped"&&(r=hm.wrap({type:n,object:r})),i=await $c(r),r=Jt.from(await c$(r))),a||await Ece({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function u$(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Tce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,cache:s={},force:i=!1,parallel:a=!0}){try{tt("fs",e),tt("dir",t),tt("gitdir",n),tt("filepath",r);const o=new un(e);await ti.acquire({fs:o,gitdir:n,cache:s},async l=>{const d=await(await js.get({fs:o,gitdir:n})).get("core.autocrlf");return bT({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:a,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function bT({dir:e,gitdir:t,fs:n,filepath:r,index:s,force:i,parallel:a,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async m=>{if(!i&&await ym.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(Mt.join(e,m));if(!g)throw new $r(m);if(g.isDirectory()){const v=await n.readdir(Mt.join(e,m));if(a){const b=v.map(w=>bT({dir:e,gitdir:t,fs:n,filepath:[Mt.join(m,w)],index:s,force:i,parallel:a,autocrlf:o}));await Promise.all(b)}else for(const b of v)await bT({dir:e,gitdir:t,fs:n,filepath:[Mt.join(m,b)],index:s,force:i,parallel:a,autocrlf:o})}else{const v=g.isSymbolicLink()?await n.readlink(Mt.join(e,m)).then(u$):await n.read(Mt.join(e,m),{autocrlf:o});if(v===null)throw new $r(m);const b=await ha({fs:n,gitdir:t,type:"blob",object:v});s.insert({filepath:m,stats:g,oid:b})}}),c=await Promise.allSettled(l),d=c.filter(m=>m.status==="rejected").map(m=>m.reason);if(d.length>1)throw new Jy(d);if(d.length===1)throw d[0];return c.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function W0({fs:e,gitdir:t,path:n}){return(await js.get({fs:e,gitdir:t})).get(n)}function d$(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const s=n[r];s!==void 0&&(e[r]=s)}return e}async function rd({fs:e,gitdir:t,author:n,commit:r}){const s=Math.floor(Date.now()/1e3),i={name:await W0({fs:e,gitdir:t,path:"user.name"}),email:await W0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:s,timezoneOffset:new Date(s*1e3).getTimezoneOffset()},a=d$({},i,r?r.author:void 0,n);if(a.name!==void 0)return a}async function Bp({fs:e,gitdir:t,author:n,committer:r,commit:s}){const i=Math.floor(Date.now()/1e3),a={name:await W0({fs:e,gitdir:t,path:"user.name"}),email:await W0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=d$({},a,s?s.committer:void 0,n,r);if(o.name!==void 0)return o}async function f$({fs:e,cache:t,gitdir:n,oid:r}){const{type:s,object:i}=await ns({fs:e,cache:t,gitdir:n,oid:r});if(s==="tag")return r=Ui.from(i).parse().object,f$({fs:e,cache:t,gitdir:n,oid:r});if(s!=="commit")throw new Wi(r,s,"commit");return{commit:es.from(i),oid:r}}async function zp({fs:e,cache:t,gitdir:n,oid:r}){const{commit:s,oid:i}=await f$({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:s.parse(),payload:s.withoutSignature()}}async function G1({fs:e,cache:t,onSign:n,gitdir:r,message:s,author:i,committer:a,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g}){let v=!1;h||(h=await $t.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,w;try{b=await $t.resolve({fs:e,gitdir:r,ref:h}),w=await zp({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new rb(h);const x=l?await rd({fs:e,gitdir:r,author:i,commit:w.commit}):await rd({fs:e,gitdir:r,author:i});if(!x)throw new Ri("author");const _=l?await Bp({fs:e,gitdir:r,author:x,committer:a,commit:w.commit}):await Bp({fs:e,gitdir:r,author:x,committer:a});if(!_)throw new Ri("committer");return ti.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const T=n$(E.entries).get(".");if(g||(g=await h$({fs:e,gitdir:r,inode:T,dryRun:c})),m?m=await Promise.all(m.map(I=>$t.resolve({fs:e,gitdir:r,ref:I}))):l?m=w.commit.parent:m=b?[b]:[],!s)if(l)s=w.commit.message;else throw new ca("message");let R=es.from({tree:g,parent:m,author:x,committer:_,message:s});o&&(R=await es.sign(R,n,o));const M=await ha({fs:e,gitdir:r,type:"commit",object:R.toObject(),dryRun:c});return!d&&!c&&await $t.writeRef({fs:e,gitdir:r,ref:h,value:M}),M})}async function h$({fs:e,gitdir:t,inode:n,dryRun:r}){const s=n.children;for(const l of s)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await h$({fs:e,gitdir:t,inode:l,dryRun:r}));const i=s.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),a=ua.from(i);return await ha({fs:e,gitdir:t,type:"tree",object:a.toObject(),dryRun:r})}async function ib({fs:e,cache:t,gitdir:n,oid:r,filepath:s}){if(s.startsWith("/"))throw new td("leading-slash");if(s.endsWith("/"))throw new td("trailing-slash");const i=r,a=await $p({fs:e,cache:t,gitdir:n,oid:r}),o=a.tree;if(s==="")r=a.oid;else{const l=s.split("/");r=await p$({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:s})}return r}async function p$({fs:e,cache:t,gitdir:n,tree:r,pathArray:s,oid:i,filepath:a}){const o=s.shift();for(const l of r)if(l.path===o){if(s.length===0)return l.oid;{const{type:c,object:d}=await ns({fs:e,cache:t,gitdir:n,oid:l.oid});if(c!=="tree")throw new Wi(i,c,"tree",a);return r=ua.from(d),p$({fs:e,cache:t,gitdir:n,tree:r,pathArray:s,oid:i,filepath:a})}}throw new $r(`file or directory found at "${i}:${a}"`)}async function bm({fs:e,cache:t,gitdir:n,oid:r,filepath:s=void 0}){s!==void 0&&(r=await ib({fs:e,cache:t,gitdir:n,oid:r,filepath:s}));const{tree:i,oid:a}=await $p({fs:e,cache:t,gitdir:n,oid:r});return{oid:a,tree:i.entries()}}async function ab({fs:e,gitdir:t,tree:n}){const r=ua.from(n).toObject();return await ha({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Ace({fs:e,cache:t,onSign:n,gitdir:r,ref:s,oid:i,note:a,force:o,author:l,committer:c,signingKey:d}){let h;try{h=await $t.resolve({gitdir:r,fs:e,ref:s})}catch(x){if(!(x instanceof $r))throw x}let g=(await bm({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new Ho("note",i);typeof a=="string"&&(a=Jt.from(a,"utf8"));const v=await ha({fs:e,gitdir:r,type:"blob",object:a,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await ab({fs:e,gitdir:r,tree:g});return await G1({fs:e,cache:t,onSign:n,gitdir:r,ref:s,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:c,signingKey:d})}async function Rce({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ref:s="refs/notes/commits",oid:i,note:a,force:o,author:l,committer:c,signingKey:d,cache:h={}}){try{tt("fs",e),tt("gitdir",r),tt("oid",i),tt("note",a),d&&tt("onSign",t);const m=new un(e),g=await rd({fs:m,gitdir:r,author:l});if(!g)throw new Ri("author");const v=await Bp({fs:m,gitdir:r,author:g,committer:c});if(!v)throw new Ri("committer");return await Ace({fs:new un(m),cache:h,onSign:t,gitdir:r,ref:s,oid:i,note:a,force:o,author:g,committer:v,signingKey:d})}catch(m){throw m.caller="git.addNote",m}}async function m$({fs:e,gitdir:t,remote:n,url:r,force:s}){if(n!==xl.clean(n))throw new Uo(n,xl.clean(n));const i=await js.get({fs:e,gitdir:t});if(!s&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Ho("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await js.save({fs:e,gitdir:t,config:i})}async function Nce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),remote:r,url:s,force:i=!1}){try{return tt("fs",e),tt("gitdir",n),tt("remote",r),tt("url",s),await m$({fs:new un(e),gitdir:n,remote:r,url:s,force:i})}catch(a){throw a.caller="git.addRemote",a}}async function Ice({fs:e,cache:t,onSign:n,gitdir:r,ref:s,tagger:i,message:a=s,gpgsig:o,object:l,signingKey:c,force:d=!1}){if(s=s.startsWith("refs/tags/")?s:`refs/tags/${s}`,!d&&await $t.exists({fs:e,gitdir:r,ref:s}))throw new Ho("tag",s);const h=await $t.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:m}=await ns({fs:e,cache:t,gitdir:r,oid:h});let g=Ui.from({object:h,type:m,tag:s.replace("refs/tags/",""),tagger:i,message:a,gpgsig:o});c&&(g=await Ui.sign(g,n,c));const v=await ha({fs:e,gitdir:r,type:"tag",object:g.toObject()});await $t.writeRef({fs:e,gitdir:r,ref:s,value:v})}async function jce({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ref:s,tagger:i,message:a=s,gpgsig:o,object:l,signingKey:c,force:d=!1,cache:h={}}){try{tt("fs",e),tt("gitdir",r),tt("ref",s),c&&tt("onSign",t);const m=new un(e),g=await rd({fs:m,gitdir:r,author:i});if(!g)throw new Ri("tagger");return await Ice({fs:m,cache:h,onSign:t,gitdir:r,ref:s,tagger:g,message:a,gpgsig:o,object:l,signingKey:c,force:d})}catch(m){throw m.caller="git.annotatedTag",m}}async function Mce({fs:e,gitdir:t,ref:n,object:r,checkout:s=!1,force:i=!1}){if(n!==xl.clean(n))throw new Uo(n,xl.clean(n));const a=`refs/heads/${n}`;if(!i&&await $t.exists({fs:e,gitdir:t,ref:a}))throw new Ho("branch",n,!1);let o;try{o=await $t.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await $t.writeRef({fs:e,gitdir:t,ref:a,value:o}),s&&await $t.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:a})}async function Dce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,object:s,checkout:i=!1,force:a=!1}){try{return tt("fs",e),tt("gitdir",n),tt("ref",r),await Mce({fs:new un(e),gitdir:n,ref:r,object:s,checkout:i,force:a})}catch(o){throw o.caller="git.branch",o}}const g$=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function MR({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:s,gitdir:i,remote:a,ref:o,filepaths:l,noCheckout:c,noUpdateHead:d,dryRun:h,force:m,track:g=!0}){let v;if(r)try{v=await $t.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await $t.resolve({fs:e,gitdir:i,ref:o})}catch(w){if(o==="HEAD")throw w;const x=`${a}/${o}`;if(b=await $t.resolve({fs:e,gitdir:i,ref:x}),g){const _=await js.get({fs:e,gitdir:i});await _.set(`branch.${o}.remote`,a),await _.set(`branch.${o}.merge`,`refs/heads/${o}`),await js.save({fs:e,gitdir:i,config:_})}await $t.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:b})}if(!c){let w;try{w=await Oce({fs:e,cache:t,onProgress:n,dir:s,gitdir:i,ref:o,force:m,filepaths:l})}catch(T){throw T instanceof $r&&T.data.what===b?new Ky(o,b):T}const x=w.filter(([T])=>T==="conflict").map(([T,R])=>R);if(x.length>0)throw new Gy(x);const _=w.filter(([T])=>T==="error").map(([T,R])=>R);if(_.length>0)throw new Pn(_.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const k=w.length;await ti.acquire({fs:e,gitdir:i,cache:t},async function(T){await Promise.all(w.filter(([R])=>R==="delete"||R==="delete-index").map(async function([R,M]){const I=`${s}/${M}`;R==="delete"&&await e.rm(I),T.delete({filepath:M}),n&&await n({phase:"Updating workdir",loaded:++E,total:k})}))}),await ti.acquire({fs:e,gitdir:i,cache:t},async function(T){for(const[R,M]of w)if(R==="rmdir"||R==="rmdir-index"){const I=`${s}/${M}`;try{R==="rmdir-index"&&T.delete({filepath:M}),await e.rmdir(I),n&&await n({phase:"Updating workdir",loaded:++E,total:k})}catch(O){if(O.code==="ENOTEMPTY")console.log(`Did not delete ${M} because directory is not empty`);else throw O}}}),await Promise.all(w.filter(([T])=>T==="mkdir"||T==="mkdir-index").map(async function([T,R]){const M=`${s}/${R}`;await e.mkdir(M),n&&await n({phase:"Updating workdir",loaded:++E,total:k})})),await ti.acquire({fs:e,gitdir:i,cache:t},async function(T){await Promise.all(w.filter(([R])=>R==="create"||R==="create-index"||R==="update"||R==="mkdir-index").map(async function([R,M,I,O,P]){const U=`${s}/${M}`;try{if(R!=="create-index"&&R!=="mkdir-index"){const{object:V}=await ns({fs:e,cache:t,gitdir:i,oid:I});if(P&&await e.rm(U),O===33188)await e.write(U,V);else if(O===33261)await e.write(U,V,{mode:511});else if(O===40960)await e.writelink(U,V);else throw new Pn(`Invalid mode 0o${O.toString(8)} detected in blob ${I}`)}const j=await e.lstat(U);O===33261&&(j.mode=493),R==="mkdir-index"&&(j.mode=57344),T.insert({filepath:M,stats:j,oid:I}),n&&await n({phase:"Updating workdir",loaded:++E,total:k})}catch(j){console.log(j)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const w=await $t.expand({fs:e,gitdir:i,ref:o});w.startsWith("refs/heads")?await $t.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:w}):await $t.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function Oce({fs:e,cache:t,onProgress:n,dir:r,gitdir:s,ref:i,force:a,filepaths:o}){let l=0;return nd({fs:e,cache:t,dir:r,gitdir:s,trees:[to({ref:i}),sb(),fm()],map:async function(c,[d,h,m]){if(c===".")return;if(o&&!o.some(v=>g$(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!m,!!d,!!h].map(Number).join("")){case"000":return;case"001":return a&&o&&o.includes(c)?["delete",c]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await d.oid(),await d.mode()];case"commit":return["mkdir-index",c,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await d.oid()!==await h.oid()?a?["update",c,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",c]:await d.mode()!==await h.mode()?a?["update",c,await d.oid(),await d.mode(),!0]:["conflict",c]:["create-index",c,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",c];case"101":switch(await m.type()){case"tree":return["rmdir",c];case"blob":return await m.oid()!==await h.oid()?a?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await d.oid()&&await m.mode()===await d.mode()&&!a)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await d.oid())return a?["update",c,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",c]}else if(a)return["update",c,await d.oid(),await d.mode(),await d.mode()!==await m.mode()];return await d.mode()!==await m.mode()?["update",c,await d.oid(),await d.mode(),!0]:await d.oid()!==await m.oid()?["update",c,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await d.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await d.type()}`]}}},reduce:async function(c,d){return d=l$(d),c?c&&c[0]==="rmdir"?(d.push(c),d):(d.unshift(c),d):d}})}async function y$({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:s=Mt.join(r,".git"),remote:i="origin",ref:a,filepaths:o,noCheckout:l=!1,noUpdateHead:c=a===void 0,dryRun:d=!1,force:h=!1,track:m=!0,cache:g={}}){try{tt("fs",e),tt("dir",r),tt("gitdir",s);const v=a||"HEAD";return await MR({fs:new un(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:s,remote:i,ref:v,filepaths:o,noCheckout:l,noUpdateHead:c,dryRun:d,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const Pce=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function hf(e){const t=Pce.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function wd({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const s=await $t.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await $t.resolve({fs:e,gitdir:t,ref:s})}catch{return}if(s.startsWith("refs/"))return n?s:hf(s)}function Fce(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function b$({username:e="",password:t=""}){return`Basic ${Jt.from(`${e}:${t}`).toString("base64")}`}async function ob(e,t){const n=i$(e);for(;;){const{value:r,done:s}=await n.next();if(r&&await t(r),s)break}n.return&&n.return()}async function Cx(e){let t=0;const n=[];await ob(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}function gD(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function vT(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class bs{static flush(){return Jt.from("0000","utf8")}static delim(){return Jt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Jt.from(t));const n=t.length+4,r=vT(4,n);return Jt.concat([Jt.from(r,"utf8"),t])}static streamReader(t){const n=new a$(t);return async function(){try{let s=await n.read(4);if(s==null)return!0;if(s=parseInt(s.toString("utf8"),16),s===0||s===1)return null;const i=await n.read(s-4);return i??!0}catch(s){return t.error=s,!0}}}}async function yD(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const s=n.slice(0,r),i=n.slice(r+1);t[s]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function bD(e,{service:t}){const n=new Set,r=new Map,s=new Map,i=bs.streamReader(e);let a=await i();for(;a===null;)a=await i();if(a===!0)throw new Wy;if(a.includes("version 2"))return yD(i);if(a.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Xf(`# service=${t}\\n`,a.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:s};if(o=o.toString("utf8"),o.includes("version 2"))return yD(i);const[l,c]=RC(o,"\0","\\x00");if(c.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=RC(l," "," ");for(r.set(h,d);;){const m=await i();if(m===!0)break;if(m!==null){const[g,v]=RC(m.toString("utf8")," "," ");r.set(v,g)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&s.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:s}}function RC(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new Xf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const vD=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,wD=(e,t)=>{(t.username||t.password)&&(e.Authorization=b$(t)),t.headers&&Object.assign(e,t.headers)},NC=async e=>{try{const t=Jt.from(await Cx(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class kx{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:s,onAuthFailure:i,corsProxy:a,service:o,url:l,headers:c,protocolVersion:d}){let{url:h,auth:m}=gD(l);const g=a?vD(a,h):h;(m.username||m.password)&&(c.Authorization=b$(m)),d===2&&(c["Git-Protocol"]="version=2");let v,b,w=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${o}`,headers:c}),b=!1,v.statusCode===401||v.statusCode===203){const x=w?i:r;if(x){if(m=await x(h,{...m,headers:{...c}}),m&&m.cancel)throw new gm;m&&(wD(c,m),w=!0,b=!0)}}else v.statusCode===200&&w&&s&&await s(h,m);while(b);if(v.statusCode!==200){const{response:x}=await NC(v);throw new Fp(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${o}-advertisement`){const x=await bD(v.body,{service:o});return x.auth=m,x}else{const{preview:x,response:_,data:E}=await NC(v);try{const k=await bD([E],{service:o});return k.auth=m,k}catch{throw new Qy(x,_)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:s,url:i,auth:a,body:o,headers:l}){const c=gD(i);c&&(i=c.url),r&&(i=vD(r,i)),l["content-type"]=`application/x-${s}-request`,l.accept=`application/x-${s}-result`,wD(l,a);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${s}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=NC(d);throw new Fp(d.statusCode,d.statusMessage,h)}return d}}function Lce({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class K1{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",kx),n.set("https",kx);const r=Lce({url:t});if(!r)throw new tb(t);if(n.has(r.transport))return n.get(r.transport);throw new eb(t,r.transport,r.transport==="ssh"?Fce(t):void 0)}}let nf=null;class Z0{static async read({fs:t,gitdir:n}){nf===null&&(nf=new K0);const r=Mt.join(n,"shallow"),s=new Set;return await nf.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return s;i.trim().split(`
`).map(a=>s.add(a))}),s}static async write({fs:t,gitdir:n,oids:r}){nf===null&&(nf=new K0);const s=Mt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await nf.acquire(s,async function(){await t.write(s,i,{encoding:"utf8"})})}else await nf.acquire(s,async function(){await t.rm(s)})}}async function $ce({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Bce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:s}){let i=await e.readdir(Mt.join(n,"objects/pack"));i=i.filter(a=>a.endsWith(".idx"));for(const a of i){const o=`${n}/objects/pack/${a}`,l=await jR({fs:e,cache:t,filename:o,getExternalRefDelta:s});if(l.error)throw new Pn(l.error);if(l.offsets.has(r))return!0}return!1}async function xD({fs:e,cache:t,gitdir:n,oid:r,format:s="content"}){const i=o=>ns({fs:e,cache:t,gitdir:n,oid:o});let a=await $ce({fs:e,gitdir:n,oid:r});return a||(a=await Bce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),a}function zce(e){const s="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===s}function v$(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const s=r.split("=",1)[0];return n.includes(s)})}const W1={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Ew{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Uce(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function w$(e){const t=new Ew;let n="";return(async()=>(await ob(e,r=>{for(r=r.toString("utf8"),n+=r;;){const s=Uce(n);if(s===-1)break;t.write(n.slice(0,s)),n=n.slice(s)}}),n.length>0&&t.write(n),t.end()))(),t}class x${static demux(t){const n=bs.streamReader(t),r=new Ew,s=new Ew,i=new Ew,a=async function(){const o=await n();if(o===null)return a();if(o===!0){r.end(),i.end(),t.error?s.destroy(t.error):s.end();return}switch(o[0]){case 1:{s.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),s.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}a()};return a(),{packetlines:r,packfile:s,progress:i}}}async function qce(e){const{packetlines:t,packfile:n,progress:r}=x$.demux(e),s=[],i=[],a=[];let o=!1,l=!1;return new Promise((c,d)=>{ob(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&d(new ed(g)),s.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&d(new ed(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,v]=m.split(" ");a.push({oid:g,status:v}),v||(l=!0)}else m.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):c({shallows:s,unshallows:i,acks:a,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):c({shallows:s,unshallows:i,acks:a,nak:o,packfile:n,progress:r}))})})}function Vce({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:s=null,since:i=null,exclude:a=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const c of t)o.push(bs.encode(`want ${c}${l}
`)),l="";for(const c of r)o.push(bs.encode(`shallow ${c}
`));s!==null&&o.push(bs.encode(`deepen ${s}
`)),i!==null&&o.push(bs.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of a)o.push(bs.encode(`deepen-not ${c}
`));o.push(bs.flush());for(const c of n)o.push(bs.encode(`have ${c}
`));return o.push(bs.encode(`done
`)),o}async function DR({fs:e,cache:t,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:a,onAuthFailure:o,gitdir:l,ref:c,remoteRef:d,remote:h,url:m,corsProxy:g,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:_=!1,singleBranch:E=!1,headers:k={},prune:T=!1,pruneTags:R=!1}){const M=c||await wd({fs:e,gitdir:l,test:!0}),I=await js.get({fs:e,gitdir:l}),O=h||M&&await I.get(`branch.${M}.remote`)||"origin",P=m||await I.get(`remote.${O}.url`);if(typeof P>"u")throw new ca("remote OR url");const U=d||M&&await I.get(`branch.${M}.merge`)||c||"HEAD";g===void 0&&(g=await I.get("http.corsProxy"));const j=K1.getRemoteHelperFor({url:P}),V=await j.discover({http:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,corsProxy:g,service:"git-upload-pack",url:P,headers:k,protocolVersion:1}),$=V.auth,re=V.refs;if(re.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!V.capabilities.has("shallow"))throw new $u("shallow","depth");if(b!==null&&!V.capabilities.has("deepen-since"))throw new $u("deepen-since","since");if(w.length>0&&!V.capabilities.has("deepen-not"))throw new $u("deepen-not","exclude");if(x===!0&&!V.capabilities.has("deepen-relative"))throw new $u("deepen-relative","relative");const{oid:J,fullref:te}=$t.resolveAgainstMap({ref:U,map:re});for(const He of re.keys())He===te||He==="HEAD"||He.startsWith("refs/heads/")||_&&He.startsWith("refs/tags/")||re.delete(He);const X=v$([...V.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${W1.agent}`]);x&&X.push("deepen-relative");const ie=E?[J]:re.values(),Z=E?[M]:await $t.listRefs({fs:e,gitdir:l,filepath:"refs"});let ee=[];for(let He of Z)try{He=await $t.expand({fs:e,gitdir:l,ref:He});const Ne=await $t.resolve({fs:e,gitdir:l,ref:He});await xD({fs:e,cache:t,gitdir:l,oid:Ne})&&ee.push(Ne)}catch{}ee=[...new Set(ee)];const Q=await Z0.read({fs:e,gitdir:l}),he=V.capabilities.has("shallow")?[...Q]:[],Se=Vce({capabilities:X,wants:ie,haves:ee,shallows:he,depth:v,since:b,exclude:w}),ce=Jt.from(await Cx(Se)),je=await j.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:P,auth:$,body:[ce],headers:k}),De=await qce(je.body);je.headers&&(De.headers=je.headers);for(const He of De.shallows)if(!Q.has(He))try{const{object:Ne}=await ns({fs:e,cache:t,gitdir:l,oid:He}),H=new es(Ne),ue=await Promise.all(H.headers().parent.map(ae=>xD({fs:e,cache:t,gitdir:l,oid:ae})));ue.length===0||ue.every(ae=>ae)||Q.add(He)}catch{Q.add(He)}for(const He of De.unshallows)Q.delete(He);if(await Z0.write({fs:e,gitdir:l,oids:Q}),E){const He=new Map([[te,J]]),Ne=new Map;let H=10,ue=te;for(;H--;){const oe=V.symrefs.get(ue);if(oe===void 0)break;Ne.set(ue,oe),ue=oe}const ke=re.get(ue);ke&&He.set(ue,ke);const{pruned:ae}=await $t.updateRemoteRefs({fs:e,gitdir:l,remote:O,refs:He,symrefs:Ne,tags:_,prune:T});T&&(De.pruned=ae)}else{const{pruned:He}=await $t.updateRemoteRefs({fs:e,gitdir:l,remote:O,refs:re,symrefs:V.symrefs,tags:_,prune:T,pruneTags:R});T&&(De.pruned=He)}if(De.HEAD=V.symrefs.get("HEAD"),De.HEAD===void 0){const{oid:He}=$t.resolveAgainstMap({ref:"HEAD",map:re});for(const[Ne,H]of re.entries())if(Ne!=="HEAD"&&H===He){De.HEAD=Ne;break}}const Re=te.startsWith("refs/tags")?"tag":"branch";if(De.FETCH_HEAD={oid:J,description:`${Re} '${hf(te)}' of ${P}`},r||s){const He=w$(De.progress);ob(He,async Ne=>{if(s&&await s(Ne),r){const H=Ne.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);H&&await r({phase:H[1].trim(),loaded:parseInt(H[2],10),total:parseInt(H[3],10)})}})}const xe=Jt.from(await Cx(De.packfile));if(je.body.error)throw je.body.error;const Fe=xe.slice(-20).toString("hex"),st={defaultBranch:De.HEAD,fetchHead:De.FETCH_HEAD.oid,fetchHeadDescription:De.FETCH_HEAD.description};if(De.headers&&(st.headers=De.headers),T&&(st.pruned=De.pruned),Fe!==""&&!zce(xe)){st.packfile=`objects/pack/pack-${Fe}.pack`;const He=Mt.join(l,st.packfile);await e.write(He,xe);const Ne=ue=>ns({fs:e,cache:t,gitdir:l,oid:ue}),H=await Pp.fromPack({pack:xe,getExternalRefDelta:Ne,onProgress:r});await e.write(He.replace(/\.pack$/,".idx"),await H.toBuffer())}return st}async function _$({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Mt.join(n,".git"),defaultBranch:s="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(a=>r+"/"+a);for(const a of i)await e.mkdir(a);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${s}
`)}async function Hce({fs:e,cache:t,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:a,onAuthFailure:o,onPostCheckout:l,dir:c,gitdir:d,url:h,corsProxy:m,ref:g,remote:v,depth:b,since:w,exclude:x,relative:_,singleBranch:E,noCheckout:k,noTags:T,headers:R}){try{if(await _$({fs:e,gitdir:d}),await m$({fs:e,gitdir:d,remote:v,url:h,force:!1}),m){const O=await js.get({fs:e,gitdir:d});await O.set("http.corsProxy",m),await js.save({fs:e,gitdir:d,config:O})}const{defaultBranch:M,fetchHead:I}=await DR({fs:e,cache:t,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:a,onAuthFailure:o,gitdir:d,ref:g,remote:v,corsProxy:m,depth:b,since:w,exclude:x,relative:_,singleBranch:E,headers:R,tags:!T});if(I===null)return;g=g||M,g=g.replace("refs/heads/",""),await MR({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:c,gitdir:d,ref:g,remote:v,noCheckout:k})}catch(M){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),M}}async function Gce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,onPostCheckout:o,dir:l,gitdir:c=Mt.join(l,".git"),url:d,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:w=[],relative:x=!1,singleBranch:_=!1,noCheckout:E=!1,noTags:k=!1,headers:T={},cache:R={}}){try{return tt("fs",e),tt("http",t),tt("gitdir",c),E||tt("dir",l),tt("url",d),await Hce({fs:new un(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,onPostCheckout:o,dir:l,gitdir:c,url:d,corsProxy:h,ref:m,remote:g,depth:v,since:b,exclude:w,relative:x,singleBranch:_,noCheckout:E,noTags:k,headers:T})}catch(M){throw M.caller="git.clone",M}}async function Kce({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),message:s,author:i,committer:a,signingKey:o,amend:l=!1,dryRun:c=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g,cache:v={}}){try{tt("fs",e),l||tt("message",s),o&&tt("onSign",t);const b=new un(e);return await G1({fs:b,cache:v,onSign:t,gitdir:r,message:s,author:i,committer:a,signingKey:o,amend:l,dryRun:c,noUpdateBranch:d,ref:h,parent:m,tree:g})}catch(b){throw b.caller="git.commit",b}}async function Wce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),fullname:r=!1,test:s=!1}){try{return tt("fs",e),tt("gitdir",n),await wd({fs:new un(e),gitdir:n,fullname:r,test:s})}catch(i){throw i.caller="git.currentBranch",i}}async function Zce({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await $t.exists({fs:e,gitdir:t,ref:n}))throw new $r(n);const s=await $t.expand({fs:e,gitdir:t,ref:n}),i=await wd({fs:e,gitdir:t,fullname:!0});if(s===i){const l=await $t.resolve({fs:e,gitdir:t,ref:s});await $t.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await $t.deleteRef({fs:e,gitdir:t,ref:s});const a=hf(n),o=await js.get({fs:e,gitdir:t});await o.deleteSection("branch",a),await js.save({fs:e,gitdir:t,config:o})}async function Yce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{return tt("fs",e),tt("ref",r),await Zce({fs:new un(e),gitdir:n,ref:r})}catch(s){throw s.caller="git.deleteBranch",s}}async function Xce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{tt("fs",e),tt("ref",r),await $t.deleteRef({fs:new un(e),gitdir:n,ref:r})}catch(s){throw s.caller="git.deleteRef",s}}async function Jce({fs:e,gitdir:t,remote:n}){const r=await js.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await js.save({fs:e,gitdir:t,config:r})}async function Qce({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),remote:r}){try{return tt("fs",e),tt("remote",r),await Jce({fs:new un(e),gitdir:n,remote:r})}catch(s){throw s.caller="git.deleteRemote",s}}async function eue({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await $t.deleteRef({fs:e,gitdir:t,ref:n})}async function tue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{return tt("fs",e),tt("ref",r),await eue({fs:new un(e),gitdir:n,ref:r})}catch(s){throw s.caller="git.deleteTag",s}}async function nue({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function rue({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:s}){const i=[];let a=await e.readdir(Mt.join(n,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(const o of a){const l=`${n}/objects/pack/${o}`,c=await jR({fs:e,cache:t,filename:l,getExternalRefDelta:s});if(c.error)throw new Pn(c.error);for(const d of c.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function sue({fs:e,cache:t,gitdir:n,oid:r}){const s=o=>ns({fs:e,cache:t,gitdir:n,oid:o}),i=await nue({fs:e,gitdir:n,oid:r}),a=await rue({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:s});for(const o of a)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new Hy("oids",r,i):new $r(`an object matching "${r}"`)}async function iue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,cache:s={}}){try{return tt("fs",e),tt("gitdir",n),tt("oid",r),await sue({fs:new un(e),cache:s,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function aue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r}){try{return tt("fs",e),tt("gitdir",n),tt("ref",r),await $t.expand({fs:new un(e),gitdir:n,ref:r})}catch(s){throw s.caller="git.expandRef",s}}async function OR({fs:e,cache:t,gitdir:n,oids:r}){const s={},i=r.length;let a=r.map((o,l)=>({index:l,oid:o}));for(;a.length;){const o=new Set;for(const{oid:c,index:d}of a)s[c]||(s[c]=new Set),s[c].add(d),s[c].size===i&&o.add(c);if(o.size>0)return[...o];const l=new Map;for(const{oid:c,index:d}of a)try{const{object:h}=await ns({fs:e,cache:t,gitdir:n,oid:c}),m=es.from(h),{parent:g}=m.parseHeaders();for(const v of g)(!s[v]||!s[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}a=Array.from(l.values())}return[]}const IC=/^.*(\r?\n|$)/gm;function oue({branches:e,contents:t}){const n=e[1],r=e[2],s=t[0],i=t[1],a=t[2],o=i.match(IC),l=s.match(IC),c=a.match(IC),d=kle(o,l,c),h=7;let m="",g=!0;for(const v of d)v.ok&&(m+=v.ok.join("")),v.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function lue({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),index:s,ourOid:i,baseOid:a,theirOid:o,ourName:l="ours",baseName:c="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const v=to({ref:i}),b=to({ref:a}),w=to({ref:o}),x=[],_=[],E=[],k=[],T=await nd({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,w],map:async function(R,[M,I,O]){const P=wx(R),U=await Ex(M,I),j=await Ex(O,I);switch(`${U}-${j}`){case"false-false":return{mode:await I.mode(),path:P,oid:await I.oid(),type:await I.type()};case"false-true":return O?{mode:await O.mode(),path:P,oid:await O.oid(),type:await O.type()}:void 0;case"true-false":return M?{mode:await M.mode(),path:P,oid:await M.oid(),type:await M.type()}:void 0;case"true-true":{if(M&&I&&O&&await M.type()==="blob"&&await I.type()==="blob"&&await O.type()==="blob")return cue({fs:e,gitdir:r,path:P,ours:M,base:I,theirs:O,ourName:l,baseName:c,theirName:d,mergeDriver:g}).then(async V=>{if(V.cleanMerge)m||s.insert({filepath:R,oid:V.mergeResult.oid,stage:0});else if(x.push(R),_.push(R),!m){const $=await I.oid(),re=await M.oid(),J=await O.oid();s.delete({filepath:R}),s.insert({filepath:R,oid:$,stage:1}),s.insert({filepath:R,oid:re,stage:2}),s.insert({filepath:R,oid:J,stage:3})}return V.mergeResult});if(I&&!M&&O&&await I.type()==="blob"&&await O.type()==="blob"){if(x.push(R),E.push(R),!m){const V=await I.oid(),$=await O.oid();s.delete({filepath:R}),s.insert({filepath:R,oid:V,stage:1}),s.insert({filepath:R,oid:$,stage:3})}return{mode:await O.mode(),oid:await O.oid(),type:"blob",path:P}}if(I&&M&&!O&&await I.type()==="blob"&&await M.type()==="blob"){if(x.push(R),k.push(R),!m){const V=await I.oid(),$=await M.oid();s.delete({filepath:R}),s.insert({filepath:R,oid:V,stage:1}),s.insert({filepath:R,oid:$,stage:2})}return{mode:await M.mode(),oid:await M.oid(),type:"blob",path:P}}if(I&&!M&&!O&&await I.type()==="blob")return;throw new pm}}},reduce:x.length!==0&&(!n||m)?void 0:async(R,M)=>{const I=M.filter(Boolean);if(R&&!(R&&R.type==="tree"&&I.length===0)){if(I.length>0){const P=new ua(I).toObject(),U=await ha({fs:e,gitdir:r,type:"tree",object:P,dryRun:h});R.oid=U}return R}}});return x.length!==0?(n&&!m&&await nd({fs:e,cache:t,dir:n,gitdir:r,trees:[to({ref:T.oid})],map:async function(R,[M]){const I=`${n}/${R}`;if(await M.type()==="blob"){const O=await M.mode(),P=new TextDecoder().decode(await M.content());await e.write(I,P,{mode:O})}return!0}}),new mm(x,_,E,k)):T.oid}async function cue({fs:e,gitdir:t,path:n,ours:r,base:s,theirs:i,ourName:a,theirName:o,baseName:l,dryRun:c,mergeDriver:d=oue}){const h="blob",m=await s.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await s.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Jt.from(await r.content()).toString("utf8"),v=Jt.from(await s.content()).toString("utf8"),b=Jt.from(await i.content()).toString("utf8"),{mergedText:w,cleanMerge:x}=await d({branches:[l,a,o],contents:[v,g,b],path:n}),_=await ha({fs:e,gitdir:t,type:"blob",object:Jt.from(w,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:_,type:h}}}async function S$({fs:e,cache:t,dir:n,gitdir:r,ours:s,theirs:i,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:v,onSign:b,mergeDriver:w}){s===void 0&&(s=await wd({fs:e,gitdir:r,fullname:!0})),s=await $t.expand({fs:e,gitdir:r,ref:s}),i=await $t.expand({fs:e,gitdir:r,ref:i});const x=await $t.resolve({fs:e,gitdir:r,ref:s}),_=await $t.resolve({fs:e,gitdir:r,ref:i}),E=await OR({fs:e,cache:t,gitdir:r,oids:[x,_]});if(E.length!==1)throw new pm;const k=E[0];if(k===_)return{oid:x,alreadyMerged:!0};if(a&&k===x)return!l&&!c&&await $t.writeRef({fs:e,gitdir:r,ref:s,value:_}),{oid:_,fastForward:!0};{if(o)throw new Zy;const T=await ti.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async M=>lue({fs:e,cache:t,dir:n,gitdir:r,index:M,ourOid:x,theirOid:_,baseOid:k,ourName:hf(s),baseName:"base",theirName:hf(i),dryRun:l,abortOnConflict:d,mergeDriver:w}));if(T instanceof mm)throw T;return h||(h=`Merge branch '${hf(i)}' into ${hf(s)}`),{oid:await G1({fs:e,cache:t,gitdir:r,message:h,ref:s,tree:T,parent:[x,_],author:m,committer:g,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:c}),tree:T,mergeCommit:!0}}}async function E$({fs:e,cache:t,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:a,onAuthFailure:o,dir:l,gitdir:c,ref:d,url:h,remote:m,remoteRef:g,prune:v,pruneTags:b,fastForward:w,fastForwardOnly:x,corsProxy:_,singleBranch:E,headers:k,author:T,committer:R,signingKey:M}){try{if(!d){const P=await wd({fs:e,gitdir:c});if(!P)throw new ca("ref");d=P}const{fetchHead:I,fetchHeadDescription:O}=await DR({fs:e,cache:t,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:a,onAuthFailure:o,gitdir:c,corsProxy:_,ref:d,url:h,remote:m,remoteRef:g,singleBranch:E,headers:k,prune:v,pruneTags:b});await S$({fs:e,cache:t,gitdir:c,ours:d,theirs:I,fastForward:w,fastForwardOnly:x,message:`Merge ${O}`,author:T,committer:R,signingKey:M,dryRun:!1,noUpdateBranch:!1}),await MR({fs:e,cache:t,onProgress:r,dir:l,gitdir:c,ref:d,remote:m,noCheckout:!1})}catch(I){throw I.caller="git.pull",I}}async function uue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,dir:o,gitdir:l=Mt.join(o,".git"),ref:c,url:d,remote:h,remoteRef:m,corsProxy:g,singleBranch:v,headers:b={},cache:w={}}){try{tt("fs",e),tt("http",t),tt("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await E$({fs:new un(e),cache:w,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,dir:o,gitdir:l,ref:c,url:d,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function due({fs:e,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,dir:o,gitdir:l=Mt.join(o,".git"),ref:c,remote:d,remoteRef:h,url:m,corsProxy:g,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:_=!1,singleBranch:E=!1,headers:k={},prune:T=!1,pruneTags:R=!1,cache:M={}}){try{return tt("fs",e),tt("http",t),tt("gitdir",l),await DR({fs:new un(e),cache:M,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,gitdir:l,ref:c,remote:d,remoteRef:h,url:m,corsProxy:g,depth:v,since:b,exclude:w,relative:x,tags:_,singleBranch:E,headers:k,prune:T,pruneTags:R})}catch(I){throw I.caller="git.fetch",I}}async function fue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oids:r,cache:s={}}){try{return tt("fs",e),tt("gitdir",n),tt("oids",r),await OR({fs:new un(e),cache:s,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function C$({fs:e,filepath:t}){if(await e.exists(Mt.join(t,".git")))return t;{const n=Op(t);if(n===t)throw new $r(`git root for ${t}`);return C$({fs:e,filepath:n})}}async function hue({fs:e,filepath:t}){try{return tt("fs",e),tt("filepath",t),await C$({fs:new un(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function pue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),path:r}){try{return tt("fs",e),tt("gitdir",n),tt("path",r),await W0({fs:new un(e),gitdir:n,path:r})}catch(s){throw s.caller="git.getConfig",s}}async function mue({fs:e,gitdir:t,path:n}){return(await js.get({fs:e,gitdir:t})).getall(n)}async function gue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),path:r}){try{return tt("fs",e),tt("gitdir",n),tt("path",r),await mue({fs:new un(e),gitdir:n,path:r})}catch(s){throw s.caller="git.getConfigAll",s}}async function yue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,url:i,headers:a={},forPush:o=!1}){try{tt("http",e),tt("url",i);const c=await K1.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:a,protocolVersion:1}),d={capabilities:[...c.capabilities]};for(const[h,m]of c.refs){const g=h.split("/"),v=g.pop();let b=d;for(const w of g)b[w]=b[w]||{},b=b[w];b[v]=m}for(const[h,m]of c.symrefs){const g=h.split("/"),v=g.pop();let b=d;for(const w of g)b[w]=b[w]||{},b=b[w];b[v]=m}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function k$(e,t,n,r){const s=[];for(const[i,a]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),c=s[s.length-1],d=c.ref===l?c:s.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=a}continue}const o={ref:i,oid:a};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),s.push(o)}return s}async function bue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,url:i,headers:a={},forPush:o=!1,protocolVersion:l=2}){try{tt("http",e),tt("url",i);const d=await K1.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:a,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const m of d.capabilities){const[g,v]=m.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:k$(d,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function vue({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=hm.wrap({type:e,object:t})),r=await $c(t)),{oid:r,object:t}}async function wue({object:e}){try{tt("object",e),typeof e=="string"?e=Jt.from(e,"utf8"):e=Jt.from(e);const t="blob",{oid:n,object:r}=await vue({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function xue({fs:e,cache:t,onProgress:n,dir:r,gitdir:s,filepath:i}){try{i=Mt.join(r,i);const a=await e.read(i),o=c=>ns({fs:e,cache:t,gitdir:s,oid:c}),l=await Pp.fromPack({pack:a,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(a){throw a.caller="git.indexPack",a}}async function _ue({fs:e,onProgress:t,dir:n,gitdir:r=Mt.join(n,".git"),filepath:s,cache:i={}}){try{return tt("fs",e),tt("dir",n),tt("gitdir",n),tt("filepath",s),await xue({fs:new un(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:s})}catch(a){throw a.caller="git.indexPack",a}}async function Sue({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Mt.join(n,".git"),defaultBranch:s="master"}){try{return tt("fs",e),tt("gitdir",r),t||tt("dir",n),await _$({fs:new un(e),bare:t,dir:n,gitdir:r,defaultBranch:s})}catch(i){throw i.caller="git.init",i}}async function T$({fs:e,cache:t,gitdir:n,oid:r,ancestor:s,depth:i}){const a=await Z0.read({fs:e,gitdir:n});if(!r)throw new ca("oid");if(!s)throw new ca("ancestor");if(r===s)return!1;const o=[r],l=new Set;let c=0;for(;o.length;){if(c++===i)throw new Xy(i);const d=o.shift(),{type:h,object:m}=await ns({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Wi(d,h,"commit");const g=es.from(m).parse();for(const v of g.parent)if(v===s)return!0;if(!a.has(d))for(const v of g.parent)l.has(v)||(o.push(v),l.add(v))}return!1}async function Eue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,ancestor:s,depth:i=-1,cache:a={}}){try{return tt("fs",e),tt("gitdir",n),tt("oid",r),tt("ancestor",s),await T$({fs:new un(e),cache:a,gitdir:n,oid:r,ancestor:s,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function Cue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r}){try{return tt("fs",e),tt("dir",t),tt("gitdir",n),tt("filepath",r),ym.isIgnored({fs:new un(e),dir:t,gitdir:n,filepath:r})}catch(s){throw s.caller="git.isIgnored",s}}async function kue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),remote:r}){try{return tt("fs",e),tt("gitdir",n),$t.listBranches({fs:new un(e),gitdir:n,remote:r})}catch(s){throw s.caller="git.listBranches",s}}async function Tue({fs:e,gitdir:t,ref:n,cache:r}){if(n){const s=await $t.resolve({gitdir:t,fs:e,ref:n}),i=[];return await A$({fs:e,cache:r,gitdir:t,oid:s,filenames:i,prefix:""}),i}else return ti.acquire({fs:e,gitdir:t,cache:r},async function(s){return s.entries.map(i=>i.path)})}async function A$({fs:e,cache:t,gitdir:n,oid:r,filenames:s,prefix:i}){const{tree:a}=await bm({fs:e,cache:t,gitdir:n,oid:r});for(const o of a)o.type==="tree"?await A$({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:s,prefix:Mt.join(i,o.path)}):s.push(Mt.join(i,o.path))}async function Aue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,cache:s={}}){try{return tt("fs",e),tt("gitdir",n),await Tue({fs:new un(e),cache:s,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Rue({fs:e,cache:t,gitdir:n,ref:r}){let s;try{s=await $t.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof $r)return[]}return(await bm({fs:e,cache:t,gitdir:n,oid:s})).tree.map(o=>({target:o.path,note:o.oid}))}async function Nue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r="refs/notes/commits",cache:s={}}){try{return tt("fs",e),tt("gitdir",n),tt("ref",r),await Rue({fs:new un(e),cache:s,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Iue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r}){try{return tt("fs",e),tt("gitdir",n),$t.listRefs({fs:new un(e),gitdir:n,filepath:r})}catch(s){throw s.caller="git.listRefs",s}}async function jue({fs:e,gitdir:t}){const n=await js.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const a=await n.get(`remote.${i}.url`);return{remote:i,url:a}}))}async function Mue({fs:e,dir:t,gitdir:n=Mt.join(t,".git")}){try{return tt("fs",e),tt("gitdir",n),await jue({fs:new un(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Due(e){const t=bs.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[s,i,...a]=r.split(" "),o={ref:i,oid:s};for(const l of a){const[c,d]=l.split(":");c==="symref-target"?o.target=d:c==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function Oue({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(bs.encode(`command=ls-refs
`)),r.push(bs.encode(`agent=${W1.agent}
`)),(n||t||e)&&r.push(bs.delim()),n&&r.push(bs.encode("peel")),t&&r.push(bs.encode("symrefs")),e&&r.push(bs.encode(`ref-prefix ${e}`)),r.push(bs.flush()),r}async function Pue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,url:i,headers:a={},forPush:o=!1,protocolVersion:l=2,prefix:c,symrefs:d,peelTags:h}){try{tt("http",e),tt("url",i);const m=await kx.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:s,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:a,protocolVersion:l});if(m.protocolVersion===1)return k$(m,c,d,h);const g=await Oue({prefix:c,symrefs:d,peelTags:h}),v=await kx.connect({http:e,auth:m.auth,headers:a,corsProxy:s,service:o?"git-receive-pack":"git-upload-pack",url:i,body:g});return Due(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function Fue({fs:e,dir:t,gitdir:n=Mt.join(t,".git")}){try{return tt("fs",e),tt("gitdir",n),$t.listTags({fs:new un(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Lue(e,t){return e.committer.timestamp-t.committer.timestamp}const $ue="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function _D({fs:e,cache:t,gitdir:n,oid:r,fileId:s}){if(s===$ue)return;const i=r;let a;const o=await $p({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return s===o.oid?a=o.path:(a=await R$({fs:e,cache:t,gitdir:n,tree:l,fileId:s,oid:i}),Array.isArray(a)&&(a.length===0?a=void 0:a.length===1&&(a=a[0]))),a}async function R$({fs:e,cache:t,gitdir:n,tree:r,fileId:s,oid:i,filepaths:a=[],parentPath:o=""}){const l=r.entries().map(function(c){let d;return c.oid===s?(d=Mt.join(o,c.path),a.push(d)):c.type==="tree"&&(d=ns({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return R$({fs:e,cache:t,gitdir:n,tree:ua.from(h),fileId:s,oid:i,filepaths:a,parentPath:Mt.join(o,c.path)})})),d});return await Promise.all(l),a}async function Bue({fs:e,cache:t,gitdir:n,filepath:r,ref:s,depth:i,since:a,force:o,follow:l}){const c=typeof a>"u"?void 0:Math.floor(a.valueOf()/1e3),d=[],h=await Z0.read({fs:e,gitdir:n}),m=await $t.resolve({fs:e,gitdir:n,ref:s}),g=[await zp({fs:e,cache:t,gitdir:n,oid:m})];let v,b,w;function x(_){w&&r&&d.push(_)}for(;g.length>0;){const _=g.pop();if(c!==void 0&&_.commit.committer.timestamp<=c)break;if(r){let E;try{E=await ib({fs:e,cache:t,gitdir:n,oid:_.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=_,w=!0}catch(k){if(k instanceof $r){let T=l&&v;if(T&&(T=await _D({fs:e,cache:t,gitdir:n,oid:_.commit.tree,fileId:v}),T))if(Array.isArray(T)){if(b){const R=await _D({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(R))if(T=T.filter(M=>R.indexOf(M)===-1),T.length===1)T=T[0],r=T,b&&d.push(b);else{T=!1,b&&d.push(b);break}}}else r=T,b&&d.push(b);if(!T){if(w&&v&&(d.push(b),!o))break;if(!o&&!l)throw k}b=_,w=!1}else throw k}}else d.push(_);if(i!==void 0&&d.length===i){x(_);break}if(!h.has(_.oid))for(const E of _.commit.parent){const k=await zp({fs:e,cache:t,gitdir:n,oid:E});g.map(T=>T.oid).includes(k.oid)||g.push(k)}g.length===0&&x(_),g.sort((E,k)=>Lue(E.commit,k.commit))}return d}async function zue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,ref:s="HEAD",depth:i,since:a,force:o,follow:l,cache:c={}}){try{return tt("fs",e),tt("gitdir",n),tt("ref",s),await Bue({fs:new un(e),cache:c,gitdir:n,filepath:r,ref:s,depth:i,since:a,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function Uue({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ours:s,theirs:i,fastForward:a=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:c=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:v,cache:b={},mergeDriver:w}){try{tt("fs",e),v&&tt("onSign",t);const x=new un(e),_=await rd({fs:x,gitdir:r,author:m});if(!_&&(!o||!a))throw new Ri("author");const E=await Bp({fs:x,gitdir:r,author:_,committer:g});if(!E&&(!o||!a))throw new Ri("committer");return await S$({fs:x,cache:b,dir:n,gitdir:r,ours:s,theirs:i,fastForward:a,fastForwardOnly:o,dryRun:l,noUpdateBranch:c,abortOnConflict:d,message:h,author:_,committer:E,signingKey:v,onSign:t,mergeDriver:w})}catch(x){throw x.caller="git.merge",x}}const que={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function N$({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),oids:s}){const i=new K9,a=[];function o(d,h){const m=Jt.from(d,h);a.push(m),i.update(m)}async function l({stype:d,object:h}){const m=que[d];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let w=(v|m|b).toString(16);for(o(w,"hex");v;)v=g>127?128:0,w=v|g&127,o(vT(2,w),"hex"),g=g>>>7;o(Jt.from(await c$(h)))}o("PACK"),o("00000002","hex"),o(vT(8,s.length),"hex");for(const d of s){const{type:h,object:m}=await ns({fs:e,cache:t,gitdir:r,oid:d});await l({object:m,stype:h})}const c=i.digest();return a.push(c),a}async function Vue({fs:e,cache:t,gitdir:n,oids:r,write:s}){const i=await N$({fs:e,cache:t,gitdir:n,oids:r}),a=Jt.from(await Cx(i)),l=`pack-${a.slice(-20).toString("hex")}.pack`;return s?(await e.write(Mt.join(n,`objects/pack/${l}`),a),{filename:l}):{filename:l,packfile:new Uint8Array(a)}}async function Hue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oids:r,write:s=!1,cache:i={}}){try{return tt("fs",e),tt("gitdir",n),tt("oids",r),await Vue({fs:new un(e),cache:i,gitdir:n,oids:r,write:s})}catch(a){throw a.caller="git.packObjects",a}}async function Gue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,dir:o,gitdir:l=Mt.join(o,".git"),ref:c,url:d,remote:h,remoteRef:m,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:w=!1,corsProxy:x,singleBranch:_,headers:E={},author:k,committer:T,signingKey:R,cache:M={}}){try{tt("fs",e),tt("gitdir",l);const I=new un(e),O=await rd({fs:I,gitdir:l,author:k});if(!O)throw new Ri("author");const P=await Bp({fs:I,gitdir:l,author:O,committer:T});if(!P)throw new Ri("committer");return await E$({fs:I,cache:M,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,dir:o,gitdir:l,ref:c,url:d,remote:h,remoteRef:m,fastForward:b,fastForwardOnly:w,corsProxy:x,singleBranch:_,headers:E,author:O,committer:P,signingKey:R,prune:g,pruneTags:v})}catch(I){throw I.caller="git.pull",I}}async function Kue({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),start:s,finish:i}){const a=await Z0.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of s)o.add(await $t.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await $t.resolve({fs:e,gitdir:r,ref:h});l.add(m)}catch{}const c=new Set;async function d(h){c.add(h);const{type:m,object:g}=await ns({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const b=Ui.from(g).headers().object;return d(b)}if(m!=="commit")throw new Wi(h,m,"commit");if(!a.has(h)){const b=es.from(g).headers().parent;for(h of b)!l.has(h)&&!c.has(h)&&await d(h)}}for(const h of o)await d(h);return c}async function jC({fs:e,cache:t,dir:n,gitdir:r=Mt.join(n,".git"),oids:s}){const i=new Set;async function a(o){if(i.has(o))return;i.add(o);const{type:l,object:c}=await ns({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=Ui.from(c).headers().object;await a(h)}else if(l==="commit"){const h=es.from(c).headers().tree;await a(h)}else if(l==="tree"){const d=ua.from(c);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await a(h.oid)}}for(const o of s)await a(o);return i}async function Wue(e){const t={};let n="";const r=bs.streamReader(e);let s=await r();for(;s!==!0;)s!==null&&(n+=s.toString("utf8")+`
`),s=await r();const i=n.toString("utf8").split(`
`);if(s=i.shift(),!s.startsWith("unpack "))throw new Xf('unpack ok" or "unpack [error message]',s);t.ok=s==="unpack ok",t.ok||(t.error=s.slice(7)),t.refs={};for(const a of i){if(a.trim()==="")continue;const o=a.slice(0,2),l=a.slice(3);let c=l.indexOf(" ");c===-1&&(c=l.length);const d=l.slice(0,c),h=l.slice(c+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function Zue({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const s of t)n.push(bs.encode(`${s.oldoid} ${s.oid} ${s.fullRef}${r}
`)),r="";return n.push(bs.flush()),n}async function Yue({fs:e,cache:t,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:a,onAuthFailure:o,onPrePush:l,gitdir:c,ref:d,remoteRef:h,remote:m,url:g,force:v=!1,delete:b=!1,corsProxy:w,headers:x={}}){const _=d||await wd({fs:e,gitdir:c});if(typeof _>"u")throw new ca("ref");const E=await js.get({fs:e,gitdir:c});m=m||await E.get(`branch.${_}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${_}.remote`)||"origin";const k=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof k>"u")throw new ca("remote OR url");const T=h||await E.get(`branch.${_}.merge`);if(typeof k>"u")throw new ca("remoteRef");w===void 0&&(w=await E.get("http.corsProxy"));const R=await $t.expand({fs:e,gitdir:c,ref:_}),M=b?"0000000000000000000000000000000000000000":await $t.resolve({fs:e,gitdir:c,ref:R}),I=K1.getRemoteHelperFor({url:k}),O=await I.discover({http:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,corsProxy:w,service:"git-receive-pack",url:k,headers:x,protocolVersion:1}),P=O.auth;let U;if(!T)U=R;else try{U=await $t.expandAgainstMap({ref:T,map:O.refs})}catch(Q){if(Q instanceof $r)U=T.startsWith("refs/")?T:`refs/heads/${T}`;else throw Q}const j=O.refs.get(U)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:m,url:k,localRef:{ref:b?"(delete)":R,oid:M},remoteRef:{ref:U,oid:j}}))throw new gm;const V=!O.capabilities.has("no-thin");let $=new Set;if(!b){const Q=[...O.refs.values()];let he=new Set;if(j!=="0000000000000000000000000000000000000000"){const Se=await OR({fs:e,cache:t,gitdir:c,oids:[M,j]});for(const ce of Se)Q.push(ce);V&&(he=await jC({fs:e,cache:t,gitdir:c,oids:Se}))}if(!Q.includes(M)){const Se=await Kue({fs:e,cache:t,gitdir:c,start:[M],finish:Q});$=await jC({fs:e,cache:t,gitdir:c,oids:Se})}if(V){try{const Se=await $t.resolve({fs:e,gitdir:c,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:ce}=await $t.resolveAgainstMap({ref:Se.replace(`refs/remotes/${m}/`,""),fullref:Se,map:O.refs}),je=[ce];for(const De of await jC({fs:e,cache:t,gitdir:c,oids:je}))he.add(De)}catch{}for(const Se of he)$.delete(Se)}if(M===j&&(v=!0),!v){if(R.startsWith("refs/tags")&&j!=="0000000000000000000000000000000000000000")throw new Lp("tag-exists");if(M!=="0000000000000000000000000000000000000000"&&j!=="0000000000000000000000000000000000000000"&&!await T$({fs:e,cache:t,gitdir:c,oid:M,ancestor:j,depth:-1}))throw new Lp("not-fast-forward")}}const re=v$([...O.capabilities],["report-status","side-band-64k",`agent=${W1.agent}`]),J=await Zue({capabilities:re,triplets:[{oldoid:j,oid:M,fullRef:U}]}),te=b?[]:await N$({fs:e,cache:t,gitdir:c,oids:[...$]}),X=await I.connect({http:n,onProgress:r,corsProxy:w,service:"git-receive-pack",url:k,auth:P,headers:x,body:[...J,...te]}),{packfile:ie,progress:Z}=await x$.demux(X.body);if(s){const Q=w$(Z);ob(Q,async he=>{await s(he)})}const ee=await Wue(ie);if(X.headers&&(ee.headers=X.headers),m&&ee.ok&&ee.refs[U].ok&&!R.startsWith("refs/tags")){const Q=`refs/remotes/${m}/${U.replace("refs/heads","")}`;b?await $t.deleteRef({fs:e,gitdir:c,ref:Q}):await $t.writeRef({fs:e,gitdir:c,ref:Q,value:M})}if(ee.ok&&Object.values(ee.refs).every(Q=>Q.ok))return ee;{const Q=Object.entries(ee.refs).filter(([he,Se])=>!Se.ok).map(([he,Se])=>`
  - ${he}: ${Se.error}`).join("");throw new Yy(Q,ee)}}async function Xue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,onPrePush:o,dir:l,gitdir:c=Mt.join(l,".git"),ref:d,remoteRef:h,remote:m="origin",url:g,force:v=!1,delete:b=!1,corsProxy:w,headers:x={},cache:_={}}){try{return tt("fs",e),tt("http",t),tt("gitdir",c),await Yue({fs:new un(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:a,onPrePush:o,gitdir:c,ref:d,remoteRef:h,remote:m,url:g,force:v,delete:b,corsProxy:w,headers:x})}catch(E){throw E.caller="git.push",E}}async function I$({fs:e,cache:t,gitdir:n,oid:r}){const{type:s,object:i}=await ns({fs:e,cache:t,gitdir:n,oid:r});if(s==="tag")return r=Ui.from(i).parse().object,I$({fs:e,cache:t,gitdir:n,oid:r});if(s!=="blob")throw new Wi(r,s,"blob");return{oid:r,blob:new Uint8Array(i)}}async function j$({fs:e,cache:t,gitdir:n,oid:r,filepath:s=void 0}){return s!==void 0&&(r=await ib({fs:e,cache:t,gitdir:n,oid:r,filepath:s})),await I$({fs:e,cache:t,gitdir:n,oid:r})}async function Jue({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,filepath:s,cache:i={}}){try{return tt("fs",e),tt("gitdir",n),tt("oid",r),await j$({fs:new un(e),cache:i,gitdir:n,oid:r,filepath:s})}catch(a){throw a.caller="git.readBlob",a}}async function M$({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,cache:s={}}){try{return tt("fs",e),tt("gitdir",n),tt("oid",r),await zp({fs:new un(e),cache:s,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Que({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:s}){const i=await $t.resolve({gitdir:n,fs:e,ref:r}),{blob:a}=await j$({fs:e,cache:t,gitdir:n,oid:i,filepath:s});return a}async function ede({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r="refs/notes/commits",oid:s,cache:i={}}){try{return tt("fs",e),tt("gitdir",n),tt("ref",r),tt("oid",s),await Que({fs:new un(e),cache:i,gitdir:n,ref:r,oid:s})}catch(a){throw a.caller="git.readNote",a}}async function tde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,format:s="parsed",filepath:i=void 0,encoding:a=void 0,cache:o={}}){try{tt("fs",e),tt("gitdir",n),tt("oid",r);const l=new un(e);i!==void 0&&(r=await ib({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await ns({fs:l,cache:o,gitdir:n,oid:r,format:s==="parsed"?"content":s});if(d.oid=r,s==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=es.from(d.object).parse();break;case"tree":d.object=ua.from(d.object).entries();break;case"blob":a?d.object=d.object.toString(a):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=Ui.from(d.object).parse();break;default:throw new Wi(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function nde({fs:e,cache:t,gitdir:n,oid:r}){const{type:s,object:i}=await ns({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(s!=="tag")throw new Wi(r,s,"tag");const a=Ui.from(i);return{oid:r,tag:a.parse(),payload:a.payload()}}async function rde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,cache:s={}}){try{return tt("fs",e),tt("gitdir",n),tt("oid",r),await nde({fs:new un(e),cache:s,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function sde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),oid:r,filepath:s=void 0,cache:i={}}){try{return tt("fs",e),tt("gitdir",n),tt("oid",r),await bm({fs:new un(e),cache:i,gitdir:n,oid:r,filepath:s})}catch(a){throw a.caller="git.readTree",a}}async function ide({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,cache:s={}}){try{tt("fs",e),tt("gitdir",n),tt("filepath",r),await ti.acquire({fs:new un(e),gitdir:n,cache:s},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function ade({fs:e,cache:t,onSign:n,gitdir:r,ref:s="refs/notes/commits",oid:i,author:a,committer:o,signingKey:l}){let c;try{c=await $t.resolve({gitdir:r,fs:e,ref:s})}catch(v){if(!(v instanceof $r))throw v}let h=(await bm({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await ab({fs:e,gitdir:r,tree:h});return await G1({fs:e,cache:t,onSign:n,gitdir:r,ref:s,tree:m,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:a,committer:o,signingKey:l})}async function ode({fs:e,onSign:t,dir:n,gitdir:r=Mt.join(n,".git"),ref:s="refs/notes/commits",oid:i,author:a,committer:o,signingKey:l,cache:c={}}){try{tt("fs",e),tt("gitdir",r),tt("oid",i);const d=new un(e),h=await rd({fs:d,gitdir:r,author:a});if(!h)throw new Ri("author");const m=await Bp({fs:d,gitdir:r,author:h,committer:o});if(!m)throw new Ri("committer");return await ade({fs:d,cache:c,onSign:t,gitdir:r,ref:s,oid:i,author:h,committer:m,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function lde({fs:e,gitdir:t,oldref:n,ref:r,checkout:s=!1}){if(r!==xl.clean(r))throw new Uo(r,xl.clean(r));if(n!==xl.clean(n))throw new Uo(n,xl.clean(n));const i=`refs/heads/${n}`,a=`refs/heads/${r}`;if(await $t.exists({fs:e,gitdir:t,ref:a}))throw new Ho("branch",r,!1);const l=await $t.resolve({fs:e,gitdir:t,ref:i,depth:1});await $t.writeRef({fs:e,gitdir:t,ref:a,value:l}),await $t.deleteRef({fs:e,gitdir:t,ref:i});const d=await wd({fs:e,gitdir:t,fullname:!0})===i;(s||d)&&await $t.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:a})}async function cde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,oldref:s,checkout:i=!1}){try{return tt("fs",e),tt("gitdir",n),tt("ref",r),tt("oldref",s),await lde({fs:new un(e),gitdir:n,ref:r,oldref:s,checkout:i})}catch(a){throw a.caller="git.renameBranch",a}}async function D$({gitdir:e,type:t,object:n}){return $c(hm.wrap({type:t,object:n}))}async function ude({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,ref:s,cache:i={}}){try{tt("fs",e),tt("gitdir",n),tt("filepath",r);const a=new un(e);let o,l;try{o=await $t.resolve({fs:a,gitdir:n,ref:s||"HEAD"})}catch(h){if(s)throw h}if(o)try{o=await ib({fs:a,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await a.read(Mt.join(t,r));d&&(l=await D$({gitdir:n,type:"blob",object:d}),o===l&&(c=await a.lstat(Mt.join(t,r)))),await ti.acquire({fs:a,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:c,oid:o})})}catch(a){throw a.caller="git.reset",a}}async function dde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,depth:s}){try{return tt("fs",e),tt("gitdir",n),tt("ref",r),await $t.resolve({fs:new un(e),gitdir:n,ref:r,depth:s})}catch(i){throw i.caller="git.resolveRef",i}}async function fde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),path:r,value:s,append:i=!1}){try{tt("fs",e),tt("gitdir",n),tt("path",r);const a=new un(e),o=await js.get({fs:a,gitdir:n});i?await o.append(r,s):await o.set(r,s),await js.save({fs:a,gitdir:n,config:o})}catch(a){throw a.caller="git.setConfig",a}}async function O$({fs:e,gitdir:t,commit:n}){const r=es.from(n).toObject();return await ha({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Tx{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const s=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",a=Math.floor(Date.now()/1e3),o=Tx.timezoneOffsetForRefLogEntry;return`${i} ${n} ${s} ${t.email} ${a} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,a)=>n?`stash@{${a}}: ${i.split("	")[1]}`:i)}}const hde={stage:fm,workdir:sb};let MC;async function Up(e,t){return MC===void 0&&(MC=new K0),MC.acquire(e,t)}async function pde(e,t,n,r,s=null){const i=Mt.join(n,r),a=await e.lstat(i);if(!a)throw new $r(i);if(a.isDirectory())throw new Pn(`${i}: file expected, but found directory`);const o=s?await s$({fs:e,gitdir:t,oid:s}):void 0;let l=o?s:void 0;return o||await Up({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=a.isSymbolicLink()?await e.readlink(i).then(u$):await e.read(i);if(c===null)throw new $r(i);l=await ha({fs:e,gitdir:t,type:"blob",object:c})}),l}async function mde({fs:e,dir:t,gitdir:n,entries:r}){async function s(i){if(i.type==="tree"){if(!i.oid){const a=await Promise.all(i.children.map(s));i.oid=await ab({fs:e,gitdir:n,tree:a}),i.mode=16384}}else i.type==="blob"&&(i.oid=await pde(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(s))}async function SD({fs:e,dir:t,gitdir:n,treePair:r}){const s=r[1]==="stage",i=r.map(g=>typeof g=="string"?hde[g]():g),a=[],d=await nd({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await ym.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&a.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const w of v){const[x,_]=w;s?_&&(await e.exists(`${t}/${_.toString()}`)?b.push(w):a.push([null,_])):x&&(_?b.push(w):a.push([x,null]))}return b.length?Promise.all(b.map(g)):[]}});if(a.length===0||d.length===0)return null;const m=(await mde({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return ab({fs:e,gitdir:n,tree:m})}async function gde({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:s,wasStaged:i}){const a=[],o=[],l=await nd({fs:e,cache:{},dir:t,gitdir:n,trees:[to({ref:s}),to({ref:r})],map:async(c,[d,h])=>{if(c==="."||await ym.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const m=h?await h.type():await d.type();if(m!=="tree"&&m!=="blob")return;if(!h&&d){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&a.push(c),m==="blob"&&i&&o.push({filepath:c,oid:await d.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!d||await d.oid()!==g)return m==="tree"?{method:"mkdir",filepath:c}:(i&&o.push({filepath:c,oid:g,stats:await e.lstat(Mt.join(t,c))}),{method:"write",filepath:c,oid:g})}});await Up({fs:e,gitdir:n,dirRemoved:a,ops:l},async()=>{for(const c of l){const d=Mt.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!a.some(h=>d.startsWith(h))){const{object:h}=await ns({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await ti.acquire({fs:e,gitdir:n,cache:{}},async c=>{o.forEach(({filepath:d,stats:h,oid:m})=>{c.insert({filepath:d,stats:h,oid:m})})})}class Ec{constructor({fs:t,dir:n,gitdir:r=Mt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Mt.join(this.gitdir,Ec.refStash)}get refLogsStashPath(){return Mt.join(this.gitdir,Ec.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await rd({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Ri("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return O$({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Uo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?zp({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return $t.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Ec.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),s=Tx.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Up({filepath:i,entry:s},async()=>{const a=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,a+s,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Tx.getStashReflogEntry(r,t)}}async function yde({fs:e,dir:t,gitdir:n,message:r=""}){const s=new Ec({fs:e,dir:t,gitdir:n});await s.getAuthor();const i=await wd({fs:e,gitdir:n,fullname:!1}),a=await $t.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await M$({fs:e,dir:t,gitdir:n,oid:a})).commit.message,c=[a];let d=null,h=to({ref:"HEAD"});const m=await SD({fs:e,dir:t,gitdir:n,treePair:[to({ref:"HEAD"}),"stage"]});if(m){const w=await s.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:c});c.push(w),d=m,h=fm()}const g=await SD({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const w=await s.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(w),d=g}if(!d||!m&&!g)throw new $r("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${a.substring(0,7)} ${l}`,b=await s.writeStashCommit({message:v,tree:d,parent:c});return await s.writeStashRef(b),await s.writeStashReflogEntry({stashCommit:b,message:v}),await y$({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function P$({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Ec({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:a=null}=i.commit?i.commit:{};if(!(!a||!Array.isArray(a)))for(let o=0;o<a.length-1;o++){const c=(await zp({fs:e,cache:{},gitdir:n,oid:a[o+1]})).commit.message.startsWith("stash-Index");await gde({fs:e,dir:t,gitdir:n,stashCommit:a[o+1],parentCommit:a[o],wasStaged:c})}}async function F$({fs:e,dir:t,gitdir:n,refIdx:r=0}){const s=new Ec({fs:e,dir:t,gitdir:n});if(!(await s.readStashCommit(r)).commit)return;const a=s.refStashPath;await Up(a,async()=>{await e.exists(a)&&await e.rm(a)});const o=await s.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=s.refLogsStashPath;await Up({reflogEntries:o,stashReflogPath:l,stashMgr:s},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const c=o[o.length-1].split(" ")[1];await s.writeStashRef(c)}else await e.rm(l)})}async function bde({fs:e,dir:t,gitdir:n}){return new Ec({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function vde({fs:e,dir:t,gitdir:n}){const r=new Ec({fs:e,dir:t,gitdir:n}),s=[r.refStashPath,r.refLogsStashPath];await Up(s,async()=>{await Promise.all(s.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function wde({fs:e,dir:t,gitdir:n,refIdx:r=0}){await P$({fs:e,dir:t,gitdir:n,refIdx:r}),await F$({fs:e,dir:t,gitdir:n,refIdx:r})}async function xde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),op:r="push",message:s="",refIdx:i=0}){tt("fs",e),tt("dir",t),tt("gitdir",n),tt("op",r);const a={push:yde,apply:P$,drop:F$,list:bde,clear:vde,pop:wde},o=["apply","drop","pop"];try{const l=new un(e);["refs","logs","logs/refs"].map(h=>Mt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=a[r];if(d){if(o.includes(r)&&i<0)throw new Uo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:s,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function _de({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),filepath:r,cache:s={}}){try{tt("fs",e),tt("gitdir",n),tt("filepath",r);const i=new un(e);if(await ym.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await Sde({fs:i,cache:s,gitdir:n}),l=await L$({fs:i,cache:s,gitdir:n,tree:o,path:r}),c=await ti.acquire({fs:i,gitdir:n,cache:s},async function(b){for(const w of b)if(w.path===r)return w;return null}),d=await i.lstat(Mt.join(t,r)),h=l!==null,m=c!==null,g=d!==null,v=async()=>{if(m&&!vx(c,d))return c.oid;{const b=await i.read(Mt.join(t,r)),w=await D$({gitdir:n,type:"blob",object:b});return m&&c.oid===w&&d.size!==-1&&ti.acquire({fs:i,gitdir:n,cache:s},async function(x){x.insert({filepath:r,stats:d,oid:w})}),w}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await v()===c.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return l===c.oid,"*deleted";if(h&&g&&!m)return await v()===l?"*undeleted":"*undeletemodified";if(h&&g&&m){const b=await v();return b===l?b===c.oid?"unmodified":"*unmodified":b===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function L$({fs:e,cache:t,gitdir:n,tree:r,path:s}){typeof s=="string"&&(s=s.split("/"));const i=s.shift();for(const a of r)if(a.path===i){if(s.length===0)return a.oid;const{type:o,object:l}=await ns({fs:e,cache:t,gitdir:n,oid:a.oid});if(o==="tree"){const c=ua.from(l);return L$({fs:e,cache:t,gitdir:n,tree:c,path:s})}if(o==="blob")throw new Wi(a.oid,o,"blob",s.join("/"))}return null}async function Sde({fs:e,cache:t,gitdir:n}){let r;try{r=await $t.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof $r)return[]}const{tree:s}=await bm({fs:e,cache:t,gitdir:n,oid:r});return s}async function Ede({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r="HEAD",filepaths:s=["."],filter:i,cache:a={},ignored:o=!1}){try{tt("fs",e),tt("gitdir",n),tt("ref",r);const l=new un(e);return await nd({fs:l,cache:a,dir:t,gitdir:n,trees:[to({ref:r}),sb(),fm()],map:async function(c,[d,h,m]){if(!d&&!m&&h&&!o&&await ym.isIgnored({fs:l,dir:t,filepath:c})||!s.some(R=>g$(c,R)))return null;if(i&&!i(c))return;const[g,v,b]=await Promise.all([d&&d.type(),h&&h.type(),m&&m.type()]),w=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!w)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!w)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!w)return;const x=g==="blob"?await d.oid():void 0,_=b==="blob"?await m.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const k=[void 0,x,E,_],T=k.map(R=>k.indexOf(R));return T.shift(),[c,...T]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Cde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,object:s,force:i=!1}){try{tt("fs",e),tt("gitdir",n),tt("ref",r);const a=new un(e);if(r===void 0)throw new ca("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await $t.resolve({fs:a,gitdir:n,ref:s||"HEAD"});if(!i&&await $t.exists({fs:a,gitdir:n,ref:r}))throw new Ho("tag",r);await $t.writeRef({fs:a,gitdir:n,ref:r,value:o})}catch(a){throw a.caller="git.tag",a}}async function kde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),cache:r={},filepath:s,oid:i,mode:a,add:o,remove:l,force:c}){try{tt("fs",e),tt("gitdir",n),tt("filepath",s);const d=new un(e);if(l)return await ti.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!c){const g=await d.lstat(Mt.join(t,s));if(g){if(g.isDirectory())throw new td("directory");return}}m.has({filepath:s})&&m.delete({filepath:s})});let h;if(!i){if(h=await d.lstat(Mt.join(t,s)),!h)throw new $r(`file at "${s}" on disk and "remove" not set`);if(h.isDirectory())throw new td("directory")}return await ti.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!o&&!m.has({filepath:s}))throw new $r(`file at "${s}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:a,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await d.readlink(Mt.join(t,s)):await d.read(Mt.join(t,s));i=await ha({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:s,oid:i,stats:g}),i})}catch(d){throw d.caller="git.updateIndex",d}}function Tde(){try{return W1.version}catch(e){throw e.caller="git.version",e}}async function Ade({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),trees:r,map:s,reduce:i,iterate:a,cache:o={}}){try{return tt("fs",e),tt("gitdir",n),tt("trees",r),await nd({fs:new un(e),cache:o,dir:t,gitdir:n,trees:r,map:s,reduce:i,iterate:a})}catch(l){throw l.caller="git.walk",l}}async function Rde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),blob:r}){try{return tt("fs",e),tt("gitdir",n),tt("blob",r),await ha({fs:new un(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(s){throw s.caller="git.writeBlob",s}}async function Nde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),commit:r}){try{return tt("fs",e),tt("gitdir",n),tt("commit",r),await O$({fs:new un(e),gitdir:n,commit:r})}catch(s){throw s.caller="git.writeCommit",s}}async function Ide({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),type:r,object:s,format:i="parsed",oid:a,encoding:o=void 0}){try{const l=new un(e);if(i==="parsed"){switch(r){case"commit":s=es.from(s).toObject();break;case"tree":s=ua.from(s).toObject();break;case"blob":s=Jt.from(s,o);break;case"tag":s=Ui.from(s).toObject();break;default:throw new Wi(a||"",r,"blob|commit|tag|tree")}i="content"}return a=await ha({fs:l,gitdir:n,type:r,object:s,oid:a,format:i}),a}catch(l){throw l.caller="git.writeObject",l}}async function jde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),ref:r,value:s,force:i=!1,symbolic:a=!1}){try{tt("fs",e),tt("gitdir",n),tt("ref",r),tt("value",s);const o=new un(e);if(r!==xl.clean(r))throw new Uo(r,xl.clean(r));if(!i&&await $t.exists({fs:o,gitdir:n,ref:r}))throw new Ho("ref",r);a?await $t.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:s}):(s=await $t.resolve({fs:o,gitdir:n,ref:s}),await $t.writeRef({fs:o,gitdir:n,ref:r,value:s}))}catch(o){throw o.caller="git.writeRef",o}}async function Mde({fs:e,gitdir:t,tag:n}){const r=Ui.from(n).toObject();return await ha({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Dde({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),tag:r}){try{return tt("fs",e),tt("gitdir",n),tt("tag",r),await Mde({fs:new un(e),gitdir:n,tag:r})}catch(s){throw s.caller="git.writeTag",s}}async function Ode({fs:e,dir:t,gitdir:n=Mt.join(t,".git"),tree:r}){try{return tt("fs",e),tt("gitdir",n),tt("tree",r),await ab({fs:new un(e),gitdir:n,tree:r})}catch(s){throw s.caller="git.writeTree",s}}var Fs={Errors:cce,STAGE:fm,TREE:to,WORKDIR:sb,add:Tce,abortMerge:Sce,addNote:Rce,addRemote:Nce,annotatedTag:jce,branch:Dce,checkout:y$,clone:Gce,commit:Kce,getConfig:pue,getConfigAll:gue,setConfig:fde,currentBranch:Wce,deleteBranch:Yce,deleteRef:Xce,deleteRemote:Qce,deleteTag:tue,expandOid:iue,expandRef:aue,fastForward:uue,fetch:due,findMergeBase:fue,findRoot:hue,getRemoteInfo:yue,getRemoteInfo2:bue,hashBlob:wue,indexPack:_ue,init:Sue,isDescendent:Eue,isIgnored:Cue,listBranches:kue,listFiles:Aue,listNotes:Nue,listRefs:Iue,listRemotes:Mue,listServerRefs:Pue,listTags:Fue,log:zue,merge:Uue,packObjects:Hue,pull:Gue,push:Xue,readBlob:Jue,readCommit:M$,readNote:ede,readObject:tde,readTag:rde,readTree:sde,remove:ide,removeNote:ode,renameBranch:cde,resetIndex:ude,updateIndex:kde,resolveRef:dde,status:_de,statusMatrix:Ede,tag:Cde,version:Tde,walk:Ade,writeBlob:Rde,writeCommit:Nde,writeObject:Ide,writeRef:jde,writeTag:Dde,writeTree:Ode,stash:xde};function Pde(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Fde(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Pde(e)}async function Lde(e,t){const n=Fde(e);for(;;){const{value:r,done:s}=await n.next();if(r&&await t(r),s)break}n.return&&n.return()}async function $de(e){let t=0;const n=[];await Lde(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}function Bde(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function zde({onProgress:e,url:t,method:n="GET",headers:r={},body:s}){s&&(s=await $de(s));const i=await fetch(t,{method:n,headers:r,body:s}),a=i.body&&i.body.getReader?Bde(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:a,headers:r}}var Y0={request:zde};const X0="https://cors.isomorphic-git.org",qp=new Map,$$=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=ur.getState();if(!n||!r)return ze.error("Git user name and email must be configured in Settings before committing."),!1;try{const s=await Fs.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Fs.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return s!==n&&await Fs.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Fs.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(s){return console.error("[VFS Git Op] Error checking/setting Git config:",s),ze.error(`Failed to configure Git user: ${s instanceof Error?s.message:String(s)}`),!1}},J0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=qp.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const s=window.prompt(`Enter username for ${e}`);if(!s)return ze.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${s}@${e}`);return i?(qp.set(n,{username:s,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:s,password:i,authScheme:"Basic"}):(ze.error("Authentication cancelled: Password/token not provided."),null)},Q0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),qp.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),qp.delete(n)),null},ey=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!qp.has(n)&&t.username&&t.password&&(qp.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},vp=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let s="";if(r)try{const i=JSON.parse(r);s=i.message||i.error||JSON.stringify(i)}catch{s=r}return`HTTP ${t} ${n}${s?`: ${s}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},Ude=async(e,t)=>{const n=ai,r=or(e),s=Dl(r,".git");try{return(await n.promises.stat(s)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},B$=async(e,t,n,r,s)=>{var o;const i=(s==null?void 0:s.fsInstance)??ai,a=or(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${a}`);try{let l=!1;try{await i.promises.stat(Dl(a,".git")),l=!0}catch(m){if(m.code!=="ENOENT")throw m}if(l)throw console.warn(`[VFS Git Op] Clone target ${a} already contains a .git directory.`),new Error(`Repository already cloned at ${a}.`);const c=q1(a);if(c!=="/")try{await i.promises.mkdir(c,{recursive:!0})}catch(m){if(m.code!=="EEXIST")throw m}let d=n;if(!d)try{if(d=(o=(await Fs.getRemoteInfo({http:Y0,url:t,corsProxy:X0,onAuth:g=>J0(g,r),onAuthFailure:Q0,onAuthSuccess:ey})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(m){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",m),new Error(`Failed to determine default branch: ${vp(m)}`)}await Fs.clone({fs:i,http:Y0,dir:a,corsProxy:X0,url:t,ref:d,singleBranch:!0,depth:10,onAuth:m=>J0(m,r),onAuthFailure:Q0,onAuthSuccess:ey,onProgress:m=>{m.phase==="counting objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):m.phase==="receiving objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):console.log(`Clone progress: ${m.phase}`)}}),await i.promises.stat(Dl(a,".git"));const h=await Fs.currentBranch({fs:i,dir:a,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Fs.checkout({fs:i,dir:a,ref:d})),ze.success(`Repository cloned successfully into ${a} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const c=vp(l);if(l instanceof Error&&l.message.includes("already cloned")||ze.error(`Git clone failed: ${c}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${a}`),await i.promises.rm(a,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},z$=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??ai,r=or(e);try{await Fs.init({fs:n,dir:r}),ze.success(`Initialized empty Git repository in "${ws(r)}"`)}catch(s){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,s),ze.error(`Git init failed: ${s instanceof Error?s.message:String(s)}`),s}},PR=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??ai,s=or(e);try{if(!await $$(s,r))throw new Error("Git user configuration is missing or invalid.");if(await Fs.add({fs:r,dir:s,filepath:"."}),!(await Fs.statusMatrix({fs:r,dir:s})).some(([,,c])=>c!==0)){ze.info("No changes detected to commit.");return}const l=await Fs.commit({fs:r,dir:s,message:t,author:{name:ur.getState().gitUserName,email:ur.getState().gitUserEmail}});ze.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${s}:`,i),ze.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},Z1=async(e,t,n,r)=>{const s=(r==null?void 0:r.fsInstance)??ai,i=or(e);try{if(!await $$(i,s))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Fs.currentBranch({fs:s,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Fs.checkout({fs:s,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Fs.fetch({fs:s,http:Y0,dir:i,corsProxy:X0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:c=>J0(c,n),onAuthFailure:Q0,onAuthSuccess:ey}),await Fs.branch({fs:s,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(c){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,c),new Error(`Failed to switch to or create local branch "${t}": ${vp(c)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${vp(l)}`)}}await Fs.pull({fs:s,http:Y0,dir:i,ref:t,singleBranch:!0,author:{name:ur.getState().gitUserName,email:ur.getState().gitUserEmail},corsProxy:X0,onAuth:l=>J0(l,n),onAuthFailure:Q0,onAuthSuccess:ey}),ze.success(`Pulled changes successfully for "${ws(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(a){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,a),a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")?ze.info(`Branch "${t}" is already up-to-date.`):ze.error(`Git pull failed: ${vp(a)}`),!(a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")))throw a}},FR=async(e,t,n,r)=>{var a,o;const s=(r==null?void 0:r.fsInstance)??ai,i=or(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Fs.push({fs:s,http:Y0,dir:i,corsProxy:X0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:c=>J0(c,n),onAuthFailure:Q0,onAuthSuccess:ey});if(l!=null&&l.ok)ze.success(`Pushed changes successfully for "${ws(i)}"`);else if((a=l==null?void 0:l.error)!=null&&a.includes("up-to-date"))ze.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(ze.error(`Push rejected for "${ws(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||ze.error(`Git push failed: ${vp(l)}`),l}},U$=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??ai,r=or(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const s=await Fs.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",s);const i=s.map(([a,o,l,c])=>{let d="";return c===2&&(d+="INDEX_Modified "),c===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&c===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${c}`),`${a}: ${d.trim()}`}).filter(a=>!a.endsWith("Unmodified")).join(`
`);ze.info(`Git Status for "${ws(r)}":
${i||"No changes"}`,{duration:15e3})}catch(s){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,s),ze.error(`Git status failed: ${s instanceof Error?s.message:String(s)}`),s}},If=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??ai,r=or(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(s){if(s instanceof Error&&s.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,s),ze.error(`Error creating directory "${ws(r)}": ${s instanceof Error?s.message:String(s)}`),s}},qde=async e=>{try{const t={backend:Goe,name:`litechat_vfs_${e}`};return await Loe(t),ai}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),ze.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},LR=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??ai,r=or(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await If(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const c=Dl(r,l);try{const d=await n.promises.stat(c);return{name:l,path:c,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${c}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(s){throw console.error(`[VFS Op] Failed to list directory ${r}:`,s),ze.error(`Error listing files: ${s instanceof Error?s.message:String(s)}`),s}},xd=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??ai,r=or(e);try{const s=await n.promises.readFile(r);return We.emit(sn.fileRead,{path:r}),s}catch(s){throw console.error(`[VFS Op] Failed to read file ${r}:`,s),ze.error(`Error reading file "${ws(r)}": ${s instanceof Error?s.message:String(s)}`),s}},Y1=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??ai,s=or(e),i=q1(s);try{i!=="/"&&await If(i,{fsInstance:r}),await r.promises.writeFile(s,t),We.emit(sn.fileWritten,{path:s})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${s}:`,a),ze.error(`Error writing file "${ws(s)}": ${a instanceof Error?a.message:String(a)}`)),a}},$R=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??ai,s=or(e);if(s==="/")throw ze.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(s)).isDirectory()?(await r.promises.rm(s,{recursive:t}),We.emit(sn.fileDeleted,{path:s})):(await r.promises.unlink(s),We.emit(sn.fileDeleted,{path:s})),ze.success(`"${ws(s)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${s}`);return}throw console.error(`[VFS Op] Failed to delete ${s}:`,i),ze.error(`Error deleting "${ws(s)}": ${i instanceof Error?i.message:String(i)}`),i}},q$=async(e,t)=>{await If(e,t)},Vde=async(e,t,n)=>{try{const r=await xd(e,n),s=new Blob([r]),i=URL.createObjectURL(s),a=document.createElement("a");a.href=i;const o=or(e);a.download=t||ws(o),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||ze.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},V$=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??ai,s=or(t);let i=0,a=0;const o=Array.from(e);try{await If(s,{fsInstance:r});for(const l of o){const c=Dl(s,l.name);try{const d=await l.arrayBuffer();await Y1(c,new Uint8Array(d),{fsInstance:r}),i++}catch(d){a++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){a=o.length,console.error(`[VFS Op] Failed to prepare target directory ${s} for upload:`,l)}finally{a>0&&i>0?ze.warning(`Upload complete with issues. ${i} succeeded, ${a} failed.`):a===0&&i>0&&ze.success(`Successfully uploaded ${i} file(s) to ${s==="/"?"root":ws(s)}.`)}},Hde=async(e,t,n)=>{const r=ai;if(!e.name.toLowerCase().endsWith(".zip")){ze.error("Please select a valid ZIP file.");return}const s=or(t);let i;try{await If(s,{fsInstance:r}),i=await G9.loadAsync(e);const a=Object.values(i.files),o=await Promise.allSettled(a.map(async h=>{const m=Dl(s,h.name);if(h.dir)await If(m,{fsInstance:r});else{const g=await h.async("uint8array");await Y1(m,g,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,c=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?c++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?ze.warning(`Finished extracting "${e.name}". ${l+c} items succeeded, ${d} failed.`):ze.success(`Successfully extracted ${l} files and ${c} folders from "${e.name}" to ${s==="/"?"root":ws(s)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),ze.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},ED=async(e,t="/",n)=>{const r=ai,s=new G9,i=or(t),a=ws(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){ze.error(`Cannot export: "${a}" is not a directory.`);return}}catch(m){m instanceof Error&&m.code==="ENOENT"?ze.error(`Cannot export: Path "${a}" not found.`):ze.error(`Cannot export: Error accessing path "${a}". ${m instanceof Error?m.message:String(m)}`);return}const o=async(m,g)=>{const v=await LR(m,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const w=g.folder(b.name);if(w)await o(b.path,w);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const w=await xd(b.path,{fsInstance:r});g.file(b.name,w)}};await o(i,s);const l=await s.generateAsync({type:"blob"}),c=URL.createObjectURL(l),d=document.createElement("a");d.href=c;const h=`vfs_${a}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c),ze.success(`"${a}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||ze.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},H$=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??ai,s=or(e),i=or(t);if(s==="/"||i==="/")throw ze.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(s!==i)try{const a=q1(i);a!=="/"&&await If(a,{fsInstance:r}),await r.promises.rename(s,i),ze.success(`Renamed "${ws(s)}" to "${ws(i)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||ze.error(`Rename failed: Original item "${ws(s)}" not found.`):a instanceof Error&&a.code==="EEXIST"?ze.error(`Rename failed: An item named "${ws(i)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||ze.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${s} to ${i}:`,a),a}},Gde=1024*5,Kde=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);const s=new Uint8Array(r),i=new Blob([s],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},CD=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const s=new Uint8Array(r);t=new Blob([s],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},G$=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,s]=C.useState(null),[i,a]=C.useState(null),[o,l]=C.useState(!1),[c,d]=C.useState(!1),[h,m]=C.useState(!0),g=e.type||"application/octet-stream",v=v0(e.name,g),b=g.startsWith("image/"),w=g.startsWith("audio/"),x=g.startsWith("video/"),_=e.source==="vfs";C.useEffect(()=>{let O=null;return a(null),e.source==="direct"&&!v&&e.contentBase64?(O=Kde(e.contentBase64,g),O||a("Failed to decode file content for preview."),s(O)):s(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>Gde?a(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&a("Text content missing from metadata."),()=>{O&&(URL.revokeObjectURL(O),s(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,g,v]);const E=async()=>{if(e.source==="vfs"){ze.info("File is already in VFS.");return}const O=CD(e);if(!O){ze.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await V$([O],"/"),ze.success(`"${e.name}" added to VFS root.`)}catch(P){console.error("Failed to add file to VFS:",P),ze.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},k=async()=>{d(!0);try{let O;if(e.source==="vfs"&&e.path){const j=await xd(e.path);O=new Blob([j],{type:g})}else{const j=CD(e);if(!j)throw new Error("Could not reconstruct file data.");O=j}const P=URL.createObjectURL(O),U=document.createElement("a");U.href=P,U.download=e.name,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(P)}catch(O){console.error("Failed to download file:",O),ze.error(`Download failed: ${O instanceof Error?O.message:String(O)}`)}finally{d(!1)}},T=()=>m(O=>!O),R=()=>_?p.jsx(_A,{className:"h-5 w-5 text-cyan-500"}):v?p.jsx(VZ,{className:"h-5 w-5 text-blue-500"}):b?p.jsx(_f,{className:"h-5 w-5 text-purple-500"}):w?p.jsx(wY,{className:"h-5 w-5 text-green-500"}):x?p.jsx(oX,{className:"h-5 w-5 text-orange-500"}):p.jsx(UZ,{className:"h-5 w-5 text-muted-foreground"}),M=()=>_?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(Ic,{className:"h-4 w-4"}),p.jsx("span",{children:i})]}):v&&e.contentText!==void 0?p.jsx(im,{lang:g==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):w&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),I=C.useMemo(()=>{let O="File";return _?O="VFS File":v?O="Text":b?O="Image":w?O="Audio":x&&(O="Video"),`${O} (${G0(e.size)})`},[_,v,b,w,x,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[R(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",G0(e.size),")"]}),_&&e.path&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(Wn,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:k,disabled:c,"aria-label":"Download file",children:c?p.jsx(Fn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(yf,{className:"h-3.5 w-3.5"})})}),p.jsx(Wn,{children:"Download File"})]})}),p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:T,"aria-label":h?"Unfold preview":"Fold preview",children:p.jsx(e1,{className:"h-3.5 w-3.5"})})}),p.jsx(Wn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(Fn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(X8,{className:"h-3.5 w-3.5"})})}),p.jsx(Wn,{children:"Add to VFS"})]})}),p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(qi,{className:"h-3.5 w-3.5"})})}),p.jsx(Wn,{children:"Remove from Prompt"})]})})]})]})]}),h?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:T,children:I}):p.jsx("div",{className:mt("p-2 max-h-80 overflow-y-auto"),children:M()})]})},K$=6048e5,Wde=864e5,ew=43200,kD=1440,TD=Symbol.for("constructDateFrom");function Bc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&TD in e?e[TD](t):e instanceof Date?new e.constructor(t):new Date(t)}function si(e,t){return Bc(t||e,e)}let Zde={};function lb(){return Zde}function ty(e,t){var o,l,c,d;const n=lb(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=si(e,t==null?void 0:t.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Ax(e,t){return ty(e,{...t,weekStartsOn:1})}function W$(e,t){const n=si(e,t==null?void 0:t.in),r=n.getFullYear(),s=Bc(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=Ax(s),a=Bc(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Ax(a);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Rx(e){const t=si(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function X1(e,...t){const n=Bc.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function AD(e,t){const n=si(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Yde(e,t,n){const[r,s]=X1(n==null?void 0:n.in,e,t),i=AD(r),a=AD(s),o=+i-Rx(i),l=+a-Rx(a);return Math.round((o-l)/Wde)}function Xde(e,t){const n=W$(e,t),r=Bc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ax(r)}function Cw(e,t){const n=+si(e)-+si(t);return n<0?-1:n>0?1:n}function Jde(e){return Bc(e,Date.now())}function Qde(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function efe(e){return!(!Qde(e)&&typeof e!="number"||isNaN(+si(e)))}function tfe(e,t,n){const[r,s]=X1(n==null?void 0:n.in,e,t),i=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return i*12+a}function nfe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function rfe(e,t){return+si(e)-+si(t)}function sfe(e,t){const n=si(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function ife(e,t){const n=si(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function afe(e,t){const n=si(e,t==null?void 0:t.in);return+sfe(n,t)==+ife(n,t)}function ofe(e,t,n){const[r,s,i]=X1(n==null?void 0:n.in,e,e,t),a=Cw(s,i),o=Math.abs(tfe(s,i));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*o);let l=Cw(s,i)===-a;afe(r)&&o===1&&Cw(r,i)===1&&(l=!1);const c=a*(o-+l);return c===0?0:c}function lfe(e,t,n){const r=rfe(e,t)/1e3;return nfe(n==null?void 0:n.roundingMethod)(r)}function cfe(e,t){const n=si(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ufe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dfe=(e,t,n)=>{let r;const s=ufe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function DC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ffe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hfe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pfe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mfe={date:DC({formats:ffe,defaultWidth:"full"}),time:DC({formats:hfe,defaultWidth:"full"}),dateTime:DC({formats:pfe,defaultWidth:"full"})},gfe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yfe=(e,t,n,r)=>gfe[e];function zg(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=e.formattingValues[o]||e.formattingValues[a]}else{const a=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[o]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const bfe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vfe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wfe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xfe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_fe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Sfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Efe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Cfe={ordinalNumber:Efe,era:zg({values:bfe,defaultWidth:"wide"}),quarter:zg({values:vfe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:zg({values:wfe,defaultWidth:"wide"}),day:zg({values:xfe,defaultWidth:"wide"}),dayPeriod:zg({values:_fe,defaultWidth:"wide",formattingValues:Sfe,defaultFormattingWidth:"wide"})};function Ug(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?Tfe(o,h=>h.test(a)):kfe(o,h=>h.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=t.slice(a.length);return{value:c,rest:d}}}function kfe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Tfe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Afe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=t.slice(s.length);return{value:a,rest:o}}}const Rfe=/^(\d+)(th|st|nd|rd)?/i,Nfe=/\d+/i,Ife={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jfe={any:[/^b/i,/^(a|c)/i]},Mfe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dfe={any:[/1/i,/2/i,/3/i,/4/i]},Ofe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pfe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ffe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lfe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$fe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bfe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zfe={ordinalNumber:Afe({matchPattern:Rfe,parsePattern:Nfe,valueCallback:e=>parseInt(e,10)}),era:Ug({matchPatterns:Ife,defaultMatchWidth:"wide",parsePatterns:jfe,defaultParseWidth:"any"}),quarter:Ug({matchPatterns:Mfe,defaultMatchWidth:"wide",parsePatterns:Dfe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ug({matchPatterns:Ofe,defaultMatchWidth:"wide",parsePatterns:Pfe,defaultParseWidth:"any"}),day:Ug({matchPatterns:Ffe,defaultMatchWidth:"wide",parsePatterns:Lfe,defaultParseWidth:"any"}),dayPeriod:Ug({matchPatterns:$fe,defaultMatchWidth:"any",parsePatterns:Bfe,defaultParseWidth:"any"})},Z$={code:"en-US",formatDistance:dfe,formatLong:mfe,formatRelative:yfe,localize:Cfe,match:zfe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ufe(e,t){const n=si(e,t==null?void 0:t.in);return Yde(n,cfe(n))+1}function qfe(e,t){const n=si(e,t==null?void 0:t.in),r=+Ax(n)-+Xde(n);return Math.round(r/K$)+1}function Y$(e,t){var d,h,m,g;const n=si(e,t==null?void 0:t.in),r=n.getFullYear(),s=lb(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,a=Bc((t==null?void 0:t.in)||e,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=ty(a,t),l=Bc((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=ty(l,t);return+n>=+o?r+1:+n>=+c?r:r-1}function Vfe(e,t){var o,l,c,d;const n=lb(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=Y$(e,t),i=Bc((t==null?void 0:t.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),ty(i,t)}function Hfe(e,t){const n=si(e,t==null?void 0:t.in),r=+ty(n,t)-+Vfe(n,t);return Math.round(r/K$)+1}function Nr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ju={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Nr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Nr(n+1,2)},d(e,t){return Nr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Nr(e.getHours()%12||12,t.length)},H(e,t){return Nr(e.getHours(),t.length)},m(e,t){return Nr(e.getMinutes(),t.length)},s(e,t){return Nr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Nr(s,t.length)}},Zh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},RD={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ju.y(e,t)},Y:function(e,t,n,r){const s=Y$(e,r),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return Nr(a,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Nr(i,t.length)},R:function(e,t){const n=W$(e);return Nr(n,t.length)},u:function(e,t){const n=e.getFullYear();return Nr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Nr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Nr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ju.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Nr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=Hfe(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Nr(s,t.length)},I:function(e,t,n){const r=qfe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Nr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ju.d(e,t)},D:function(e,t,n){const r=Ufe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Nr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Nr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Nr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Nr(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=Zh.noon:r===0?s=Zh.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=Zh.evening:r>=12?s=Zh.afternoon:r>=4?s=Zh.morning:s=Zh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ju.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ju.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Nr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Nr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ju.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ju.s(e,t)},S:function(e,t){return ju.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return ID(r);case"XXXX":case"XX":return sf(r);case"XXXXX":case"XXX":default:return sf(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return ID(r);case"xxxx":case"xx":return sf(r);case"xxxxx":case"xxx":default:return sf(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ND(r,":");case"OOOO":default:return"GMT"+sf(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ND(r,":");case"zzzz":default:return"GMT"+sf(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Nr(r,t.length)},T:function(e,t,n){return Nr(+e,t.length)}};function ND(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+t+Nr(i,2)}function ID(e,t){return e%60===0?(e>0?"-":"+")+Nr(Math.abs(e)/60,2):sf(e,t)}function sf(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Nr(Math.trunc(r/60),2),i=Nr(r%60,2);return n+s+t+i}const jD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},X$=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Gfe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return jD(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",jD(r,t)).replace("{{time}}",X$(s,t))},Kfe={p:X$,P:Gfe},Wfe=/^D+$/,Zfe=/^Y+$/,Yfe=["D","DD","YY","YYYY"];function Xfe(e){return Wfe.test(e)}function Jfe(e){return Zfe.test(e)}function Qfe(e,t,n){const r=ehe(e,t,n);if(console.warn(r),Yfe.includes(e))throw new RangeError(r)}function ehe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const the=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nhe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rhe=/^'([^]*?)'?$/,she=/''/g,ihe=/[a-zA-Z]/;function wT(e,t,n){var d,h,m,g;const r=lb(),s=r.locale??Z$,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,a=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,o=si(e,n==null?void 0:n.in);if(!efe(o))throw new RangeError("Invalid time value");let l=t.match(nhe).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=Kfe[b];return w(v,s.formatLong)}return v}).join("").match(the).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:ahe(v)};if(RD[b])return{isToken:!0,value:v};if(b.match(ihe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Jfe(b)||Xfe(b))&&Qfe(b,t,String(e));const w=RD[b[0]];return w(o,b,s.localize,c)}).join("")}function ahe(e){const t=e.match(rhe);return t?t[1].replace(she,"'"):e}function ohe(e,t,n){const r=lb(),s=(n==null?void 0:n.locale)??r.locale??Z$,i=2520,a=Cw(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a}),[l,c]=X1(n==null?void 0:n.in,...a>0?[t,e]:[e,t]),d=lfe(c,l),h=(Rx(c)-Rx(l))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,o):d<10?s.formatDistance("lessThanXSeconds",10,o):d<20?s.formatDistance("lessThanXSeconds",20,o):d<40?s.formatDistance("halfAMinute",0,o):d<60?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",1,o):m===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",m,o);if(m<45)return s.formatDistance("xMinutes",m,o);if(m<90)return s.formatDistance("aboutXHours",1,o);if(m<kD){const v=Math.round(m/60);return s.formatDistance("aboutXHours",v,o)}else{if(m<i)return s.formatDistance("xDays",1,o);if(m<ew){const v=Math.round(m/kD);return s.formatDistance("xDays",v,o)}else if(m<ew*2)return g=Math.round(m/ew),s.formatDistance("aboutXMonths",g,o)}if(g=ofe(c,l),g<12){const v=Math.round(m/ew);return s.formatDistance("xMonths",v,o)}else{const v=g%12,b=Math.trunc(g/12);return v<3?s.formatDistance("aboutXYears",b,o):v<9?s.formatDistance("overXYears",b,o):s.formatDistance("almostXYears",b+1,o)}}function J$(e,t){return ohe(e,Jde(e),t)}const fn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:s,disabled:i,variant:a="ghost",size:o="icon",className:l,"aria-label":c,...d})=>{const h=typeof t=="function";return p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:a,size:o,onClick:s,disabled:i,className:mt("h-6 w-6",l),"aria-label":c??e,...d,children:h?p.jsx(t,{className:mt("h-3.5 w-3.5",n)}):t})}),p.jsx(Wn,{side:r,children:p.jsx("p",{children:e})})]})})},MD={};function lhe(e){let t=MD[e];if(t)return t;t=MD[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Vp(e,t){typeof t!="string"&&(t=Vp.defaultChars);const n=lhe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let s="";for(let i=0,a=r.length;i<a;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){s+=n[o];continue}if((o&224)===192&&i+3<a){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const c=o<<6&1984|l&63;c<128?s+="":s+=String.fromCharCode(c),i+=3;continue}}if((o&240)===224&&i+6<a){const l=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(c&192)===128){const d=o<<12&61440|l<<6&4032|c&63;d<2048||d>=55296&&d<=57343?s+="":s+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<a){const l=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(c&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|c<<6&4032|d&63;h<65536||h>1114111?s+="":(h-=65536,s+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}s+=""}return s})}Vp.defaultChars=";/?:@&=+$,#";Vp.componentChars="";const DD={};function che(e){let t=DD[e];if(t)return t;t=DD[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function cb(e,t,n){typeof t!="string"&&(n=t,t=cb.defaultChars),typeof n>"u"&&(n=!0);const r=che(t);let s="";for(let i=0,a=e.length;i<a;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){s+=e.slice(i,i+3),i+=2;continue}if(o<128){s+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<a){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){s+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(e[i])}return s}cb.defaultChars=";/?:@&=+$,-_.!~*'()#";cb.componentChars="-_.!~*'()";function BR(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Nx(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const uhe=/^([a-z0-9.+-]+:)/i,dhe=/:[0-9]*$/,fhe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hhe=["<",">",'"',"`"," ","\r",`
`,"	"],phe=["{","}","|","\\","^","`"].concat(hhe),mhe=["'"].concat(phe),OD=["%","/","?",";","#"].concat(mhe),PD=["/","?","#"],ghe=255,FD=/^[+a-z0-9A-Z_-]{0,63}$/,yhe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,LD={javascript:!0,"javascript:":!0},$D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function zR(e,t){if(e&&e instanceof Nx)return e;const n=new Nx;return n.parse(e,t),n}Nx.prototype.parse=function(e,t){let n,r,s,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=fhe.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let a=uhe.exec(i);if(a&&(a=a[0],n=a.toLowerCase(),this.protocol=a,i=i.substr(a.length)),(t||a||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=i.substr(0,2)==="//",s&&!(a&&LD[a])&&(i=i.substr(2),this.slashes=!0)),!LD[a]&&(s||a&&!$D[a])){let c=-1;for(let v=0;v<PD.length;v++)r=i.indexOf(PD[v]),r!==-1&&(c===-1||r<c)&&(c=r);let d,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),c=-1;for(let v=0;v<OD.length;v++)r=i.indexOf(OD[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const m=i.slice(0,c);i=i.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,w=v.length;b<w;b++){const x=v[b];if(x&&!x.match(FD)){let _="";for(let E=0,k=x.length;E<k;E++)x.charCodeAt(E)>127?_+="x":_+=x[E];if(!_.match(FD)){const E=v.slice(0,b),k=v.slice(b+1),T=x.match(yhe);T&&(E.push(T[1]),k.unshift(T[2])),k.length&&(i=k.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>ghe&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),$D[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Nx.prototype.parseHost=function(e){let t=dhe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const bhe=Object.freeze(Object.defineProperty({__proto__:null,decode:Vp,encode:cb,format:BR,parse:zR},Symbol.toStringTag,{value:"Module"})),Q$=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,eB=/[\0-\x1F\x7F-\x9F]/,vhe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,UR=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,tB=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,nB=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,whe=Object.freeze(Object.defineProperty({__proto__:null,Any:Q$,Cc:eB,Cf:vhe,P:UR,S:tB,Z:nB},Symbol.toStringTag,{value:"Module"})),xhe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),_he=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var OC;const She=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Ehe=(OC=String.fromCodePoint)!==null&&OC!==void 0?OC:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Che(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=She.get(e))!==null&&t!==void 0?t:e}var Js;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Js||(Js={}));const khe=32;var Bu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Bu||(Bu={}));function xT(e){return e>=Js.ZERO&&e<=Js.NINE}function The(e){return e>=Js.UPPER_A&&e<=Js.UPPER_F||e>=Js.LOWER_A&&e<=Js.LOWER_F}function Ahe(e){return e>=Js.UPPER_A&&e<=Js.UPPER_Z||e>=Js.LOWER_A&&e<=Js.LOWER_Z||xT(e)}function Rhe(e){return e===Js.EQUALS||Ahe(e)}var Ws;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ws||(Ws={}));var Fu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Fu||(Fu={}));class Nhe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ws.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Fu.Strict}startEntity(t){this.decodeMode=t,this.state=Ws.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ws.EntityStart:return t.charCodeAt(n)===Js.NUM?(this.state=Ws.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ws.NamedEntity,this.stateNamedEntity(t,n));case Ws.NumericStart:return this.stateNumericStart(t,n);case Ws.NumericDecimal:return this.stateNumericDecimal(t,n);case Ws.NumericHex:return this.stateNumericHex(t,n);case Ws.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|khe)===Js.LOWER_X?(this.state=Ws.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ws.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const i=r-n;this.result=this.result*Math.pow(s,i)+parseInt(t.substr(n,i),s),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(xT(s)||The(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(xT(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Js.SEMI)this.consumed+=1;else if(this.decodeMode===Fu.Strict)return 0;return this.emitCodePoint(Che(this.result),this.consumed),this.errors&&(t!==Js.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],i=(s&Bu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const a=t.charCodeAt(n);if(this.treeIndex=Ihe(r,s,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return this.result===0||this.decodeMode===Fu.Attribute&&(i===0||Rhe(a))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],i=(s&Bu.VALUE_LENGTH)>>14,i!==0){if(a===Js.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Fu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&Bu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~Bu.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case Ws.NamedEntity:return this.result!==0&&(this.decodeMode!==Fu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ws.NumericDecimal:return this.emitNumericEntity(0,2);case Ws.NumericHex:return this.emitNumericEntity(0,3);case Ws.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ws.EntityStart:return 0}}}function rB(e){let t="";const n=new Nhe(e,r=>t+=Ehe(r));return function(s,i){let a=0,o=0;for(;(o=s.indexOf("&",o))>=0;){t+=s.slice(a,o),n.startEntity(i);const c=n.write(s,o+1);if(c<0){a=o+n.end();break}a=o+c,o=c===0?a+1:a}const l=t+s.slice(a);return t="",l}}function Ihe(e,t,n,r){const s=(t&Bu.BRANCH_LENGTH)>>7,i=t&Bu.JUMP_TABLE;if(s===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=s?-1:e[n+l]-1}let a=n,o=a+s-1;for(;a<=o;){const l=a+o>>>1,c=e[l];if(c<r)a=l+1;else if(c>r)o=l-1;else return e[l+s]}return-1}const jhe=rB(xhe);rB(_he);function sB(e,t=Fu.Legacy){return jhe(e,t)}function Mhe(e){return Object.prototype.toString.call(e)}function qR(e){return Mhe(e)==="[object String]"}const Dhe=Object.prototype.hasOwnProperty;function Ohe(e,t){return Dhe.call(e,t)}function J1(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function iB(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function VR(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Ix(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const aB=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Phe=/&([a-z#][a-z0-9]{1,31});/gi,Fhe=new RegExp(aB.source+"|"+Phe.source,"gi"),Lhe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function $he(e,t){if(t.charCodeAt(0)===35&&Lhe.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return VR(r)?Ix(r):e}const n=sB(e);return n!==e?n:e}function Bhe(e){return e.indexOf("\\")<0?e:e.replace(aB,"$1")}function Hp(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Fhe,function(t,n,r){return n||$he(t,r)})}const zhe=/[&<>"]/,Uhe=/[&<>"]/g,qhe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Vhe(e){return qhe[e]}function sd(e){return zhe.test(e)?e.replace(Uhe,Vhe):e}const Hhe=/[.?*+^$[\]\\(){}|-]/g;function Ghe(e){return e.replace(Hhe,"\\$&")}function Kr(e){switch(e){case 9:case 32:return!0}return!1}function ny(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ry(e){return UR.test(e)||tB.test(e)}function sy(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Q1(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Khe={mdurl:bhe,ucmicro:whe},Whe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:iB,assign:J1,escapeHtml:sd,escapeRE:Ghe,fromCodePoint:Ix,has:Ohe,isMdAsciiPunct:sy,isPunctChar:ry,isSpace:Kr,isString:qR,isValidEntityCode:VR,isWhiteSpace:ny,lib:Khe,normalizeReference:Q1,unescapeAll:Hp,unescapeMd:Bhe},Symbol.toStringTag,{value:"Module"}));function Zhe(e,t,n){let r,s,i,a;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){s=!0;break}if(a=e.pos,e.md.inline.skipToken(e),i===91){if(a===e.pos-1)r++;else if(n)return e.pos=l,-1}}let c=-1;return s&&(c=e.pos),e.pos=l,c}function Yhe(e,t,n){let r,s=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<n;){if(r=e.charCodeAt(s),r===10||r===60)return i;if(r===62)return i.pos=s+1,i.str=Hp(e.slice(t+1,s)),i.ok=!0,i;if(r===92&&s+1<n){s+=2;continue}s++}return i}let a=0;for(;s<n&&(r=e.charCodeAt(s),!(r===32||r<32||r===127));){if(r===92&&s+1<n){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(r===40&&(a++,a>32))return i;if(r===41){if(a===0)break;a--}s++}return t===s||a!==0||(i.str=Hp(e.slice(t,s)),i.pos=s,i.ok=!0),i}function Xhe(e,t,n,r){let s,i=t;const a={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)a.str=r.str,a.marker=r.marker;else{if(i>=n)return a;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return a;t++,i++,o===40&&(o=41),a.marker=o}for(;i<n;){if(s=e.charCodeAt(i),s===a.marker)return a.pos=i+1,a.str+=Hp(e.slice(t,i)),a.ok=!0,a;if(s===40&&a.marker===41)return a;s===92&&i+1<n&&i++,i++}return a.can_continue=!0,a.str+=Hp(e.slice(t,i)),a}const Jhe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Yhe,parseLinkLabel:Zhe,parseLinkTitle:Xhe},Symbol.toStringTag,{value:"Module"})),Ll={};Ll.code_inline=function(e,t,n,r,s){const i=e[t];return"<code"+s.renderAttrs(i)+">"+sd(i.content)+"</code>"};Ll.code_block=function(e,t,n,r,s){const i=e[t];return"<pre"+s.renderAttrs(i)+"><code>"+sd(e[t].content)+`</code></pre>
`};Ll.fence=function(e,t,n,r,s){const i=e[t],a=i.info?Hp(i.info).trim():"";let o="",l="";if(a){const d=a.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,o,l)||sd(i.content):c=sd(i.content),c.indexOf("<pre")===0)return c+`
`;if(a){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const m={attrs:h};return`<pre><code${s.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${s.renderAttrs(i)}>${c}</code></pre>
`};Ll.image=function(e,t,n,r,s){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=s.renderInlineAsText(i.children,n,r),s.renderToken(e,t,n)};Ll.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Ll.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Ll.text=function(e,t){return sd(e[t].content)};Ll.html_block=function(e,t){return e[t].content};Ll.html_inline=function(e,t){return e[t].content};function vm(){this.rules=J1({},Ll)}vm.prototype.renderAttrs=function(t){let n,r,s;if(!t.attrs)return"";for(s="",n=0,r=t.attrs.length;n<r;n++)s+=" "+sd(t.attrs[n][0])+'="'+sd(t.attrs[n][1])+'"';return s};vm.prototype.renderToken=function(t,n,r){const s=t[n];let i="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(s.nesting===-1?"</":"<")+s.tag,i+=this.renderAttrs(s),s.nesting===0&&r.xhtmlOut&&(i+=" /");let a=!1;if(s.block&&(a=!0,s.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===s.tag)&&(a=!1)}return i+=a?`>
`:">",i};vm.prototype.renderInline=function(e,t,n){let r="";const s=this.rules;for(let i=0,a=e.length;i<a;i++){const o=e[i].type;typeof s[o]<"u"?r+=s[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};vm.prototype.renderInlineAsText=function(e,t,n){let r="";for(let s=0,i=e.length;s<i;s++)switch(e[s].type){case"text":r+=e[s].content;break;case"image":r+=this.renderInlineAsText(e[s].children,t,n);break;case"html_inline":case"html_block":r+=e[s].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};vm.prototype.render=function(e,t,n){let r="";const s=this.rules;for(let i=0,a=e.length;i<a;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof s[o]<"u"?r+=s[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function da(){this.__rules__=[],this.__cache__=null}da.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};da.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};da.prototype.at=function(e,t,n){const r=this.__find__(e),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=s.alt||[],this.__cache__=null};da.prototype.before=function(e,t,n,r){const s=this.__find__(e),i=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};da.prototype.after=function(e,t,n,r){const s=this.__find__(e),i=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};da.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};da.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!0,n.push(r)},this),this.__cache__=null,n};da.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};da.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!1,n.push(r)},this),this.__cache__=null,n};da.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Go(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Go.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,s=n.length;r<s;r++)if(n[r][0]===t)return r;return-1};Go.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Go.prototype.attrSet=function(t,n){const r=this.attrIndex(t),s=[t,n];r<0?this.attrPush(s):this.attrs[r]=s};Go.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Go.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function oB(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}oB.prototype.Token=Go;const Qhe=/\r\n?|\n/g,epe=/\0/g;function tpe(e){let t;t=e.src.replace(Qhe,`
`),t=t.replace(epe,""),e.src=t}function npe(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function rpe(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const s=t[n];s.type==="inline"&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}function spe(e){return/^<a[>\s]/i.test(e)}function ipe(e){return/^<\/a\s*>/i.test(e)}function ape(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let s=t[n].children,i=0;for(let a=s.length-1;a>=0;a--){const o=s[a];if(o.type==="link_close"){for(a--;s[a].level!==o.level&&s[a].type!=="link_open";)a--;continue}if(o.type==="html_inline"&&(spe(o.content)&&i>0&&i--,ipe(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let c=e.md.linkify.match(l);const d=[];let h=o.level,m=0;c.length>0&&c[0].index===0&&a>0&&s[a-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let w=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(w)?w=e.md.normalizeLinkText("mailto:"+w).replace(/^mailto:/,""):w=e.md.normalizeLinkText(w):w=e.md.normalizeLinkText("http://"+w).replace(/^http:\/\//,"");const x=c[g].index;if(x>m){const T=new e.Token("text","",0);T.content=l.slice(m,x),T.level=h,d.push(T)}const _=new e.Token("link_open","a",1);_.attrs=[["href",b]],_.level=h++,_.markup="linkify",_.info="auto",d.push(_);const E=new e.Token("text","",0);E.content=w,E.level=h,d.push(E);const k=new e.Token("link_close","a",-1);k.level=--h,k.markup="linkify",k.info="auto",d.push(k),m=c[g].lastIndex}if(m<l.length){const g=new e.Token("text","",0);g.content=l.slice(m),g.level=h,d.push(g)}t[n].children=s=iB(s,a,d)}}}}const lB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,ope=/\((c|tm|r)\)/i,lpe=/\((c|tm|r)\)/ig,cpe={c:"",r:"",tm:""};function upe(e,t){return cpe[t.toLowerCase()]}function dpe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(lpe,upe)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function fpe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&lB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function hpe(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(ope.test(e.tokens[t].content)&&dpe(e.tokens[t].children),lB.test(e.tokens[t].content)&&fpe(e.tokens[t].children))}const ppe=/['"]/,BD=/['"]/g,zD="";function tw(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function mpe(e,t){let n;const r=[];for(let s=0;s<e.length;s++){const i=e[s],a=e[s].level;for(n=r.length-1;n>=0&&!(r[n].level<=a);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,c=o.length;e:for(;l<c;){BD.lastIndex=l;const d=BD.exec(o);if(!d)break;let h=!0,m=!0;l=d.index+1;const g=d[0]==="'";let v=32;if(d.index-1>=0)v=o.charCodeAt(d.index-1);else for(n=s-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<c)b=o.charCodeAt(l);else for(n=s+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const w=sy(v)||ry(String.fromCharCode(v)),x=sy(b)||ry(String.fromCharCode(b)),_=ny(v),E=ny(b);if(E?h=!1:x&&(_||w||(h=!1)),_?m=!1:w&&(E||x||(m=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=w,m=x),!h&&!m){g&&(i.content=tw(i.content,d.index,zD));continue}if(m)for(n=r.length-1;n>=0;n--){let k=r[n];if(r[n].level<a)break;if(k.single===g&&r[n].level===a){k=r[n];let T,R;g?(T=t.md.options.quotes[2],R=t.md.options.quotes[3]):(T=t.md.options.quotes[0],R=t.md.options.quotes[1]),i.content=tw(i.content,d.index,R),e[k.token].content=tw(e[k.token].content,k.pos,T),l+=R.length-1,k.token===s&&(l+=T.length-1),o=i.content,c=o.length,r.length=n;continue e}}h?r.push({token:s,pos:d.index,single:g,level:a}):m&&g&&(i.content=tw(i.content,d.index,zD))}}}function gpe(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!ppe.test(e.tokens[t].content)||mpe(e.tokens[t].children,e)}function ype(e){let t,n;const r=e.tokens,s=r.length;for(let i=0;i<s;i++){if(r[i].type!=="inline")continue;const a=r[i].children,o=a.length;for(t=0;t<o;t++)a[t].type==="text_special"&&(a[t].type="text");for(t=n=0;t<o;t++)a[t].type==="text"&&t+1<o&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}}const PC=[["normalize",tpe],["block",npe],["inline",rpe],["linkify",ape],["replacements",hpe],["smartquotes",gpe],["text_join",ype]];function HR(){this.ruler=new da;for(let e=0;e<PC.length;e++)this.ruler.push(PC[e][0],PC[e][1])}HR.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};HR.prototype.State=oB;function $l(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let i=0,a=0,o=0,l=0,c=s.length,d=!1;a<c;a++){const h=s.charCodeAt(a);if(!d)if(Kr(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||a===c-1)&&(h!==10&&a++,this.bMarks.push(i),this.eMarks.push(a),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=a+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}$l.prototype.push=function(e,t,n){const r=new Go(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};$l.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};$l.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};$l.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Kr(r))break}return t};$l.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Kr(this.src.charCodeAt(--t)))return t+1;return t};$l.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};$l.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};$l.prototype.getLines=function(t,n,r,s){if(t>=n)return"";const i=new Array(n-t);for(let a=0,o=t;o<n;o++,a++){let l=0;const c=this.bMarks[o];let d=c,h;for(o+1<n||s?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const m=this.src.charCodeAt(d);if(Kr(m))m===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-c<this.tShift[o])l++;else break;d++}l>r?i[a]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[a]=this.src.slice(d,h)}return i.join("")};$l.prototype.Token=Go;const bpe=65536;function FC(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function UD(e){const t=[],n=e.length;let r=0,s=e.charCodeAt(r),i=!1,a=0,o="";for(;r<n;)s===124&&(i?(o+=e.substring(a,r-1),a=r):(t.push(o+e.substring(a,r)),o="",a=r+1)),i=s===92,r++,s=e.charCodeAt(r);return t.push(o+e.substring(a)),t}function vpe(e,t,n,r){if(t+2>n)return!1;let s=t+1;if(e.sCount[s]<e.blkIndent||e.sCount[s]-e.blkIndent>=4)return!1;let i=e.bMarks[s]+e.tShift[s];if(i>=e.eMarks[s])return!1;const a=e.src.charCodeAt(i++);if(a!==124&&a!==45&&a!==58||i>=e.eMarks[s])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!Kr(o)||a===45&&Kr(o))return!1;for(;i<e.eMarks[s];){const k=e.src.charCodeAt(i);if(k!==124&&k!==45&&k!==58&&!Kr(k))return!1;i++}let l=FC(e,t+1),c=l.split("|");const d=[];for(let k=0;k<c.length;k++){const T=c[k].trim();if(!T){if(k===0||k===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(T))return!1;T.charCodeAt(T.length-1)===58?d.push(T.charCodeAt(0)===58?"center":"right"):T.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=FC(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=UD(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==d.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const w=e.push("thead_open","thead",1);w.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let k=0;k<c.length;k++){const T=e.push("th_open","th",1);d[k]&&(T.attrs=[["style","text-align:"+d[k]]]);const R=e.push("inline","",0);R.content=c[k].trim(),R.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let _,E=0;for(s=t+2;s<n&&!(e.sCount[s]<e.blkIndent);s++){let k=!1;for(let R=0,M=g.length;R<M;R++)if(g[R](e,s,n,!0)){k=!0;break}if(k||(l=FC(e,s).trim(),!l)||e.sCount[s]-e.blkIndent>=4||(c=UD(l),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>bpe))break;if(s===t+2){const R=e.push("tbody_open","tbody",1);R.map=_=[t+2,0]}const T=e.push("tr_open","tr",1);T.map=[s,s+1];for(let R=0;R<h;R++){const M=e.push("td_open","td",1);d[R]&&(M.attrs=[["style","text-align:"+d[R]]]);const I=e.push("inline","",0);I.content=c[R]?c[R].trim():"",I.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return _&&(e.push("tbody_close","tbody",-1),_[1]=s),e.push("table_close","table",-1),b[1]=s,e.parentType=m,e.line=s,!0}function wpe(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,s=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,s=r;continue}break}e.line=s;const i=e.push("code_block","code",0);return i.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function xpe(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||s+3>i)return!1;const a=e.src.charCodeAt(s);if(a!==126&&a!==96)return!1;let o=s;s=e.skipChars(s,a);let l=s-o;if(l<3)return!1;const c=e.src.slice(o,s),d=e.src.slice(s,i);if(a===96&&d.indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(s=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],s<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(s)===a&&!(e.sCount[h]-e.blkIndent>=4)&&(s=e.skipChars(s,a),!(s-o<l)&&(s=e.skipSpaces(s),!(s<i)))){m=!0;break}l=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=d,g.content=e.getLines(t+1,h,l,!0),g.markup=c,g.map=[t,e.line],!0}function _pe(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const a=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==62)return!1;if(r)return!0;const o=[],l=[],c=[],d=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(s=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],s>=i)break;if(e.src.charCodeAt(s++)===62&&!E){let T=e.sCount[v]+1,R,M;e.src.charCodeAt(s)===32?(s++,T++,M=!1,R=!0):e.src.charCodeAt(s)===9?(R=!0,(e.bsCount[v]+T)%4===3?(s++,T++,M=!1):M=!0):R=!1;let I=T;for(o.push(e.bMarks[v]),e.bMarks[v]=s;s<i;){const O=e.src.charCodeAt(s);if(Kr(O))O===9?I+=4-(I+e.bsCount[v]+(M?1:0))%4:I++;else break;s++}g=s>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(R?1:0),c.push(e.sCount[v]),e.sCount[v]=I-T,d.push(e.tShift[v]),e.tShift[v]=s-e.bMarks[v];continue}if(g)break;let k=!1;for(let T=0,R=h.length;T<R;T++)if(h[T](e,v,n,!0)){k=!0;break}if(k){e.lineMax=v,e.blkIndent!==0&&(o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const w=e.push("blockquote_open","blockquote",1);w.markup=">";const x=[t,0];w.map=x,e.md.block.tokenize(e,t,v);const _=e.push("blockquote_close","blockquote",-1);_.markup=">",e.lineMax=a,e.parentType=m,x[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function Spe(e,t,n,r){const s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(i++);if(a!==42&&a!==45&&a!==95)return!1;let o=1;for(;i<s;){const c=e.src.charCodeAt(i++);if(c!==a&&!Kr(c))return!1;c===a&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(a)),!0}function qD(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(r++);if(s!==42&&s!==45&&s!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Kr(i))return-1}return r}function VD(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let s=n;if(s+1>=r)return-1;let i=e.src.charCodeAt(s++);if(i<48||i>57)return-1;for(;;){if(s>=r)return-1;if(i=e.src.charCodeAt(s++),i>=48&&i<=57){if(s-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return s<r&&(i=e.src.charCodeAt(s),!Kr(i))?-1:s}function Epe(e,t){const n=e.level+2;for(let r=t+2,s=e.tokens.length-2;r<s;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Cpe(e,t,n,r){let s,i,a,o,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,m,g;if((g=VD(e,l))>=0){if(h=!0,a=e.bMarks[l]+e.tShift[l],m=Number(e.src.slice(a,g-1)),d&&m!==1)return!1}else if((g=qD(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(g)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),m!==1&&(o.attrs=[["start",m]])):o=e.push("bullet_list_open","ul",1);const w=[l,0];o.map=w,o.markup=String.fromCharCode(v);let x=!1;const _=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=g,s=e.eMarks[l];const k=e.sCount[l]+g-(e.bMarks[l]+e.tShift[l]);let T=k;for(;i<s;){const re=e.src.charCodeAt(i);if(re===9)T+=4-(T+e.bsCount[l])%4;else if(re===32)T++;else break;i++}const R=i;let M;R>=s?M=1:M=T-k,M>4&&(M=1);const I=k+M;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(v);const O=[l,0];o.map=O,h&&(o.info=e.src.slice(a,g-1));const P=e.tight,U=e.tShift[l],j=e.sCount[l],V=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=I,e.tight=!0,e.tShift[l]=R-e.bMarks[l],e.sCount[l]=T,R>=s&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(c=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=V,e.tShift[l]=U,e.sCount[l]=j,e.tight=P,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(v),l=e.line,O[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let $=!1;for(let re=0,J=_.length;re<J;re++)if(_[re](e,l,n,!0)){$=!0;break}if($)break;if(h){if(g=VD(e,l),g<0)break;a=e.bMarks[l]+e.tShift[l]}else if(g=qD(e,l),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(v),w[1]=l,e.line=l,e.parentType=E,c&&Epe(e,b),!0}function kpe(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],a=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==91)return!1;function o(_){const E=e.lineMax;if(_>=E||e.isEmpty(_))return null;let k=!1;if(e.sCount[_]-e.blkIndent>3&&(k=!0),e.sCount[_]<0&&(k=!0),!k){const M=e.md.block.ruler.getRules("reference"),I=e.parentType;e.parentType="reference";let O=!1;for(let P=0,U=M.length;P<U;P++)if(M[P](e,_,E,!0)){O=!0;break}if(e.parentType=I,O)return null}const T=e.bMarks[_]+e.tShift[_],R=e.eMarks[_];return e.src.slice(T,R+1)}let l=e.src.slice(s,i+1);i=l.length;let c=-1;for(s=1;s<i;s++){const _=l.charCodeAt(s);if(_===91)return!1;if(_===93){c=s;break}else if(_===10){const E=o(a);E!==null&&(l+=E,i=l.length,a++)}else if(_===92&&(s++,s<i&&l.charCodeAt(s)===10)){const E=o(a);E!==null&&(l+=E,i=l.length,a++)}}if(c<0||l.charCodeAt(c+1)!==58)return!1;for(s=c+2;s<i;s++){const _=l.charCodeAt(s);if(_===10){const E=o(a);E!==null&&(l+=E,i=l.length,a++)}else if(!Kr(_))break}const d=e.md.helpers.parseLinkDestination(l,s,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;s=d.pos;const m=s,g=a,v=s;for(;s<i;s++){const _=l.charCodeAt(s);if(_===10){const E=o(a);E!==null&&(l+=E,i=l.length,a++)}else if(!Kr(_))break}let b=e.md.helpers.parseLinkTitle(l,s,i);for(;b.can_continue;){const _=o(a);if(_===null)break;l+=_,s=i,i=l.length,a++,b=e.md.helpers.parseLinkTitle(l,s,i,b)}let w;for(s<i&&v!==s&&b.ok?(w=b.str,s=b.pos):(w="",s=m,a=g);s<i;){const _=l.charCodeAt(s);if(!Kr(_))break;s++}if(s<i&&l.charCodeAt(s)!==10&&w)for(w="",s=m,a=g;s<i;){const _=l.charCodeAt(s);if(!Kr(_))break;s++}if(s<i&&l.charCodeAt(s)!==10)return!1;const x=Q1(l.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:w,href:h}),e.line=a),!0):!1}const Tpe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ape="[a-zA-Z_:][a-zA-Z0-9:._-]*",Rpe="[^\"'=<>`\\x00-\\x20]+",Npe="'[^']*'",Ipe='"[^"]*"',jpe="(?:"+Rpe+"|"+Npe+"|"+Ipe+")",Mpe="(?:\\s+"+Ape+"(?:\\s*=\\s*"+jpe+")?)",cB="<[A-Za-z][A-Za-z0-9\\-]*"+Mpe+"*\\s*\\/?>",uB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Dpe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Ope="<[?][\\s\\S]*?[?]>",Ppe="<![A-Za-z][^>]*>",Fpe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Lpe=new RegExp("^(?:"+cB+"|"+uB+"|"+Dpe+"|"+Ope+"|"+Ppe+"|"+Fpe+")"),$pe=new RegExp("^(?:"+cB+"|"+uB+")"),Yh=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Tpe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp($pe.source+"\\s*$"),/^$/,!1]];function Bpe(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(s)!==60)return!1;let a=e.src.slice(s,i),o=0;for(;o<Yh.length&&!Yh[o][0].test(a);o++);if(o===Yh.length)return!1;if(r)return Yh[o][2];let l=t+1;if(!Yh[o][1].test(a)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(s=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],a=e.src.slice(s,i),Yh[o][1].test(a)){a.length!==0&&l++;break}}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0}function zpe(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.src.charCodeAt(s);if(a!==35||s>=i)return!1;let o=1;for(a=e.src.charCodeAt(++s);a===35&&s<i&&o<=6;)o++,a=e.src.charCodeAt(++s);if(o>6||s<i&&!Kr(a))return!1;if(r)return!0;i=e.skipSpacesBack(i,s);const l=e.skipCharsBack(i,35,s);l>s&&Kr(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const c=e.push("heading_open","h"+String(o),1);c.markup="########".slice(0,o),c.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(s,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function Upe(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const s=e.parentType;e.parentType="paragraph";let i=0,a,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let g=e.bMarks[o]+e.tShift[o];const v=e.eMarks[o];if(g<v&&(a=e.src.charCodeAt(g),(a===45||a===61)&&(g=e.skipChars(g,a),g=e.skipSpaces(g),g>=v))){i=a===61?1:2;break}}if(e.sCount[o]<0)continue;let m=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,o,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(a),c.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(a),e.parentType=s,!0}function qpe(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),s=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){c=!0;break}if(c)break}const a=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=a,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=s,!0}const nw=[["table",vpe,["paragraph","reference"]],["code",wpe],["fence",xpe,["paragraph","reference","blockquote","list"]],["blockquote",_pe,["paragraph","reference","blockquote","list"]],["hr",Spe,["paragraph","reference","blockquote","list"]],["list",Cpe,["paragraph","reference","blockquote"]],["reference",kpe],["html_block",Bpe,["paragraph","reference","blockquote"]],["heading",zpe,["paragraph","reference","blockquote"]],["lheading",Upe],["paragraph",qpe]];function e_(){this.ruler=new da;for(let e=0;e<nw.length;e++)this.ruler.push(nw[e][0],nw[e][1],{alt:(nw[e][2]||[]).slice()})}e_.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),s=r.length,i=e.md.options.maxNesting;let a=t,o=!1;for(;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n||e.sCount[a]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let c=!1;for(let d=0;d<s;d++)if(c=r[d](e,a,n,!1),c){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),a=e.line,a<n&&e.isEmpty(a)&&(o=!0,a++,e.line=a)}};e_.prototype.parse=function(e,t,n,r){if(!e)return;const s=new this.State(e,t,n,r);this.tokenize(s,s.line,s.lineMax)};e_.prototype.State=$l;function ub(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ub.prototype.pushPending=function(){const e=new Go("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};ub.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Go(e,t,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r};ub.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),s=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const a=i-e,o=i<n?this.src.charCodeAt(i):32,l=sy(s)||ry(String.fromCharCode(s)),c=sy(o)||ry(String.fromCharCode(o)),d=ny(s),h=ny(o),m=!h&&(!c||d||l),g=!d&&(!l||h||c);return{can_open:m&&(t||!g||l),can_close:g&&(t||!m||c),length:a}};ub.prototype.Token=Go;function Vpe(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Hpe(e,t){let n=e.pos;for(;n<e.posMax&&!Vpe(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Gpe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Kpe(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const s=e.pending.match(Gpe);if(!s)return!1;const i=s[1],a=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!a)return!1;let o=a.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",l]],c.markup="linkify",c.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function Wpe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,s=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<s&&Kr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const GR=[];for(let e=0;e<256;e++)GR.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){GR[e.charCodeAt(0)]=1});function Zpe(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let s=e.src.charCodeAt(n);if(s===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(s=e.src.charCodeAt(n),!!Kr(s));)n++;return e.pos=n,!0}let i=e.src[n];if(s>=55296&&s<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const a="\\"+i;if(!t){const o=e.push("text_special","",0);s<256&&GR[s]!==0?o.content=i:o.content=a,o.markup=a,o.info="escape"}return e.pos=n+1,!0}function Ype(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const s=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const a=e.src.slice(s,n),o=a.length;if(e.backticksScanned&&(e.backticks[o]||0)<=s)return t||(e.pending+=a),e.pos+=o,!0;let l=n,c;for(;(c=e.src.indexOf("`",l))!==-1;){for(l=c+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-c;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=a,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=c}return e.backticksScanned=!0,t||(e.pending+=a),e.pos+=o,!0}function Xpe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const s=e.scanDelims(e.pos,!0);let i=s.length;const a=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=a,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0}function HD(e,t){let n;const r=[],s=t.length;for(let i=0;i<s;i++){const a=t[i];if(a.marker!==126||a.end===-1)continue;const o=t[a.end];n=e.tokens[a.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let a=i+1;for(;a<e.tokens.length&&e.tokens[a].type==="s_close";)a++;a--,i!==a&&(n=e.tokens[a],e.tokens[a]=e.tokens[i],e.tokens[i]=n)}}function Jpe(e){const t=e.tokens_meta,n=e.tokens_meta.length;HD(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&HD(e,t[r].delimiters)}const dB={tokenize:Xpe,postProcess:Jpe};function Qpe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const s=e.scanDelims(e.pos,r===42);for(let i=0;i<s.length;i++){const a=e.push("text","",0);a.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:s.length,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return e.pos+=s.length,!0}function GD(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const s=t[r];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const i=t[s.end],a=r>0&&t[r-1].end===s.end+1&&t[r-1].marker===s.marker&&t[r-1].token===s.token-1&&t[s.end+1].token===i.token+1,o=String.fromCharCode(s.marker),l=e.tokens[s.token];l.type=a?"strong_open":"em_open",l.tag=a?"strong":"em",l.nesting=1,l.markup=a?o+o:o,l.content="";const c=e.tokens[i.token];c.type=a?"strong_close":"em_close",c.tag=a?"strong":"em",c.nesting=-1,c.markup=a?o+o:o,c.content="",a&&(e.tokens[t[r-1].token].content="",e.tokens[t[s.end+1].token].content="",r--)}}function eme(e){const t=e.tokens_meta,n=e.tokens_meta.length;GD(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&GD(e,t[r].delimiters)}const fB={tokenize:Qpe,postProcess:eme};function tme(e,t){let n,r,s,i,a="",o="",l=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Kr(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,s=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),s.ok){for(a=e.md.normalizeLink(s.str),e.md.validateLink(a)?v=s.pos:a="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!Kr(n)&&n!==10));v++);if(s=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&s.ok)for(o=s.str,v=s.pos;v<h&&(n=e.src.charCodeAt(v),!(!Kr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=g+1):v=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[Q1(r)],!i)return e.pos=d,!1;a=i.href,o=i.title}if(!t){e.pos=m,e.posMax=g;const b=e.push("link_open","a",1),w=[["href",a]];b.attrs=w,o&&w.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function nme(e,t){let n,r,s,i,a,o,l,c,d="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Kr(n)&&n!==10));i++);if(i>=m)return!1;for(c=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),c=i;i<m&&(n=e.src.charCodeAt(i),!(!Kr(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&c!==i&&o.ok)for(l=o.str,i=o.pos;i<m&&(n=e.src.charCodeAt(i),!(!Kr(n)&&n!==10));i++);else l="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?s=e.src.slice(c,i++):i=v+1):i=v+1,s||(s=e.src.slice(g,v)),a=e.env.references[Q1(s)],!a)return e.pos=h,!1;d=a.href,l=a.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const w=e.push("image","img",0),x=[["src",d],["alt",""]];w.attrs=x,w.children=b,w.content=r,l&&x.push(["title",l])}return e.pos=i,e.posMax=m,!0}const rme=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,sme=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function ime(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,s=e.posMax;for(;;){if(++n>=s)return!1;const a=e.src.charCodeAt(n);if(a===60)return!1;if(a===62)break}const i=e.src.slice(r+1,n);if(sme.test(i)){const a=e.md.normalizeLink(i);if(!e.md.validateLink(a))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(rme.test(i)){const a=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(a))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function ame(e){return/^<a[>\s]/i.test(e)}function ome(e){return/^<\/a\s*>/i.test(e)}function lme(e){const t=e|32;return t>=97&&t<=122}function cme(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const s=e.src.charCodeAt(r+1);if(s!==33&&s!==63&&s!==47&&!lme(s))return!1;const i=e.src.slice(r).match(Lpe);if(!i)return!1;if(!t){const a=e.push("html_inline","",0);a.content=i[0],ame(a.content)&&e.linkLevel++,ome(a.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const ume=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,dme=/^&([a-z][a-z0-9]{1,31});/i;function fme(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(ume);if(i){if(!t){const a=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=VR(a)?Ix(a):Ix(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(dme);if(i){const a=sB(i[0]);if(a!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=a,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function KD(e){const t={},n=e.length;if(!n)return;let r=0,s=-2;const i=[];for(let a=0;a<n;a++){const o=e[a];if(i.push(0),(e[r].marker!==o.marker||s!==o.token-1)&&(r=a),s=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let c=r-i[r]-1,d=c;for(;c>l;c-=i[c]+1){const h=e[c];if(h.marker===o.marker&&h.open&&h.end<0){let m=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(m=!0),!m){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[a]=a-c+g,i[c]=g,o.open=!1,h.end=a,h.close=!1,d=-1,s=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function hme(e){const t=e.tokens_meta,n=e.tokens_meta.length;KD(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&KD(t[r].delimiters)}function pme(e){let t,n,r=0;const s=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)s[t].nesting<0&&r--,s[t].level=r,s[t].nesting>0&&r++,s[t].type==="text"&&t+1<i&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}const LC=[["text",Hpe],["linkify",Kpe],["newline",Wpe],["escape",Zpe],["backticks",Ype],["strikethrough",dB.tokenize],["emphasis",fB.tokenize],["link",tme],["image",nme],["autolink",ime],["html_inline",cme],["entity",fme]],$C=[["balance_pairs",hme],["strikethrough",dB.postProcess],["emphasis",fB.postProcess],["fragments_join",pme]];function db(){this.ruler=new da;for(let e=0;e<LC.length;e++)this.ruler.push(LC[e][0],LC[e][1]);this.ruler2=new da;for(let e=0;e<$C.length;e++)this.ruler2.push($C[e][0],$C[e][1])}db.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,s=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let a=!1;if(e.level<s){for(let o=0;o<r;o++)if(e.level++,a=n[o](e,!0),e.level--,a){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;a||e.pos++,i[t]=e.pos};db.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,s=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let a=!1;if(e.level<s){for(let o=0;o<n;o++)if(a=t[o](e,!1),a){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(a){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};db.prototype.parse=function(e,t,n,r){const s=new this.State(e,t,n,r);this.tokenize(s);const i=this.ruler2.getRules(""),a=i.length;for(let o=0;o<a;o++)i[o](s)};db.prototype.State=ub;function mme(e){const t={};e=e||{},t.src_Any=Q$.source,t.src_Cc=eB.source,t.src_Z=nB.source,t.src_P=UR.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function _T(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function t_(e){return Object.prototype.toString.call(e)}function gme(e){return t_(e)==="[object String]"}function yme(e){return t_(e)==="[object Object]"}function bme(e){return t_(e)==="[object RegExp]"}function WD(e){return t_(e)==="[object Function]"}function vme(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const hB={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function wme(e){return Object.keys(e||{}).reduce(function(t,n){return t||hB.hasOwnProperty(n)},!1)}const xme={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},_me="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Sme="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Eme(e){e.__index__=-1,e.__text_cache__=""}function Cme(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function ZD(){return function(e,t){t.normalize(e)}}function jx(e){const t=e.re=mme(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(_me),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const s=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const c={validate:null,link:null};if(e.__compiled__[o]=c,yme(l)){bme(l.validate)?c.validate=Cme(l.validate):WD(l.validate)?c.validate=l.validate:i(o,l),WD(l.normalize)?c.normalize=l.normalize:l.normalize?i(o,l):c.normalize=ZD();return}if(gme(l)){s.push(o);return}i(o,l)}),s.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:ZD()};const a=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(vme).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Eme(e)}function kme(e,t){const n=e.__index__,r=e.__last_index__,s=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=s,this.text=s,this.url=s}function ST(e,t){const n=new kme(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function ja(e,t){if(!(this instanceof ja))return new ja(e,t);t||wme(e)&&(t=e,e={}),this.__opts__=_T({},hB,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=_T({},xme,e),this.__compiled__={},this.__tlds__=Sme,this.__tlds_replaced__=!1,this.re={},jx(this)}ja.prototype.add=function(t,n){return this.__schemas__[t]=n,jx(this),this};ja.prototype.set=function(t){return this.__opts__=_T(this.__opts__,t),this};ja.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,s,i,a,o,l,c,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=r.index+r[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(a=s.index+s[1].length,o=s.index+s[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o))),this.__index__>=0};ja.prototype.pretest=function(t){return this.re.pretest.test(t)};ja.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};ja.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(ST(this,r)),r=this.__last_index__);let s=r?t.slice(r):t;for(;this.test(s);)n.push(ST(this,r)),s=s.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};ja.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,ST(this,0)):null};ja.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,s,i){return r!==i[s-1]}).reverse(),jx(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,jx(this),this)};ja.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};ja.prototype.onCompile=function(){};const wp=2147483647,_l=36,KR=1,iy=26,Tme=38,Ame=700,pB=72,mB=128,gB="-",Rme=/^xn--/,Nme=/[^\0-\x7F]/,Ime=/[\x2E\u3002\uFF0E\uFF61]/g,jme={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},BC=_l-KR,Sl=Math.floor,zC=String.fromCharCode;function Ou(e){throw new RangeError(jme[e])}function Mme(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function yB(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Ime,".");const s=e.split("."),i=Mme(s,t).join(".");return r+i}function bB(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const Dme=e=>String.fromCodePoint(...e),Ome=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:_l},YD=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},vB=function(e,t,n){let r=0;for(e=n?Sl(e/Ame):e>>1,e+=Sl(e/t);e>BC*iy>>1;r+=_l)e=Sl(e/BC);return Sl(r+(BC+1)*e/(e+Tme))},wB=function(e){const t=[],n=e.length;let r=0,s=mB,i=pB,a=e.lastIndexOf(gB);a<0&&(a=0);for(let o=0;o<a;++o)e.charCodeAt(o)>=128&&Ou("not-basic"),t.push(e.charCodeAt(o));for(let o=a>0?a+1:0;o<n;){const l=r;for(let d=1,h=_l;;h+=_l){o>=n&&Ou("invalid-input");const m=Ome(e.charCodeAt(o++));m>=_l&&Ou("invalid-input"),m>Sl((wp-r)/d)&&Ou("overflow"),r+=m*d;const g=h<=i?KR:h>=i+iy?iy:h-i;if(m<g)break;const v=_l-g;d>Sl(wp/v)&&Ou("overflow"),d*=v}const c=t.length+1;i=vB(r-l,c,l==0),Sl(r/c)>wp-s&&Ou("overflow"),s+=Sl(r/c),r%=c,t.splice(r++,0,s)}return String.fromCodePoint(...t)},xB=function(e){const t=[];e=bB(e);const n=e.length;let r=mB,s=0,i=pB;for(const l of e)l<128&&t.push(zC(l));const a=t.length;let o=a;for(a&&t.push(gB);o<n;){let l=wp;for(const d of e)d>=r&&d<l&&(l=d);const c=o+1;l-r>Sl((wp-s)/c)&&Ou("overflow"),s+=(l-r)*c,r=l;for(const d of e)if(d<r&&++s>wp&&Ou("overflow"),d===r){let h=s;for(let m=_l;;m+=_l){const g=m<=i?KR:m>=i+iy?iy:m-i;if(h<g)break;const v=h-g,b=_l-g;t.push(zC(YD(g+v%b,0))),h=Sl(v/b)}t.push(zC(YD(h,0))),i=vB(s,c,o===a),s=0,++o}++s,++r}return t.join("")},Pme=function(e){return yB(e,function(t){return Rme.test(t)?wB(t.slice(4).toLowerCase()):t})},Fme=function(e){return yB(e,function(t){return Nme.test(t)?"xn--"+xB(t):t})},_B={version:"2.3.1",ucs2:{decode:bB,encode:Dme},decode:wB,encode:xB,toASCII:Fme,toUnicode:Pme},Lme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},$me={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Bme={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},zme={default:Lme,zero:$me,commonmark:Bme},Ume=/^(vbscript|javascript|file|data):/,qme=/^data:image\/(gif|png|jpeg|webp);/;function Vme(e){const t=e.trim().toLowerCase();return Ume.test(t)?qme.test(t):!0}const SB=["http:","https:","mailto:"];function Hme(e){const t=zR(e,!0);if(t.hostname&&(!t.protocol||SB.indexOf(t.protocol)>=0))try{t.hostname=_B.toASCII(t.hostname)}catch{}return cb(BR(t))}function Gme(e){const t=zR(e,!0);if(t.hostname&&(!t.protocol||SB.indexOf(t.protocol)>=0))try{t.hostname=_B.toUnicode(t.hostname)}catch{}return Vp(BR(t),Vp.defaultChars+"%")}function so(e,t){if(!(this instanceof so))return new so(e,t);t||qR(e)||(t=e||{},e="default"),this.inline=new db,this.block=new e_,this.core=new HR,this.renderer=new vm,this.linkify=new ja,this.validateLink=Vme,this.normalizeLink=Hme,this.normalizeLinkText=Gme,this.utils=Whe,this.helpers=J1({},Jhe),this.options={},this.configure(e),t&&this.set(t)}so.prototype.set=function(e){return J1(this.options,e),this};so.prototype.configure=function(e){const t=this;if(qR(e)){const n=e;if(e=zme[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};so.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};so.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};so.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};so.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};so.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};so.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};so.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const UC=new so({html:!1,linkify:!0,breaks:!0});function WR(e){return C.useMemo(()=>{var n;if(!e)return[];try{const r=UC.parse(e,{}),s=[];let i="",a=0;for(;a<r.length;){const o=r[a];if(o.type==="fence"){i&&(s.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;s.push({type:"code",lang:l,code:o.content}),a++}else{const l=[];for(;a<r.length&&r[a].type!=="fence";)l.push(r[a]),a++;l.length>0&&(i+=UC.renderer.render(l,UC.options,{}))}}return i&&s.push(i),s}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Kme=({markdownContent:e})=>{const t=WR(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const s=n;return p.jsx(im,{lang:s.lang,code:s.code},`code-${r}`)}return null})}):null},ZR=yt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var b,w;const s=ur(x=>x.foldUserMessagesOnCompletion),[i,a]=C.useState(r&&s),[o,l]=C.useState(!1);C.useEffect(()=>{r&&s&&a(!0)},[r,s]);const c=t?J$(new Date(t),{addSuffix:!0}):"Sending...",d=((b=e.metadata)==null?void 0:b.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,m=C.useCallback(()=>a(x=>!x),[]),g=C.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),ze.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(x){ze.error("Failed to copy prompt."),console.error("Clipboard copy failed:",x)}},[e.content]),v=C.useMemo(()=>{var _;let x="";return h&&(x+=`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`),h&&d&&(x+=" + "),d&&(x+=`${(_=e.metadata.attachedFiles)==null?void 0:_.length} file(s)`),x||"[Empty Prompt]"},[h,d,e.content,e.metadata]);return p.jsxs("div",{className:mt("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:mt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(sX,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&p.jsx(fn,{tooltipText:"Copy Prompt",onClick:g,"aria-label":"Copy user prompt",icon:o?p.jsx(ni,{className:"text-green-500"}):p.jsx(Ep,{}),className:"h-5 w-5"}),(h||d)&&p.jsx(fn,{tooltipText:i?"Unfold":"Fold",onClick:m,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?p.jsx(Po,{}):p.jsx(Nc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:c})})]}),!i&&p.jsxs(p.Fragment,{children:[d&&p.jsx("div",{className:"mb-2 space-y-1",children:(w=e.metadata.attachedFiles)==null?void 0:w.map(x=>p.jsx(G$,{fileMeta:x,isReadOnly:!0},x.id))}),p.jsx(Kme,{markdownContent:e.content})]}),i&&p.jsx("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:m,children:v})]})});ZR.displayName="UserPromptDisplay";const XD=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,Wme=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:s,canFold:i,promptTokens:a,completionTokens:o,timeToFirstToken:l,generationTime:c})=>{const[d,h]=C.useState(!1),m=C.useCallback(async()=>{if(!n||typeof n!="string"){ze.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),ze.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(v){ze.error("Failed to copy response."),console.error("Clipboard copy failed:",v)}},[n]),g=a!==void 0&&o!==void 0?a+o:void 0;return p.jsxs("div",{className:mt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(Z8,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&p.jsx(fn,{tooltipText:"Copy Response",onClick:m,"aria-label":"Copy assistant response",icon:d?p.jsx(ni,{className:"text-green-500"}):p.jsx(Ep,{}),className:"h-5 w-5"}),i&&p.jsx(fn,{tooltipText:r?"Unfold":"Fold",onClick:s,"aria-label":r?"Unfold response":"Fold response",icon:r?p.jsx(Po,{}):p.jsx(Nc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[g!==void 0&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsxs(Kn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(TZ,{className:"h-3 w-3"}),p.jsx("span",{children:g.toLocaleString()})]}),p.jsxs(Wn,{side:"bottom",children:["Tokens: ",a??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",g]})]})}),l!==void 0&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsxs(Kn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(dX,{className:"h-3 w-3"}),p.jsx("span",{children:XD(l)})]}),p.jsx(Wn,{side:"bottom",children:"Time to First Token"})]})}),c!==void 0&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsxs(Kn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(xZ,{className:"h-3 w-3"}),p.jsx("span",{children:XD(c)})]}),p.jsx(Wn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t})})]})},Zme=({interactionId:e,currentRating:t})=>{const n=Hn(i=>i.rateInteraction),r=i=>{n(e,i===t?null:i)},s=Array.from({length:11},(i,a)=>a-5);return p.jsx("div",{className:"flex items-center gap-1",children:s.map(i=>{let a="";i===-5?a="Terrible":i===-4?a="Very Bad":i===-3?a="Bad":i===-2?a="Poor":i===-1?a="Below Average":i===0?a="Neutral":i===1?a="Above Average":i===2?a="Good":i===3?a="Very Good":i===4?a="Excellent":i===5&&(a="Perfect");let o="text-muted-foreground",l="hover:text-foreground",c="";i<0?(l="hover:text-red-500",t===i&&(o="text-red-500",c="fill-red-500")):i===0?(l="hover:text-gray-500",t===i&&(o="text-gray-500",c="fill-gray-500")):(l="hover:text-green-500",t===i&&(o="text-green-500",c="fill-green-500"));const d=t===i?"bg-muted":"";return p.jsx(fn,{tooltipText:a,onClick:()=>r(i),"aria-label":`Rate response as ${a}`,icon:p.jsx(ZY,{className:mt(c,t===i?"fill-current":"fill-none")}),variant:"ghost",className:mt("h-4 w-4 md:h-5 md:w-5 p-0",o,l,d)},i)})})},Yme=({interaction:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const s=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},i=()=>{t&&t(e.id)},a=()=>{r&&r(e.id)};return p.jsxs("div",{className:mt("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[p.jsx(Zme,{interactionId:e.id,currentRating:e.rating}),r&&p.jsx(fn,{tooltipText:"Edit",onClick:a,"aria-label":"Edit User Prompt",icon:p.jsx(t0,{}),className:"h-5 w-5 md:h-6 md:w-6"}),t&&p.jsx(fn,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:p.jsx(r1,{}),className:"h-5 w-5 md:h-6 md:w-6"}),n&&p.jsx(fn,{tooltipText:"Delete",onClick:s,"aria-label":"Delete Interaction",icon:p.jsx(oa,{}),className:"h-5 w-5 md:h-6 md:w-6 text-destructive hover:text-destructive/80"})]})},Xme=({toolCall:e})=>{const[t,n]=C.useState(!0),r=()=>n(i=>!i),s=C.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(fn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(Po,{}):p.jsx(Nc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(im,{lang:"json",code:s})]})},Jme=({toolResult:e})=>{const[t,n]=C.useState(!0),r=()=>n(a=>!a),s=C.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:mt("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:mt("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(fn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(Po,{}):p.jsx(Nc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(im,{lang:i?"text":"json",code:s})]})},Qme=({markdownContent:e})=>{const t=WR(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const s=n;return p.jsx(im,{lang:s.lang,code:s.code},`code-${r}`)}return null})}):null},ege=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:s,errorMessage:i,isFolded:a,toggleFold:o})=>{const[l,c]=C.useState(!0),[d,h]=C.useState(!1),m=C.useCallback(()=>c(_=>!_),[]),g=C.useCallback(async()=>{if(r)try{await navigator.clipboard.writeText(r),h(!0),ze.success("Reasoning copied!"),setTimeout(()=>h(!1),1500)}catch(_){ze.error("Failed to copy reasoning."),console.error("Clipboard copy failed for reasoning:",_)}},[r]),v=!!r,b=e&&(typeof e!="string"||e.trim().length>0),w=t&&t.length>0,x=n&&n.length>0;return a?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[v?"[Reasoning] ":"",w?`[${t==null?void 0:t.length} Tool Call(s)] `:"",b&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:w||x||v?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[s&&i&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:i})]}),v&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:m,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(Al,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(fn,{tooltipText:"Copy Reasoning",onClick:_=>{_.stopPropagation(),g()},"aria-label":"Copy reasoning",icon:d?p.jsx(ni,{className:"text-green-500"}):p.jsx(Ep,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(fn,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:_=>{_.stopPropagation(),m()},"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?p.jsx(Po,{}):p.jsx(Nc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!l&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:r})]}),t==null?void 0:t.map((_,E)=>{try{const k=JSON.parse(_);return p.jsx(Xme,{toolCall:k},`call-${E}`)}catch(k){return console.error("Failed to parse tool call string:",k),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${E}`)}}),n==null?void 0:n.map((_,E)=>{try{const k=JSON.parse(_);return p.jsx(Jme,{toolResult:k},`res-${E}`)}catch(k){return console.error("Failed to parse tool result string:",k),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${E}`)}}),p.jsx(Qme,{markdownContent:e}),!b&&!w&&!x&&!v&&p.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},EB=yt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:s})=>{var k,T,R,M,I,O,P,U,j,V,$,re;const[i,a]=C.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=gr(En(J=>({dbProviderConfigs:J.dbProviderConfigs,getAllAvailableModelDefsForProvider:J.getAllAvailableModelDefsForProvider}))),c=C.useCallback(()=>a(J=>!J),[]),d=e.endedAt?J$(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=C.useMemo(()=>{var he;const J=(he=e.metadata)==null?void 0:he.modelId;if(!J)return"Unknown Model";const{providerId:te,modelId:X}=Mo(J);if(!te||!X)return J;const ie=o.find(Se=>Se.id===te),Z=(ie==null?void 0:ie.name)??te,Q=l(te).find(Se=>Se.id===X);return`${(Q==null?void 0:Q.name)??X} (${Z})`},[(k=e.metadata)==null?void 0:k.modelId,o,l]),m=e.status==="COMPLETED",g=m||e.status==="ERROR",v=e.status==="ERROR",b=e.response&&(typeof e.response!="string"||e.response.trim().length>0),w=((T=e.metadata)==null?void 0:T.toolCalls)&&e.metadata.toolCalls.length>0,x=((R=e.metadata)==null?void 0:R.toolResults)&&e.metadata.toolResults.length>0,_=!!((M=e.metadata)!=null&&M.reasoning),E=b||w||x||_;return p.jsxs("div",{className:mt("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",s),children:[e.prompt&&p.jsx(ZR,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:m}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[p.jsx(Wme,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:c,canFold:E,promptTokens:(I=e.metadata)==null?void 0:I.promptTokens,completionTokens:(O=e.metadata)==null?void 0:O.completionTokens,timeToFirstToken:(P=e.metadata)==null?void 0:P.timeToFirstToken,generationTime:(U=e.metadata)==null?void 0:U.generationTime}),p.jsx(ege,{response:e.response,toolCalls:(j=e.metadata)==null?void 0:j.toolCalls,toolResults:(V=e.metadata)==null?void 0:V.toolResults,reasoning:($=e.metadata)==null?void 0:$.reasoning,isError:v,errorMessage:(re=e.metadata)==null?void 0:re.error,isFolded:i,toggleFold:c})]}),g&&p.jsx(Yme,{interaction:e,onEdit:r,onRegenerate:t,onDelete:n})]})});EB.displayName="InteractionCard";const JD=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const s=e,i=s.lang?`language-${s.lang}`:"language-plaintext";return n?p.jsx(im,{lang:s.lang,code:s.code,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:s.lang?s.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:mt(i,"block p-4 font-mono text-sm leading-relaxed"),children:s.code})]},`pre-${t}`)}return null},tge=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:s}=ur(En(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),i=WR(r?e:null),[a,o]=C.useState([]),[l,c]=C.useState(null),d=C.useRef(0);C.useEffect(()=>{if(!r){o([]),c(e??null),d.current=0;return}const m=d.current,g=i.slice(m,i.length-1);if(g.length>0){const b=g.map((w,x)=>JD(w,m+x,s,!1)).filter(w=>w!==null);o(w=>[...w,...b]),d.current+=g.length}const v=i.length>0?i[i.length-1]:null;JSON.stringify(v)!==JSON.stringify(l)&&c(v),e||(o([]),c(null),d.current=0)},[i,r,s,l,e]);const h=C.useMemo(()=>!l||!r?null:JD(l,d.current,s,!0),[l,s,r]);return!(e!=null&&e.trim())&&a.length===0?p.jsx("div",{className:mt("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?p.jsxs("div",{className:mt(n),children:[a,h]}):p.jsx("pre",{className:mt("whitespace-pre-wrap text-sm",n),children:e})},nge=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":s="Stop Generation"})=>p.jsx(fn,{tooltipText:"Stop",onClick:e,"aria-label":s,icon:p.jsx(KY,{}),variant:r,size:n,className:t}),ET=yt.memo(({interactionId:e,onStop:t,className:n})=>{var V;const{interaction:r,interactionStatus:s}=Hn(En($=>{const re=$.interactions.find(J=>J.id===e);return{interaction:re,interactionStatus:re==null?void 0:re.status}})),i=ur($=>$.streamingRenderFPS),[a,o]=C.useState(""),[l,c]=C.useState(""),[d,h]=C.useState(!0),[m,g]=C.useState(!1),[v,b]=C.useState(!1),[w,x]=C.useState(!1),_=C.useRef(null),E=C.useRef(0);C.useEffect(()=>{const $=1e3/i;let re=!0;const J=te=>{if(!re)return;if(Hn.getState().streamingInteractionIds.includes(e)){if(te-E.current>=$){const ie=Hn.getState().activeStreamBuffers[e]??"",Z=Hn.getState().activeReasoningBuffers[e]??"";o(ie),c(Z),E.current=te}_.current=requestAnimationFrame(J)}else{const ie=Hn.getState().activeStreamBuffers[e]??"",Z=Hn.getState().activeReasoningBuffers[e]??"";o(ie),c(Z),_.current=null}};return _.current=requestAnimationFrame(J),()=>{re=!1,_.current&&(cancelAnimationFrame(_.current),_.current=null)}},[e,i]),C.useEffect(()=>{if(s&&s!=="STREAMING"){const $=Hn.getState().activeStreamBuffers[e]??"",re=Hn.getState().activeReasoningBuffers[e]??"";o($),c(re),_.current&&(cancelAnimationFrame(_.current),_.current=null)}},[s,e]);const{dbProviderConfigs:k,getAllAvailableModelDefsForProvider:T}=gr(En($=>({dbProviderConfigs:$.dbProviderConfigs,getAllAvailableModelDefsForProvider:$.getAllAvailableModelDefsForProvider}))),R=C.useMemo(()=>{var ee;const $=(ee=r==null?void 0:r.metadata)==null?void 0:ee.modelId;if(!$)return"Loading Model...";const{providerId:re,modelId:J}=Mo($);if(!re||!J)return $;const te=k.find(Q=>Q.id===re),X=(te==null?void 0:te.name)??re,Z=T(re).find(Q=>Q.id===J);return`${(Z==null?void 0:Z.name)??J} (${X})`},[(V=r==null?void 0:r.metadata)==null?void 0:V.modelId,k,T]),M=C.useCallback(()=>h($=>!$),[]),I=C.useCallback(()=>g($=>!$),[]),O=C.useCallback(async()=>{if(l)try{await navigator.clipboard.writeText(l),b(!0),ze.success("Reasoning copied!"),setTimeout(()=>b(!1),1500)}catch{ze.error("Failed to copy reasoning.")}},[l]),P=C.useCallback(async()=>{if(a)try{await navigator.clipboard.writeText(a),x(!0),ze.success("Response copied!"),setTimeout(()=>x(!1),1500)}catch{ze.error("Failed to copy response.")}},[a]);if(!r)return p.jsxs("div",{className:mt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx("div",{className:"h-16 bg-muted rounded w-full"})]})]});const U=()=>{t&&t(e)},j=a&&a.trim().length>0||l&&l.trim().length>0;return p.jsxs("div",{className:mt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&p.jsx(ZR,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:mt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(Z8,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsx("div",{className:"flex flex-col min-w-0",children:p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",R,")"]}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[a&&p.jsx(fn,{tooltipText:"Copy Response",onClick:P,"aria-label":"Copy assistant response",icon:w?p.jsx(ni,{className:"text-green-500"}):p.jsx(Ep,{}),className:"h-5 w-5"}),j&&p.jsx(fn,{tooltipText:m?"Unfold":"Fold",onClick:I,"aria-label":m?"Unfold response":"Fold response",icon:m?p.jsx(Po,{}):p.jsx(Nc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:"Streaming..."})})]}),!m&&p.jsxs(p.Fragment,{children:[l&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:M,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(Al,{className:"h-3.5 w-3.5"})," Reasoning (Streaming)"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(fn,{tooltipText:"Copy Reasoning",onClick:$=>{$.stopPropagation(),O()},"aria-label":"Copy reasoning",icon:v?p.jsx(ni,{className:"text-green-500"}):p.jsx(Ep,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(fn,{tooltipText:d?"Show Reasoning":"Hide Reasoning",onClick:$=>{$.stopPropagation(),M()},"aria-label":d?"Show reasoning":"Hide reasoning",icon:d?p.jsx(Po,{}):p.jsx(Nc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!d&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:l})]}),p.jsx(tge,{markdownContent:a,isStreaming:!0})]}),m&&p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:I,children:[l?"[Reasoning] ":"",a&&typeof a=="string"?`"${a.substring(0,80)}${a.length>80?"...":""}"`:"[Streaming...]"]})]}),t&&p.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:p.jsx(nge,{onStop:U,"aria-label":"Stop Generation"})})]})});ET.displayName="StreamingInteractionCard";var rge=C.createContext(void 0);function wm(e){const t=C.useContext(rge);return e||t||"ltr"}function ay(e,[t,n]){return Math.min(n,Math.max(t,e))}function sge(e,t){return C.useReducer((n,r)=>t[n][r]??n,e)}var YR="ScrollArea",[CB,B3e]=Ii(YR),[ige,po]=CB(YR),kB=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=e,[o,l]=C.useState(null),[c,d]=C.useState(null),[h,m]=C.useState(null),[g,v]=C.useState(null),[b,w]=C.useState(null),[x,_]=C.useState(0),[E,k]=C.useState(0),[T,R]=C.useState(!1),[M,I]=C.useState(!1),O=In(t,U=>l(U)),P=wm(s);return p.jsx(ige,{scope:n,type:r,dir:P,scrollHideDelay:i,scrollArea:o,viewport:c,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:T,onScrollbarXEnabledChange:R,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:M,onScrollbarYEnabledChange:I,onCornerWidthChange:_,onCornerHeightChange:k,children:p.jsx(rn.div,{dir:P,...a,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});kB.displayName=YR;var TB="ScrollAreaViewport",AB=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,a=po(TB,n),o=C.useRef(null),l=In(t,o,a.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),p.jsx(rn.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});AB.displayName=TB;var Bl="ScrollAreaScrollbar",RB=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=po(Bl,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,o=e.orientation==="horizontal";return C.useEffect(()=>(o?i(!0):a(!0),()=>{o?i(!1):a(!1)}),[o,i,a]),s.type==="hover"?p.jsx(age,{...r,ref:t,forceMount:n}):s.type==="scroll"?p.jsx(oge,{...r,ref:t,forceMount:n}):s.type==="auto"?p.jsx(NB,{...r,ref:t,forceMount:n}):s.type==="always"?p.jsx(XR,{...r,ref:t}):null});RB.displayName=Bl;var age=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=po(Bl,e.__scopeScrollArea),[i,a]=C.useState(!1);return C.useEffect(()=>{const o=s.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),a(!0)},d=()=>{l=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),p.jsx(ii,{present:n||i,children:p.jsx(NB,{"data-state":i?"visible":"hidden",...r,ref:t})})}),oge=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=po(Bl,e.__scopeScrollArea),i=e.orientation==="horizontal",a=r_(()=>l("SCROLL_END"),100),[o,l]=sge("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,s.scrollHideDelay,l]),C.useEffect(()=>{const c=s.viewport,d=i?"scrollLeft":"scrollTop";if(c){let h=c[d];const m=()=>{const g=c[d];h!==g&&(l("SCROLL"),a()),h=g};return c.addEventListener("scroll",m),()=>c.removeEventListener("scroll",m)}},[s.viewport,i,l,a]),p.jsx(ii,{present:n||o!=="hidden",children:p.jsx(XR,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ut(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ut(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),NB=C.forwardRef((e,t)=>{const n=po(Bl,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,a]=C.useState(!1),o=e.orientation==="horizontal",l=r_(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?c:d)}},10);return Gp(n.viewport,l),Gp(n.content,l),p.jsx(ii,{present:r||i,children:p.jsx(XR,{"data-state":i?"visible":"hidden",...s,ref:t})})}),XR=C.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=po(Bl,e.__scopeScrollArea),i=C.useRef(null),a=C.useRef(0),[o,l]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=OB(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function h(m,g){return hge(m,a.current,o,g)}return n==="horizontal"?p.jsx(lge,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollLeft,g=QD(m,o,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?p.jsx(cge,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollTop,g=QD(m,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),lge=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=po(Bl,e.__scopeScrollArea),[a,o]=C.useState(),l=C.useRef(null),c=In(t,l,i.onScrollbarXChange);return C.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(jB,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":n_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),FB(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Dx(a.paddingLeft),paddingEnd:Dx(a.paddingRight)}})}})}),cge=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=po(Bl,e.__scopeScrollArea),[a,o]=C.useState(),l=C.useRef(null),c=In(t,l,i.onScrollbarYChange);return C.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(jB,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":n_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),FB(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Dx(a.paddingTop),paddingEnd:Dx(a.paddingBottom)}})}})}),[uge,IB]=CB(Bl),jB=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:h,...m}=e,g=po(Bl,n),[v,b]=C.useState(null),w=In(t,O=>b(O)),x=C.useRef(null),_=C.useRef(""),E=g.viewport,k=r.content-r.viewport,T=Xs(d),R=Xs(l),M=r_(h,10);function I(O){if(x.current){const P=O.clientX-x.current.left,U=O.clientY-x.current.top;c({x:P,y:U})}}return C.useEffect(()=>{const O=P=>{const U=P.target;(v==null?void 0:v.contains(U))&&T(P,k)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[E,v,k,T]),C.useEffect(R,[r,R]),Gp(v,M),Gp(g.content,M),p.jsx(uge,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:Xs(i),onThumbPointerUp:Xs(a),onThumbPositionChange:R,onThumbPointerDown:Xs(o),children:p.jsx(rn.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:Ut(e.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),x.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),I(O))}),onPointerMove:Ut(e.onPointerMove,I),onPointerUp:Ut(e.onPointerUp,O=>{const P=O.target;P.hasPointerCapture(O.pointerId)&&P.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Mx="ScrollAreaThumb",MB=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=IB(Mx,e.__scopeScrollArea);return p.jsx(ii,{present:n||s.hasThumb,children:p.jsx(dge,{ref:t,...r})})}),dge=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=po(Mx,n),a=IB(Mx,n),{onThumbPositionChange:o}=a,l=In(t,h=>a.onThumbChange(h)),c=C.useRef(void 0),d=r_(()=>{c.current&&(c.current(),c.current=void 0)},100);return C.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!c.current){const g=pge(h,o);c.current=g,o()}};return o(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,o]),p.jsx(rn.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ut(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;a.onThumbPointerDown({x:v,y:b})}),onPointerUp:Ut(e.onPointerUp,a.onThumbPointerUp)})});MB.displayName=Mx;var JR="ScrollAreaCorner",DB=C.forwardRef((e,t)=>{const n=po(JR,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(fge,{...e,ref:t}):null});DB.displayName=JR;var fge=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=po(JR,n),[i,a]=C.useState(0),[o,l]=C.useState(0),c=!!(i&&o);return Gp(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),l(d)}),Gp(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),a(d)}),c?p.jsx(rn.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Dx(e){return e?parseInt(e,10):0}function OB(e,t){const n=e/t;return isNaN(n)?0:n}function n_(e){const t=OB(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function hge(e,t,n,r="ltr"){const s=n_(n),i=s/2,a=t||i,o=s-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return PB([l,c],h)(e)}function QD(e,t,n="ltr"){const r=n_(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,a]:[a*-1,0],c=ay(e,l);return PB([0,a],[0,o])(c)}function PB(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function FB(e,t){return e>0&&e<t}var pge=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=n.left!==i.left,o=n.top!==i.top;(a||o)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function r_(e,t){const n=Xs(e),r=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),C.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Gp(e,t){const n=Xs(t);mi(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var mge=kB,gge=AB,yge=DB;function Gi({className:e,children:t,...n}){return p.jsxs(mge,{"data-slot":"scroll-area",className:mt("relative",e),...n,children:[p.jsx(gge,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(bge,{}),p.jsx(yge,{})]})}function bge({className:e,orientation:t="vertical",...n}){return p.jsx(RB,{"data-slot":"scroll-area-scrollbar",orientation:t,className:mt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(MB,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function cr({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:mt("bg-accent animate-pulse rounded-md",e),...t})}const vge=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})};function LB({className:e,...t}){return p.jsx("div",{"data-slot":"card",className:mt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function $B({className:e,...t}){return p.jsx("div",{"data-slot":"card-header",className:mt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function BB({className:e,...t}){return p.jsx("div",{"data-slot":"card-title",className:mt("leading-none font-semibold",e),...t})}function wge({className:e,...t}){return p.jsx("div",{"data-slot":"card-description",className:mt("text-muted-foreground text-sm",e),...t})}function zB({className:e,...t}){return p.jsx("div",{"data-slot":"card-content",className:mt("px-6",e),...t})}const ar={sidebarVisibilityChanged:"ui.sidebar.visibility.changed",chatControlPanelVisibilityChanged:"ui.chat.control.panel.visibility.changed",promptControlPanelVisibilityChanged:"ui.prompt.control.panel.visibility.changed",globalLoadingChanged:"ui.global.loading.changed",globalErrorChanged:"ui.global.error.changed",focusInputFlagChanged:"ui.focus.input.flag.changed",modalStateChanged:"ui.modal.state.changed",toggleSidebarRequest:"ui.toggle.sidebar.request",toggleChatControlPanelRequest:"ui.toggle.chat.control.panel.request",togglePromptControlPanelRequest:"ui.toggle.prompt.control.panel.request",setGlobalLoadingRequest:"ui.set.global.loading.request",setGlobalErrorRequest:"ui.set.global.error.request",setFocusInputFlagRequest:"ui.set.focus.input.flag.request",openModalRequest:"ui.modal.open.request",closeModalRequest:"ui.modal.close.request",contextChanged:"ui.legacy.contextChanged"},id=lo(co((e,t)=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(n,r)=>{const s=t().isChatControlPanelOpen[n]??!1,i=r??!s;s!==i&&(e(a=>{a.isChatControlPanelOpen[n]=i,n==="settingsModal"&&!i&&(a.initialSettingsTab=null,a.initialSettingsSubTab=null)}),We.emit(ar.chatControlPanelVisibilityChanged,{panelId:n,isOpen:i}),(n==="settingsModal"||n==="projectSettingsModal")&&We.emit(ar.modalStateChanged,{modalId:n,isOpen:i,targetId:n==="projectSettingsModal"?t().projectSettingsModalTargetId:void 0,initialTab:n==="settingsModal"?t().initialSettingsTab:void 0,initialSubTab:n==="settingsModal"?t().initialSettingsSubTab:void 0}))},togglePromptControlPanel:(n,r)=>{const s=t().isPromptControlPanelOpen[n]??!1,i=r??!s;s!==i&&(e(a=>{a.isPromptControlPanelOpen[n]=i}),We.emit(ar.promptControlPanelVisibilityChanged,{controlId:n,isOpen:i}))},toggleSidebar:n=>{const r=t().isSidebarCollapsed,s=n??!r;r!==s&&(e({isSidebarCollapsed:s}),We.emit(ar.sidebarVisibilityChanged,{isCollapsed:s}))},setGlobalLoading:n=>{t().globalLoading!==n&&(e({globalLoading:n}),We.emit(ar.globalLoadingChanged,{loading:n}))},setGlobalError:n=>{t().globalError!==n&&(e({globalError:n}),We.emit(ar.globalErrorChanged,{error:n}))},setFocusInputFlag:n=>{t().focusInputOnNextRender!==n&&(e({focusInputOnNextRender:n}),We.emit(ar.focusInputFlagChanged,{focus:n}))},setInitialSettingsTabs:(n,r=null)=>{e({initialSettingsTab:n,initialSettingsSubTab:r})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:n=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:n})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:n=>{const r=t().isVfsModalOpen,s=n??!r;r!==s&&e({isVfsModalOpen:s})},getRegisteredActionHandlers:()=>{const n="uiStateStore",r=t();return[{eventName:ar.toggleSidebarRequest,handler:s=>r.toggleSidebar(s==null?void 0:s.isCollapsed),storeId:n},{eventName:ar.toggleChatControlPanelRequest,handler:s=>r.toggleChatControlPanel(s.panelId,s.isOpen),storeId:n},{eventName:ar.togglePromptControlPanelRequest,handler:s=>r.togglePromptControlPanel(s.controlId,s.isOpen),storeId:n},{eventName:ar.setGlobalLoadingRequest,handler:s=>r.setGlobalLoading(s.loading),storeId:n},{eventName:ar.setGlobalErrorRequest,handler:s=>r.setGlobalError(s.error),storeId:n},{eventName:ar.setFocusInputFlagRequest,handler:s=>r.setFocusInputFlag(s.focus),storeId:n}]}}))),xge=({title:e,description:t,icon:n,onClick:r})=>p.jsxs(LB,{className:"hover:border-primary/50 hover:bg-muted/30 transition-all cursor-pointer group",onClick:r,children:[p.jsxs($B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsxs(BB,{className:"text-sm font-medium flex items-center gap-2",children:[n," ",e]}),p.jsx(tZ,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform"})]}),p.jsx(zB,{children:p.jsx("p",{className:"text-xs text-muted-foreground",children:t})})]}),UB=()=>{const{toggleChatControlPanel:e,setInitialSettingsTabs:t,toggleVfsModal:n}=id(En(a=>({toggleChatControlPanel:a.toggleChatControlPanel,setInitialSettingsTabs:a.setInitialSettingsTabs,toggleVfsModal:a.toggleVfsModal}))),r=(a,o)=>{t(a,o),e("settingsModal",!0)},s=()=>{n(!0)},i=[{title:"Configure Theme",description:"Customize colors, fonts, and code block appearance.",icon:p.jsx(_Y,{className:"h-4 w-4 text-purple-500"}),onClick:()=>r("theme")},{title:"Manage Rules & Tags",description:"Define reusable prompt snippets and organize them.",icon:p.jsx(Ok,{className:"h-4 w-4 text-blue-500"}),onClick:()=>r("rules-tags")},{title:"Add Files",description:"Upload or manage files in the virtual filesystem.",icon:p.jsx(_A,{className:"h-4 w-4 text-cyan-500"}),onClick:s},{title:"Add Provider",description:"Connect to AI services like OpenAI, Ollama, etc.",icon:p.jsx(Mw,{className:"h-4 w-4 text-green-500"}),onClick:()=>r("providers","providers-config")},{title:"Add API Key",description:"Store API keys securely in your browser.",icon:p.jsx(p0,{className:"h-4 w-4 text-amber-500"}),onClick:()=>r("providers","api-keys")}];return p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl w-full pt-4",children:i.map(a=>p.jsx(xge,{title:a.title,description:a.description,icon:a.icon,onClick:a.onClick},a.title))})},eO=()=>p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(vge,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat. You can also explore these setup options:"}),p.jsx(UB,{})]}),QR=C.createContext({});function eN(e){const t=C.useRef(null);return t.current===null&&(t.current=e()),t.current}const tN=typeof window<"u",qB=tN?C.useLayoutEffect:C.useEffect,s_=C.createContext(null),nN=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class _ge extends C.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Sge({children:e,isPresent:t,anchorX:n}){const r=C.useId(),s=C.useRef(null),i=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=C.useContext(nN);return C.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d,right:h}=i.current;if(t||!s.current||!o||!l)return;const m=n==="left"?`left: ${d}`:`right: ${h}`;s.current.dataset.motionPopId=r;const g=document.createElement("style");return a&&(g.nonce=a),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${m}px !important;
            top: ${c}px !important;
          }
        `),()=>{document.head.contains(g)&&document.head.removeChild(g)}},[t]),p.jsx(_ge,{isPresent:t,childRef:s,sizeRef:i,children:C.cloneElement(e,{ref:s})})}const Ege=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:o})=>{const l=eN(Cge),c=C.useId();let d=!0,h=C.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:m=>{l.set(m,!0);for(const g of l.values())if(!g)return;r&&r()},register:m=>(l.set(m,!1),()=>l.delete(m))}),[n,l,r]);return i&&d&&(h={...h}),C.useMemo(()=>{l.forEach((m,g)=>l.set(g,!1))},[n]),C.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(e=p.jsx(Sge,{isPresent:n,anchorX:o,children:e})),p.jsx(s_.Provider,{value:h,children:e})};function Cge(){return new Map}function VB(e=!0){const t=C.useContext(s_);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=C.useId();C.useEffect(()=>{if(e)return s(i)},[e]);const a=C.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}const rw=e=>e.key||"";function tO(e){const t=[];return C.Children.forEach(e,n=>{C.isValidElement(n)&&t.push(n)}),t}const kge=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:o="left"})=>{const[l,c]=VB(a),d=C.useMemo(()=>tO(e),[e]),h=a&&!l?[]:d.map(rw),m=C.useRef(!0),g=C.useRef(d),v=eN(()=>new Map),[b,w]=C.useState(d),[x,_]=C.useState(d);qB(()=>{m.current=!1,g.current=d;for(let T=0;T<x.length;T++){const R=rw(x[T]);h.includes(R)?v.delete(R):v.get(R)!==!0&&v.set(R,!1)}},[x,h.length,h.join("-")]);const E=[];if(d!==b){let T=[...d];for(let R=0;R<x.length;R++){const M=x[R],I=rw(M);h.includes(I)||(T.splice(R,0,M),E.push(M))}return i==="wait"&&E.length&&(T=E),_(tO(T)),w(d),null}const{forceRender:k}=C.useContext(QR);return p.jsx(p.Fragment,{children:x.map(T=>{const R=rw(T),M=a&&!l?!1:d===x||h.includes(R),I=()=>{if(v.has(R))v.set(R,!0);else return;let O=!0;v.forEach(P=>{P||(O=!1)}),O&&(k==null||k(),_(g.current),a&&(c==null||c()),r&&r())};return p.jsx(Ege,{isPresent:M,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,onExitComplete:M?void 0:I,anchorX:o,children:T},R)})})},sw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],nO={value:null};function Tge(e,t){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(h){a.has(h)&&(d.schedule(h),e()),l++,h(o)}const d={schedule:(h,m=!1,g=!1)=>{const b=g&&s?n:r;return m&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(o=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),t&&nO.value&&nO.value.frameloop[t].push(l),l=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const zc={},Age=40;function HB(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=sw.reduce((E,k)=>(E[k]=Tge(i,t?k:void 0),E),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:m,render:g,postRender:v}=a,b=()=>{const E=zc.useManualTiming?s.timestamp:performance.now();n=!1,zc.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,Age),1)),s.timestamp=E,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),d.process(s),h.process(s),m.process(s),g.process(s),v.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(b))},w=()=>{n=!0,r=!0,s.isProcessing||e(b)};return{schedule:sw.reduce((E,k)=>{const T=a[k];return E[k]=(R,M=!1,I=!1)=>(n||w(),T.schedule(R,M,I)),E},{}),cancel:E=>{for(let k=0;k<sw.length;k++)a[sw[k]].cancel(E)},state:s,steps:a}}const no=e=>e,{schedule:ls,cancel:ad,state:fi,steps:qC}=HB(typeof requestAnimationFrame<"u"?requestAnimationFrame:no,!0),GB=C.createContext({strict:!1}),rO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kp={};for(const e in rO)Kp[e]={isEnabled:t=>rO[e].some(n=>!!t[n])};function Rge(e){for(const t in e)Kp[t]={...Kp[t],...e[t]}}const Nge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ox(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Nge.has(e)}let KB=e=>!Ox(e);function Ige(e){e&&(KB=t=>t.startsWith("on")?!Ox(t):e(t))}try{Ige(require("@emotion/is-prop-valid").default)}catch{}function jge(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(KB(s)||n===!0&&Ox(s)||!t&&!Ox(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Mge(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const i_=C.createContext({});function a_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function oy(e){return typeof e=="string"||Array.isArray(e)}const rN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sN=["initial",...rN];function o_(e){return a_(e.animate)||sN.some(t=>oy(e[t]))}function WB(e){return!!(o_(e)||e.variants)}function Dge(e,t){if(o_(e)){const{initial:n,animate:r}=e;return{initial:n===!1||oy(n)?n:void 0,animate:oy(r)?r:void 0}}return e.inherit!==!1?t:{}}function Oge(e){const{initial:t,animate:n}=Dge(e,C.useContext(i_));return C.useMemo(()=>({initial:t,animate:n}),[sO(t),sO(n)])}function sO(e){return Array.isArray(e)?e.join(" "):e}const Pge=Symbol.for("motionComponentSymbol");function lp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Fge(e,t,n){return C.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):lp(n)&&(n.current=r))},[t])}const iN=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Lge="framerAppearId",ZB="data-"+iN(Lge),YB=C.createContext({}),{schedule:aN}=HB(queueMicrotask,!1);function $ge(e,t,n,r,s){var b,w;const{visualElement:i}=C.useContext(i_),a=C.useContext(GB),o=C.useContext(s_),l=C.useContext(nN).reducedMotion,c=C.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,h=C.useContext(YB);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&Bge(c.current,n,s,h);const m=C.useRef(!1);C.useInsertionEffect(()=>{d&&m.current&&d.update(n,o)});const g=n[ZB],v=C.useRef(!!g&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,g))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,g)));return qB(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),aN.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),C.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,g)}),v.current=!1))}),d}function Bge(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:XB(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||o&&lp(o),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function XB(e){if(e)return e.options.allowProjection!==!1?e.projection:XB(e.parent)}let oN=()=>{};function zge({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&Rge(e);function i(o,l){let c;const d={...C.useContext(nN),...o,layoutId:Uge(o)},{isStatic:h}=d,m=Oge(o),g=r(o,h);if(!h&&tN){qge();const v=Vge(d);c=v.MeasureLayout,m.visualElement=$ge(s,g,d,t,v.ProjectionNode)}return p.jsxs(i_.Provider,{value:m,children:[c&&m.visualElement?p.jsx(c,{visualElement:m.visualElement,...d}):null,n(s,o,Fge(g,m.visualElement,l),g,h,m.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=C.forwardRef(i);return a[Pge]=s,a}function Uge({layoutId:e}){const t=C.useContext(QR).id;return t&&e!==void 0?t+"-"+e:e}function qge(e,t){C.useContext(GB).strict}function Vge(e){const{drag:t,layout:n}=Kp;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const JB=e=>t=>typeof t=="string"&&t.startsWith(e),lN=JB("--"),Hge=JB("var(--"),cN=e=>Hge(e)?Gge.test(e.split("/*")[0].trim()):!1,Gge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ly={};function Kge(e){for(const t in e)ly[t]=e[t],lN(t)&&(ly[t].isCSSVariable=!0)}const xm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_m=new Set(xm);function QB(e,{layout:t,layoutId:n}){return _m.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ly[e]||e==="opacity")}const ki=e=>!!(e&&e.getVelocity),ez=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Uc=(e,t,n)=>n>t?t:n<e?e:n,Sm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},cy={...Sm,transform:e=>Uc(0,1,e)},iw={...Sm,default:1},iO={...Sm,transform:Math.round},fb=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mu=fb("deg"),Cl=fb("%"),Tn=fb("px"),Wge=fb("vh"),Zge=fb("vw"),aO={...Cl,parse:e=>Cl.parse(e)/100,transform:e=>Cl.transform(e*100)},Yge={rotate:Mu,rotateX:Mu,rotateY:Mu,rotateZ:Mu,scale:iw,scaleX:iw,scaleY:iw,scaleZ:iw,skew:Mu,skewX:Mu,skewY:Mu,distance:Tn,translateX:Tn,translateY:Tn,translateZ:Tn,x:Tn,y:Tn,z:Tn,perspective:Tn,transformPerspective:Tn,opacity:cy,originX:aO,originY:aO,originZ:Tn},uN={borderWidth:Tn,borderTopWidth:Tn,borderRightWidth:Tn,borderBottomWidth:Tn,borderLeftWidth:Tn,borderRadius:Tn,radius:Tn,borderTopLeftRadius:Tn,borderTopRightRadius:Tn,borderBottomRightRadius:Tn,borderBottomLeftRadius:Tn,width:Tn,maxWidth:Tn,height:Tn,maxHeight:Tn,top:Tn,right:Tn,bottom:Tn,left:Tn,padding:Tn,paddingTop:Tn,paddingRight:Tn,paddingBottom:Tn,paddingLeft:Tn,margin:Tn,marginTop:Tn,marginRight:Tn,marginBottom:Tn,marginLeft:Tn,backgroundPositionX:Tn,backgroundPositionY:Tn,...Yge,zIndex:iO,fillOpacity:cy,strokeOpacity:cy,numOctaves:iO},Xge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Jge=xm.length;function Qge(e,t,n){let r="",s=!0;for(let i=0;i<Jge;i++){const a=xm[i],o=e[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=ez(o,uN[a]);if(!l){s=!1;const d=Xge[a]||a;r+=`${d}(${c}) `}n&&(t[a]=c)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function dN(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,o=!1;for(const l in t){const c=t[l];if(_m.has(l)){a=!0;continue}else if(lN(l)){s[l]=c;continue}else{const d=ez(c,uN[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(t.transform||(a||n?r.transform=Qge(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}const fN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tz(e,t,n){for(const r in t)!ki(t[r])&&!QB(r,n)&&(e[r]=t[r])}function e0e({transformTemplate:e},t){return C.useMemo(()=>{const n=fN();return dN(n,t,e),Object.assign({},n.vars,n.style)},[t])}function t0e(e,t){const n=e.style||{},r={};return tz(r,n,e),Object.assign(r,e0e(e,t)),r}function n0e(e,t){const n={},r=t0e(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const r0e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hN(e){return typeof e!="string"||e.includes("-")?!1:!!(r0e.indexOf(e)>-1||/[A-Z]/u.test(e))}const s0e={offset:"stroke-dashoffset",array:"stroke-dasharray"},i0e={offset:"strokeDashoffset",array:"strokeDasharray"};function a0e(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?s0e:i0e;e[i.offset]=Tn.transform(-r);const a=Tn.transform(t),o=Tn.transform(n);e[i.array]=`${a} ${o}`}function nz(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...o},l,c,d){if(dN(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&a0e(h,s,i,a,!1)}const rz=()=>({...fN(),attrs:{}}),sz=e=>typeof e=="string"&&e.toLowerCase()==="svg";function o0e(e,t,n,r){const s=C.useMemo(()=>{const i=rz();return nz(i,t,sz(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};tz(i,e.style,e),s.style={...i,...s.style}}return s}function l0e(e=!1){return(n,r,s,{latestValues:i},a)=>{const l=(hN(n)?o0e:n0e)(r,i,a,n),c=jge(r,typeof n=="string",e),d=n!==C.Fragment?{...c,...l,ref:s}:{},{children:h}=r,m=C.useMemo(()=>ki(h)?h.get():h,[h]);return C.createElement(n,{...d,children:m})}}function oO(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function pN(e,t,n,r){if(typeof t=="function"){const[s,i]=oO(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=oO(r);t=t(n!==void 0?n:e.custom,s,i)}return t}function kw(e){return ki(e)?e.get():e}function c0e({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:u0e(n,r,s,e),renderState:t()}}const iz=e=>(t,n)=>{const r=C.useContext(i_),s=C.useContext(s_),i=()=>c0e(e,t,r,s);return n?i():eN(i)};function u0e(e,t,n,r){const s={},i=r(e,{});for(const m in i)s[m]=kw(i[m]);let{initial:a,animate:o}=e;const l=o_(e),c=WB(e);t&&c&&!l&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?o:a;if(h&&typeof h!="boolean"&&!a_(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const v=pN(e,m[g]);if(v){const{transitionEnd:b,transition:w,...x}=v;for(const _ in x){let E=x[_];if(Array.isArray(E)){const k=d?E.length-1:0;E=E[k]}E!==null&&(s[_]=E)}for(const _ in b)s[_]=b[_]}}}return s}function mN(e,t,n){var i;const{style:r}=e,s={};for(const a in r)(ki(r[a])||t.style&&ki(t.style[a])||QB(a,e)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const d0e={useVisualState:iz({scrapeMotionValuesFromProps:mN,createRenderState:fN})};function az(e,t,n){const r=mN(e,t,n);for(const s in e)if(ki(e[s])||ki(t[s])){const i=xm.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}const f0e={useVisualState:iz({scrapeMotionValuesFromProps:az,createRenderState:rz})};function h0e(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...hN(r)?f0e:d0e,preloadedFeatures:e,useRender:l0e(s),createVisualElement:t,Component:r};return zge(a)}}function uy(e,t,n){const r=e.getProps();return pN(r,t,n!==void 0?n:r.custom,e)}const CT=e=>Array.isArray(e);let Tw;function p0e(){Tw=void 0}const aa={now:()=>(Tw===void 0&&aa.set(fi.isProcessing||zc.useManualTiming?fi.timestamp:performance.now()),Tw),set:e=>{Tw=e,queueMicrotask(p0e)}};function gN(e,t){e.indexOf(t)===-1&&e.push(t)}function yN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class bN{constructor(){this.subscriptions=[]}add(t){return gN(this.subscriptions,t),()=>yN(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function oz(e,t){return t?e*(1e3/t):0}const lO=30,m0e=e=>!isNaN(parseFloat(e));class g0e{constructor(t,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var a,o;const i=aa.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current)),s&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=aa.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=m0e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new bN);const r=this.events[t].add(n);return t==="change"?()=>{r(),ls.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=aa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lO)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lO);return oz(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t;(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dy(e,t){return new g0e(e,t)}function y0e(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,dy(n))}function b0e(e){return CT(e)?e[e.length-1]||0:e}function v0e(e,t){const n=uy(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const o=b0e(i[a]);y0e(e,a,o)}}function w0e(e){return!!(ki(e)&&e.add)}function kT(e,t){const n=e.getValue("willChange");if(w0e(n))return n.add(t);if(!n&&zc.WillChange){const r=new zc.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function lz(e){return e.props[ZB]}const x0e=e=>e!==null;function _0e(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(x0e),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[i]}const S0e={type:"spring",stiffness:500,damping:25,restSpeed:10},E0e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),C0e={type:"keyframes",duration:.8},k0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T0e=(e,{keyframes:t})=>t.length>2?C0e:_m.has(e)?e.startsWith("scale")?E0e(t[1]):S0e:k0e;function A0e({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function vN(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const kl=e=>e*1e3,Tl=e=>e/1e3,s0=e=>Math.round(e*1e5)/1e5,wN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function R0e(e){return e==null}const N0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xN=(e,t)=>n=>!!(typeof n=="string"&&N0e.test(n)&&n.startsWith(e)||t&&!R0e(n)&&Object.prototype.hasOwnProperty.call(n,t)),cz=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,o]=r.match(wN);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},I0e=e=>Uc(0,255,e),VC={...Sm,transform:e=>Math.round(I0e(e))},pf={test:xN("rgb","red"),parse:cz("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+VC.transform(e)+", "+VC.transform(t)+", "+VC.transform(n)+", "+s0(cy.transform(r))+")"};function j0e(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const TT={test:xN("#"),parse:j0e,transform:pf.transform},cp={test:xN("hsl","hue"),parse:cz("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Cl.transform(s0(t))+", "+Cl.transform(s0(n))+", "+s0(cy.transform(r))+")"},Si={test:e=>pf.test(e)||TT.test(e)||cp.test(e),parse:e=>pf.test(e)?pf.parse(e):cp.test(e)?cp.parse(e):TT.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?pf.transform(e):cp.transform(e)},M0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function D0e(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(wN))==null?void 0:t.length)||0)+(((n=e.match(M0e))==null?void 0:n.length)||0)>0}const uz="number",dz="color",O0e="var",P0e="var(",cO="${}",F0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fy(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace(F0e,l=>(Si.test(l)?(r.color.push(i),s.push(dz),n.push(Si.parse(l))):l.startsWith(P0e)?(r.var.push(i),s.push(O0e),n.push(l)):(r.number.push(i),s.push(uz),n.push(parseFloat(l))),++i,cO)).split(cO);return{values:n,split:o,indexes:r,types:s}}function fz(e){return fy(e).values}function hz(e){const{split:t,types:n}=fy(e),r=t.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],s[a]!==void 0){const o=n[a];o===uz?i+=s0(s[a]):o===dz?i+=Si.transform(s[a]):i+=s[a]}return i}}const L0e=e=>typeof e=="number"?0:e;function $0e(e){const t=fz(e);return hz(e)(t.map(L0e))}const od={test:D0e,parse:fz,createTransformer:hz,getAnimatableNone:$0e};function HC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function B0e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;s=HC(l,o,e+1/3),i=HC(l,o,e),a=HC(l,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function Px(e,t){return n=>n>0?t:e}const as=(e,t,n)=>e+(t-e)*n,GC=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},z0e=[TT,pf,cp],U0e=e=>z0e.find(t=>t.test(e));function uO(e){const t=U0e(e);if(!t)return!1;let n=t.parse(e);return t===cp&&(n=B0e(n)),n}const dO=(e,t)=>{const n=uO(e),r=uO(t);if(!n||!r)return Px(e,t);const s={...n};return i=>(s.red=GC(n.red,r.red,i),s.green=GC(n.green,r.green,i),s.blue=GC(n.blue,r.blue,i),s.alpha=as(n.alpha,r.alpha,i),pf.transform(s))},AT=new Set(["none","hidden"]);function q0e(e,t){return AT.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}const V0e=(e,t)=>n=>t(e(n)),hb=(...e)=>e.reduce(V0e);function H0e(e,t){return n=>as(e,t,n)}function _N(e){return typeof e=="number"?H0e:typeof e=="string"?cN(e)?Px:Si.test(e)?dO:W0e:Array.isArray(e)?pz:typeof e=="object"?Si.test(e)?dO:G0e:Px}function pz(e,t){const n=[...e],r=n.length,s=e.map((i,a)=>_N(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function G0e(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=_N(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function K0e(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][r[i]],o=e.values[a]??0;n[s]=o,r[i]++}return n}const W0e=(e,t)=>{const n=od.createTransformer(t),r=fy(e),s=fy(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?AT.has(e)&&!s.values.length||AT.has(t)&&!r.values.length?q0e(e,t):hb(pz(K0e(r,s),s.values),n):Px(e,t)};function mz(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?as(e,t,n):_N(e)(e,t)}const Z0e=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ls.update(t,!0),stop:()=>ad(t),now:()=>fi.isProcessing?fi.timestamp:aa.now()}},gz=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=e(i/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Fx=2e4;function SN(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Fx;)t+=n,r=e.next(t);return t>=Fx?1/0:t}function Y0e(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(SN(r),Fx);return{type:"keyframes",ease:i=>r.next(s*i).value/t,duration:Tl(s)}}const X0e=5;function yz(e,t,n){const r=Math.max(t-X0e,0);return oz(n-e(r),t-r)}const ds={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fO=.001;function J0e({duration:e=ds.duration,bounce:t=ds.bounce,velocity:n=ds.velocity,mass:r=ds.mass}){let s,i,a=1-t;a=Uc(ds.minDamping,ds.maxDamping,a),e=Uc(ds.minDuration,ds.maxDuration,Tl(e)),a<1?(s=c=>{const d=c*a,h=d*e,m=d-n,g=RT(c,a),v=Math.exp(-h);return fO-m/g*v},i=c=>{const h=c*a*e,m=h*n+n,g=Math.pow(a,2)*Math.pow(c,2)*e,v=Math.exp(-h),b=RT(Math.pow(c,2),a);return(-s(c)+fO>0?-1:1)*((m-g)*v)/b}):(s=c=>{const d=Math.exp(-c*e),h=(c-n)*e+1;return-.001+d*h},i=c=>{const d=Math.exp(-c*e),h=(n-c)*(e*e);return d*h});const o=5/e,l=eye(s,i,o);if(e=kl(e),isNaN(l))return{stiffness:ds.stiffness,damping:ds.damping,duration:e};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:e}}}const Q0e=12;function eye(e,t,n){let r=n;for(let s=1;s<Q0e;s++)r=r-e(r)/t(r);return r}function RT(e,t){return e*Math.sqrt(1-t*t)}const tye=["duration","bounce"],nye=["stiffness","damping","mass"];function hO(e,t){return t.some(n=>e[n]!==void 0)}function rye(e){let t={velocity:ds.velocity,stiffness:ds.stiffness,damping:ds.damping,mass:ds.mass,isResolvedFromDuration:!1,...e};if(!hO(e,nye)&&hO(e,tye))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Uc(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ds.mass,stiffness:s,damping:i}}else{const n=J0e(e);t={...t,...n,mass:ds.mass},t.isResolvedFromDuration=!0}return t}function Lx(e=ds.visualDuration,t=ds.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=rye({...n,velocity:-Tl(n.velocity||0)}),v=m||0,b=c/(2*Math.sqrt(l*d)),w=a-i,x=Tl(Math.sqrt(l/d)),_=Math.abs(w)<5;r||(r=_?ds.restSpeed.granular:ds.restSpeed.default),s||(s=_?ds.restDelta.granular:ds.restDelta.default);let E;if(b<1){const T=RT(x,b);E=R=>{const M=Math.exp(-b*x*R);return a-M*((v+b*x*w)/T*Math.sin(T*R)+w*Math.cos(T*R))}}else if(b===1)E=T=>a-Math.exp(-x*T)*(w+(v+x*w)*T);else{const T=x*Math.sqrt(b*b-1);E=R=>{const M=Math.exp(-b*x*R),I=Math.min(T*R,300);return a-M*((v+b*x*w)*Math.sinh(I)+T*w*Math.cosh(I))/T}}const k={calculatedDuration:g&&h||null,next:T=>{const R=E(T);if(g)o.done=T>=h;else{let M=T===0?v:0;b<1&&(M=T===0?kl(v):yz(E,T,R));const I=Math.abs(M)<=r,O=Math.abs(a-R)<=s;o.done=I&&O}return o.value=o.done?a:R,o},toString:()=>{const T=Math.min(SN(k),Fx),R=gz(M=>k.next(T*M).value,T,30);return T+"ms "+R},toTransition:()=>{}};return k}Lx.applyToOptions=e=>{const t=Y0e(e,100,Lx);return e.ease=t.ease,e.duration=kl(t.duration),e.type="keyframes",e};function NT({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},g=I=>o!==void 0&&I<o||l!==void 0&&I>l,v=I=>o===void 0?l:l===void 0||Math.abs(o-I)<Math.abs(l-I)?o:l;let b=n*t;const w=h+b,x=a===void 0?w:a(w);x!==w&&(b=x-h);const _=I=>-b*Math.exp(-I/r),E=I=>x+_(I),k=I=>{const O=_(I),P=E(I);m.done=Math.abs(O)<=c,m.value=m.done?x:P};let T,R;const M=I=>{g(m.value)&&(T=I,R=Lx({keyframes:[m.value,v(m.value)],velocity:yz(E,I,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return M(0),{calculatedDuration:null,next:I=>{let O=!1;return!R&&T===void 0&&(O=!0,k(I),M(I)),T!==void 0&&I>=T?R.next(I-T):(!O&&k(I),m)}}}const hy=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};function sye(e,t,n){const r=[],s=n||zc.mix||mz,i=e.length-1;for(let a=0;a<i;a++){let o=s(e[a],e[a+1]);if(t){const l=Array.isArray(t)?t[a]||no:t;o=hb(l,o)}r.push(o)}return r}function iye(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(oN(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=sye(t,r,s),l=o.length,c=d=>{if(a&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=hy(e[h],e[h+1],d);return o[h](m)};return n?d=>c(Uc(e[0],e[i-1],d)):c}function aye(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=hy(0,t,r);e.push(as(n,1,s))}}function oye(e){const t=[0];return aye(t,e.length-1),t}function lye(e,t){return e.map(n=>n*t)}const bz=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,cye=1e-7,uye=12;function dye(e,t,n,r,s){let i,a,o=0;do a=t+(n-t)/2,i=bz(a,r,s)-e,i>0?n=a:t=a;while(Math.abs(i)>cye&&++o<uye);return a}function pb(e,t,n,r){if(e===t&&n===r)return no;const s=i=>dye(i,0,1,e,n);return i=>i===0||i===1?i:bz(s(i),t,r)}const fye=pb(.42,0,1,1),hye=pb(0,0,.58,1),vz=pb(.42,0,.58,1),pye=e=>Array.isArray(e)&&typeof e[0]!="number",wz=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xz=e=>t=>1-e(1-t),_z=pb(.33,1.53,.69,.99),EN=xz(_z),Sz=wz(EN),Ez=e=>(e*=2)<1?.5*EN(e):.5*(2-Math.pow(2,-10*(e-1))),CN=e=>1-Math.sin(Math.acos(e)),Cz=xz(CN),kz=wz(CN),Tz=e=>Array.isArray(e)&&typeof e[0]=="number",mye={linear:no,easeIn:fye,easeInOut:vz,easeOut:hye,circIn:CN,circInOut:kz,circOut:Cz,backIn:EN,backInOut:Sz,backOut:_z,anticipate:Ez},gye=e=>typeof e=="string",pO=e=>{if(Tz(e)){oN(e.length===4);const[t,n,r,s]=e;return pb(t,n,r,s)}else if(gye(e))return mye[e];return e};function yye(e,t){return e.map(()=>t||vz).splice(0,e.length-1)}function i0({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=pye(r)?r.map(pO):pO(r),i={done:!1,value:t[0]},a=lye(n&&n.length===t.length?n:oye(t),e),o=iye(a,t,{ease:Array.isArray(s)?s:yye(t,s)});return{calculatedDuration:e,next:l=>(i.value=o(l),i.done=l>=e,i)}}const bye=e=>e!==null;function kN(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(bye),o=s<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const vye={decay:NT,inertia:NT,tween:i0,keyframes:i0,spring:Lx};function Az(e){typeof e.type=="string"&&(e.type=vye[e.type])}class TN{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const wye=e=>e/100;class Rz extends TN{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==aa.now()&&this.tick(aa.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Az(t);const{type:n=i0,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=t;let{keyframes:o}=t;const l=n||i0;l!==i0&&typeof o[0]!="number"&&(this.mixKeyframes=hb(wye,mz(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=SN(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:g,type:v,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let E=this.currentTime,k=r;if(h){const I=Math.min(this.currentTime,s)/o;let O=Math.floor(I),P=I%1;!P&&I>=1&&(P=1),P===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(m==="reverse"?(P=1-P,g&&(P-=g/o)):m==="mirror"&&(k=a)),E=Uc(0,1,P)*o}const T=_?{done:!1,value:d[0]}:k.next(E);i&&(T.value=i(T.value));let{done:R}=T;!_&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return M&&v!==NT&&(T.value=kN(d,this.options,w,this.speed)),b&&b(T.value),M&&this.finish(),T}then(t,n){return this.finished.then(t,n)}get duration(){return Tl(this.calculatedDuration)}get time(){return Tl(this.currentTime)}set time(t){t=kl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(aa.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Tl(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Z0e,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=r??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(aa.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),t.observe(this)}}function xye(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const mf=e=>e*180/Math.PI,IT=e=>{const t=mf(Math.atan2(e[1],e[0]));return jT(t)},_ye={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:IT,rotateZ:IT,skewX:e=>mf(Math.atan(e[1])),skewY:e=>mf(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},jT=e=>(e=e%360,e<0&&(e+=360),e),mO=IT,gO=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),yO=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Sye={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gO,scaleY:yO,scale:e=>(gO(e)+yO(e))/2,rotateX:e=>jT(mf(Math.atan2(e[6],e[5]))),rotateY:e=>jT(mf(Math.atan2(-e[2],e[0]))),rotateZ:mO,rotate:mO,skewX:e=>mf(Math.atan(e[4])),skewY:e=>mf(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function bO(e){return e.includes("scale")?1:0}function MT(e,t){if(!e||e==="none")return bO(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=Sye,s=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=_ye,s=o}if(!s)return bO(t);const i=r[t],a=s[1].split(",").map(Cye);return typeof i=="function"?i(a):a[i]}const Eye=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return MT(n,t)};function Cye(e){return parseFloat(e.trim())}const vO=e=>e===Sm||e===Tn,kye=new Set(["x","y","z"]),Tye=xm.filter(e=>!kye.has(e));function Aye(e){const t=[];return Tye.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const vf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>MT(t,"x"),y:(e,{transform:t})=>MT(t,"y")};vf.translateX=vf.x;vf.translateY=vf.y;const wf=new Set;let DT=!1,OT=!1,PT=!1;function Nz(){if(OT){const e=Array.from(wf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=Aye(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var o;(o=r.getValue(i))==null||o.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}OT=!1,DT=!1,wf.forEach(e=>e.complete(PT)),wf.clear()}function Iz(){wf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(OT=!0)})}function Rye(){PT=!0,Iz(),Nz(),PT=!1}class AN{constructor(t,n,r,s,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wf.add(this),DT||(DT=!0,ls.read(Iz),ls.resolveKeyframes(Nz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const o=r.readValue(n,a);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=a),s&&i===void 0&&s.set(t[0])}xye(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),wf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Nye=e=>e.startsWith("--");function Iye(e,t,n){Nye(t)?e.style.setProperty(t,n):e.style[t]=n}function RN(e){let t;return()=>(t===void 0&&(t=e()),t)}const jye=RN(()=>window.ScrollTimeline!==void 0),Mye={};function Dye(e,t){const n=RN(e);return()=>Mye[t]??n()}const jz=Dye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zg=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,wO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zg([0,.65,.55,1]),circOut:Zg([.55,0,1,.45]),backIn:Zg([.31,.01,.66,-.59]),backOut:Zg([.33,1.53,.69,.99])};function Mz(e,t){if(e)return typeof e=="function"?jz()?gz(e,t):"ease-out":Tz(e)?Zg(e):Array.isArray(e)?e.map(n=>Mz(n,t)||wO.easeOut):wO[e]}function Oye(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const h=Mz(o,s);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),e.animate(d,m)}function Dz(e){return typeof e=="function"&&"applyToOptions"in e}function Pye({type:e,...t}){return Dz(e)&&jz()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Fye extends TN{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,oN(typeof t.type!="string");const c=Pye(t);this.animation=Oye(n,r,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=kN(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):Iye(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Tl(Number(t))}get time(){return Tl(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=kl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&jye()?(this.animation.timeline=t,no):n(this)}}const Oz={anticipate:Ez,backInOut:Sz,circInOut:kz};function Lye(e){return e in Oz}function $ye(e){typeof e.ease=="string"&&Lye(e.ease)&&(e.ease=Oz[e.ease])}const xO=10;class Bye extends Fye{constructor(t){$ye(t),Az(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new Rz({...a,autoplay:!1}),l=kl(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-xO).value,o.sample(l).value,xO),o.stop()}}const _O=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(od.test(e)||e==="0")&&!e.startsWith("url("));function zye(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Uye(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=_O(s,t),o=_O(i,t);return!a||!o?!1:zye(e)||(n==="spring"||Dz(n))&&r}const qye=new Set(["opacity","clipPath","filter","transform"]),Vye=RN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Hye(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Vye()&&n&&qye.has(n)&&(n!=="transform"||!l)&&!o&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const Gye=40;class Kye extends TN{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:d,...h}){var v;super(),this.stop=()=>{var b,w;this._animation?(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)):(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=aa.now();const m={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:l,motionValue:c,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||AN;this.keyframeResolver=new g(o,(b,w,x)=>this.onKeyframesResolved(b,w,m,!x),l,c,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=aa.now(),Uye(t,i,a,o)||((zc.instantAnimations||!l)&&(d==null||d(kN(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Gye?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},g=!c&&Hye(m)?new Bye({...m,element:m.motionValue.owner.current}):new Rz(m);g.finished.then(()=>this.notifyFinished()).catch(no),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||Rye(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const NN=(e,t,n,r={},s,i)=>a=>{const o=vN(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-kl(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:s};A0e(o)||Object.assign(d,T0e(e,d)),d.duration&&(d.duration=kl(d.duration)),d.repeatDelay&&(d.repeatDelay=kl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(zc.instantAnimations||zc.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&t.get()!==void 0){const m=_0e(d.keyframes,o);if(m!==void 0){ls.update(()=>{d.onUpdate(m),d.onComplete()});return}}return new Kye(d)},Pz=new Set(["width","height","top","left","right","bottom",...xm]);function Wye({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Fz(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...o}=t;r&&(i=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),m=o[d];if(m===void 0||c&&Wye(c,d))continue;const g={delay:n,...vN(i||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const x=lz(e);if(x){const _=window.MotionHandoffAnimation(x,d,ls);_!==null&&(g.startTime=_,b=!0)}}kT(e,d),h.start(NN(d,h,m,e.shouldReduceMotion&&Pz.has(d)?{type:!1}:g,e,b));const w=h.animation;w&&l.push(w)}return a&&Promise.all(l).then(()=>{ls.update(()=>{a&&v0e(e,a)})}),l}function FT(e,t,n={}){var l;const r=uy(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Fz(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=s;return Zye(e,t,d+c,h,m,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,d]=o==="beforeChildren"?[i,a]:[a,i];return c().then(()=>d())}else return Promise.all([i(),a(n.delay)])}function Zye(e,t,n=0,r=0,s=1,i){const a=[],o=(e.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(e.variantChildren).sort(Yye).forEach((c,d)=>{c.notify("AnimationStart",t),a.push(FT(c,t,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(a)}function Yye(e,t){return e.sortNodePosition(t)}function Xye(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>FT(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=FT(e,t,n);else{const s=typeof t=="function"?uy(e,t,n.custom):t;r=Promise.all(Fz(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Lz(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Jye=sN.length;function $z(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?$z(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Jye;n++){const r=sN[n],s=e.props[r];(oy(s)||s===!1)&&(t[r]=s)}return t}const Qye=[...rN].reverse(),ebe=rN.length;function tbe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Xye(e,n,r)))}function nbe(e){let t=tbe(e),n=SO(),r=!0;const s=l=>(c,d)=>{var m;const h=uy(e,d,l==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;c={...c,...b,...v}}return c};function i(l){t=l(e)}function a(l){const{props:c}=e,d=$z(e.parent)||{},h=[],m=new Set;let g={},v=1/0;for(let w=0;w<ebe;w++){const x=Qye[w],_=n[x],E=c[x]!==void 0?c[x]:d[x],k=oy(E),T=x===l?_.isActive:null;T===!1&&(v=w);let R=E===d[x]&&E!==c[x]&&k;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),_.protectedKeys={...g},!_.isActive&&T===null||!E&&!_.prevProp||a_(E)||typeof E=="boolean")continue;const M=rbe(_.prevProp,E);let I=M||x===l&&_.isActive&&!R&&k||w>v&&k,O=!1;const P=Array.isArray(E)?E:[E];let U=P.reduce(s(x),{});T===!1&&(U={});const{prevResolvedValues:j={}}=_,V={...j,...U},$=te=>{I=!0,m.has(te)&&(O=!0,m.delete(te)),_.needsAnimating[te]=!0;const X=e.getValue(te);X&&(X.liveStyle=!1)};for(const te in V){const X=U[te],ie=j[te];if(g.hasOwnProperty(te))continue;let Z=!1;CT(X)&&CT(ie)?Z=!Lz(X,ie):Z=X!==ie,Z?X!=null?$(te):m.add(te):X!==void 0&&m.has(te)?$(te):_.protectedKeys[te]=!0}_.prevProp=E,_.prevResolvedValues=U,_.isActive&&(g={...g,...U}),r&&e.blockInitialAnimation&&(I=!1),I&&(!(R&&M)||O)&&h.push(...P.map(te=>({animation:te,options:{type:x}})))}if(m.size){const w={};if(typeof c.initial!="boolean"){const x=uy(e,Array.isArray(c.initial)?c.initial[0]:c.initial);x&&x.transition&&(w.transition=x.transition)}m.forEach(x=>{const _=e.getBaseTarget(x),E=e.getValue(x);E&&(E.liveStyle=!0),w[x]=_??null}),h.push({animation:w})}let b=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(h):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=SO(),r=!0}}}function rbe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Lz(t,e):!1}function rf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SO(){return{animate:rf(!0),whileInView:rf(),whileHover:rf(),whileTap:rf(),whileDrag:rf(),whileFocus:rf(),exit:rf()}}class _d{constructor(t){this.isMounted=!1,this.node=t}update(){}}class sbe extends _d{constructor(t){super(t),t.animationState||(t.animationState=nbe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();a_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let ibe=0;class abe extends _d{constructor(){super(...arguments),this.id=ibe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const obe={animation:{Feature:sbe},exit:{Feature:abe}};function py(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const IN=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function mb(e){return{point:{x:e.pageX,y:e.pageY}}}const lbe=e=>t=>IN(t)&&e(t,mb(t));function a0(e,t,n,r){return py(e,t,lbe(n),r)}function Bz({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function cbe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function ube(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const zz=1e-4,dbe=1-zz,fbe=1+zz,Uz=.01,hbe=0-Uz,pbe=0+Uz;function Bi(e){return e.max-e.min}function mbe(e,t,n){return Math.abs(e-t)<=n}function EO(e,t,n,r=.5){e.origin=r,e.originPoint=as(t.min,t.max,e.origin),e.scale=Bi(n)/Bi(t),e.translate=as(n.min,n.max,e.origin)-e.originPoint,(e.scale>=dbe&&e.scale<=fbe||isNaN(e.scale))&&(e.scale=1),(e.translate>=hbe&&e.translate<=pbe||isNaN(e.translate))&&(e.translate=0)}function o0(e,t,n,r){EO(e.x,t.x,n.x,r?r.originX:void 0),EO(e.y,t.y,n.y,r?r.originY:void 0)}function CO(e,t,n){e.min=n.min+t.min,e.max=e.min+Bi(t)}function gbe(e,t,n){CO(e.x,t.x,n.x),CO(e.y,t.y,n.y)}function kO(e,t,n){e.min=t.min-n.min,e.max=e.min+Bi(t)}function l0(e,t,n){kO(e.x,t.x,n.x),kO(e.y,t.y,n.y)}const TO=()=>({translate:0,scale:1,origin:0,originPoint:0}),up=()=>({x:TO(),y:TO()}),AO=()=>({min:0,max:0}),ys=()=>({x:AO(),y:AO()});function Wa(e){return[e("x"),e("y")]}function KC(e){return e===void 0||e===1}function LT({scale:e,scaleX:t,scaleY:n}){return!KC(e)||!KC(t)||!KC(n)}function af(e){return LT(e)||qz(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function qz(e){return RO(e.x)||RO(e.y)}function RO(e){return e&&e!=="0%"}function $x(e,t,n){const r=e-n,s=t*r;return n+s}function NO(e,t,n,r,s){return s!==void 0&&(e=$x(e,s,r)),$x(e,n,r)+t}function $T(e,t=0,n=1,r,s){e.min=NO(e.min,t,n,r,s),e.max=NO(e.max,t,n,r,s)}function Vz(e,{x:t,y:n}){$T(e.x,t.translate,t.scale,t.originPoint),$T(e.y,n.translate,n.scale,n.originPoint)}const IO=.999999999999,jO=1.0000000000001;function ybe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fp(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Vz(e,a)),r&&af(i.latestValues)&&fp(e,i.latestValues))}t.x<jO&&t.x>IO&&(t.x=1),t.y<jO&&t.y>IO&&(t.y=1)}function dp(e,t){e.min=e.min+t,e.max=e.max+t}function MO(e,t,n,r,s=.5){const i=as(e.min,e.max,s);$T(e,t,n,i,r)}function fp(e,t){MO(e.x,t.x,t.scaleX,t.scale,t.originX),MO(e.y,t.y,t.scaleY,t.scale,t.originY)}function Hz(e,t){return Bz(ube(e.getBoundingClientRect(),t))}function bbe(e,t,n){const r=Hz(e,n),{scroll:s}=t;return s&&(dp(r.x,s.offset.x),dp(r.y,s.offset.y)),r}const Gz=({current:e})=>e?e.ownerDocument.defaultView:null,DO=(e,t)=>Math.abs(e-t);function vbe(e,t){const n=DO(e.x,t.x),r=DO(e.y,t.y);return Math.sqrt(n**2+r**2)}class Kz{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ZC(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=vbe(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:v}=h,{timestamp:b}=fi;this.history.push({...v,timestamp:b});const{onStart:w,onMove:x}=this.handlers;m||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=WC(m,this.transformPagePoint),ls.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=ZC(h.type==="pointercancel"?this.lastMoveEventInfo:WC(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,w),v&&v(h,w)},!IN(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const a=mb(t),o=WC(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=fi;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,ZC(o,this.history)),this.removeListeners=hb(a0(this.contextWindow,"pointermove",this.handlePointerMove),a0(this.contextWindow,"pointerup",this.handlePointerUp),a0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ad(this.updatePoint)}}function WC(e,t){return t?{point:t(e.point)}:e}function OO(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ZC({point:e},t){return{point:e,delta:OO(e,Wz(t)),offset:OO(e,wbe(t)),velocity:xbe(t,.1)}}function wbe(e){return e[0]}function Wz(e){return e[e.length-1]}function xbe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Wz(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>kl(t)));)n--;if(!r)return{x:0,y:0};const i=Tl(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function _be(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?as(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?as(n,e,r.max):Math.min(e,n)),e}function PO(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Sbe(e,{top:t,left:n,bottom:r,right:s}){return{x:PO(e.x,n,s),y:PO(e.y,t,r)}}function FO(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Ebe(e,t){return{x:FO(e.x,t.x),y:FO(e.y,t.y)}}function Cbe(e,t){let n=.5;const r=Bi(e),s=Bi(t);return s>r?n=hy(t.min,t.max-r,e.min):r>s&&(n=hy(e.min,e.max-s,t.min)),Uc(0,1,n)}function kbe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const BT=.35;function Tbe(e=BT){return e===!1?e=0:e===!0&&(e=BT),{x:LO(e,"left","right"),y:LO(e,"top","bottom")}}function LO(e,t,n){return{min:$O(e,t),max:$O(e,n)}}function $O(e,t){return typeof e=="number"?e:e[t]||0}const So={x:!1,y:!1};function Zz(){return So.x||So.y}function Abe(e){return e==="x"||e==="y"?So[e]?null:(So[e]=!0,()=>{So[e]=!1}):So.x||So.y?null:(So.x=So.y=!0,()=>{So.x=So.y=!1})}const Rbe=new WeakMap;class Nbe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ys(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(mb(d).point)},i=(d,h)=>{const{drag:m,dragPropagation:g,onDragStart:v}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Abe(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wa(w=>{let x=this.getAxisMotionValue(w).get()||0;if(Cl.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[w];E&&(x=Bi(E)*(parseFloat(x)/100))}}this.originPoint[w]=x}),v&&ls.postRender(()=>v(d,h)),kT(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:v,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:w}=h;if(g&&this.currentDirection===null){this.currentDirection=Ibe(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),b&&b(d,h)},o=(d,h)=>this.stop(d,h),l=()=>Wa(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Kz(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Gz(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ls.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!aw(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=_be(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&lp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Sbe(r.layoutBox,t):this.constraints=!1,this.elastic=Tbe(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Wa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=kbe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!lp(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=bbe(r,s.root,this.visualElement.getTransformPagePoint());let a=Ebe(s.layout.layoutBox,i);if(n){const o=n(cbe(a));this.hasMutatedConstraints=!!o,o&&(a=Bz(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Wa(d=>{if(!aw(d,n,this.currentDirection))return;let h=l&&l[d]||{};a&&(h={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,v={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return kT(this.visualElement,t),r.start(NN(t,r,0,n,this.visualElement,!1))}stopAnimation(){Wa(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Wa(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Wa(n=>{const{drag:r}=this.getProps();if(!aw(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[n];i.set(t[n]-as(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lp(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Wa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=Cbe({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wa(a=>{if(!aw(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(as(l,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;Rbe.set(this.visualElement,this);const t=this.visualElement.current,n=a0(t,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();lp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ls.read(r);const a=py(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Wa(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=BT,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function aw(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Ibe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class jbe extends _d{constructor(t){super(t),this.removeGroupControls=no,this.removeListeners=no,this.controls=new Nbe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||no}unmount(){this.removeGroupControls(),this.removeListeners()}}const BO=e=>(t,n)=>{e&&ls.postRender(()=>e(t,n))};class Mbe extends _d{constructor(){super(...arguments),this.removePointerDownListener=no}onPointerDown(t){this.session=new Kz(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Gz(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:BO(t),onStart:BO(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&ls.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=a0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Aw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const qg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Tn.test(e))e=parseFloat(e);else return e;const n=zO(e,t.target.x),r=zO(e,t.target.y);return`${n}% ${r}%`}},Dbe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=od.parse(e);if(s.length>5)return r;const i=od.createTransformer(e),a=typeof s[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;s[0+a]/=o,s[1+a]/=l;const c=as(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),i(s)}};class Obe extends C.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;Kge(Pbe),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Aw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,s||t.layoutDependency!==n||n===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||ls.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),aN.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Yz(e){const[t,n]=VB(),r=C.useContext(QR);return p.jsx(Obe,{...e,layoutGroup:r,switchLayoutGroup:C.useContext(YB),isPresent:t,safeToRemove:n})}const Pbe={borderRadius:{...qg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qg,borderTopRightRadius:qg,borderBottomLeftRadius:qg,borderBottomRightRadius:qg,boxShadow:Dbe};function Fbe(e,t,n){const r=ki(e)?e:dy(e);return r.start(NN("",r,t,n)),r.animation}function Lbe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const $be=(e,t)=>e.depth-t.depth;class Bbe{constructor(){this.children=[],this.isDirty=!1}add(t){gN(this.children,t),this.isDirty=!0}remove(t){yN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($be),this.isDirty=!1,this.children.forEach(t)}}function zbe(e,t){const n=aa.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(ad(r),e(i-t))};return ls.setup(r,!0),()=>ad(r)}const Xz=["TopLeft","TopRight","BottomLeft","BottomRight"],Ube=Xz.length,UO=e=>typeof e=="string"?parseFloat(e):e,qO=e=>typeof e=="number"||Tn.test(e);function qbe(e,t,n,r,s,i){s?(e.opacity=as(0,n.opacity??1,Vbe(r)),e.opacityExit=as(t.opacity??1,0,Hbe(r))):i&&(e.opacity=as(t.opacity??1,n.opacity??1,r));for(let a=0;a<Ube;a++){const o=`border${Xz[a]}Radius`;let l=VO(t,o),c=VO(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||qO(l)===qO(c)?(e[o]=Math.max(as(UO(l),UO(c),r),0),(Cl.test(c)||Cl.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||n.rotate)&&(e.rotate=as(t.rotate||0,n.rotate||0,r))}function VO(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Vbe=Jz(0,.5,Cz),Hbe=Jz(.5,.95,no);function Jz(e,t,n){return r=>r<e?0:r>t?1:n(hy(e,t,r))}function HO(e,t){e.min=t.min,e.max=t.max}function Ga(e,t){HO(e.x,t.x),HO(e.y,t.y)}function GO(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function KO(e,t,n,r,s){return e-=t,e=$x(e,1/n,r),s!==void 0&&(e=$x(e,1/s,r)),e}function Gbe(e,t=0,n=1,r=.5,s,i=e,a=e){if(Cl.test(t)&&(t=parseFloat(t),t=as(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=as(i.min,i.max,r);e===i&&(o-=t),e.min=KO(e.min,t,n,o,s),e.max=KO(e.max,t,n,o,s)}function WO(e,t,[n,r,s],i,a){Gbe(e,t[n],t[r],t[s],t.scale,i,a)}const Kbe=["x","scaleX","originX"],Wbe=["y","scaleY","originY"];function ZO(e,t,n,r){WO(e.x,t,Kbe,n?n.x:void 0,r?r.x:void 0),WO(e.y,t,Wbe,n?n.y:void 0,r?r.y:void 0)}function YO(e){return e.translate===0&&e.scale===1}function Qz(e){return YO(e.x)&&YO(e.y)}function XO(e,t){return e.min===t.min&&e.max===t.max}function Zbe(e,t){return XO(e.x,t.x)&&XO(e.y,t.y)}function JO(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function e7(e,t){return JO(e.x,t.x)&&JO(e.y,t.y)}function QO(e){return Bi(e.x)/Bi(e.y)}function eP(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Ybe{constructor(){this.members=[]}add(t){gN(this.members,t),t.scheduleRender()}remove(t){if(yN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Xbe(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const YC=["","X","Y","Z"],Jbe={visibility:"hidden"},tP=1e3;let Qbe=0;function XC(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function t7(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=lz(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ls,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&t7(r)}function n7({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},o=t==null?void 0:t()){this.id=Qbe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nve),this.nodes.forEach(ove),this.nodes.forEach(lve),this.nodes.forEach(rve)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Bbe)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new bN),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Lbe(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=zbe(h,250),Aw.hasAnimatedSinceResize&&(Aw.hasAnimatedSinceResize=!1,this.nodes.forEach(rP))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||hve,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=c.getProps(),x=!this.targetLayout||!e7(this.targetLayout,g),_=!h&&m;if(this.options.layoutRoot||this.resumeFrom||_||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const E={...vN(v,"layout"),onPlay:b,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||rP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ad(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cve),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&t7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nP);return}this.isUpdating||this.nodes.forEach(ive),this.isUpdating=!1,this.nodes.forEach(ave),this.nodes.forEach(eve),this.nodes.forEach(tve),this.clearAllSnapshots();const o=aa.now();fi.delta=Uc(0,1e3/60,o-fi.timestamp),fi.timestamp=o,fi.isProcessing=!0,qC.update.process(fi),qC.preRender.process(fi),qC.render.process(fi),fi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,aN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sve),this.sharedNodes.forEach(uve)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ls.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ls.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Bi(this.snapshot.measuredBox.x)&&!Bi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ys(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Qz(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||af(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),pve(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return ys();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(mve))){const{scroll:d}=this.root;d&&(dp(o.x,d.offset.x),dp(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=ys();if(Ga(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&Ga(o,a),dp(o.x,h.offset.x),dp(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=ys();Ga(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&fp(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),af(d.latestValues)&&fp(l,d.latestValues)}return af(this.latestValues)&&fp(l,this.latestValues),l}removeTransform(a){const o=ys();Ga(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!af(c.latestValues))continue;LT(c.latestValues)&&c.updateSnapshot();const d=ys(),h=c.measurePageBox();Ga(d,h),ZO(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return af(this.latestValues)&&ZO(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=fi.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ys(),this.relativeTargetOrigin=ys(),l0(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ga(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ys(),this.targetWithTransforms=ys()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gbe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ga(this.target,this.layout.layoutBox),Vz(this.target,this.targetDelta)):Ga(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ys(),this.relativeTargetOrigin=ys(),l0(this.relativeTargetOrigin,this.target,g.target),Ga(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||LT(this.parent.latestValues)||qz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===fi.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Ga(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;ybe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ys());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GO(this.prevProjectionDelta.x,this.projectionDelta.x),GO(this.prevProjectionDelta.y,this.projectionDelta.y)),o0(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!eP(this.projectionDelta.x,this.prevProjectionDelta.x)||!eP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=up(),this.projectionDelta=up(),this.projectionDeltaWithTransform=up()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=up();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=ys(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,b=g!==v,w=this.getStack(),x=!w||w.members.length<=1,_=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(fve));this.animationProgress=0;let E;this.mixTargetDelta=k=>{const T=k/1e3;sP(h.x,a.x,T),sP(h.y,a.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(l0(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dve(this.relativeTarget,this.relativeTargetOrigin,m,T),E&&Zbe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ys()),Ga(E,this.relativeTarget)),b&&(this.animationValues=d,qbe(d,c,this.latestValues,T,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ad(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ls.update(()=>{Aw.hasAnimatedSinceResize=!0,this.currentAnimation=Fbe(0,tP,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&r7(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ys();const h=Bi(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const m=Bi(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+m}Ga(o,l),fp(o,d),o0(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Ybe),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&XC("z",a,c,this.animationValues);for(let d=0;d<YC.length;d++)XC(`rotate${YC[d]}`,a,c,this.animationValues),XC(`skew${YC[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Jbe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=kw(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=kw(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!af(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),o.transform=Xbe(this.projectionDeltaWithTransform,this.treeScale,d),l&&(o.transform=l(d,o.transform));const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,c.animationValues?o.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in ly){if(d[g]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:w}=ly[g],x=o.transform==="none"?d[g]:v(d[g],c);if(b){const _=b.length;for(let E=0;E<_;E++)o[b[E]]=x}else w?this.options.visualElement.renderState.vars[g]=x:o[g]=x}return this.options.layoutId&&(o.pointerEvents=c===this?kw(a==null?void 0:a.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(nP),this.root.sharedNodes.clear()}}}function eve(e){e.updateLayout()}function tve(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?Wa(h=>{const m=a?t.measuredBox[h]:t.layoutBox[h],g=Bi(m);m.min=r[h].min,m.max=m.min+g}):r7(i,t.layoutBox,r)&&Wa(h=>{const m=a?t.measuredBox[h]:t.layoutBox[h],g=Bi(r[h]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=up();o0(o,r,t.layoutBox);const l=up();a?o0(l,e.applyTransform(s,!0),t.measuredBox):o0(l,r,t.layoutBox);const c=!Qz(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const v=ys();l0(v,t.layoutBox,m.layoutBox);const b=ys();l0(b,r,g.layoutBox),e7(v,b)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function nve(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function rve(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function sve(e){e.clearSnapshot()}function nP(e){e.clearMeasurements()}function ive(e){e.isLayoutDirty=!1}function ave(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rP(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ove(e){e.resolveTargetDelta()}function lve(e){e.calcProjection()}function cve(e){e.resetSkewAndRotation()}function uve(e){e.removeLeadSnapshot()}function sP(e,t,n){e.translate=as(t.translate,0,n),e.scale=as(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function iP(e,t,n,r){e.min=as(t.min,n.min,r),e.max=as(t.max,n.max,r)}function dve(e,t,n,r){iP(e.x,t.x,n.x,r),iP(e.y,t.y,n.y,r)}function fve(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const hve={duration:.45,ease:[.4,0,.1,1]},aP=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),oP=aP("applewebkit/")&&!aP("chrome/")?Math.round:no;function lP(e){e.min=oP(e.min),e.max=oP(e.max)}function pve(e){lP(e.x),lP(e.y)}function r7(e,t,n){return e==="position"||e==="preserve-aspect"&&!mbe(QO(t),QO(n),.2)}function mve(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const gve=n7({attachResizeListener:(e,t)=>py(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),JC={current:void 0},s7=n7({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!JC.current){const e=new gve({});e.mount(window),e.setOptions({layoutScroll:!0}),JC.current=e}return JC.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),yve={pan:{Feature:Mbe},drag:{Feature:jbe,ProjectionNode:s7,MeasureLayout:Yz}};function bve(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=(n==null?void 0:n[e])??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function i7(e,t){const n=bve(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function cP(e){return!(e.pointerType==="touch"||Zz())}function vve(e,t,n={}){const[r,s,i]=i7(e,n),a=o=>{if(!cP(o))return;const{target:l}=o,c=t(l,o);if(typeof c!="function"||!l)return;const d=h=>{cP(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return r.forEach(o=>{o.addEventListener("pointerenter",a,s)}),i}function uP(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&ls.postRender(()=>i(t,mb(t)))}class wve extends _d{mount(){const{current:t}=this.node;t&&(this.unmount=vve(t,(n,r)=>(uP(this.node,r,"Start"),s=>uP(this.node,s,"End"))))}unmount(){}}class xve extends _d{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hb(py(this.node.current,"focus",()=>this.onFocus()),py(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const a7=(e,t)=>t?e===t?!0:a7(e,t.parentElement):!1,_ve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sve(e){return _ve.has(e.tagName)||e.tabIndex!==-1}const Yg=new WeakSet;function dP(e){return t=>{t.key==="Enter"&&e(t)}}function QC(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Eve=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=dP(()=>{if(Yg.has(n))return;QC(n,"down");const s=dP(()=>{QC(n,"up")}),i=()=>QC(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function fP(e){return IN(e)&&!Zz()}function Cve(e,t,n={}){const[r,s,i]=i7(e,n),a=o=>{const l=o.currentTarget;if(!fP(o)||Yg.has(l))return;Yg.add(l);const c=t(l,o),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),!(!fP(g)||!Yg.has(l))&&(Yg.delete(l),typeof c=="function"&&c(g,{success:v}))},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||a7(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",m,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),o instanceof HTMLElement&&(o.addEventListener("focus",c=>Eve(c,s)),!Sve(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function hP(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&ls.postRender(()=>i(t,mb(t)))}class kve extends _d{mount(){const{current:t}=this.node;t&&(this.unmount=Cve(t,(n,r)=>(hP(this.node,r,"Start"),(s,{success:i})=>hP(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zT=new WeakMap,ek=new WeakMap,Tve=e=>{const t=zT.get(e.target);t&&t(e)},Ave=e=>{e.forEach(Tve)};function Rve({root:e,...t}){const n=e||document;ek.has(n)||ek.set(n,{});const r=ek.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Ave,{root:e,...t})),r[s]}function Nve(e,t,n){const r=Rve(t);return zT.set(e,n),r.observe(e),()=>{zT.delete(e),r.unobserve(e)}}const Ive={some:0,all:1};class jve extends _d{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Ive[s]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=c?d:h;m&&m(l)};return Nve(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Mve(t,n))&&this.startObserver()}unmount(){}}function Mve({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Dve={inView:{Feature:jve},tap:{Feature:kve},focus:{Feature:xve},hover:{Feature:wve}},Ove={layout:{ProjectionNode:s7,MeasureLayout:Yz}},UT={current:null},o7={current:!1};function Pve(){if(o7.current=!0,!!tN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>UT.current=e.matches;e.addListener(t),t()}else UT.current=!1}const Fve=new WeakMap;function Lve(e,t,n){for(const r in t){const s=t[r],i=n[r];if(ki(s))e.addValue(r,s);else if(ki(i))e.addValue(r,dy(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,dy(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const l7=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),c7=e=>/^0[^.\s]+$/u.test(e),$ve={test:e=>e==="auto",parse:e=>e},u7=e=>t=>t.test(e),d7=[Sm,Tn,Cl,Mu,Zge,Wge,$ve],pP=e=>d7.find(u7(e)),Bve=[...d7,Si,od],zve=e=>Bve.find(u7(e)),Uve=new Set(["brightness","contrast","saturate","opacity"]);function qve(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(wN)||[];if(!r)return e;const s=n.replace(r,"");let i=Uve.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const Vve=/\b([a-z-]*)\(.*?\)/gu,qT={...od,getAnimatableNone:e=>{const t=e.match(Vve);return t?t.map(qve).join(" "):e}},Hve={...uN,color:Si,backgroundColor:Si,outlineColor:Si,fill:Si,stroke:Si,borderColor:Si,borderTopColor:Si,borderRightColor:Si,borderBottomColor:Si,borderLeftColor:Si,filter:qT,WebkitFilter:qT},f7=e=>Hve[e];function h7(e,t){let n=f7(e);return n!==qT&&(n=od),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const mP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Gve{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=AN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=aa.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ls.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=o_(n),this.isVariantNode=WB(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&ki(g)&&g.set(l[m],!1)}}mount(t){this.current=t,Fve.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),o7.current||Pve(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:UT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ad(this.notifyUpdate),ad(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=_m.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ls.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Kp){const n=Kp[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ys()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<mP.length;r++){const s=mP[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=t[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=Lve(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=dy(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(l7(r)||c7(r))?r=parseFloat(r):!zve(r)&&od.test(n)&&(r=h7(t,n)),this.setBaseTarget(t,ki(r)?r.get():r)),ki(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=pN(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ki(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new bN),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}const Kve=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Wve(e){const t=Kve.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function p7(e,t,n=1){const[r,s]=Wve(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return l7(a)?parseFloat(a):a}return cN(s)?p7(s,t,n+1):s}function Zve(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||c7(e):!0}const Yve=new Set(["auto","none","0"]);function Xve(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!Yve.has(i)&&fy(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=h7(n,s)}class Jve extends AN{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),cN(c))){const d=p7(c,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Pz.has(r)||t.length!==2)return;const[s,i]=t,a=pP(s),o=pP(i);if(a!==o)if(vO(a)&&vO(o))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else vf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||Zve(t[s]))&&r.push(s);r.length&&Xve(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vf[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=vf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class m7 extends Gve{constructor(){super(...arguments),this.KeyframeResolver=Jve}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ki(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function g7(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}function Qve(e){return window.getComputedStyle(e)}class ewe extends m7{constructor(){super(...arguments),this.type="html",this.renderInstance=g7}readValueFromInstance(t,n){if(_m.has(n))return Eye(t,n);{const r=Qve(t),s=(lN(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Hz(t,n)}build(t,n,r){dN(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return mN(t,n,r)}}const y7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function twe(e,t,n,r){g7(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(y7.has(s)?s:iN(s),t.attrs[s])}class nwe extends m7{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ys}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(_m.has(n)){const r=f7(n);return r&&r.default||0}return n=y7.has(n)?n:iN(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return az(t,n,r)}build(t,n,r){nz(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){twe(t,n,r,s)}mount(t){this.isSVGTag=sz(t.tagName),super.mount(t)}}const rwe=(e,t)=>hN(e)?new nwe(t):new ewe(t,{allowProjection:e!==C.Fragment}),swe=h0e({...obe,...Dve,...yve,...Ove},rwe),ko=Mge(swe),iwe=".litechat/conversations",b7="/synced_repos";async function awe(e,t,n){n(t.id,"syncing");const r=or(`${b7}/${t.id}`),s={username:t.username,password:t.password},i=t.branch||"main";try{let a=!1;try{await e.promises.stat(Dl(r,".git")),a=!0}catch(o){if(o.code==="ENOENT")a=!1;else throw o}a?(ze.info(`Pulling latest changes for "${t.name}"...`),await Z1(r,i,s,{fsInstance:e}),ze.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(ze.info(`Cloning repository "${t.name}"...`),await B$(r,t.remoteUrl,i,s,{fsInstance:e}),ze.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(a){console.error(`Failed to initialize/sync repository ${t.name}:`,a),n(t.id,"error")}}async function owe(e,t,n,r,s,i,a){var h,m;r(t.id,"syncing");const o=or(`${b7}/${n.id}`),l=Dl(o,iwe,`${t.id}.json`),c={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(Dl(o,".git"))}catch(x){if(x.code==="ENOENT"){ze.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}ze.info(`Pulling latest changes for "${n.name}"...`),await Z1(o,d,c,{fsInstance:e});let g=null,v=null;try{const x=await xd(l,{fsInstance:e}),_=new TextDecoder().decode(x);g=JSON.parse(_),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),ze.warning(`Could not read remote version of conversation: ${x.message}`))}const b=t.updatedAt.getTime(),w=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!g||b>(v??0)||b>w&&b>=(v??0)){ze.info("Local changes detected. Pushing to remote...");const x=await Nt.loadInteractionsForConversation(t.id),{lastSyncedAt:_,...E}=t,k=JSON.stringify({conversation:E,interactions:x},null,2);await Y1(l,k,{fsInstance:e}),await PR(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await FR(o,d,c,{fsInstance:e}),await s(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),ze.success("Conversation synced successfully (pushed).")}else if(v&&v>b){ze.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await Nt.saveConversation(x),await Nt.deleteInteractionsForConversation(t.id);const _=g.interactions.map(E=>Nt.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(_),i()===t.id&&a()==="conversation"&&await Hn.getState().loadInteractions(t.id),r(t.id,"idle"),ze.success("Conversation synced successfully (pulled).")}else ze.info("Conversation already up-to-date."),await s(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const pl={loaded:"project.loaded",added:"project.added",updated:"project.updated",deleted:"project.deleted",loadingStateChanged:"project.loading.state.changed",loadProjectsRequest:"project.load.projects.request",addProjectRequest:"project.add.project.request",updateProjectRequest:"project.update.project.request",deleteProjectRequest:"project.delete.project.request"},gi=lo(co((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await Nt.loadProjects();e({projects:n,isLoading:!1}),We.emit(pl.loaded,{projects:n})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1}),We.emit(pl.loadingStateChanged,{isLoading:!1,error:"Failed to load projects"})}},addProject:async n=>{var l;const r=pi(),s=new Date,i=n.parentId?((l=t().getProjectById(n.parentId))==null?void 0:l.path)??"/":"/",a=or(`${i}/${n.name.replace(/\s+/g,"-").toLowerCase()}-${r.substring(0,4)}`),o={id:r,path:a,createdAt:s,updatedAt:s,name:n.name,parentId:n.parentId??null,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,defaultTagIds:n.defaultTagIds??null,defaultRuleIds:n.defaultRuleIds??null,metadata:n.metadata??{}};try{return await Nt.saveProject(o),e(c=>{c.projects.unshift(o),c.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())}),We.emit(pl.added,{project:o}),r}catch(c){throw console.error("ProjectStore: Error adding project",c),e({error:"Failed to save new project"}),c}},updateProject:async(n,r)=>{var a;const s=t().getProjectById(n);if(!s){console.warn(`ProjectStore: Project ${n} not found for update.`);return}const i={...s,...r,updatedAt:new Date};if(r.name&&r.name!==s.name){const o=s.parentId?((a=t().getProjectById(s.parentId))==null?void 0:a.path)??"/":"/";i.path=or(`${o}/${r.name.replace(/\s+/g,"-").toLowerCase()}-${n.substring(0,4)}`)}try{await Nt.saveProject(i),e(o=>{const l=o.projects.findIndex(c=>c.id===n);l!==-1&&(o.projects[l]=i,o.projects.sort((c,d)=>d.updatedAt.getTime()-c.updatedAt.getTime()))}),We.emit(pl.updated,{projectId:n,updates:i})}catch(o){throw console.error("ProjectStore: Error updating project",o),e({error:"Failed to save project update"}),o}},deleteProject:async n=>{const r=t().projects.find(a=>a.id===n);if(!r)return;const s=new Set,i=a=>{s.add(a),t().projects.filter(o=>o.parentId===a).forEach(o=>i(o.id))};i(n);try{await Nt.deleteProject(n),e(a=>({projects:a.projects.filter(o=>!s.has(o.id))})),ir.getState()._unlinkConversationsFromProjects(Array.from(s)),We.emit(pl.deleted,{projectId:n}),ze.success(`Project "${r.name}" and its contents deleted.`)}catch(a){throw console.error("ProjectStore: Error deleting project",a),e({error:"Failed to delete project"}),a}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getTopLevelProjectId:n=>{if(!n)return null;let r=t().getProjectById(n);if(!r)return null;for(;r.parentId;){const s=t().getProjectById(r.parentId);if(!s)break;r=s}return r.id},getEffectiveProjectSettings:n=>{const r=ur.getState(),s=gr.getState().selectedModelId,i={systemPrompt:r.globalSystemPrompt,modelId:s,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null};if(!n)return i;const a=t().getProjectById(n);if(!a)return i;const o=a.parentId?t().getEffectiveProjectSettings(a.parentId):i;return{systemPrompt:a.systemPrompt!==null&&a.systemPrompt!==void 0?a.systemPrompt:o.systemPrompt,modelId:a.modelId!==null&&a.modelId!==void 0?a.modelId:o.modelId,temperature:a.temperature!==null&&a.temperature!==void 0?a.temperature:o.temperature,maxTokens:a.maxTokens!==null&&a.maxTokens!==void 0?a.maxTokens:o.maxTokens,topP:a.topP!==null&&a.topP!==void 0?a.topP:o.topP,topK:a.topK!==null&&a.topK!==void 0?a.topK:o.topK,presencePenalty:a.presencePenalty!==null&&a.presencePenalty!==void 0?a.presencePenalty:o.presencePenalty,frequencyPenalty:a.frequencyPenalty!==null&&a.frequencyPenalty!==void 0?a.frequencyPenalty:o.frequencyPenalty,defaultTagIds:a.defaultTagIds!==null&&a.defaultTagIds!==void 0?a.defaultTagIds:o.defaultTagIds,defaultRuleIds:a.defaultRuleIds!==null&&a.defaultRuleIds!==void 0?a.defaultRuleIds:o.defaultRuleIds}},getRegisteredActionHandlers:()=>{const n="projectStore",r=t(),s=i=>async a=>{await i(a)};return[{eventName:pl.loadProjectsRequest,handler:r.loadProjects,storeId:n},{eventName:pl.addProjectRequest,handler:s(r.addProject),storeId:n},{eventName:pl.updateProjectRequest,handler:i=>r.updateProject(i.id,i.updates),storeId:n},{eventName:pl.deleteProjectRequest,handler:i=>r.deleteProject(i.id),storeId:n}]}}))),ow=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},lwe=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${wT(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${wT(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,s)=>r.index-s.index).forEach(r=>{var s,i,a,o,l,c,d,h;((s=r.prompt)!=null&&s.content||(o=(a=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:a.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${G0(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class hp{static async importConversation(t,n,r){try{const s=await t.text(),i=JSON.parse(s);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const a=i.conversation,o=i.interactions;if(!a.id||!a.title||!a.createdAt||!a.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:a.title||"Imported Chat",metadata:a.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),c=o.map(d=>Nt.saveInteraction({...d,conversationId:l,id:pi()}));await Promise.all(c),await r(l,"conversation"),ze.success("Conversation imported successfully.")}catch(s){throw console.error("ImportExportService: Error importing conversation",s),ze.error(`Import failed: ${s instanceof Error?s.message:String(s)}`),s}}static async exportConversation(t,n){try{const r=ir.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const s=await Nt.loadInteractionsForConversation(t);let i,a;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const c=JSON.stringify({conversation:r,interactions:s},null,2);i=new Blob([c],{type:"application/json"}),a=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=lwe(r,s);i=new Blob([l],{type:"text/markdown"}),a=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");ow(i,a),ze.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),ze.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=gi.getState(),{conversations:s}=ir.getState(),i=r(t);if(!i)throw new Error("Project not found.");const a=async m=>{const g=n.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const v=n.filter(x=>x.parentId===m),b=s.filter(x=>x.projectId===m),w=[];for(const x of v)w.push(await a(x.id));for(const x of b){const _=await Nt.loadInteractionsForConversation(x.id);w.push({conversation:x,interactions:_})}return{project:g,children:w}},o=await a(t),l=JSON.stringify(o,null,2),c=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;ow(c,h),ze.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),ze.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=ir.getState().conversations,n=[];for(const a of t){const o=await Nt.loadInteractionsForConversation(a.id);n.push({conversation:a,interactions:o})}const r=JSON.stringify(n,null,2),s=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;ow(s,i),ze.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),ze.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await Nt.getAllDataForExport(t),r=JSON.stringify(n,null,2),s=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;ow(s,i),ze.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),ze.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),s=JSON.parse(r);if(!s||typeof s!="object"||!s.version)throw new Error("Invalid import file format. Missing version or basic structure.");await Nt.importAllData(s,n),ze.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),ze.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const gP="sync_repos",Ls=lo(co((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)}),We.emit(sn.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n}),We.emit(sn.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&ze.error(`VFS Error: ${n}`)}),We.emit(sn.loadingStateChanged,{isLoading:t().loading,operationLoading:t().operationLoading,error:t().error})},_addNodes:n=>{e(r=>{const s={};n.forEach(i=>{r.nodes[i.id]=i;const a=i.parentId??r.rootId??"";s[a]||(s[a]=r.childrenMap[a]?[...r.childrenMap[a]]:[]),s[a].includes(i.id)||s[a].push(i.id)});for(const i in s)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(s[i].sort()))&&(r.childrenMap[i]=s[i])}),We.emit(sn.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap})},_updateNode:(n,r)=>{e(s=>{s.nodes[n]&&Object.assign(s.nodes[n],r)}),We.emit(sn.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap})},_removeNodes:n=>{e(r=>{n.forEach(s=>{const i=r.nodes[s];if(i){const a=i.parentId??r.rootId??"";if(r.childrenMap[a]&&(r.childrenMap[a]=r.childrenMap[a].filter(o=>o!==s)),delete r.nodes[s],r.selectedFileIds.delete(s),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===s).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[s]}}})}),We.emit(sn.nodesUpdated,{vfsKey:t().vfsKey,nodes:t().nodes,childrenMap:t().childrenMap}),We.emit(sn.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},_setFsInstance:n=>{e({fs:n}),We.emit(sn.fsInstanceChanged,{fsInstance:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),We.emit(sn.vfsEnabledChanged,{enabled:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),We.emit(sn.vfsKeyChanged,{vfsKey:null,configuredVfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),We.emit(sn.vfsKeyChanged,{vfsKey:t().vfsKey,configuredVfsKey:n})},setVfsKey:n=>{if(n!==null){const r=t().vfsKey,s=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==s&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${s}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),We.emit(sn.vfsKeyChanged,{vfsKey:n,configuredVfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")}},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const s=(r==null?void 0:r.force)===!0;if(!s){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:a,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:c}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${s})`),e({initializingKey:n}),s||(i(!0),a(null));try{const d=await qde(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!s&&t().vfsKey!==n){const g=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${g}`),e({initializingKey:null,loading:!1}),new Error(g)}if(s)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),c(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let m=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(g){if(g.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw g}if(!m||m.path!=="/"){const g=Date.now();m={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:g,lastModified:g},o([m]),console.log("[VfsStore] Root node added/updated in state.")}return e(g=>{g.rootId=m.id,g.currentParentId=m.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${m.id}`),await t().fetchNodes(m.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(a(h),s||(l(null),c(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),s||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:s,_addNodes:i,fs:a,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:d,initializingKey:h}=t();if(!a||c!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!a}, Match: ${c===d}, Init: ${h}`);return}r(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${c})`);const v=await LR(g,{fsInstance:a});console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const b=n??l??"",w=new Set(v.map(T=>T.path)),E=(t().childrenMap[b]||[]).map(T=>t().nodes[T]).filter(Boolean).filter(T=>!w.has(T.path)).map(T=>T.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const k=v.map(T=>{const R=Object.values(t().nodes).find(I=>I.path===T.path),M=Date.now();return{id:(R==null?void 0:R.id)||pi(),parentId:n,name:T.name,path:T.path,type:T.isDirectory?"folder":"file",size:T.size,createdAt:(R==null?void 0:R.createdAt)??M,lastModified:T.lastModified.getTime(),mimeType:T.isDirectory?void 0:T.mimeType}});k.length>0&&(console.log(`[VfsStore] Adding/Updating ${k.length} nodes.`),i(k)),e(T=>{const R=k.map(M=>M.id);(!T.childrenMap[b]||JSON.stringify(T.childrenMap[b].sort())!==JSON.stringify(R.sort()))&&(T.childrenMap[b]=R,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),s("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=or(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const s=t().rootId;return s?t().nodes[s]:void 0}return Object.values(t().nodes).find(s=>s.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:s,rootId:i,fs:a}=t();if(!a||t().vfsKey!==t().configuredVfsKey)return;const o=or(n),l=r(o);l&&l.type==="folder"?(e(c=>{c.currentParentId=l.id}),t().childrenMap[l.id]||await s(l.id)):o==="/"&&i?(e(c=>{c.currentParentId=i}),t().childrenMap[i]||await s(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:s,_setError:i,fs:a,nodes:o,rootId:l,_addNodes:c,configuredVfsKey:d,vfsKey:h}=t();if(!a||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}s(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/",v=pT(g,r.trim());try{throw await a.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await q$(v,{fsInstance:a});const b=Date.now(),x={id:pi(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};c([x])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{s(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:s,_setError:i,fs:a,nodes:o,rootId:l,configuredVfsKey:c,vfsKey:d}=t();if(!a||c!==d){i("Filesystem not ready.");return}s(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/";await V$(Array.from(r),m,{fsInstance:a}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{s(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:s,_removeNodes:i,fs:a,configuredVfsKey:o,vfsKey:l}=t();if(!a||o!==l){s("Filesystem not ready.");return}r(!0);try{const c=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of c)await $R(d.path,d.type==="folder",{fsInstance:a});i(n)}catch(c){console.error("Failed to delete nodes:",c),s("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:s,_setError:i,_updateNode:a,nodes:o,fs:l,rootId:c,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=o[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){s(!0);try{const g=m.parentId?o[m.parentId]:o[c||""],v=g?g.path:"/",b=pT(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await H$(m.path,b,{fsInstance:l});const w={name:r.trim(),path:b,lastModified:Date.now()};a(n,w)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{s(!1)}}},downloadFile:async n=>{const{nodes:r,fs:s,_setError:i,configuredVfsKey:a,vfsKey:o}=t();if(!s||a!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const c=await xd(l.path,{fsInstance:s}),d=l.mimeType||"application/octet-stream",h=new Blob([c],{type:d});return{name:l.name,blob:h}}catch(c){return console.error("Failed to download file:",c),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const s=r.nodes[n];s&&s.type==="file"&&r.selectedFileIds.add(n)}),We.emit(sn.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)}),We.emit(sn.selectionChanged,{selectedFileIds:Array.from(t().selectedFileIds)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()}),We.emit(sn.selectionChanged,{selectedFileIds:[]})},getRegisteredActionHandlers:()=>{const n="vfsStore",r=t(),s=a=>async o=>{await a(o)},i=a=>async o=>{await a(o)};return[{eventName:sn.setVfsKeyRequest,handler:a=>r.setVfsKey(a.key),storeId:n},{eventName:sn.initializeVFSRequest,handler:s(r.initializeVFS),storeId:n},{eventName:sn.fetchNodesRequest,handler:a=>r.fetchNodes(a.parentId),storeId:n},{eventName:sn.setCurrentPathRequest,handler:a=>r.setCurrentPath(a.path),storeId:n},{eventName:sn.createDirectoryRequest,handler:a=>r.createDirectory(a.parentId,a.name),storeId:n},{eventName:sn.uploadFilesRequest,handler:a=>r.uploadFiles(a.parentId,a.files),storeId:n},{eventName:sn.deleteNodesRequest,handler:a=>r.deleteNodes(a.ids),storeId:n},{eventName:sn.renameNodeRequest,handler:a=>r.renameNode(a.id,a.newName),storeId:n},{eventName:sn.downloadFileRequest,handler:i(r.downloadFile),storeId:n},{eventName:sn.selectFileRequest,handler:a=>r.selectFile(a.fileId),storeId:n},{eventName:sn.deselectFileRequest,handler:a=>r.deselectFile(a.fileId),storeId:n},{eventName:sn.clearSelectionRequest,handler:r.clearSelection,storeId:n},{eventName:sn.setEnableVfsRequest,handler:a=>r._setEnableVfs(a.enabled),storeId:n}]}}))),Qn={sidebarItemsLoaded:"conversation.sidebar.items.loaded",selectedItemChanged:"conversation.selected.item.changed",conversationAdded:"conversation.added",conversationUpdated:"conversation.updated",conversationDeleted:"conversation.deleted",conversationSyncStatusChanged:"conversation.sync.status.changed",syncReposLoaded:"conversation.sync.repos.loaded",syncRepoChanged:"conversation.sync.repo.changed",syncRepoInitStatusChanged:"conversation.sync.repo.init.status.changed",loadingStateChanged:"conversation.loading.state.changed",loadSidebarItemsRequest:"conversation.load.sidebar.items.request",addConversationRequest:"conversation.add.conversation.request",updateConversationRequest:"conversation.update.conversation.request",deleteConversationRequest:"conversation.delete.conversation.request",selectItemRequest:"conversation.select.item.request",importConversationRequest:"conversation.import.conversation.request",exportConversationRequest:"conversation.export.conversation.request",exportProjectRequest:"conversation.export.project.request",exportAllConversationsRequest:"conversation.export.all.conversations.request",loadSyncReposRequest:"conversation.load.sync.repos.request",addSyncRepoRequest:"conversation.add.sync.repo.request",updateSyncRepoRequest:"conversation.update.sync.repo.request",deleteSyncRepoRequest:"conversation.delete.sync.repo.request",linkConversationToRepoRequest:"conversation.link.conversation.to.repo.request",syncConversationRequest:"conversation.sync.conversation.request",initializeOrSyncRepoRequest:"conversation.initialize.or.sync.repo.request",updateCurrentConversationToolSettingsRequest:"conversation.update.current.conversation.tool.settings.request"},Xg={repoChanged:"sync.repo.changed",repoInitStatusChanged:"sync.repo.init.status.changed"},cwe="/synced_repos",ir=lo(co((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await Ls.getState().initializeVFS(gP,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${gP}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),ze.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await gi.getState().loadProjects();const[n,r]=await Promise.all([Nt.loadConversations(),Nt.loadSyncRepos()]),s={};n.forEach(i=>{if(i.syncRepoId){const a=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;a?o&&o>a?s[i.id]="needs-sync":s[i.id]="idle":s[i.id]="needs-sync"}else s[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:s,repoInitializationStatus:{},isLoading:!1}),We.emit(Qn.sidebarItemsLoaded,{conversations:n,projects:gi.getState().projects}),We.emit(Qn.syncReposLoaded,{repos:r})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1}),We.emit(Qn.loadingStateChanged,{isLoading:!1,error:"Failed load sidebar items"})}},addConversation:async n=>{const r=pi(),s=new Date,i={id:r,createdAt:s,updatedAt:s,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(a=>{a.conversations.some(o=>o.id===i.id)||(a.conversations.unshift(i),a.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const a=t().getConversationById(r);if(a)await Nt.saveConversation(a),We.emit(Qn.conversationAdded,{conversation:a});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(a){throw console.error("ConversationStore: Error adding conversation",a),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),a}},updateConversation:async(n,r)=>{const s=t().getConversationById(n);if(!s){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(a=>{const o=a.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=a.conversations[o].metadata??{},c=r.metadata??{},d={...l,...c};Object.assign(a.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=a.conversations[o].lastSyncedAt instanceof Date?a.conversations[o].lastSyncedAt.getTime():null,g=a.conversations[o].updatedAt.getTime();"syncRepoId"in r?a.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&a.conversations[o].syncRepoId&&a.conversationSyncStatus[n]==="idle"&&(!m||g>m)&&(a.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const a=JSON.parse(JSON.stringify(i));await Nt.saveConversation(a),We.emit(Qn.conversationUpdated,{conversationId:n,updates:r})}catch(a){throw console.error("ConversationStore: Error updating conversation",a),e(o=>{const l=o.conversations.findIndex(c=>c.id===n);if(l!==-1){o.conversations[l]=s;const c=s.lastSyncedAt instanceof Date?s.lastSyncedAt.getTime():null,d=s.updatedAt.getTime();o.conversationSyncStatus[n]=s.syncRepoId&&c&&d<=c?"idle":s.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),a}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(a=>{const o=a.conversations.findIndex(l=>l.id===n);if(o!==-1){a.conversations[o]=s;const l=s.lastSyncedAt instanceof Date?s.lastSyncedAt.getTime():null,c=s.updatedAt.getTime();a.conversationSyncStatus[n]=s.syncRepoId&&l&&c<=l?"idle":s.syncRepoId?"needs-sync":"idle"}a.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,s=t().selectedItemType,i=t().conversations.find(a=>a.id===n);if(i){e(a=>({conversations:a.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&s==="conversation"?null:r,selectedItemType:r===n&&s==="conversation"?null:s,conversationSyncStatus:Object.fromEntries(Object.entries(a.conversationSyncStatus).filter(([o])=>o!==n))}));try{await Nt.deleteConversation(n),await Nt.deleteInteractionsForConversation(n),We.emit(Qn.conversationDeleted,{conversationId:n}),r===n&&s==="conversation"&&(await Hn.getState().setCurrentConversationId(null),We.emit(Qn.selectedItemChanged,{itemId:null,itemType:null}))}catch(a){throw console.error("ConversationStore: Error deleting conversation",a),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&c<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&s==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),a}}},selectItem:async(n,r)=>{const s=t().selectedItemId,i=t().selectedItemType;if(s===n&&i===r){console.log(`ConversationStore: Item ${n} (${r}) already selected.`);return}console.log(`ConversationStore: Selecting item. ID: ${n}, Type: ${r}. Previous: ${s} (${i})`),e({selectedItemId:n,selectedItemType:r});const a=r==="conversation"?n:null;console.log(`ConversationStore: Calling InteractionStore.setCurrentConversationId with: ${a}`),await Hn.getState().setCurrentConversationId(a),We.emit(Qn.selectedItemChanged,{itemId:n,itemType:r})},importConversation:async n=>{await hp.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await hp.exportConversation(n,r)},exportProject:async n=>{await hp.exportProject(n)},exportAllConversations:async()=>{await hp.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Nt.loadSyncRepos();e({syncRepos:n,isLoading:!1}),We.emit(Qn.syncReposLoaded,{repos:n})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1}),We.emit(Qn.loadingStateChanged,{isLoading:!1,error:"Failed load sync repositories"})}}},addSyncRepo:async n=>{const r=pi(),s=new Date,i={id:r,createdAt:s,updatedAt:s,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(a=>{a.syncRepos.push(i)});try{const a=t().syncRepos.find(o=>o.id===r);if(a){const o=JSON.parse(JSON.stringify(a));await Nt.saveSyncRepo(o),We.emit(Xg.repoChanged,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return ze.success(`Sync repository "${i.name}" added.`),r}catch(a){throw console.error("ConversationStore: Error adding sync repo",a),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),a}},updateSyncRepo:async(n,r)=>{const s=t().syncRepos.find(a=>a.id===n);if(!s){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(a=>{const o=a.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(a.syncRepos[o],{...r,branch:r.branch||a.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(a=>a.id===n);if(i)try{const a=JSON.parse(JSON.stringify(i));await Nt.saveSyncRepo(a),We.emit(Xg.repoChanged,{repoId:n,action:"updated"}),ze.success(`Sync repository "${i.name}" updated.`)}catch(a){throw console.error("ConversationStore: Error updating sync repo",a),e(o=>{const l=o.syncRepos.findIndex(c=>c.id===n);l!==-1&&(o.syncRepos[l]=s),o.error="Failed to save sync repository update"}),a}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(a=>{const o=a.syncRepos.findIndex(l=>l.id===n);o!==-1&&(a.syncRepos[o]=s),a.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(a=>a.id===n);if(!r)return;const s=or(`${cwe}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(a=>({syncRepos:a.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(a.repoInitializationStatus).filter(([o])=>o!==n))}));try{await Nt.deleteSyncRepo(n),We.emit(Xg.repoChanged,{repoId:n,action:"deleted"}),ze.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${s}`),await $R(s,!0,{fsInstance:i}),ze.info(`Removed local sync folder for "${r.name}".`)}catch(a){console.error(`[ConversationStore] Failed to delete VFS directory ${s}:`,a),a.code!=="ENOENT"&&ze.warning(`Failed to remove local sync folder: ${a.message}`)}}catch(a){throw console.error("ConversationStore: Error deleting sync repo",a),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),a}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),ze.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,s=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&s&&console.error(`Sync error for ${n}: ${s}`)}),We.emit(Qn.conversationSyncStatusChanged,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(s=>{s.repoInitializationStatus[n]=r}),We.emit(Xg.repoInitStatusChanged,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){ze.error("Sync repsitory configuration not found.");return}let s;try{s=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await awe(s,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){ze.error("Conversation not found for syncing.");return}if(!r.syncRepoId){ze.info("Conversation not linked to a sync repository.");return}const s=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!s){ze.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await owe(i,r,s,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const a=t().getConversationById(n);a&&e(o=>{const l=o.conversations.findIndex(c=>c.id===n);l!==-1&&(o.conversations[l]=a)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:s,updateConversation:i}=t();if(s!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const a=t().getConversationById(r);if(!a){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=a.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!a.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(s=>{s.conversations=s.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})},getRegisteredActionHandlers:()=>{const n="conversationStore",r=t(),s=i=>async a=>{await i(a)};return[{eventName:Qn.loadSidebarItemsRequest,handler:r.loadSidebarItems,storeId:n},{eventName:Qn.addConversationRequest,handler:s(r.addConversation),storeId:n},{eventName:Qn.updateConversationRequest,handler:i=>r.updateConversation(i.id,i.updates),storeId:n},{eventName:Qn.deleteConversationRequest,handler:i=>r.deleteConversation(i.id),storeId:n},{eventName:Qn.selectItemRequest,handler:i=>r.selectItem(i.id,i.type),storeId:n},{eventName:Qn.importConversationRequest,handler:i=>r.importConversation(i.file),storeId:n},{eventName:Qn.exportConversationRequest,handler:i=>r.exportConversation(i.conversationId,i.format),storeId:n},{eventName:Qn.exportProjectRequest,handler:i=>r.exportProject(i.projectId),storeId:n},{eventName:Qn.exportAllConversationsRequest,handler:r.exportAllConversations,storeId:n},{eventName:Qn.loadSyncReposRequest,handler:r.loadSyncRepos,storeId:n},{eventName:Qn.addSyncRepoRequest,handler:s(r.addSyncRepo),storeId:n},{eventName:Qn.updateSyncRepoRequest,handler:i=>r.updateSyncRepo(i.id,i.updates),storeId:n},{eventName:Qn.deleteSyncRepoRequest,handler:i=>r.deleteSyncRepo(i.id),storeId:n},{eventName:Qn.linkConversationToRepoRequest,handler:i=>r.linkConversationToRepo(i.conversationId,i.repoId),storeId:n},{eventName:Qn.syncConversationRequest,handler:i=>r.syncConversation(i.conversationId),storeId:n},{eventName:Qn.initializeOrSyncRepoRequest,handler:i=>r.initializeOrSyncRepo(i.repoId),storeId:n},{eventName:Qn.updateCurrentConversationToolSettingsRequest,handler:i=>r.updateCurrentConversationToolSettings(i),storeId:n}]}})));function gn({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:mt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function l_(e){const t=e+"CollectionProvider",[n,r]=Ii(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=b=>{const{scope:w,children:x}=b,_=yt.useRef(null),E=yt.useRef(new Map).current;return p.jsx(s,{scope:w,itemMap:E,collectionRef:_,children:x})};a.displayName=t;const o=e+"CollectionSlot",l=Uu(o),c=yt.forwardRef((b,w)=>{const{scope:x,children:_}=b,E=i(o,x),k=In(w,E.collectionRef);return p.jsx(l,{ref:k,children:_})});c.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Uu(d),g=yt.forwardRef((b,w)=>{const{scope:x,children:_,...E}=b,k=yt.useRef(null),T=In(w,k),R=i(d,x);return yt.useEffect(()=>(R.itemMap.set(k,{ref:k,...E}),()=>void R.itemMap.delete(k))),p.jsx(m,{[h]:"",ref:T,children:_})});g.displayName=d;function v(b){const w=i(e+"CollectionConsumer",b);return yt.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const E=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((R,M)=>E.indexOf(R.ref.current)-E.indexOf(M.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:c,ItemSlot:g},v,r]}var tk=0;function c_(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??yP()),document.body.insertAdjacentElement("beforeend",e[1]??yP()),tk++,()=>{tk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),tk--}},[])}function yP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nk="focusScope.autoFocusOnMount",rk="focusScope.autoFocusOnUnmount",bP={bubbles:!1,cancelable:!0},uwe="FocusScope",gb=C.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[o,l]=C.useState(null),c=Xs(s),d=Xs(i),h=C.useRef(null),m=In(t,b=>l(b)),g=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let b=function(E){if(g.paused||!o)return;const k=E.target;o.contains(k)?h.current=k:Du(h.current,{select:!0})},w=function(E){if(g.paused||!o)return;const k=E.relatedTarget;k!==null&&(o.contains(k)||Du(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const T of E)T.removedNodes.length>0&&Du(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const _=new MutationObserver(x);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),_.disconnect()}}},[r,o,g.paused]),C.useEffect(()=>{if(o){wP.add(g);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(nk,bP);o.addEventListener(nk,c),o.dispatchEvent(x),x.defaultPrevented||(dwe(gwe(v7(o)),{select:!0}),document.activeElement===b&&Du(o))}return()=>{o.removeEventListener(nk,c),setTimeout(()=>{const x=new CustomEvent(rk,bP);o.addEventListener(rk,d),o.dispatchEvent(x),x.defaultPrevented||Du(b??document.body,{select:!0}),o.removeEventListener(rk,d),wP.remove(g)},0)}}},[o,c,d,g]);const v=C.useCallback(b=>{if(!n&&!r||g.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(w&&x){const _=b.currentTarget,[E,k]=fwe(_);E&&k?!b.shiftKey&&x===k?(b.preventDefault(),n&&Du(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&Du(k,{select:!0})):x===_&&b.preventDefault()}},[n,r,g.paused]);return p.jsx(rn.div,{tabIndex:-1,...a,ref:m,onKeyDown:v})});gb.displayName=uwe;function dwe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Du(r,{select:t}),document.activeElement!==n)return}function fwe(e){const t=v7(e),n=vP(t,e),r=vP(t.reverse(),e);return[n,r]}function v7(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vP(e,t){for(const n of e)if(!hwe(n,{upTo:t}))return n}function hwe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pwe(e){return e instanceof HTMLInputElement&&"select"in e}function Du(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&pwe(e)&&t&&e.select()}}var wP=mwe();function mwe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=xP(e,t),e.unshift(t)},remove(t){var n;e=xP(e,t),(n=e[0])==null||n.resume()}}}function xP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function gwe(e){return e.filter(t=>t.tagName!=="A")}function u_(e){const t=C.useRef({value:e,previous:e});return C.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ywe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xh=new WeakMap,lw=new WeakMap,cw={},sk=0,w7=function(e){return e&&(e.host||w7(e.parentNode))},bwe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=w7(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},vwe=function(e,t,n,r){var s=bwe(t,Array.isArray(e)?e:[e]);cw[n]||(cw[n]=new WeakMap);var i=cw[n],a=[],o=new Set,l=new Set(s),c=function(h){!h||o.has(h)||(o.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(o.has(m))d(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",b=(Xh.get(m)||0)+1,w=(i.get(m)||0)+1;Xh.set(m,b),i.set(m,w),a.push(m),b===1&&v&&lw.set(m,!0),w===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),o.clear(),sk++,function(){a.forEach(function(h){var m=Xh.get(h)-1,g=i.get(h)-1;Xh.set(h,m),i.set(h,g),m||(lw.has(h)||h.removeAttribute(r),lw.delete(h)),g||h.removeAttribute(n)}),sk--,sk||(Xh=new WeakMap,Xh=new WeakMap,lw=new WeakMap,cw={})}},d_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=ywe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),vwe(r,s,n,"aria-hidden")):function(){return null}},wl=function(){return wl=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wl.apply(this,arguments)};function x7(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function wwe(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Rw="right-scroll-bar-position",Nw="width-before-scroll-bar",xwe="with-scroll-bars-hidden",_we="--removed-body-scroll-bar-size";function ik(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Swe(e,t){var n=C.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var Ewe=typeof window<"u"?C.useLayoutEffect:C.useEffect,_P=new WeakMap;function Cwe(e,t){var n=Swe(null,function(r){return e.forEach(function(s){return ik(s,r)})});return Ewe(function(){var r=_P.get(n);if(r){var s=new Set(r),i=new Set(e),a=n.current;s.forEach(function(o){i.has(o)||ik(o,null)}),i.forEach(function(o){s.has(o)||ik(o,a)})}_P.set(n,e)},[e]),n}function kwe(e){return e}function Twe(e,t){t===void 0&&(t=kwe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(i),a=n}var l=function(){var d=a;a=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){a.push(d),c()},filter:function(d){return a=a.filter(d),n}}}};return s}function Awe(e){e===void 0&&(e={});var t=Twe(null);return t.options=wl({async:!0,ssr:!1},e),t}var _7=function(e){var t=e.sideCar,n=x7(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,wl({},n))};_7.isSideCarExport=!0;function Rwe(e,t){return e.useMedium(t),_7}var S7=Awe(),ak=function(){},f_=C.forwardRef(function(e,t){var n=C.useRef(null),r=C.useState({onScrollCapture:ak,onWheelCapture:ak,onTouchMoveCapture:ak}),s=r[0],i=r[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,_=e.gapMode,E=x7(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,T=Cwe([n,t]),R=wl(wl({},E),s);return C.createElement(C.Fragment,null,d&&C.createElement(k,{sideCar:S7,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:_}),a?C.cloneElement(C.Children.only(o),wl(wl({},R),{ref:T})):C.createElement(x,wl({},R,{className:l,ref:T}),o))});f_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};f_.classNames={fullWidth:Nw,zeroRight:Rw};var Nwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Iwe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Nwe();return t&&e.setAttribute("nonce",t),e}function jwe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Mwe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Dwe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Iwe())&&(jwe(t,n),Mwe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Owe=function(){var e=Dwe();return function(t,n){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},E7=function(){var e=Owe(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},Pwe={left:0,top:0,right:0,gap:0},ok=function(e){return parseInt(e||"",10)||0},Fwe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[ok(n),ok(r),ok(s)]},Lwe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Pwe;var t=Fwe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$we=E7(),xp="data-scroll-locked",Bwe=function(e,t,n,r){var s=e.left,i=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(xwe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(xp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rw,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Nw,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Rw," .").concat(Rw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Nw," .").concat(Nw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xp,`] {
    `).concat(_we,": ").concat(o,`px;
  }
`)},SP=function(){var e=parseInt(document.body.getAttribute(xp)||"0",10);return isFinite(e)?e:0},zwe=function(){C.useEffect(function(){return document.body.setAttribute(xp,(SP()+1).toString()),function(){var e=SP()-1;e<=0?document.body.removeAttribute(xp):document.body.setAttribute(xp,e.toString())}},[])},Uwe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;zwe();var i=C.useMemo(function(){return Lwe(s)},[s]);return C.createElement($we,{styles:Bwe(i,!t,s,n?"":"!important")})},VT=!1;if(typeof window<"u")try{var uw=Object.defineProperty({},"passive",{get:function(){return VT=!0,!0}});window.addEventListener("test",uw,uw),window.removeEventListener("test",uw,uw)}catch{VT=!1}var Jh=VT?{passive:!1}:!1,qwe=function(e){return e.tagName==="TEXTAREA"},C7=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!qwe(e)&&n[t]==="visible")},Vwe=function(e){return C7(e,"overflowY")},Hwe=function(e){return C7(e,"overflowX")},EP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=k7(e,r);if(s){var i=T7(e,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Gwe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Kwe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},k7=function(e,t){return e==="v"?Vwe(t):Hwe(t)},T7=function(e,t){return e==="v"?Gwe(t):Kwe(t)},Wwe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Zwe=function(e,t,n,r,s){var i=Wwe(e,window.getComputedStyle(t).direction),a=i*r,o=n.target,l=t.contains(o),c=!1,d=a>0,h=0,m=0;do{var g=T7(e,o),v=g[0],b=g[1],w=g[2],x=b-w-i*v;(v||x)&&k7(e,o)&&(h+=x,m+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(c=!0),c},dw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},CP=function(e){return[e.deltaX,e.deltaY]},kP=function(e){return e&&"current"in e?e.current:e},Ywe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Xwe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Jwe=0,Qh=[];function Qwe(e){var t=C.useRef([]),n=C.useRef([0,0]),r=C.useRef(),s=C.useState(Jwe++)[0],i=C.useState(E7)[0],a=C.useRef(e);C.useEffect(function(){a.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var b=wwe([e.lockRef.current],(e.shards||[]).map(kP),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=C.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!a.current.allowPinchZoom;var x=dw(b),_=n.current,E="deltaX"in b?b.deltaX:_[0]-x[0],k="deltaY"in b?b.deltaY:_[1]-x[1],T,R=b.target,M=Math.abs(E)>Math.abs(k)?"h":"v";if("touches"in b&&M==="h"&&R.type==="range")return!1;var I=EP(M,R);if(!I)return!0;if(I?T=M:(T=M==="v"?"h":"v",I=EP(M,R)),!I)return!1;if(!r.current&&"changedTouches"in b&&(E||k)&&(r.current=T),!T)return!0;var O=r.current||T;return Zwe(O,w,b,O==="h"?E:k)},[]),l=C.useCallback(function(b){var w=b;if(!(!Qh.length||Qh[Qh.length-1]!==i)){var x="deltaY"in w?CP(w):dw(w),_=t.current.filter(function(T){return T.name===w.type&&(T.target===w.target||w.target===T.shadowParent)&&Ywe(T.delta,x)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var E=(a.current.shards||[]).map(kP).filter(Boolean).filter(function(T){return T.contains(w.target)}),k=E.length>0?o(w,E[0]):!a.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),c=C.useCallback(function(b,w,x,_){var E={name:b,delta:w,target:x,should:_,shadowParent:exe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(k){return k!==E})},1)},[]),d=C.useCallback(function(b){n.current=dw(b),r.current=void 0},[]),h=C.useCallback(function(b){c(b.type,CP(b),b.target,o(b,e.lockRef.current))},[]),m=C.useCallback(function(b){c(b.type,dw(b),b.target,o(b,e.lockRef.current))},[]);C.useEffect(function(){return Qh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Jh),document.addEventListener("touchmove",l,Jh),document.addEventListener("touchstart",d,Jh),function(){Qh=Qh.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,Jh),document.removeEventListener("touchmove",l,Jh),document.removeEventListener("touchstart",d,Jh)}},[]);var g=e.removeScrollBar,v=e.inert;return C.createElement(C.Fragment,null,v?C.createElement(i,{styles:Xwe(s)}):null,g?C.createElement(Uwe,{gapMode:e.gapMode}):null)}function exe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const txe=Rwe(S7,Qwe);var yb=C.forwardRef(function(e,t){return C.createElement(f_,wl({},e,{ref:t,sideCar:txe}))});yb.classNames=f_.classNames;var nxe=[" ","Enter","ArrowUp","ArrowDown"],rxe=[" ","Enter"],jf="Select",[h_,p_,sxe]=l_(jf),[Em,U3e]=Ii(jf,[sxe,fd]),m_=fd(),[ixe,Sd]=Em(jf),[axe,oxe]=Em(jf),A7=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:m,required:g,form:v}=e,b=m_(t),[w,x]=C.useState(null),[_,E]=C.useState(null),[k,T]=C.useState(!1),R=wm(c),[M,I]=Bo({prop:r,defaultProp:s??!1,onChange:i,caller:jf}),[O,P]=Bo({prop:a,defaultProp:o,onChange:l,caller:jf}),U=C.useRef(null),j=w?v||!!w.closest("form"):!0,[V,$]=C.useState(new Set),re=Array.from(V).map(J=>J.props.value).join(";");return p.jsx(w1,{...b,children:p.jsxs(ixe,{required:g,scope:t,trigger:w,onTriggerChange:x,valueNode:_,onValueNodeChange:E,valueNodeHasChildren:k,onValueNodeHasChildrenChange:T,contentId:ei(),value:O,onValueChange:P,open:M,onOpenChange:I,dir:R,triggerPointerDownPosRef:U,disabled:m,children:[p.jsx(h_.Provider,{scope:t,children:p.jsx(axe,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(J=>{$(te=>new Set(te).add(J))},[]),onNativeOptionRemove:C.useCallback(J=>{$(te=>{const X=new Set(te);return X.delete(J),X})},[]),children:n})}),j?p.jsxs(Y7,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:O,onChange:J=>P(J.target.value),disabled:m,form:v,children:[O===void 0?p.jsx("option",{value:""}):null,Array.from(V)]},re):null]})})};A7.displayName=jf;var R7="SelectTrigger",N7=C.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=m_(n),a=Sd(R7,n),o=a.disabled||r,l=In(t,a.onTriggerChange),c=p_(n),d=C.useRef("touch"),[h,m,g]=J7(b=>{const w=c().filter(E=>!E.disabled),x=w.find(E=>E.value===a.value),_=Q7(w,b,x);_!==void 0&&a.onValueChange(_.value)}),v=b=>{o||(a.onOpenChange(!0),g()),b&&(a.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return p.jsx(Dy,{asChild:!0,...i,children:p.jsx(rn.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":X7(a.value)?"":void 0,...s,ref:l,onClick:Ut(s.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:Ut(s.onPointerDown,b=>{d.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Ut(s.onKeyDown,b=>{const w=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(w&&b.key===" ")&&nxe.includes(b.key)&&(v(),b.preventDefault())})})})});N7.displayName=R7;var I7="SelectValue",j7=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...o}=e,l=Sd(I7,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,h=In(t,l.onValueNodeChange);return mi(()=>{c(d)},[c,d]),p.jsx(rn.span,{...o,ref:h,style:{pointerEvents:"none"},children:X7(l.value)?p.jsx(p.Fragment,{children:a}):i})});j7.displayName=I7;var lxe="SelectIcon",M7=C.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return p.jsx(rn.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});M7.displayName=lxe;var cxe="SelectPortal",D7=e=>p.jsx(sm,{asChild:!0,...e});D7.displayName=cxe;var Mf="SelectContent",O7=C.forwardRef((e,t)=>{const n=Sd(Mf,e.__scopeSelect),[r,s]=C.useState();if(mi(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Ao.createPortal(p.jsx(P7,{scope:e.__scopeSelect,children:p.jsx(h_.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),i):null}return p.jsx(F7,{...e,ref:t})});O7.displayName=Mf;var Eo=10,[P7,Ed]=Em(Mf),uxe="SelectContentImpl",dxe=Uu("SelectContent.RemoveScroll"),F7=C.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w,...x}=e,_=Sd(Mf,n),[E,k]=C.useState(null),[T,R]=C.useState(null),M=In(t,De=>k(De)),[I,O]=C.useState(null),[P,U]=C.useState(null),j=p_(n),[V,$]=C.useState(!1),re=C.useRef(!1);C.useEffect(()=>{if(E)return d_(E)},[E]),c_();const J=C.useCallback(De=>{const[Re,...xe]=j().map(He=>He.ref.current),[Fe]=xe.slice(-1),st=document.activeElement;for(const He of De)if(He===st||(He==null||He.scrollIntoView({block:"nearest"}),He===Re&&T&&(T.scrollTop=0),He===Fe&&T&&(T.scrollTop=T.scrollHeight),He==null||He.focus(),document.activeElement!==st))return},[j,T]),te=C.useCallback(()=>J([I,E]),[J,I,E]);C.useEffect(()=>{V&&te()},[V,te]);const{onOpenChange:X,triggerPointerDownPosRef:ie}=_;C.useEffect(()=>{if(E){let De={x:0,y:0};const Re=Fe=>{var st,He;De={x:Math.abs(Math.round(Fe.pageX)-(((st=ie.current)==null?void 0:st.x)??0)),y:Math.abs(Math.round(Fe.pageY)-(((He=ie.current)==null?void 0:He.y)??0))}},xe=Fe=>{De.x<=10&&De.y<=10?Fe.preventDefault():E.contains(Fe.target)||X(!1),document.removeEventListener("pointermove",Re),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",xe,{capture:!0})}}},[E,X,ie]),C.useEffect(()=>{const De=()=>X(!1);return window.addEventListener("blur",De),window.addEventListener("resize",De),()=>{window.removeEventListener("blur",De),window.removeEventListener("resize",De)}},[X]);const[Z,ee]=J7(De=>{const Re=j().filter(st=>!st.disabled),xe=Re.find(st=>st.ref.current===document.activeElement),Fe=Q7(Re,De,xe);Fe&&setTimeout(()=>Fe.ref.current.focus())}),Q=C.useCallback((De,Re,xe)=>{const Fe=!re.current&&!xe;(_.value!==void 0&&_.value===Re||Fe)&&(O(De),Fe&&(re.current=!0))},[_.value]),he=C.useCallback(()=>E==null?void 0:E.focus(),[E]),Se=C.useCallback((De,Re,xe)=>{const Fe=!re.current&&!xe;(_.value!==void 0&&_.value===Re||Fe)&&U(De)},[_.value]),ce=r==="popper"?HT:L7,je=ce===HT?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w}:{};return p.jsx(P7,{scope:n,content:E,viewport:T,onViewportChange:R,itemRefCallback:Q,selectedItem:I,onItemLeave:he,itemTextRefCallback:Se,focusSelectedItem:te,selectedItemText:P,position:r,isPositioned:V,searchRef:Z,children:p.jsx(yb,{as:dxe,allowPinchZoom:!0,children:p.jsx(gb,{asChild:!0,trapped:_.open,onMountAutoFocus:De=>{De.preventDefault()},onUnmountAutoFocus:Ut(s,De=>{var Re;(Re=_.trigger)==null||Re.focus({preventScroll:!0}),De.preventDefault()}),children:p.jsx(tm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:De=>De.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:p.jsx(ce,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:De=>De.preventDefault(),...x,...je,onPlaced:()=>$(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Ut(x.onKeyDown,De=>{const Re=De.ctrlKey||De.altKey||De.metaKey;if(De.key==="Tab"&&De.preventDefault(),!Re&&De.key.length===1&&ee(De.key),["ArrowUp","ArrowDown","Home","End"].includes(De.key)){let Fe=j().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(De.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(De.key)){const st=De.target,He=Fe.indexOf(st);Fe=Fe.slice(He+1)}setTimeout(()=>J(Fe)),De.preventDefault()}})})})})})})});F7.displayName=uxe;var fxe="SelectItemAlignedPosition",L7=C.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=Sd(Mf,n),a=Ed(Mf,n),[o,l]=C.useState(null),[c,d]=C.useState(null),h=In(t,M=>d(M)),m=p_(n),g=C.useRef(!1),v=C.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:x,focusSelectedItem:_}=a,E=C.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&c&&b&&w&&x){const M=i.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const st=P.left-I.left,He=O.left-st,Ne=M.left-He,H=M.width+Ne,ue=Math.max(H,I.width),ke=window.innerWidth-Eo,ae=ay(He,[Eo,Math.max(Eo,ke-ue)]);o.style.minWidth=H+"px",o.style.left=ae+"px"}else{const st=I.right-P.right,He=window.innerWidth-O.right-st,Ne=window.innerWidth-M.right-He,H=M.width+Ne,ue=Math.max(H,I.width),ke=window.innerWidth-Eo,ae=ay(He,[Eo,Math.max(Eo,ke-ue)]);o.style.minWidth=H+"px",o.style.right=ae+"px"}const U=m(),j=window.innerHeight-Eo*2,V=b.scrollHeight,$=window.getComputedStyle(c),re=parseInt($.borderTopWidth,10),J=parseInt($.paddingTop,10),te=parseInt($.borderBottomWidth,10),X=parseInt($.paddingBottom,10),ie=re+J+V+X+te,Z=Math.min(w.offsetHeight*5,ie),ee=window.getComputedStyle(b),Q=parseInt(ee.paddingTop,10),he=parseInt(ee.paddingBottom,10),Se=M.top+M.height/2-Eo,ce=j-Se,je=w.offsetHeight/2,De=w.offsetTop+je,Re=re+J+De,xe=ie-Re;if(Re<=Se){const st=U.length>0&&w===U[U.length-1].ref.current;o.style.bottom="0px";const He=c.clientHeight-b.offsetTop-b.offsetHeight,Ne=Math.max(ce,je+(st?he:0)+He+te),H=Re+Ne;o.style.height=H+"px"}else{const st=U.length>0&&w===U[0].ref.current;o.style.top="0px";const Ne=Math.max(Se,re+b.offsetTop+(st?Q:0)+je)+xe;o.style.height=Ne+"px",b.scrollTop=Re-Se+b.offsetTop}o.style.margin=`${Eo}px 0`,o.style.minHeight=Z+"px",o.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,o,c,b,w,x,i.dir,r]);mi(()=>E(),[E]);const[k,T]=C.useState();mi(()=>{c&&T(window.getComputedStyle(c).zIndex)},[c]);const R=C.useCallback(M=>{M&&v.current===!0&&(E(),_==null||_(),v.current=!1)},[E,_]);return p.jsx(pxe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:p.jsx(rn.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});L7.displayName=fxe;var hxe="SelectPopperPosition",HT=C.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Eo,...i}=e,a=m_(n);return p.jsx(x1,{...a,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});HT.displayName=hxe;var[pxe,jN]=Em(Mf,{}),GT="SelectViewport",$7=C.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=Ed(GT,n),a=jN(GT,n),o=In(t,i.onViewportChange),l=C.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(h_.Slot,{scope:n,children:p.jsx(rn.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ut(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-Eo*2,b=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(b,w);if(x<v){const _=x+g,E=Math.min(v,_),k=_-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});$7.displayName=GT;var B7="SelectGroup",[mxe,gxe]=Em(B7),yxe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=ei();return p.jsx(mxe,{scope:n,id:s,children:p.jsx(rn.div,{role:"group","aria-labelledby":s,...r,ref:t})})});yxe.displayName=B7;var z7="SelectLabel",bxe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=gxe(z7,n);return p.jsx(rn.div,{id:s.id,...r,ref:t})});bxe.displayName=z7;var Bx="SelectItem",[vxe,U7]=Em(Bx),q7=C.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=e,o=Sd(Bx,n),l=Ed(Bx,n),c=o.value===r,[d,h]=C.useState(i??""),[m,g]=C.useState(!1),v=In(t,_=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,_,r,s)}),b=ei(),w=C.useRef("touch"),x=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(vxe,{scope:n,value:r,disabled:s,textId:b,isSelected:c,onItemTextChange:C.useCallback(_=>{h(E=>E||((_==null?void 0:_.textContent)??"").trim())},[]),children:p.jsx(h_.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:p.jsx(rn.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:v,onFocus:Ut(a.onFocus,()=>g(!0)),onBlur:Ut(a.onBlur,()=>g(!1)),onClick:Ut(a.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:Ut(a.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:Ut(a.onPointerDown,_=>{w.current=_.pointerType}),onPointerMove:Ut(a.onPointerMove,_=>{var E;w.current=_.pointerType,s?(E=l.onItemLeave)==null||E.call(l):w.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ut(a.onPointerLeave,_=>{var E;_.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:Ut(a.onKeyDown,_=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&_.key===" "||(rxe.includes(_.key)&&x(),_.key===" "&&_.preventDefault())})})})})});q7.displayName=Bx;var Jg="SelectItemText",V7=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,a=Sd(Jg,n),o=Ed(Jg,n),l=U7(Jg,n),c=oxe(Jg,n),[d,h]=C.useState(null),m=In(t,x=>h(x),l.onItemTextChange,x=>{var _;return(_=o.itemTextRefCallback)==null?void 0:_.call(o,x,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=C.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=c;return mi(()=>(b(v),()=>w(v)),[b,w,v]),p.jsxs(p.Fragment,{children:[p.jsx(rn.span,{id:l.textId,...i,ref:m}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ao.createPortal(i.children,a.valueNode):null]})});V7.displayName=Jg;var H7="SelectItemIndicator",G7=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return U7(H7,n).isSelected?p.jsx(rn.span,{"aria-hidden":!0,...r,ref:t}):null});G7.displayName=H7;var KT="SelectScrollUpButton",K7=C.forwardRef((e,t)=>{const n=Ed(KT,e.__scopeSelect),r=jN(KT,e.__scopeSelect),[s,i]=C.useState(!1),a=In(t,r.onScrollButtonChange);return mi(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?p.jsx(Z7,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});K7.displayName=KT;var WT="SelectScrollDownButton",W7=C.forwardRef((e,t)=>{const n=Ed(WT,e.__scopeSelect),r=jN(WT,e.__scopeSelect),[s,i]=C.useState(!1),a=In(t,r.onScrollButtonChange);return mi(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?p.jsx(Z7,{...e,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});W7.displayName=WT;var Z7=C.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=Ed("SelectScrollButton",n),a=C.useRef(null),o=p_(n),l=C.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return C.useEffect(()=>()=>l(),[l]),mi(()=>{var d;const c=o().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),p.jsx(rn.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Ut(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Ut(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Ut(s.onPointerLeave,()=>{l()})})}),wxe="SelectSeparator",xxe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(rn.div,{"aria-hidden":!0,...r,ref:t})});xxe.displayName=wxe;var ZT="SelectArrow",_xe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=m_(n),i=Sd(ZT,n),a=Ed(ZT,n);return i.open&&a.position==="popper"?p.jsx(_1,{...s,...r,ref:t}):null});_xe.displayName=ZT;var Sxe="SelectBubbleInput",Y7=C.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=C.useRef(null),i=In(r,s),a=u_(t);return C.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[a,t]),p.jsx(rn.select,{...n,style:{...kL,...n.style},ref:i,defaultValue:t})});Y7.displayName=Sxe;function X7(e){return e===""||e===void 0}function J7(e){const t=Xs(e),n=C.useRef(""),r=C.useRef(0),s=C.useCallback(a=>{const o=n.current+a;t(o),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=C.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Q7(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=Exe(e,Math.max(i,0));s.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Exe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Cxe=A7,kxe=N7,Txe=j7,Axe=M7,Rxe=D7,Nxe=O7,Ixe=$7,jxe=q7,Mxe=V7,Dxe=G7,Oxe=K7,Pxe=W7;function Cc({...e}){return p.jsx(Cxe,{"data-slot":"select",...e})}function kc({...e}){return p.jsx(Txe,{"data-slot":"select-value",...e})}function Tc({className:e,size:t="default",children:n,...r}){return p.jsxs(kxe,{"data-slot":"select-trigger","data-size":t,className:mt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(Axe,{asChild:!0,children:p.jsx(Po,{className:"size-4 opacity-50"})})]})}function Ac({className:e,children:t,position:n="popper",...r}){return p.jsx(Rxe,{children:p.jsxs(Nxe,{"data-slot":"select-content",className:mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(Fxe,{}),p.jsx(Ixe,{className:mt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(Lxe,{})]})})}function Is({className:e,children:t,...n}){return p.jsxs(jxe,{"data-slot":"select-item",className:mt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(Dxe,{children:p.jsx(ni,{className:"size-4"})})}),p.jsx(Mxe,{children:t})]})}function Fxe({className:e,...t}){return p.jsx(Oxe,{"data-slot":"select-scroll-up-button",className:mt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Nc,{className:"size-4"})})}function Lxe({className:e,...t}){return p.jsx(Pxe,{"data-slot":"select-scroll-down-button",className:mt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Po,{className:"size-4"})})}var $xe="Label",eU=C.forwardRef((e,t)=>p.jsx(rn.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eU.displayName=$xe;var Bxe=eU;function Ot({className:e,...t}){return p.jsx(Bxe,{"data-slot":"label",className:mt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const tU=({initialProviderType:e=null,initialName:t="",initialValue:n="",initialApiKeyId:r=null,onSave:s,onCancel:i,isSaving:a,className:o})=>{const[l,c]=C.useState(t),[d,h]=C.useState(n),[m,g]=C.useState(e),v=C.useRef(null);C.useEffect(()=>{c(t),h(n),g(e)},[t,n,e,r]);const b=C.useCallback(x=>{var T,R;const _=x;g(_);const E=(T=wc.find(M=>M.value===_))==null?void 0:T.label,k=(R=wc.find(M=>M.value===m))==null?void 0:R.label;E&&(!l.trim()||l===`${k}`)&&c(`${E}`),requestAnimationFrame(()=>{var M;(M=v.current)==null||M.focus()})},[l,m]),w=C.useCallback(async()=>{if(!l.trim()||!d.trim()||!m){ze.error("Key Name, Provider Type, and API Key Value are required.");return}await s(l.trim(),m,d.trim())},[l,d,m,s]);return p.jsxs("div",{className:mt("space-y-4",o),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"api-key-provider",children:"Provider Type"}),p.jsxs(Cc,{value:m??"",onValueChange:b,disabled:a,children:[p.jsx(Tc,{id:"api-key-provider",children:p.jsx(kc,{placeholder:"Select Provider Type"})}),p.jsx(Ac,{children:wc.map(x=>p.jsx(Is,{value:x.value,children:x.label},x.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"api-key-name",children:"Key Name"}),p.jsx(gn,{id:"api-key-name",value:l,onChange:x=>c(x.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:a})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"api-key-value",children:"API Key Value"}),p.jsx(gn,{ref:v,id:"api-key-value",type:"password",value:d,onChange:x=>h(x.target.value),placeholder:"Enter your API key",required:!0,disabled:a,autoComplete:"new-password"})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(At,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[p.jsx(qi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(At,{variant:"secondary",size:"sm",onClick:w,disabled:a||!l.trim()||!d.trim()||!m,type:"button",children:[a&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ff,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save API Key"]})]})]})};var g_="Switch",[zxe,q3e]=Ii(g_),[Uxe,qxe]=zxe(g_),nU=C.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:o,value:l="on",onCheckedChange:c,form:d,...h}=e,[m,g]=C.useState(null),v=In(t,E=>g(E)),b=C.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,_]=Bo({prop:s,defaultProp:i??!1,onChange:c,caller:g_});return p.jsxs(Uxe,{scope:n,checked:x,disabled:o,children:[p.jsx(rn.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":aU(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:Ut(e.onClick,E=>{_(k=>!k),w&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),w&&p.jsx(iU,{control:m,bubbles:!b.current,name:r,value:l,checked:x,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});nU.displayName=g_;var rU="SwitchThumb",sU=C.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=qxe(rU,n);return p.jsx(rn.span,{"data-state":aU(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});sU.displayName=rU;var Vxe="SwitchBubbleInput",iU=C.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const a=C.useRef(null),o=In(a,i),l=u_(n),c=v1(t);return C.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const v=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(v)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});iU.displayName=Vxe;function aU(e){return e?"checked":"unchecked"}var Hxe=nU,Gxe=sU;function ia({className:e,...t}){return p.jsx(Hxe,{"data-slot":"switch",className:mt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(Gxe,{"data-slot":"switch-thumb",className:mt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Kxe=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:s,disabled:i=!1})=>{var c;const a=d=>{r(d==="none"?null:d)},o=(c=s.find(d=>d.id===n))==null?void 0:c.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(Cc,{value:n??"none",onValueChange:a,disabled:i||s.length===0,children:[p.jsx(Tc,{className:mt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(kc,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(p0,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),s.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(Ac,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(Is,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(d=>p.jsx(Is,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},oU=({formData:e,onChange:t,apiKeys:n,disabled:r=!1,className:s})=>{const i=M0(e.type??null),a=QF(e.type??null),o=ff(e.type??null),l=C.useCallback(d=>{var v,b,w;const h=d;t("type",h),t("apiKeyId",null),t("baseURL",null),t("autoFetchModels",ff(h));const m=(v=wc.find(x=>x.value===h))==null?void 0:v.label,g=(b=wc.find(x=>x.value===e.type))==null?void 0:b.label;m&&(!((w=e.name)!=null&&w.trim())||e.name===g)&&t("name",m)},[t,e.name,e.type]),c=(n||[]).filter(d=>!e.type||d.providerId===e.type);return p.jsxs("div",{className:mt("space-y-3",s),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"provider-type",children:"Provider Type"}),p.jsxs(Cc,{value:e.type??"",onValueChange:l,disabled:r,children:[p.jsx(Tc,{id:"provider-type",children:p.jsx(kc,{placeholder:"Select Type"})}),p.jsx(Ac,{children:wc.map(d=>p.jsx(Is,{value:d.value,children:d.label},d.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"provider-name",children:"Provider Name"}),p.jsx(gn,{id:"provider-name",value:e.name||"",onChange:d=>t("name",d.target.value),placeholder:"e.g., My Ollama",disabled:r,"aria-label":"Provider Name"})]}),i&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Ot,{children:"API Key"}),p.jsx(Kxe,{label:"API Key",selectedKeyId:e.apiKeyId??null,onKeySelected:d=>t("apiKeyId",d),apiKeys:c,disabled:r||!e.type})]}),a&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Ot,{htmlFor:"provider-baseurl",children:"Base URL"}),p.jsx(gn,{id:"provider-baseurl",value:e.baseURL||"",onChange:d=>t("baseURL",d.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:r,"aria-label":"Base URL"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(ia,{id:"provider-enabled",checked:e.isEnabled??!0,onCheckedChange:d=>t("isEnabled",d),disabled:r,"aria-labelledby":"provider-enabled-label"}),p.jsx(Ot,{id:"provider-enabled-label",htmlFor:"provider-enabled",children:"Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(ia,{id:"provider-autofetch",checked:e.autoFetchModels??!1,onCheckedChange:d=>t("autoFetchModels",d),disabled:!o||r,"aria-labelledby":"provider-autofetch-label"}),p.jsxs(Ot,{id:"provider-autofetch-label",htmlFor:"provider-autofetch",className:mt("text-sm",o?"":"text-muted-foreground"),children:["Auto-fetch models ",o?"":"(Not Supported)"]})]})]})]})},lU=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:s="",initialApiKeyId:i=null})=>{var m;const[a,o]=C.useState(!1),[l,c]=C.useState({name:s,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,autoFetchModels:ff(r)});C.useEffect(()=>{c(g=>({...g,name:s||g.name||"",type:r||g.type||null,apiKeyId:i||g.apiKeyId||null,autoFetchModels:r?ff(r):g.autoFetchModels}))},[s,r,i]);const d=C.useCallback((g,v)=>{c(b=>{var _,E;const w={...b,[g]:v},x=b.name||"";if(g==="type"){const k=v,T=(_=wc.find(M=>M.value===b.type))==null?void 0:_.label;w.apiKeyId=null,w.baseURL=null,w.autoFetchModels=k?ff(k):!1;const R=(E=wc.find(M=>M.value===k))==null?void 0:E.label;if(R&&(!x.trim()||x===T)&&(w.name=R),k&&M0(k)){const M=(e||[]).filter(I=>I.providerId===k);M.length>0&&(w.apiKeyId=M[0].id)}}return w})},[e]),h=C.useCallback(async()=>{var g,v;if(!((g=l.name)!=null&&g.trim())||!l.type){ze.error("Provider Name and Type are required.");return}o(!0);try{const b=l.type,w=l.autoFetchModels??ff(b),x={name:l.name.trim(),type:b,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((v=l.baseURL)==null?void 0:v.trim())||null,enabledModels:null,autoFetchModels:w,fetchedModels:null,modelsLastFetchedAt:null};await t(x),n()}catch(b){console.error("Failed to add provider (from form component):",b)}finally{o(!1)}},[l,t,n]);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsx(oU,{formData:l,onChange:d,apiKeys:e,disabled:a}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(At,{variant:"ghost",size:"sm",onClick:n,disabled:a,type:"button",children:[p.jsx(qi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(At,{variant:"secondary",size:"sm",onClick:h,disabled:a||!((m=l.name)!=null&&m.trim())||!l.type,type:"button",children:[a&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ff,{className:"h-4 w-4 mr-1"})," ",a?"Adding...":"Add Provider"]})]})]})},of=yt.forwardRef(({className:e,href:t,children:n,...r},s)=>p.jsx("a",{ref:s,href:t,target:"_blank",rel:"noopener noreferrer",className:mt("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));of.displayName="Lnk";const Wxe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},Zxe=bA("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function _p({className:e,variant:t,asChild:n=!1,...r}){const s=n?M8:"span";return p.jsx(s,{"data-slot":"badge",className:mt(Zxe({variant:t}),e),...r})}const Yxe=()=>{const[e,t]=C.useState(!1);C.useEffect(()=>{t(!0)},[]);const n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},s=[{word:"LiteChat",color:"bg-gradient-to-tr from-lime-500 via-amber-400 to-red-600 bg-clip-text text-transparent"},{word:"library",color:"text-emerald-500"},{word:"browser",color:"text-violet-500"},{word:"local",color:"text-amber-500"},{word:"remote",color:"text-sky-500"},{word:"providers",color:"text-purple-500"},{word:" AI ",color:"bg-gradient-to-b from-amber-300 to-rose-700 bg-clip-text text-transparent"},{word:"Open Source",color:"bg-gradient-to-r from-lime-500 to-yellow-500 bg-clip-text text-transparent"}],i=o=>{let l=[o];return s.forEach(({word:c,color:d})=>{l=l.reduce((h,m)=>typeof m!="string"?(h.push(m),h):(m.split(new RegExp(`(${c})`,"gi")).forEach((v,b)=>{v.toLowerCase()===c.toLowerCase()?h.push(p.jsx("span",{className:`${d} font-medium`,children:v},`${v}-${b}`)):h.push(v)}),h),[])}),l=l.reduce((c,d,h)=>{if(typeof d!="string")return c.push(d),c;const m=/(\([^)]*\))/g;return d.split(m).forEach((v,b)=>{m.test(v)?c.push(p.jsx("span",{className:"text-sm text-muted",children:v},`paren-${h}-${b}`)):c.push(v)}),c},[]),l},a=["Oh, hey?! Hi there!! How are you doing!?","Nice of you to pop by to checkout LiteChat!","What'd you mean you don't know what LiteChat is? Oh Boy hey, you in for a treat!","To start with, it's an(other) AI chat app (yes...shocker, right ?) and it's Open Source ! ","But, it is also an extensible library, so you can go on and create your own, AI chat app! With your own functionnalities !","(are AI chat apps the new JS frameworks?)","And cause I might be a wee bit on the reluctant side when it comes to parting with my coins, it doesn't require no servers! It all stays in your browser.","(that means I couldn't snoop on what you do here, even if I wanted to!)","While able to run LLM both local (did I tell you I ain't liking throwing coins out?) and from remote providers","(but sometimes you have to :(..)","To cap things off, there is no fancy/crazy tech involved, I just glued bricks together with AI","(kids call it vibing apparently ^^)","Enough of this interminable babble! Go setup your future chat to prompt your brains out!"];return p.jsxs(ko.div,{className:"text-center max-w-4xl mx-auto space-y-3 my-6",initial:"hidden",animate:e?"show":"hidden",variants:n,children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsxs(_p,{variant:"outline",className:"px-3 py-1 bg-black/5 dark:bg-white/10 backdrop-blur-sm border-none",children:[p.jsx(r5,{className:"w-4 h-4 mr-2 text-yellow-500"}),p.jsx("span",{className:"text-sm",children:"Welcome to your future AI chat"})]})}),a.map((o,l)=>p.jsx(ko.p,{className:`text-sm md:text-base ${l===0?"font-medium":""} leading-relaxed`,variants:r,children:i(o)},l)),p.jsxs(ko.div,{variants:r,className:"pt-2",children:[p.jsx(_p,{className:"bg-gradient-to-r from-violet-600 to-primary border-none",children:"No server required!"}),p.jsx(_p,{className:"ml-2 bg-gradient-to-r from-amber-500 to-emerald-500 border-none",children:"100% in-browser"})]})]})};var MN="Progress",DN=100,[Xxe,V3e]=Ii(MN),[Jxe,Qxe]=Xxe(MN),cU=C.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=e1e,...a}=e;(s||s===0)&&!TP(s)&&console.error(t1e(`${s}`,"Progress"));const o=TP(s)?s:DN;r!==null&&!AP(r,o)&&console.error(n1e(`${r}`,"Progress"));const l=AP(r,o)?r:null,c=zx(l)?i(l,o):void 0;return p.jsx(Jxe,{scope:n,value:l,max:o,children:p.jsx(rn.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":zx(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":fU(l,o),"data-value":l??void 0,"data-max":o,...a,ref:t})})});cU.displayName=MN;var uU="ProgressIndicator",dU=C.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=Qxe(uU,n);return p.jsx(rn.div,{"data-state":fU(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});dU.displayName=uU;function e1e(e,t){return`${Math.round(e/t*100)}%`}function fU(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function zx(e){return typeof e=="number"}function TP(e){return zx(e)&&!isNaN(e)&&e>0}function AP(e,t){return zx(e)&&!isNaN(e)&&e<=t&&e>=0}function t1e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DN}\`.`}function n1e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DN} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var hU=cU,r1e=dU;const YT=C.forwardRef(({className:e,value:t,...n},r)=>p.jsx(hU,{ref:r,className:mt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:p.jsx(r1e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));YT.displayName=hU.displayName;var y_="Popover",[pU,H3e]=Ii(y_,[fd]),bb=fd(),[s1e,Cd]=pU(y_),mU=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=e,o=bb(t),l=C.useRef(null),[c,d]=C.useState(!1),[h,m]=Bo({prop:r,defaultProp:s??!1,onChange:i,caller:y_});return p.jsx(w1,{...o,children:p.jsx(s1e,{scope:t,contentId:ei(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:C.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:C.useCallback(()=>d(!0),[]),onCustomAnchorRemove:C.useCallback(()=>d(!1),[]),modal:a,children:n})})};mU.displayName=y_;var gU="PopoverAnchor",i1e=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Cd(gU,n),i=bb(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=s;return C.useEffect(()=>(a(),()=>o()),[a,o]),p.jsx(Dy,{...i,...r,ref:t})});i1e.displayName=gU;var yU="PopoverTrigger",bU=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Cd(yU,n),i=bb(n),a=In(t,s.triggerRef),o=p.jsx(rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":SU(s.open),...r,ref:a,onClick:Ut(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:p.jsx(Dy,{asChild:!0,...i,children:o})});bU.displayName=yU;var ON="PopoverPortal",[a1e,o1e]=pU(ON,{forceMount:void 0}),vU=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=Cd(ON,t);return p.jsx(a1e,{scope:t,forceMount:n,children:p.jsx(ii,{present:n||i.open,children:p.jsx(sm,{asChild:!0,container:s,children:r})})})};vU.displayName=ON;var Wp="PopoverContent",wU=C.forwardRef((e,t)=>{const n=o1e(Wp,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=Cd(Wp,e.__scopePopover);return p.jsx(ii,{present:r||i.open,children:i.modal?p.jsx(c1e,{...s,ref:t}):p.jsx(u1e,{...s,ref:t})})});wU.displayName=Wp;var l1e=Uu("PopoverContent.RemoveScroll"),c1e=C.forwardRef((e,t)=>{const n=Cd(Wp,e.__scopePopover),r=C.useRef(null),s=In(t,r),i=C.useRef(!1);return C.useEffect(()=>{const a=r.current;if(a)return d_(a)},[]),p.jsx(yb,{as:l1e,allowPinchZoom:!0,children:p.jsx(xU,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ut(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ut(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ut(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),u1e=C.forwardRef((e,t)=>{const n=Cd(Wp,e.__scopePopover),r=C.useRef(!1),s=C.useRef(!1);return p.jsx(xU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),xU=C.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...h}=e,m=Cd(Wp,n),g=bb(n);return c_(),p.jsx(gb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(tm,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:p.jsx(x1,{"data-state":SU(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),_U="PopoverClose",d1e=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Cd(_U,n);return p.jsx(rn.button,{type:"button",...r,ref:t,onClick:Ut(e.onClick,()=>s.onOpenChange(!1))})});d1e.displayName=_U;var f1e="PopoverArrow",h1e=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=bb(n);return p.jsx(_1,{...s,...r,ref:t})});h1e.displayName=f1e;function SU(e){return e?"open":"closed"}var p1e=mU,m1e=bU,g1e=vU,y1e=wU;function io({...e}){return p.jsx(p1e,{"data-slot":"popover",...e})}function ao({...e}){return p.jsx(m1e,{"data-slot":"popover-trigger",...e})}function oo({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(g1e,{children:p.jsx(y1e,{"data-slot":"popover-content",align:t,sideOffset:n,className:mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function ep(e,t,n){let r=n.initialDeps??[],s;function i(){var a,o,l,c;let d;n.key&&((a=n.debug)!=null&&a.call(n))&&(d=Date.now());const h=e();if(!(h.length!==r.length||h.some((v,b)=>r[b]!==v)))return s;r=h;let g;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(g=Date.now()),s=t(...h),n.key&&((l=n.debug)!=null&&l.call(n))){const v=Math.round((Date.now()-d)*100)/100,b=Math.round((Date.now()-g)*100)/100,w=b/16,x=(_,E)=>{for(_=String(_);_.length<E;)_=" "+_;return _};console.info(`%c ${x(b,5)} /${x(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*w,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(c=n==null?void 0:n.onChange)==null||c.call(n,s),s}return i.updateDeps=a=>{r=a},i}function lk(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const b1e=(e,t)=>Math.abs(e-t)<=1,v1e=(e,t,n)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,s),n)}},RP=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},w1e=e=>e,x1e=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},_1e=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const s=a=>{const{width:o,height:l}=a;t({width:Math.round(o),height:Math.round(l)})};if(s(RP(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){s({width:c.inlineSize,height:c.blockSize});return}}s(RP(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},NP={passive:!0},IP=typeof window>"u"?!0:"onscrollend"in window,S1e=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&IP?()=>{}:v1e(r,()=>{t(s,!1)},e.options.isScrollingResetDelay),a=d=>()=>{const{horizontal:h,isRtl:m}=e.options;s=h?n.scrollLeft*(m&&-1||1):n.scrollTop,i(),t(s,d)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,NP);const c=e.options.useScrollendEvent&&IP;return c&&n.addEventListener("scrollend",l,NP),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",l)}},E1e=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},C1e=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const a=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class k1e{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:w1e,rangeExtractor:x1e,onChange:()=>{},measureElement:E1e,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=ep(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(s.has(o.lane))continue;const l=i.get(o.lane);if(l==null||o.end>l.end?i.set(o.lane,o):o.end<l.end&&s.set(o.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=ep(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,s,i,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:a}),{key:!1}),this.getMeasurements=ep(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let d=l;d<n;d++){const h=i(d),m=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),g=m?m.end+this.options.gap:r+s,v=o.get(h),b=typeof v=="number"?v:this.options.estimateSize(d),w=g+b,x=m?m.lane:d%this.options.lanes;c[d]={index:d,start:g,size:b,end:w,key:h,lane:x}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ep(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,i)=>this.range=n.length>0&&r>0?T1e({measurements:n,outerSize:r,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ep(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,i,a)=>i===null||a===null?[]:n({startIndex:i,endIndex:a,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),i=this.measurementsCache[s];if(!i)return;const a=i.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,a=r-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,a,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=ep(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,a=n.length;i<a;i++){const o=n[i],l=r[o];s.push(l)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return lk(r[EU(0,r.length-1,s=>lk(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const i=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+i?"end":"start"),r==="center"?n+=(s-i)/2:r==="end"&&(n-=i);const o=this.getTotalSize()-i;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const i=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(s.end>=a+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(n,r);if(!i)return;const[a,o]=i;this._scrollToOffset(a,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[c]=lk(this.getOffsetForIndex(n,o)),d=this.getScrollOffset();b1e(c,d)||this.scrollToIndex(n,{align:o,behavior:s})}else this.scrollToIndex(n,{align:o,behavior:s})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&i.some(o=>o===null);){const o=r[a];i[o.lane]===null&&(i[o.lane]=o.end),a--}s=Math.max(...i.filter(o=>o!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const EU=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function T1e({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const s=e.length-1,i=l=>e[l].start;if(e.length<=r)return{startIndex:0,endIndex:s};let a=EU(0,s,i,n),o=a;if(r===1)for(;o<s&&e[o].end<n+t;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<s&&l.some(d=>d<n+t);){const d=e[o];l[d.lane]=d.end,o++}const c=Array(r).fill(n+t);for(;a>=0&&c.some(d=>d>=n);){const d=e[a];c[d.lane]=d.start,a--}a=Math.max(0,a-a%r),o=Math.min(s,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const jP=typeof document<"u"?C.useLayoutEffect:C.useEffect;function A1e(e){const t=C.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var a;i?Ao.flushSync(t):t(),(a=e.onChange)==null||a.call(e,s,i)}},[r]=C.useState(()=>new k1e(n));return r.setOptions(n),jP(()=>r._didMount(),[]),jP(()=>r._willUpdate()),r}function PN(e){return A1e({observeElementRect:_1e,observeElementOffset:S1e,scrollToFn:C1e,...e})}const MP=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},FN=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:s=!1,disabled:i=!1,listHeightClass:a="h-[26rem]",onModelClick:o})=>{const[l,c]=C.useState(null),d=C.useCallback(re=>{if(re){const J=re.querySelector("[data-radix-scroll-area-viewport]");if(J)c(J);else{const te=new MutationObserver(()=>{const X=re.querySelector("[data-radix-scroll-area-viewport]");X&&(c(X),te.disconnect())});return te.observe(re,{childList:!0,subtree:!0}),()=>te.disconnect()}}else c(null)},[]),[h,m]=C.useState(""),[g,v]=C.useState(!1),[b,w]=C.useState("all"),[x,_]=C.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[E,k]=C.useState(""),[T,R]=C.useState(""),[M,I]=C.useState(""),[O,P]=C.useState(""),U=C.useMemo(()=>{let re=[...t];if(b==="enabled"?re=re.filter(ce=>n.has(ce.id)):b==="disabled"&&(re=re.filter(ce=>!n.has(ce.id))),h.trim()){const ce=h.toLowerCase();re=re.filter(je=>je.name.toLowerCase().includes(ce)||je.id.toLowerCase().includes(ce))}const J=Object.entries(x).filter(([,ce])=>ce).map(([ce])=>ce);J.length>0&&(re=re.filter(ce=>{var Re;const je=new Set(ce.supported_parameters??[]),De=new Set(((Re=ce.architecture)==null?void 0:Re.input_modalities)??[]);return J.every(xe=>{switch(xe){case"reasoning":return je.has("reasoning");case"webSearch":return je.has("web_search")||je.has("web_search_options");case"tools":return je.has("tools");case"multimodal":return Array.from(De).some(Fe=>Fe!=="text");default:return!0}})}));const te=parseFloat(E),X=parseFloat(T),ie=parseFloat(M),Z=parseFloat(O),ee=!isNaN(te),Q=!isNaN(X),he=!isNaN(ie),Se=!isNaN(Z);return(ee||Q||he||Se)&&(re=re.filter(ce=>{var ue,ke;const je=MP((ue=ce.pricing)==null?void 0:ue.prompt),De=MP((ke=ce.pricing)==null?void 0:ke.completion),Re=ee?te/1e6:-1/0,xe=Q?X/1e6:1/0,Fe=he?ie/1e6:-1/0,st=Se?Z/1e6:1/0,He=je!==null&&je>=Re&&je<=xe,Ne=De!==null&&De>=Fe&&De<=st;let H=!0;return(ee||Q)&&H&&(H=He),(he||Se)&&H&&(H=Ne),H})),re},[t,h,b,n,x,E,T,M,O]),j=PN({count:U.length,getScrollElement:()=>l,estimateSize:()=>40,overscan:10}),V=re=>{_(J=>({...J,[re]:!J[re]}))},$=(b!=="all"?1:0)+Object.values(x).filter(Boolean).length+(E||T||M||O?1:0);return s?p.jsxs("div",{className:mt("space-y-2",a),children:[p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2 flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{value:h,onChange:re=>m(re.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:i})]}),p.jsxs(io,{open:g,onOpenChange:v,children:[p.jsx(ao,{asChild:!0,children:p.jsxs(At,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:i,children:[p.jsx(n1,{className:"h-4 w-4 mr-1"}),"Filters",$>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:$})]})}),p.jsxs(oo,{className:"w-72 p-4 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ot,{className:"text-xs font-semibold",children:"Status"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(At,{variant:b==="all"?"secondary":"outline",size:"sm",onClick:()=>w("all"),children:"All"}),p.jsxs(At,{variant:b==="enabled"?"secondary":"outline",size:"sm",onClick:()=>w("enabled"),children:[p.jsx(ni,{className:"h-3 w-3 mr-1"})," Enabled"]}),p.jsxs(At,{variant:b==="disabled"?"secondary":"outline",size:"sm",onClick:()=>w("disabled"),children:[p.jsx(iZ,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ot,{className:"text-xs font-semibold",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(fn,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:p.jsx(Al,{}),onClick:()=>V("reasoning"),variant:x.reasoning?"secondary":"outline",className:mt(x.reasoning&&"text-primary")}),p.jsx(fn,{tooltipText:"Web Search","aria-label":"Web Search",icon:p.jsx(Qs,{}),onClick:()=>V("webSearch"),variant:x.webSearch?"secondary":"outline",className:mt(x.webSearch&&"text-primary")}),p.jsx(fn,{tooltipText:"Tools","aria-label":"Tools",icon:p.jsx(Sf,{}),onClick:()=>V("tools"),variant:x.tools?"secondary":"outline",className:mt(x.tools&&"text-primary")}),p.jsx(fn,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:p.jsx(_f,{}),onClick:()=>V("multimodal"),variant:x.multimodal?"secondary":"outline",className:mt(x.multimodal&&"text-primary")})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Ot,{className:"text-xs font-semibold flex items-center gap-1",children:[p.jsx(IZ,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(gn,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:E,onChange:re=>k(re.target.value),className:"h-8 text-xs"}),p.jsx(gn,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:T,onChange:re=>R(re.target.value),className:"h-8 text-xs"}),p.jsx(gn,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:M,onChange:re=>I(re.target.value),className:"h-8 text-xs"}),p.jsx(gn,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:O,onChange:re=>P(re.target.value),className:"h-8 text-xs"})]})]})]})]})]}),p.jsxs(Gi,{className:mt("w-full rounded-md border border-border p-1 bg-background/50 flex-grow",a),ref:d,children:[l&&p.jsx("div",{style:{height:`${j.getTotalSize()}px`,width:"100%",position:"relative"},children:U.length===0&&!s?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 absolute inset-0 flex items-center justify-center",children:"No models match the current filters."}):j.getVirtualItems().map(re=>{const J=U[re.index];return J?p.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${re.size}px`,transform:`translateY(${re.start}px)`},className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(ia,{id:`enable-model-${e}-${J.id}`,checked:n.has(J.id),onCheckedChange:te=>r(J.id,te),disabled:i,"aria-label":`Enable model ${J.name||J.id}`,className:"flex-shrink-0",onClick:te=>te.stopPropagation()}),p.jsx(Ot,{htmlFor:`enable-model-${e}-${J.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:J.name||J.id,onClick:o?()=>o(J.id):void 0,children:J.name||J.id})]},J.id):null})}),!l&&!s&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},R1e=({stepNumber:e,title:t,description:n,isComplete:r,isActive:s,openOnComplete:i=!1,contentClassName:a="",icon:o,children:l})=>{const[c,d]=C.useState(!1);return C.useEffect(()=>{d(s||r&&i)},[s,r,i]),p.jsxs(LB,{className:`border border-border/40 bg-card/50 backdrop-blur-sm shadow-lg ${r?"border-l-4 border-l-green-500/70":s?"border-l-4 border-l-primary/70":""}`,children:[p.jsx($B,{className:"pb-2",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-green-500/20 text-green-500":s?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:r?p.jsx(t1,{className:"h-5 w-5"}):p.jsx("div",{className:"flex items-center justify-center",children:o})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>d(!c),children:[p.jsxs(BB,{className:"text-base",children:[p.jsxs("span",{className:"opacity-60 mr-2",children:[e,"."]}),t]}),p.jsx("button",{className:`p-1 rounded-full transition-all ${c?"rotate-90":""} hover:bg-muted/60`,children:p.jsx(Y8,{className:"h-4 w-4"})})]}),!c&&p.jsx(wge,{className:"text-xs mt-1",children:typeof n=="string"?n.substring(0,60)+(n.length>60?"...":""):"Click to expand"})]})]})}),p.jsx(kge,{children:c&&p.jsx(ko.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:p.jsxs(zB,{className:"pt-2",children:[typeof n=="string"?p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}):p.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:n}),p.jsx("div",{className:a,children:l})]})})})]})},N1e=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:s,getAllAvailableModelDefsForProvider:i,isLoading:a,enableApiKeyManagement:o}=gr(En(ce=>({apiKeys:ce.dbApiKeys,addApiKey:ce.addApiKey,providers:ce.dbProviderConfigs,addProviderConfig:ce.addProviderConfig,updateProviderConfig:ce.updateProviderConfig,getAllAvailableModelDefsForProvider:ce.getAllAvailableModelDefsForProvider,isLoading:ce.isLoading,enableApiKeyManagement:ce.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:c}=id(En(ce=>({toggleChatControlPanel:ce.toggleChatControlPanel,setInitialSettingsTabs:ce.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=ir(En(ce=>({addConversation:ce.addConversation,selectItem:ce.selectItem}))),[m,g]=C.useState(!1),[v,b]=C.useState(!1),[w,x]=C.useState(!1),[_,E]=C.useState(!1),[k,T]=C.useState(!1),R=C.useMemo(()=>!o||e.length>0,[o,e]),M=C.useMemo(()=>n.length>0,[n]),I=C.useMemo(()=>n.some(ce=>ce.isEnabled&&ce.enabledModels&&ce.enabledModels.length>0),[n]),O=C.useMemo(()=>{const ce=[...n].sort((je,De)=>De.createdAt.getTime()-je.createdAt.getTime());return ce.length>0?ce[0]:null},[n]),P=C.useMemo(()=>O?i(O.id):[],[O,i]),U=C.useMemo(()=>new Set((O==null?void 0:O.enabledModels)??[]),[O]),{initialProviderTypeForForm:j,initialProviderNameForForm:V,initialApiKeyIdForForm:$}=C.useMemo(()=>{var ce;if(M)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const De=[...e].sort((Re,xe)=>xe.createdAt.getTime()-Re.createdAt.getTime()).find(Re=>M0(Re.providerId));if(De){const Re=De.providerId,xe=((ce=wc.find(Fe=>Fe.value===Re))==null?void 0:ce.label)||Re;return{initialProviderTypeForForm:Re,initialProviderNameForForm:xe,initialApiKeyIdForForm:De.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,M]),re=C.useCallback(async(ce,je,De)=>{g(!0);try{await t(ce,je,De),ze.success("API key added successfully!")}finally{g(!1)}},[t]),J=C.useCallback(async ce=>{b(!0);try{const je={...ce,apiKeyId:ce.apiKeyId??(M0(ce.type)?$??null:null)},De=await r(je);return ze.success("Provider added successfully!"),De}finally{b(!1)}},[r,$]),te=C.useCallback(async(ce,je)=>{if(!O)return;E(!0);const De=new Set(O.enabledModels??[]);je?De.add(ce):De.delete(ce);const Re=Array.from(De);try{await s(O.id,{enabledModels:Re}),ze.success(je?"Model enabled successfully!":"Model disabled successfully!")}catch(xe){ze.error("Failed to update model status."),console.error("Failed to save model toggle:",xe)}finally{E(!1)}},[O,s]),X=C.useCallback(async()=>{x(!0),T(!0);try{await new Promise(je=>setTimeout(je,800));const ce=await d({title:"New Chat"});await h(ce,"conversation"),ze.success("Welcome to your first chat!")}catch(ce){ze.error("Failed to start your first chat."),console.error("Failed to start first chat:",ce),x(!1),T(!1)}},[d,h]),ie=(ce,je)=>{c(ce,je),l("settingsModal",!0)},Z=[R,M,I].filter(Boolean).length,ee=o?3:2,Q=Z/ee*100,he=[...o?[{id:"api-key",title:"Add API Key",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(of,{href:"https://platform.openai.com/api-keys",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"OpenAI"}),","," ",p.jsx(of,{href:"https://aistudio.google.com/app/apikey",className:"text-green-600 hover:text-green-700 transition-colors",children:"Google"}),","," ",p.jsx(of,{href:"https://console.anthropic.com/settings/keys",className:"text-purple-500 hover:text-purple-700 transition-colors",children:"Anthropic (Claude)"}),", or"," ",p.jsx(of,{href:"https://openrouter.ai/keys",className:"text-orange-500 hover:text-orange-700 transition-colors",children:"OpenRouter"})," ","or any OpenAI API compatible provider, add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{children:['If you want truly local AI, "no internet required", you can setup'," ",p.jsx(of,{href:"https://www.ollama.com/",className:"text-teal-500 hover:text-teal-700 transition-colors",children:"Ollama"})," ","or,"," ",p.jsx(of,{href:"https://lmstudio.ai/",className:"text-indigo-500 hover:text-indigo-700 transition-colors",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys so see you in step 2."]})]}),isComplete:R,content:p.jsx(tU,{onSave:re,onCancel:()=>{},isSaving:m,className:"border-none shadow-none p-0",initialProviderType:j}),icon:p.jsx(p0,{className:"h-4 w-4"})}]:[],{id:"add-provider",title:"Add AI Provider",description:p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{children:"Connect to an AI provider you configured the key for..."}),p.jsx("p",{children:"This might look redundant, but it allows you to have multiple keys for the same provider (personal, professional, etc.)"})]}),isComplete:M,content:p.jsx(lU,{apiKeys:e,onAddProvider:J,onCancel:()=>{},initialType:j,initialName:V,initialApiKeyId:$}),icon:p.jsx(Mw,{className:"h-4 w-4"})},{id:"enable-models",title:"Enable Models",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["Enable models for the provider you just added (",p.jsx("span",{className:"font-medium text-primary",children:(O==null?void 0:O.name)||"..."}),")."]}),p.jsx("p",{children:"Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."}),p.jsx("p",{children:"And just like before, you can choose to activate a model for a certain combination of key/provider!"})]}),isComplete:I,content:O?p.jsx("div",{className:"bg-card/40 rounded-lg p-3 border border-border/30 shadow-inner",children:p.jsx(FN,{providerId:O.id,allAvailableModels:P,enabledModelIds:U,onToggleModel:te,isLoading:a||_,listHeightClass:"h-[26rem]"})}):p.jsxs("p",{className:"text-sm text-muted-foreground italic flex items-center",children:[p.jsx(Ic,{className:"h-4 w-4 mr-2 text-amber-500"}),"Add a provider in Step ",o?"2":"1"," first."]}),icon:p.jsx(Al,{className:"h-4 w-4"})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs("div",{children:[k&&p.jsx(ko.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:p.jsx(YT,{value:w?void 0:100,className:"h-2"})}),p.jsxs(At,{onClick:X,disabled:w||!I,className:"w-full bg-gradient-to-r from-indigo-500 to-primary hover:opacity-90 transition-all",children:[p.jsx(yY,{className:"mr-2 h-4 w-4"}),w?"Launching...":"Start First Chat"]}),p.jsx(UB,{})]}),contentClassName:"p-4",icon:p.jsx(MY,{className:"h-4 w-4"})}],Se=he.findIndex(ce=>!ce.isComplete);return a?p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-4xl mx-auto w-full",children:p.jsxs(ko.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full",children:[p.jsx(cr,{className:"h-12 w-1/2 mx-auto mb-6"}),p.jsx(cr,{className:"h-8 w-3/4 mx-auto mb-2"}),p.jsx(cr,{className:"h-4 w-1/2 mx-auto mb-8"}),p.jsx(cr,{className:"h-20 w-full mb-6"}),p.jsx(cr,{className:"h-20 w-full mb-6"}),p.jsx(cr,{className:"h-20 w-full"})]})}):p.jsx(ko.div,{className:"flex h-full flex-col items-center justify-center p-4 bg-gradient-to-b from-background to-background/80",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(ko.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:p.jsxs("div",{className:"relative mx-auto w-16 h-16 mb-4",children:[p.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),p.jsx("div",{className:"relative bg-gradient-to-br from-primary to-indigo-600 p-3 rounded-full",children:p.jsx(Wxe,{className:"h-10 w-10 text-white"})})]})}),p.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-primary to-indigo-500 bg-clip-text text-transparent",children:"Welcome to LiteChat"}),p.jsx("div",{className:"relative",children:p.jsx(Yxe,{})}),p.jsx(qn,{children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsxs("div",{className:"mt-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-xl p-3 w-3/4 mx-auto",children:[p.jsx(YT,{value:Q,className:"h-1.5"}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Setup Progress: ",Math.round(Q),"%"]})]})}),p.jsx(Wn,{children:p.jsxs("p",{children:["Steps completed: ",Z," of ",ee]})})]})})]}),p.jsx(ko.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:he.map((ce,je)=>{const De=je===Se;return p.jsx(ko.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:je*.1},children:p.jsx(R1e,{stepNumber:je+1,title:ce.title,description:ce.description,isComplete:ce.id!=="start-chat"&&ce.isComplete,isActive:De,openOnComplete:ce.id==="enable-models",contentClassName:ce.id==="add-provider"||ce.id==="api-key"?"p-0 border-none shadow-none bg-transparent":ce.contentClassName,icon:ce.icon,children:ce.content})},ce.id)})}),!a&&!M&&Se===-1&&p.jsxs(ko.div,{className:"text-center mt-6 p-4 bg-red-500/10 rounded-lg border border-red-500/30",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[p.jsx(Ic,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),p.jsx("p",{className:"text-sm mb-3",children:"Configuration issue detected. Please review provider settings."}),p.jsx(At,{variant:"outline",size:"sm",onClick:()=>ie("providers"),className:"border-red-500/50 hover:bg-red-500/20 transition-colors",children:"Open Provider Settings"})]})]})})},I1e=["conversation.title_generation"],j1e=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:s,onEditInteraction:i,onStopInteraction:a})=>{const o=C.useRef(null),l=C.useRef(null),[c,d]=C.useState(!1),h=C.useRef(null),m=Hn(P=>P.streamingInteractionIds),{chatMaxWidth:g,autoScrollInterval:v,enableAutoScrollOnStream:b}=ur(En(P=>({chatMaxWidth:P.chatMaxWidth,autoScrollInterval:P.autoScrollInterval,enableAutoScrollOnStream:P.enableAutoScrollOnStream}))),{isLoading:w}=gr(En(P=>({isLoading:P.isLoading}))),{conversationCount:x,isConversationLoading:_}=ir(En(P=>({conversationCount:P.conversations.length,isConversationLoading:P.isLoading}))),{projectCount:E,isProjectLoading:k}=gi(En(P=>({projectCount:P.projects.length,isProjectLoading:P.isLoading}))),T=C.useMemo(()=>w||_||k?!1:x===0&&E===0,[x,E,w,_,k]),R=C.useMemo(()=>{const P=[],U=new Set;return[...t].sort((V,$)=>V.index-$.index).forEach(V=>{if(!U.has(V.id)&&!I1e.includes(V.type)){const $=[V];U.add(V.id),P.push($)}}),P},[t]),M=(P="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:P})};C.useEffect(()=>{if(l.current){const{scrollHeight:P,clientHeight:U,scrollTop:j}=l.current;(P-U<=j+150||n!=="streaming")&&requestAnimationFrame(()=>{M(n==="streaming"?"smooth":"auto")})}},[R.length,n]),C.useEffect(()=>(n==="streaming"&&b?(h.current&&clearInterval(h.current),h.current=setInterval(()=>{M("smooth")},v)):h.current&&(clearInterval(h.current),h.current=null),()=>{h.current&&clearInterval(h.current)}),[n,v,b]),C.useEffect(()=>{const P=l.current;if(!P)return;const U=()=>{const{scrollHeight:j,clientHeight:V,scrollTop:$}=P,re=$<j-V-V*.5;d(re)};return P.addEventListener("scroll",U,{passive:!0}),U(),()=>{P.removeEventListener("scroll",U)}},[]),C.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const I=()=>w||_||k?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx(cr,{className:"h-24 w-full"}),p.jsx(cr,{className:"h-32 w-full"}),p.jsx(cr,{className:"h-20 w-full"})]}):T?p.jsx(N1e,{}):e?R.length===0&&n!=="streaming"?p.jsx(eO,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[R.map(P=>{const U=P[0];return m.includes(U.id)?p.jsx(ET,{interactionId:U.id,onStop:a},`${U.id}-streaming`):p.jsx(EB,{interaction:U,onEdit:i,onRegenerate:s,onDelete:void 0},U.id)}),n==="streaming"&&m.filter(P=>!t.some(U=>U.id===P)).map(P=>p.jsx(ET,{interactionId:P,onStop:a},`${P}-streaming-new`))]}):p.jsx(eO,{}),O=g||"max-w-7xl";return p.jsxs("div",{className:mt("flex-grow relative",r),children:[p.jsx(Gi,{className:"h-full w-full",ref:o,children:p.jsx("div",{className:mt("chat-canvas-container mx-auto",O),children:I()})}),c&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>M(),"aria-label":"Scroll to bottom",children:p.jsx(W8,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"left",children:"Scroll to Bottom"})]})})]})},tp=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const s=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return s.length===0?null:p.jsx("div",{className:mt(r),children:s.map(i=>{const a=n==="icon"?i.iconRenderer:i.renderer;return p.jsx(yt.Fragment,{children:a?a():null},i.id)})})},M1e=Symbol("Let zodToJsonSchema decide on which parser to use"),DP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},D1e=e=>typeof e=="string"?{...DP,name:e}:{...DP,...e},O1e=e=>{const t=D1e(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function CU(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function Ir(e,t,n,r,s){e[t]=n,CU(e,t,r,s)}function P1e(){return{}}function F1e(e,t){var r,s,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(s=e.type)==null?void 0:s._def)==null?void 0:i.typeName)!==zt.ZodAny&&(n.items=Sr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Ir(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Ir(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Ir(n,"minItems",e.exactLength.value,e.exactLength.message,t),Ir(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function L1e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?Ir(n,"minimum",r.value,r.message,t):Ir(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Ir(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Ir(n,"maximum",r.value,r.message,t):Ir(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Ir(n,"maximum",r.value,r.message,t));break;case"multipleOf":Ir(n,"multipleOf",r.value,r.message,t);break}return n}function $1e(){return{type:"boolean"}}function kU(e,t){return Sr(e.type._def,t)}const B1e=(e,t)=>Sr(e.innerType._def,t);function TU(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>TU(e,t,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return z1e(e,t)}}const z1e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":Ir(n,"minimum",r.value,r.message,t);break;case"max":Ir(n,"maximum",r.value,r.message,t);break}return n};function U1e(e,t){return{...Sr(e.innerType._def,t),default:e.defaultValue()}}function q1e(e,t){return t.effectStrategy==="input"?Sr(e.schema._def,t):{}}function V1e(e){return{type:"string",enum:Array.from(e.values)}}const H1e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function G1e(e,t){const n=[Sr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Sr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(H1e(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;a=l}else r=void 0;s.push(a)}}),s.length?{allOf:s,...r}:void 0}function K1e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let ck;const xo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(ck===void 0&&(ck=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ck),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function AU(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":Ir(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":Ir(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":_o(n,"email",r.message,t);break;case"format:idn-email":_o(n,"idn-email",r.message,t);break;case"pattern:zod":$i(n,xo.email,r.message,t);break}break;case"url":_o(n,"uri",r.message,t);break;case"uuid":_o(n,"uuid",r.message,t);break;case"regex":$i(n,r.regex,r.message,t);break;case"cuid":$i(n,xo.cuid,r.message,t);break;case"cuid2":$i(n,xo.cuid2,r.message,t);break;case"startsWith":$i(n,RegExp(`^${uk(r.value,t)}`),r.message,t);break;case"endsWith":$i(n,RegExp(`${uk(r.value,t)}$`),r.message,t);break;case"datetime":_o(n,"date-time",r.message,t);break;case"date":_o(n,"date",r.message,t);break;case"time":_o(n,"time",r.message,t);break;case"duration":_o(n,"duration",r.message,t);break;case"length":Ir(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),Ir(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{$i(n,RegExp(uk(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&_o(n,"ipv4",r.message,t),r.version!=="v4"&&_o(n,"ipv6",r.message,t);break}case"base64url":$i(n,xo.base64url,r.message,t);break;case"jwt":$i(n,xo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&$i(n,xo.ipv4Cidr,r.message,t),r.version!=="v4"&&$i(n,xo.ipv6Cidr,r.message,t);break}case"emoji":$i(n,xo.emoji(),r.message,t);break;case"ulid":{$i(n,xo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{_o(n,"binary",r.message,t);break}case"contentEncoding:base64":{Ir(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{$i(n,xo.base64,r.message,t);break}}break}case"nanoid":$i(n,xo.nanoid,r.message,t)}return n}function uk(e,t){return t.patternStrategy==="escape"?Z1e(e):e}const W1e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Z1e(e){let t="";for(let n=0;n<e.length;n++)W1e.has(e[n])||(t+="\\"),t+=e[n];return t}function _o(e,t,n,r){var s;e.format||(s=e.anyOf)!=null&&s.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Ir(e,"format",t,n,r)}function $i(e,t,n,r){var s;e.pattern||(s=e.allOf)!=null&&s.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:OP(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Ir(e,"pattern",OP(t,r),n,r)}function OP(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let s="",i=!1,a=!1,o=!1;for(let c=0;c<r.length;c++){if(i){s+=r[c],i=!1;continue}if(n.i){if(a){if(r[c].match(/[a-z]/)){o?(s+=r[c],s+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(s+=r[c],o=!0):s+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){s+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){s+=a?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}s+=r[c],r[c]==="\\"?i=!0:a&&r[c]==="]"?a=!1:!a&&r[c]==="["&&(a=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function RU(e,t){var r,s,i,a,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===zt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,d)=>({...c,[d]:Sr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:Sr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((s=e.keyType)==null?void 0:s._def.typeName)===zt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...d}=AU(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((a=e.keyType)==null?void 0:a._def.typeName)===zt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===zt.ZodBranded&&e.keyType._def.type._def.typeName===zt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...d}=kU(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function Y1e(e,t){if(t.mapStrategy==="record")return RU(e,t);const n=Sr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=Sr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function X1e(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function J1e(){return{not:{}}}function Q1e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Ux={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function e_e(e,t){if(t.target==="openApi3")return PP(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Ux&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const a=Ux[i._def.typeName];return a&&!s.includes(a)?[...s,a]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...s,a];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,a,o)=>o.indexOf(i)===a);return{type:s.length>1?s:s[0],enum:n.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return PP(e,t)}const PP=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,s)=>Sr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function t_e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Ux[e.innerType._def.typeName],nullable:!0}:{type:[Ux[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=Sr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Sr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function n_e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",CU(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?Ir(n,"minimum",r.value,r.message,t):Ir(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Ir(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?Ir(n,"maximum",r.value,r.message,t):Ir(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Ir(n,"maximum",r.value,r.message,t));break;case"multipleOf":Ir(n,"multipleOf",r.value,r.message,t);break}return n}function r_e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},s=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let c=i_e(l);c&&n&&(l instanceof jo&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const d=Sr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,c||s.push(o))}s.length&&(r.required=s);const a=s_e(e,t);return a!==void 0&&(r.additionalProperties=a),r}function s_e(e,t){if(e.catchall._def.typeName!=="ZodNever")return Sr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function i_e(e){try{return e.isOptional()}catch{return!0}}const a_e=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Sr(e.innerType._def,t);const n=Sr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},o_e=(e,t)=>{if(t.pipeStrategy==="input")return Sr(e.in._def,t);if(t.pipeStrategy==="output")return Sr(e.out._def,t);const n=Sr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=Sr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function l_e(e,t){return Sr(e.type._def,t)}function c_e(e,t){const r={type:"array",uniqueItems:!0,items:Sr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Ir(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Ir(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function u_e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>Sr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Sr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>Sr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function d_e(){return{not:{}}}function f_e(){return{}}const h_e=(e,t)=>Sr(e.innerType._def,t),p_e=(e,t,n)=>{switch(t){case zt.ZodString:return AU(e,n);case zt.ZodNumber:return n_e(e,n);case zt.ZodObject:return r_e(e,n);case zt.ZodBigInt:return L1e(e,n);case zt.ZodBoolean:return $1e();case zt.ZodDate:return TU(e,n);case zt.ZodUndefined:return d_e();case zt.ZodNull:return Q1e(n);case zt.ZodArray:return F1e(e,n);case zt.ZodUnion:case zt.ZodDiscriminatedUnion:return e_e(e,n);case zt.ZodIntersection:return G1e(e,n);case zt.ZodTuple:return u_e(e,n);case zt.ZodRecord:return RU(e,n);case zt.ZodLiteral:return K1e(e,n);case zt.ZodEnum:return V1e(e);case zt.ZodNativeEnum:return X1e(e);case zt.ZodNullable:return t_e(e,n);case zt.ZodOptional:return a_e(e,n);case zt.ZodMap:return Y1e(e,n);case zt.ZodSet:return c_e(e,n);case zt.ZodLazy:return()=>e.getter()._def;case zt.ZodPromise:return l_e(e,n);case zt.ZodNaN:case zt.ZodNever:return J1e();case zt.ZodEffects:return q1e(e,n);case zt.ZodAny:return P1e();case zt.ZodUnknown:return f_e();case zt.ZodDefault:return U1e(e,n);case zt.ZodBranded:return kU(e,n);case zt.ZodReadonly:return h_e(e,n);case zt.ZodCatch:return B1e(e,n);case zt.ZodPipeline:return o_e(e,n);case zt.ZodFunction:case zt.ZodVoid:case zt.ZodSymbol:return;default:return(r=>{})()}};function Sr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==M1e)return l}if(r&&!n){const l=m_e(r,t);if(l!==void 0)return l}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=p_e(e,e.typeName,t),a=typeof i=="function"?Sr(i(),t):i;if(a&&y_e(e,t,a),t.postProcess){const l=t.postProcess(a,e,t);return s.jsonSchema=a,l}return s.jsonSchema=a,a}const m_e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:g_e(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},g_e=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},y_e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),b_e=(e,t)=>{const n=O1e(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[c,d])=>({...l,[c]:Sr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,s=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=Sr(e._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1)??{},a=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;a!==void 0&&(i.title=a);const o=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var my={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},gy={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},yy={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},by={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},vy={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},v_e=[my,gy,yy,by,vy];my.code+"",gy.code+"",yy.code+"",by.code+"",vy.code+"";my.name+"",my.code,gy.name+"",gy.code,yy.name+"",yy.code,by.name+"",by.code,vy.name+"",vy.code;v_e.map(e=>e.code);function w_e(e){const t=["ROOT"];let n=-1,r=null;function s(l,c,d){switch(l){case'"':{n=c,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function a(l,c){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let l=0;l<e.length;l++){const c=e[l];switch(t[t.length-1]){case"ROOT":s(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,t.pop();break}default:{n=l,s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&a(c,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function x_e(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Cf({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Cf({text:w_e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var __e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},S_e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},E_e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},C_e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},k_e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},T_e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},A_e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},R_e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},N_e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},I_e={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},j_e={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},M_e={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},D_e={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},O_e={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},P_e={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},F_e={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},b_=[__e,S_e,E_e,C_e,k_e,T_e,A_e,R_e,N_e,I_e,j_e,M_e,D_e,O_e,P_e,F_e];Object.fromEntries(b_.map(e=>[e.code,e]));Object.fromEntries(b_.map(e=>[e.name,e.code]));b_.map(e=>e.code);function _i(e,t){const n=b_.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function L_e(e,t){var n;const r=(n=void 0)!=null?n:!1;return $_e(b_e(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:s=>{const i=e.safeParse(s);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var XT=Symbol.for("vercel.ai.schema");function $_e(e,{validate:t}={}){return{[XT]:!0,_type:void 0,[Bw]:!0,jsonSchema:e,validate:t}}function B_e(e){return typeof e=="object"&&e!==null&&XT in e&&e[XT]===!0&&"jsonSchema"in e&&"validate"in e}function v_(e){return B_e(e)?e:L_e(e)}const FP=globalThis||void 0||self;var z_e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof FP=="object"?FP:{},gf="1.9.0",LP=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function U_e(e){var t=new Set([e]),n=new Set,r=e.match(LP);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function a(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var c=l.match(LP);if(!c)return i(l);var d={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return d.prerelease!=null||s.major!==d.major?i(l):s.major===0?s.minor===d.minor&&s.patch<=d.patch?a(l):i(l):s.minor<=d.minor?a(l):i(l)}}var q_e=U_e(gf),V_e=gf.split(".")[0],wy=Symbol.for("opentelemetry.js.api."+V_e),xy=z_e;function LN(e,t,n,r){var s;r===void 0&&(r=!1);var i=xy[wy]=(s=xy[wy])!==null&&s!==void 0?s:{version:gf};if(!r&&i[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}if(i.version!==gf){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+gf);return n.error(a.stack||a.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+gf+"."),!0}function _y(e){var t,n,r=(t=xy[wy])===null||t===void 0?void 0:t.version;if(!(!r||!q_e(r)))return(n=xy[wy])===null||n===void 0?void 0:n[e]}function $N(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+gf+".");var n=xy[wy];n&&delete n[e]}var H_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},G_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},K_e=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vg("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vg("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vg("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vg("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vg("verbose",this._namespace,t)},e}();function Vg(e,t,n){var r=_y("diag");if(r)return n.unshift(t),r[e].apply(r,G_e([],H_e(n),!1))}var ka;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ka||(ka={}));function W_e(e,t){e<ka.NONE?e=ka.NONE:e>ka.ALL&&(e=ka.ALL),t=t||{};function n(r,s){var i=t[r];return typeof i=="function"&&e>=s?i.bind(t):function(){}}return{error:n("error",ka.ERROR),warn:n("warn",ka.WARN),info:n("info",ka.INFO),debug:n("debug",ka.DEBUG),verbose:n("verbose",ka.VERBOSE)}}var Z_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},Y_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},X_e="diag",qx=function(){function e(){function t(s){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=_y("diag");if(o)return o[s].apply(o,Y_e([],Z_e(i),!1))}}var n=this,r=function(s,i){var a,o,l;if(i===void 0&&(i={logLevel:ka.INFO}),s===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((a=c.stack)!==null&&a!==void 0?a:c.message),!1}typeof i=="number"&&(i={logLevel:i});var d=_y("diag"),h=W_e((o=i.logLevel)!==null&&o!==void 0?o:ka.INFO,s);if(d&&!i.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return LN("diag",h,n,!0)};n.setLogger=r,n.disable=function(){$N(X_e,n)},n.createComponentLogger=function(s){return new K_e(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function J_e(e){return Symbol.for(e)}var Q_e=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var i=new e(n._currentContext);return i._currentContext.set(r,s),i},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e}(),eSe=new Q_e,tSe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},nSe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},rSe=function(){function e(){}return e.prototype.active=function(){return eSe},e.prototype.with=function(t,n,r){for(var s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];return n.call.apply(n,nSe([r],tSe(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),sSe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,i=[],a;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},iSe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},dk="context",aSe=new rSe,NU=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return LN(dk,t,qx.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(s=this._getContextManager()).with.apply(s,iSe([t,n,r],sSe(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return _y(dk)||aSe},e.prototype.disable=function(){this._getContextManager().disable(),$N(dk,qx.instance())},e}(),JT;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(JT||(JT={}));var IU="0000000000000000",jU="00000000000000000000000000000000",oSe={traceId:jU,spanId:IU,traceFlags:JT.NONE},c0=function(){function e(t){t===void 0&&(t=oSe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),BN=J_e("OpenTelemetry Context Key SPAN");function zN(e){return e.getValue(BN)||void 0}function lSe(){return zN(NU.getInstance().active())}function UN(e,t){return e.setValue(BN,t)}function cSe(e){return e.deleteValue(BN)}function uSe(e,t){return UN(e,new c0(t))}function MU(e){var t;return(t=zN(e))===null||t===void 0?void 0:t.spanContext()}var dSe=/^([0-9a-f]{32})$/i,fSe=/^[0-9a-f]{16}$/i;function hSe(e){return dSe.test(e)&&e!==jU}function pSe(e){return fSe.test(e)&&e!==IU}function DU(e){return hSe(e.traceId)&&pSe(e.spanId)}function mSe(e){return new c0(e)}var fk=NU.getInstance(),OU=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=fk.active());var s=!!(n!=null&&n.root);if(s)return new c0;var i=r&&MU(r);return gSe(i)&&DU(i)?new c0(i):new c0},e.prototype.startActiveSpan=function(t,n,r,s){var i,a,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,a=r,o=s);var l=a??fk.active(),c=this.startSpan(t,i,l),d=UN(l,c);return fk.with(d,o,void 0,c)}},e}();function gSe(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var ySe=new OU,bSe=function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):ySe},e}(),vSe=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new OU},e}(),wSe=new vSe,$P=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new bSe(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:wSe},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e}(),Vx;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Vx||(Vx={}));var hk="trace",xSe=function(){function e(){this._proxyTracerProvider=new $P,this.wrapSpanContext=mSe,this.isSpanContextValid=DU,this.deleteSpan=cSe,this.getSpan=zN,this.getActiveSpan=lSe,this.getSpanContext=MU,this.setSpan=UN,this.setSpanContext=uSe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=LN(hk,this._proxyTracerProvider,qx.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return _y(hk)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){$N(hk,qx.instance()),this._proxyTracerProvider=new $P},e}(),_Se=xSe.getInstance(),SSe=Object.defineProperty,qN=(e,t)=>{for(var n in t)SSe(e,n,{get:t[n],enumerable:!0})};function Hx(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function BP(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[s,i]of Object.entries(e))r[s]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function zP({response:e,status:t,statusText:n,headers:r,stream:s}){e.writeHead(t??200,n,r);const i=s.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var PU="AI_InvalidArgumentError",FU=`vercel.ai.error.${PU}`,ESe=Symbol.for(FU),LU,Co=class extends jn{constructor({parameter:e,value:t,message:n}){super({name:PU,message:`Invalid argument for parameter ${e}: ${n}`}),this[LU]=!0,this.parameter=e,this.value=t}static isInstance(e){return jn.hasMarker(e,FU)}};LU=ESe;var $U="AI_RetryError",BU=`vercel.ai.error.${$U}`,CSe=Symbol.for(BU),zU,UP=class extends jn{constructor({message:e,reason:t,errors:n}){super({name:$U,message:e}),this[zU]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return jn.hasMarker(e,BU)}};zU=CSe;var kSe=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>UU(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function UU(e,{maxRetries:t,delayInMs:n,backoffFactor:r},s=[]){try{return await e()}catch(i){if(ww(i)||t===0)throw i;const a=PJ(i),o=[...s,i],l=o.length;if(l>t)throw new UP({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&eo.isInstance(i)&&i.isRetryable===!0&&l<=t)return await MJ(n),UU(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new UP({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:o})}}function TSe({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Co({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Co({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:kSe({maxRetries:t})}}function QT({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function ASe({model:e,settings:t,telemetry:n,headers:r}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[a,o])=>(i[`ai.settings.${a}`]=o,i),{}),...Object.entries((s=n==null?void 0:n.metadata)!=null?s:{}).reduce((i,[a,o])=>(i[`ai.telemetry.metadata.${a}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[a,o])=>(o!==void 0&&(i[`ai.request.headers.${a}`]=o),i),{})}}var RSe={startSpan(){return fw},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(fw);if(typeof n=="function")return n(fw);if(typeof r=="function")return r(fw)}},fw={spanContext(){return NSe},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},NSe={traceId:"",spanId:"",traceFlags:0};function ISe({isEnabled:e=!1,tracer:t}={}){return e?t||_Se.getTracer("ai"):RSe}function eA({name:e,tracer:t,attributes:n,fn:r,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const a=await r(i);return s&&i.end(),a}catch(a){try{a instanceof Error?(i.recordException({name:a.name,message:a.message,stack:a.stack}),i.setStatus({code:Vx.ERROR,message:a.message})):i.setStatus({code:Vx.ERROR})}finally{i.end()}throw a}})}function pp({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,s])=>{if(s===void 0)return n;if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=s.input();return i===void 0?n:{...n,[r]:i}}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=s.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:s}},{})}var jSe=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Vu(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=d1(this.base64Data)),this.uint8ArrayData}},MSe=class extends jSe{constructor(e){super(e),this.type="file"}},DSe=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],OSe=e=>{const t=typeof e=="string"?d1(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function PSe(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?OSe(e):e}function FSe({data:e,signatures:t}){const n=PSe(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((s,i)=>n[i]===s))return r.mimeType}var qU="AI_NoObjectGeneratedError",VU=`vercel.ai.error.${qU}`,LSe=Symbol.for(VU),HU,qP=class extends jn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:s,finishReason:i}){super({name:qU,message:e,cause:t}),this[HU]=!0,this.text=n,this.response=r,this.usage=s,this.finishReason=i}static isInstance(e){return jn.hasMarker(e,VU)}};HU=LSe;var GU="AI_DownloadError",KU=`vercel.ai.error.${GU}`,$Se=Symbol.for(KU),WU,pk=class extends jn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:s=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:GU,message:s,cause:r}),this[WU]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return jn.hasMarker(e,KU)}};WU=$Se;async function BSe({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new pk({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw pk.isInstance(r)?r:new pk({url:n,cause:r})}}var ZU="AI_InvalidDataContentError",YU=`vercel.ai.error.${ZU}`,zSe=Symbol.for(YU),XU,VP=class extends jn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:ZU,message:n,cause:t}),this[XU]=!0,this.content=e}static isInstance(e){return jn.hasMarker(e,YU)}};XU=zSe;var JU=z.union([z.string(),z.instanceof(Uint8Array),z.instanceof(ArrayBuffer),z.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function QU(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Vu(new Uint8Array(e)):Vu(e)}function Gx(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return d1(e)}catch(t){throw new VP({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new VP({content:e})}function USe(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var eq="AI_InvalidMessageRoleError",tq=`vercel.ai.error.${eq}`,qSe=Symbol.for(tq),nq,VSe=class extends jn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:eq,message:t}),this[nq]=!0,this.role=e}static isInstance(e){return jn.hasMarker(e,tq)}};nq=qSe;function HSe(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function GSe({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=BSe}){const s=await WSe(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>KSe(i,s))]}function KSe(e,t){var n,r,s,i,a,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>ZSe(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var d;const h=(d=c.providerOptions)!=null?d:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:QU(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var d;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(d=c.providerOptions)!=null?d:c.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const c=l;throw new VSe({role:c})}}}async function WSe(e,t,n,r){const s=e.filter(a=>a.role==="user").map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>a.type==="image"||a.type==="file").filter(a=>!(a.type==="image"&&n===!0)).map(a=>a.type==="image"?a.image:a.data).map(a=>typeof a=="string"&&(a.startsWith("http:")||a.startsWith("https:"))?new URL(a):a).filter(a=>a instanceof URL).filter(a=>!r(a)),i=await Promise.all(s.map(async a=>({url:a,data:await t({url:a})})));return Object.fromEntries(i.map(({url:a,data:o})=>[a.toString(),o]))}function ZSe(e,t){var n,r,s,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let a=e.mimeType,o,l,c;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:m}=HSe(l.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${d}`);a=h,c=Gx(m)}else{const h=t[l.toString()];h?(c=h.data,a??(a=h.mimeType)):c=l}else c=Gx(l);switch(d){case"image":return c instanceof Uint8Array&&(a=(r=FSe({data:c,signatures:DSe}))!=null?r:a),{type:"image",image:c,mimeType:a,providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"file":{if(a==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?QU(c):c,filename:e.filename,mimeType:a,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function YSe({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:s,frequencyPenalty:i,stopSequences:a,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new Co({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Co({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Co({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Co({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Co({parameter:"topK",value:r,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Co({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Co({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new Co({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:s,frequencyPenalty:i,stopSequences:a!=null&&a.length>0?a:void 0,seed:o}}function HP(e){var t,n,r;const s=[];for(const i of e){let a;try{a=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(a.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))s.push({type:"image",image:a});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");s.push({type:"file",data:a,mimeType:i.contentType})}break}case"data:":{let o,l,c;try{[o,l]=i.url.split(","),c=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))s.push({type:"image",image:Gx(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))s.push({type:"text",text:USe(Gx(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");s.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${a.protocol}`)}}return s}var rq="AI_MessageConversionError",sq=`vercel.ai.error.${rq}`,XSe=Symbol.for(sq),iq,mk=class extends jn{constructor({originalMessage:e,message:t}){super({name:rq,message:t}),this[iq]=!0,this.originalMessage=e}static isInstance(e){return jn.hasMarker(e,sq)}};iq=XSe;function JSe(e,t){var n,r;const s=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let a=0;a<e.length;a++){const o=e[a],l=a===e.length-1,{role:c,content:d,experimental_attachments:h}=o;switch(c){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...HP(h)]:d});else{const m=o.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...HP(h)]:m})}break}case"assistant":{if(o.parts!=null){let v=function(){const _=[];for(const k of x)switch(k.type){case"file":case"text":{_.push(k);break}case"reasoning":{for(const T of k.details)switch(T.type){case"text":_.push({type:"reasoning",text:T.text,signature:T.signature});break;case"redacted":_.push({type:"redacted-reasoning",data:T.data});break}break}case"tool-invocation":_.push({type:"tool-call",toolCallId:k.toolInvocation.toolCallId,toolName:k.toolInvocation.toolName,args:k.toolInvocation.args});break;default:{const T=k;throw new Error(`Unsupported part: ${T}`)}}i.push({role:"assistant",content:_});const E=x.filter(k=>k.type==="tool-invocation").map(k=>k.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(k=>{if(!("result"in k))throw new mk({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(k)});const{toolCallId:T,toolName:R,result:M}=k,I=s[R];return(I==null?void 0:I.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:T,toolName:R,result:I.experimental_toToolResultContent(M),experimental_content:I.experimental_toToolResultContent(M)}:{type:"tool-result",toolCallId:T,toolName:R,result:M}})}),x=[],w=!1,b++},b=0,w=!1,x=[];for(const _ of o.parts)switch(_.type){case"text":{w&&v(),x.push(_);break}case"file":case"reasoning":{x.push(_);break}case"tool-invocation":{((r=_.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(_),w=!0;break}}v();break}const m=o.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:d});break}const g=m.reduce((v,b)=>{var w;return Math.max(v,(w=b.step)!=null?w:0)},0);for(let v=0;v<=g;v++){const b=m.filter(w=>{var x;return((x=w.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:w,toolName:x,args:_})=>({type:"tool-call",toolCallId:w,toolName:x,args:_}))]}),i.push({role:"tool",content:b.map(w=>{if(!("result"in w))throw new mk({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(w)});const{toolCallId:x,toolName:_,result:E}=w,k=s[_];return(k==null?void 0:k.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:_,result:k.experimental_toToolResultContent(E),experimental_content:k.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:_,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const m=c;throw new mk({originalMessage:o,message:`Unsupported role: ${m}`})}}}return i}function QSe(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(e2e);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function e2e(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var tA=z.lazy(()=>z.union([z.null(),z.string(),z.number(),z.boolean(),z.record(z.string(),tA),z.array(tA)])),hs=z.record(z.string(),z.record(z.string(),tA)),t2e=z.array(z.union([z.object({type:z.literal("text"),text:z.string()}),z.object({type:z.literal("image"),data:z.string(),mimeType:z.string().optional()})])),aq=z.object({type:z.literal("text"),text:z.string(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),n2e=z.object({type:z.literal("image"),image:z.union([JU,z.instanceof(URL)]),mimeType:z.string().optional(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),oq=z.object({type:z.literal("file"),data:z.union([JU,z.instanceof(URL)]),filename:z.string().optional(),mimeType:z.string(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),r2e=z.object({type:z.literal("reasoning"),text:z.string(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),s2e=z.object({type:z.literal("redacted-reasoning"),data:z.string(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),i2e=z.object({type:z.literal("tool-call"),toolCallId:z.string(),toolName:z.string(),args:z.unknown(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),a2e=z.object({type:z.literal("tool-result"),toolCallId:z.string(),toolName:z.string(),result:z.unknown(),content:t2e.optional(),isError:z.boolean().optional(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),o2e=z.object({role:z.literal("system"),content:z.string(),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),l2e=z.object({role:z.literal("user"),content:z.union([z.string(),z.array(z.union([aq,n2e,oq]))]),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),c2e=z.object({role:z.literal("assistant"),content:z.union([z.string(),z.array(z.union([aq,oq,r2e,s2e,i2e]))]),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),u2e=z.object({role:z.literal("tool"),content:z.array(a2e),providerOptions:hs.optional(),experimental_providerMetadata:hs.optional()}),d2e=z.union([o2e,l2e,c2e,u2e]);function f2e({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new pc({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new pc({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new pc({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new pc({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=QSe(e.messages);if(n==="other")throw new pc({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?JSe(e.messages,{tools:t}):e.messages;if(r.length===0)throw new pc({prompt:e,message:"messages must not be empty"});const s=Qp({value:r,schema:z.array(d2e)});if(!s.success)throw new pc({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:s.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function h2e({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function p2e(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var m2e="JSON schema:",g2e="You MUST answer with a JSON object that matches the JSON schema above.",y2e="You MUST answer with JSON.";function b2e({prompt:e,schema:t,schemaPrefix:n=t!=null?m2e:void 0,schemaSuffix:r=t!=null?g2e:y2e}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(s=>s!=null).join(`
`)}function gk(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:s}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:s}}}},t}Lf({prefix:"aiobj",size:24});var ea=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function GP(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function v2e(){let e=[],t=null,n=!1,r=GP();const s=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=GP(),await r.promise,s();try{const{value:i,done:a}=await e[0].read();a?(e.shift(),e.length>0?await s():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:s,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function w2e(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Lf({prefix:"aiobj",size:24});var lq="AI_NoOutputSpecifiedError",cq=`vercel.ai.error.${lq}`,x2e=Symbol.for(cq),uq,_2e=class extends jn{constructor({message:e="No output specified."}={}){super({name:lq,message:e}),this[uq]=!0}static isInstance(e){return jn.hasMarker(e,cq)}};uq=x2e;var dq="AI_ToolExecutionError",fq=`vercel.ai.error.${dq}`,S2e=Symbol.for(fq),hq,E2e=class extends jn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:s=`Error executing tool ${t}: ${Iy(r)}`}){super({name:dq,message:s,cause:r}),this[hq]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return jn.hasMarker(e,fq)}};hq=S2e;function C2e(e){return e!=null&&Object.keys(e).length>0}function k2e({tools:e,toolChoice:t,activeTools:n}){return C2e(e)?{tools:(n!=null?Object.entries(e).filter(([s])=>n.includes(s)):Object.entries(e)).map(([s,i])=>{const a=i.type;switch(a){case void 0:case"function":return{type:"function",name:s,description:i.description,parameters:v_(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:s,id:i.id,args:i.args};default:{const o=a;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var T2e=/^([\s\S]*?)(\s+)(\S*)$/;function A2e(e){const t=e.match(T2e);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var pq="AI_InvalidToolArgumentsError",mq=`vercel.ai.error.${pq}`,R2e=Symbol.for(mq),gq,yq=class extends jn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${Iy(n)}`}){super({name:pq,message:r,cause:n}),this[gq]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return jn.hasMarker(e,mq)}};gq=R2e;var bq="AI_NoSuchToolError",vq=`vercel.ai.error.${bq}`,N2e=Symbol.for(vq),wq,nA=class extends jn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:bq,message:n}),this[wq]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return jn.hasMarker(e,vq)}};wq=N2e;var xq="AI_ToolCallRepairError",_q=`vercel.ai.error.${xq}`,I2e=Symbol.for(_q),Sq,j2e=class extends jn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${Iy(e)}`}){super({name:xq,message:n,cause:e}),this[Sq]=!0,this.originalError=t}static isInstance(e){return jn.hasMarker(e,_q)}};Sq=I2e;async function M2e({toolCall:e,tools:t,repairToolCall:n,system:r,messages:s}){if(t==null)throw new nA({toolName:e.toolName});try{return await KP({toolCall:e,tools:t})}catch(i){if(n==null||!(nA.isInstance(i)||yq.isInstance(i)))throw i;let a=null;try{a=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>v_(t[o].parameters).jsonSchema,system:r,messages:s,error:i})}catch(o){throw new j2e({cause:o,originalError:i})}if(a==null)throw i;return await KP({toolCall:a,tools:t})}}async function KP({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new nA({toolName:e.toolName,availableTools:Object.keys(t)});const s=v_(r.parameters),i=e.args.trim()===""?Qp({value:{},schema:s}):Cf({text:e.args,schema:s});if(i.success===!1)throw new yq({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function D2e(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function WP({text:e="",files:t,reasoning:n,tools:r,toolCalls:s,toolResults:i,messageId:a,generateMessageId:o}){const l=[],c=[];return n.length>0&&c.push(...n.map(d=>d.type==="text"?{...d,type:"reasoning"}:{...d,type:"redacted-reasoning"})),t.length>0&&c.push(...t.map(d=>({type:"file",data:d.base64,mimeType:d.mimeType}))),e.length>0&&c.push({type:"text",text:e}),s.length>0&&c.push(...s),c.length>0&&l.push({role:"assistant",content:c,id:a}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(d=>{const h=r[d.toolName];return(h==null?void 0:h.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:h.experimental_toToolResultContent(d.result),experimental_content:h.experimental_toToolResultContent(d.result)}:{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:d.result}})}),l}Lf({prefix:"aitxt",size:24});Lf({prefix:"msg",size:24});var O2e={};qN(O2e,{object:()=>$2e,text:()=>L2e});var Eq="AI_InvalidStreamPartError",Cq=`vercel.ai.error.${Eq}`,P2e=Symbol.for(Cq),kq,F2e=class extends jn{constructor({chunk:e,message:t}){super({name:Eq,message:t}),this[kq]=!0,this.chunk=e}static isInstance(e){return jn.hasMarker(e,Cq)}};kq=P2e;var L2e=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),$2e=({schema:e})=>{const t=v_(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:b2e({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=x_e(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const s=r.state;throw new Error(`Unsupported parse state: ${s}`)}}},parseOutput({text:n},r){const s=Cf({text:n});if(!s.success)throw new qP({message:"No object generated: could not parse the response.",cause:s.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=Qp({value:s.value,schema:t});if(!i.success)throw new qP({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}};function B2e(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function z2e({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t==null||t(r)}finally{n.releaseLock()}}function VN(e,t){const n=e.getReader(),r=t.getReader();let s,i,a=!1,o=!1;async function l(d){try{s==null&&(s=n.read());const h=await s;s=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function c(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(a){await c(d);return}if(o){await l(d);return}s==null&&(s=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([s.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||d.enqueue(h.value),m===n?(s=void 0,h.done&&(await c(d),a=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function U2e({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:s,system:i,messages:a,abortSignal:o,repairToolCall:l}){let c=null;const d=new ReadableStream({start(x){c=x}}),h={},m=new Set;let g=!1,v;function b(){g&&m.size===0&&(v!=null&&c.enqueue(v),c.close())}const w=new TransformStream({async transform(x,_){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{_.enqueue(x);break}case"file":{_.enqueue(new MSe({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(_.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),_.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const k=await M2e({toolCall:x,tools:e,repairToolCall:l,system:i,messages:a});_.enqueue(k);const T=e[k.toolName];if(T.execute!=null){const R=na();m.add(R),eA({name:"ai.toolCall",attributes:pp({telemetry:s,attributes:{...QT({operationId:"ai.toolCall",telemetry:s}),"ai.toolCall.name":k.toolName,"ai.toolCall.id":k.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(k.args)}}}),tracer:r,fn:async M=>T.execute(k.args,{toolCallId:k.toolCallId,messages:a,abortSignal:o}).then(I=>{c.enqueue({...k,type:"tool-result",result:I}),m.delete(R),b();try{M.setAttributes(pp({telemetry:s,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(I)}}}))}catch{}},I=>{c.enqueue({type:"error",error:new E2e({toolCallId:k.toolCallId,toolName:k.toolName,toolArgs:k.args,cause:I})}),m.delete(R),b()})})}}catch(k){c.enqueue({type:"error",error:k})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:h2e(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const k=E;throw new Error(`Unhandled chunk type: ${k}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(w).pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){}})),d.pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){x.close()}}))])}})}var q2e=Lf({prefix:"aitxt",size:24}),V2e=Lf({prefix:"msg",size:24});function H2e({model:e,tools:t,toolChoice:n,system:r,prompt:s,messages:i,maxRetries:a,abortSignal:o,headers:l,maxSteps:c=1,experimental_generateMessageId:d=V2e,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:w=!1,toolCallStreaming:x=w,experimental_activeTools:_,experimental_repairToolCall:E,experimental_transform:k,onChunk:T,onError:R,onFinish:M,onStepFinish:I,_internal:{now:O=w2e,generateId:P=q2e,currentDate:U=()=>new Date}={},...j}){return new K2e({model:e,telemetry:g,headers:l,settings:j,maxRetries:a,abortSignal:o,system:r,prompt:s,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:B2e(k),activeTools:_,repairToolCall:E,maxSteps:c,output:h,continueSteps:m,providerOptions:b,onChunk:T,onError:R,onFinish:M,onStepFinish:I,now:O,currentDate:U,generateId:P,generateMessageId:d})}function G2e(e){if(!e)return new TransformStream({transform(i,a){a.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function s({controller:i,partialOutput:a=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:a}),n=""}return new TransformStream({transform(i,a){if(i.type==="step-finish"&&s({controller:a}),i.type!=="text-delta"){a.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(s({controller:a,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&s({controller:i})}})}var K2e=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:s,abortSignal:i,system:a,prompt:o,messages:l,tools:c,toolChoice:d,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:v,maxSteps:b,output:w,continueSteps:x,providerOptions:_,now:E,currentDate:k,generateId:T,generateMessageId:R,onChunk:M,onError:I,onFinish:O,onStepFinish:P}){this.warningsPromise=new ea,this.usagePromise=new ea,this.finishReasonPromise=new ea,this.providerMetadataPromise=new ea,this.textPromise=new ea,this.reasoningPromise=new ea,this.reasoningDetailsPromise=new ea,this.sourcesPromise=new ea,this.filesPromise=new ea,this.toolCallsPromise=new ea,this.toolResultsPromise=new ea,this.requestPromise=new ea,this.responsePromise=new ea,this.stepsPromise=new ea;var U;if(b<1)throw new Co({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=w;let j="",V="",$="",re=[],J=[],te,X=[];const ie=[],Z={id:T(),timestamp:k(),modelId:e.modelId,messages:[]};let ee=[],Q=[],he,Se,ce="initial";const je=[];let De;const Re=new TransformStream({async transform(ae,oe){oe.enqueue(ae);const{part:ne}=ae;if((ne.type==="text-delta"||ne.type==="reasoning"||ne.type==="source"||ne.type==="tool-call"||ne.type==="tool-result"||ne.type==="tool-call-streaming-start"||ne.type==="tool-call-delta")&&await(M==null?void 0:M({chunk:ne})),ne.type==="error"&&await(I==null?void 0:I({error:ne.error})),ne.type==="text-delta"&&(j+=ne.textDelta,V+=ne.textDelta,$+=ne.textDelta),ne.type==="reasoning"&&(te==null?(te={type:"text",text:ne.textDelta},re.push(te)):te.text+=ne.textDelta),ne.type==="reasoning-signature"){if(te==null)throw new jn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});te.signature=ne.signature,te=void 0}if(ne.type==="redacted-reasoning"&&re.push({type:"redacted",data:ne.data}),ne.type==="file"&&J.push(ne),ne.type==="source"&&(ie.push(ne.source),X.push(ne.source)),ne.type==="tool-call"&&ee.push(ne),ne.type==="tool-result"&&Q.push(ne),ne.type==="step-finish"){const Ee=WP({text:V,files:J,reasoning:re,tools:c??{},toolCalls:ee,toolResults:Q,messageId:ne.messageId,generateMessageId:R}),Le=je.length;let Te="done";Le+1<b&&(x&&ne.finishReason==="length"&&ee.length===0?Te="continue":ee.length>0&&Q.length===ee.length&&(Te="tool-result"));const Xe={stepType:ce,text:j,reasoning:D2e(re),reasoningDetails:re,files:J,sources:X,toolCalls:ee,toolResults:Q,finishReason:ne.finishReason,usage:ne.usage,warnings:ne.warnings,logprobs:ne.logprobs,request:ne.request,response:{...ne.response,messages:[...Z.messages,...Ee]},providerMetadata:ne.experimental_providerMetadata,experimental_providerMetadata:ne.experimental_providerMetadata,isContinued:ne.isContinued};await(P==null?void 0:P(Xe)),je.push(Xe),ee=[],Q=[],j="",X=[],re=[],J=[],te=void 0,Te!=="done"&&(ce=Te),Te!=="continue"&&(Z.messages.push(...Ee),V="")}ne.type==="finish"&&(Z.id=ne.response.id,Z.timestamp=ne.response.timestamp,Z.modelId=ne.response.modelId,Z.headers=ne.response.headers,Se=ne.usage,he=ne.finishReason)},async flush(ae){var oe;try{if(je.length===0)return;const ne=je[je.length-1];ke.warningsPromise.resolve(ne.warnings),ke.requestPromise.resolve(ne.request),ke.responsePromise.resolve(ne.response),ke.toolCallsPromise.resolve(ne.toolCalls),ke.toolResultsPromise.resolve(ne.toolResults),ke.providerMetadataPromise.resolve(ne.experimental_providerMetadata),ke.reasoningPromise.resolve(ne.reasoning),ke.reasoningDetailsPromise.resolve(ne.reasoningDetails);const Ee=he??"unknown",Le=Se??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};ke.finishReasonPromise.resolve(Ee),ke.usagePromise.resolve(Le),ke.textPromise.resolve($),ke.sourcesPromise.resolve(ie),ke.filesPromise.resolve(ne.files),ke.stepsPromise.resolve(je),await(O==null?void 0:O({finishReason:Ee,logprobs:void 0,usage:Le,text:$,reasoning:ne.reasoning,reasoningDetails:ne.reasoningDetails,files:ne.files,sources:ne.sources,toolCalls:ne.toolCalls,toolResults:ne.toolResults,request:(oe=ne.request)!=null?oe:{},response:ne.response,warnings:ne.warnings,providerMetadata:ne.providerMetadata,experimental_providerMetadata:ne.experimental_providerMetadata,steps:je})),De.setAttributes(pp({telemetry:t,attributes:{"ai.response.finishReason":Ee,"ai.response.text":{output:()=>$},"ai.response.toolCalls":{output:()=>{var Te;return(Te=ne.toolCalls)!=null&&Te.length?JSON.stringify(ne.toolCalls):void 0}},"ai.usage.promptTokens":Le.promptTokens,"ai.usage.completionTokens":Le.completionTokens}}))}catch(ne){ae.error(ne)}finally{De.end()}}}),xe=v2e();this.addStream=xe.addStream,this.closeStream=xe.close;let Fe=xe.stream;for(const ae of m)Fe=Fe.pipeThrough(ae({tools:c,stopStream(){xe.terminate()}}));this.baseStream=Fe.pipeThrough(G2e(w)).pipeThrough(Re);const{maxRetries:st,retry:He}=TSe({maxRetries:s}),Ne=ISe(t),H=ASe({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:st}}),ue=f2e({prompt:{system:(U=w==null?void 0:w.injectIntoSystemPrompt({system:a,model:e}))!=null?U:a,prompt:o,messages:l},tools:c}),ke=this;eA({name:"ai.streamText",attributes:pp({telemetry:t,attributes:{...QT({operationId:"ai.streamText",telemetry:t}),...H,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:Ne,endWhenDone:!1,fn:async ae=>{De=ae;async function oe({currentStep:ne,responseMessages:Ee,usage:Le,stepType:Te,previousStepText:Xe,hasLeadingWhitespace:St,messageId:dt}){var It;const Vt=Ee.length===0?ue.type:"messages",Dt=[...ue.messages,...Ee],Kt=await GSe({prompt:{type:Vt,system:ue.system,messages:Dt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(It=e.supportsUrl)==null?void 0:It.bind(e)}),be={type:"regular",...k2e({tools:c,toolChoice:d,activeTools:g})},{result:{stream:D,warnings:K,rawResponse:pe,request:Oe},doStreamSpan:ve,startTimestampMs:Ae}=await He(()=>eA({name:"ai.streamText.doStream",attributes:pp({telemetry:t,attributes:{...QT({operationId:"ai.streamText.doStream",telemetry:t}),...H,"ai.prompt.format":{input:()=>Vt},"ai.prompt.messages":{input:()=>JSON.stringify(Kt)},"ai.prompt.tools":{input:()=>{var Ht;return(Ht=be.tools)==null?void 0:Ht.map(Xt=>JSON.stringify(Xt))}},"ai.prompt.toolChoice":{input:()=>be.toolChoice!=null?JSON.stringify(be.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ne,endWhenDone:!1,fn:async Ht=>({startTimestampMs:E(),doStreamSpan:Ht,result:await e.doStream({mode:be,...YSe(r),inputFormat:Vt,responseFormat:w==null?void 0:w.responseFormat({model:e}),prompt:Kt,providerMetadata:_,abortSignal:i,headers:n})})})),de=U2e({tools:c,generatorStream:D,toolCallStreaming:h,tracer:Ne,telemetry:t,system:a,messages:Dt,repairToolCall:v,abortSignal:i}),ht=Oe??{},wt=[],L=[],Be=[],rt=[];let ye,we="unknown",Ue={promptTokens:0,completionTokens:0,totalTokens:0},Et,me=!0,G="",q=Te==="continue"?Xe:"",W,ge={id:T(),timestamp:k(),modelId:e.modelId},Ie="",Ge=!1,bt=!0,Wt=!1;async function yn({controller:Ht,chunk:Xt}){Ht.enqueue(Xt),G+=Xt.textDelta,q+=Xt.textDelta,Ge=!0,Wt=Xt.textDelta.trimEnd()!==Xt.textDelta}ke.addStream(de.pipeThrough(new TransformStream({async transform(Ht,Xt){var an,$n,tr;if(me){const Mr=E()-Ae;me=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Mr}),ve.setAttributes({"ai.response.msToFirstChunk":Mr}),Xt.enqueue({type:"step-start",messageId:dt,request:ht,warnings:K??[]})}if(Ht.type==="text-delta"&&Ht.textDelta.length===0)return;const jr=Ht.type;switch(jr){case"text-delta":{if(x){const Mr=bt&&St?Ht.textDelta.trimStart():Ht.textDelta;if(Mr.length===0)break;bt=!1,Ie+=Mr;const Vn=A2e(Ie);Vn!=null&&(Ie=Vn.suffix,await yn({controller:Xt,chunk:{type:"text-delta",textDelta:Vn.prefix+Vn.whitespace}}))}else await yn({controller:Xt,chunk:Ht});break}case"reasoning":{Xt.enqueue(Ht),ye==null?(ye={type:"text",text:Ht.textDelta},Be.push(ye)):ye.text+=Ht.textDelta;break}case"reasoning-signature":{if(Xt.enqueue(Ht),ye==null)throw new F2e({chunk:Ht,message:"reasoning-signature without reasoning"});ye.signature=Ht.signature,ye=void 0;break}case"redacted-reasoning":{Xt.enqueue(Ht),Be.push({type:"redacted",data:Ht.data});break}case"tool-call":{Xt.enqueue(Ht),wt.push(Ht);break}case"tool-result":{Xt.enqueue(Ht),L.push(Ht);break}case"response-metadata":{ge={id:(an=Ht.id)!=null?an:ge.id,timestamp:($n=Ht.timestamp)!=null?$n:ge.timestamp,modelId:(tr=Ht.modelId)!=null?tr:ge.modelId};break}case"finish":{Ue=Ht.usage,we=Ht.finishReason,Et=Ht.experimental_providerMetadata,W=Ht.logprobs;const Mr=E()-Ae;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":Mr,"ai.response.avgCompletionTokensPerSecond":1e3*Ue.completionTokens/Mr});break}case"file":{rt.push(Ht),Xt.enqueue(Ht);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Xt.enqueue(Ht);break}case"error":{Xt.enqueue(Ht),we="error";break}default:{const Mr=jr;throw new Error(`Unknown chunk type: ${Mr}`)}}},async flush(Ht){const Xt=wt.length>0?JSON.stringify(wt):void 0;let an="done";ne+1<b&&(x&&we==="length"&&wt.length===0?an="continue":wt.length>0&&L.length===wt.length&&(an="tool-result")),x&&Ie.length>0&&(an!=="continue"||Te==="continue"&&!Ge)&&(await yn({controller:Ht,chunk:{type:"text-delta",textDelta:Ie}}),Ie="");try{ve.setAttributes(pp({telemetry:t,attributes:{"ai.response.finishReason":we,"ai.response.text":{output:()=>G},"ai.response.toolCalls":{output:()=>Xt},"ai.response.id":ge.id,"ai.response.model":ge.modelId,"ai.response.timestamp":ge.timestamp.toISOString(),"ai.usage.promptTokens":Ue.promptTokens,"ai.usage.completionTokens":Ue.completionTokens,"gen_ai.response.finish_reasons":[we],"gen_ai.response.id":ge.id,"gen_ai.response.model":ge.modelId,"gen_ai.usage.input_tokens":Ue.promptTokens,"gen_ai.usage.output_tokens":Ue.completionTokens}}))}catch{}finally{ve.end()}Ht.enqueue({type:"step-finish",finishReason:we,usage:Ue,providerMetadata:Et,experimental_providerMetadata:Et,logprobs:W,request:ht,response:{...ge,headers:pe==null?void 0:pe.headers},warnings:K,isContinued:an==="continue",messageId:dt});const $n=p2e(Le,Ue);if(an==="done")Ht.enqueue({type:"finish",finishReason:we,usage:$n,providerMetadata:Et,experimental_providerMetadata:Et,logprobs:W,response:{...ge,headers:pe==null?void 0:pe.headers}}),ke.closeStream();else{if(Te==="continue"){const tr=Ee[Ee.length-1];typeof tr.content=="string"?tr.content+=G:tr.content.push({text:G,type:"text"})}else Ee.push(...WP({text:G,files:rt,reasoning:Be,tools:c??{},toolCalls:wt,toolResults:L,messageId:dt,generateMessageId:R}));await oe({currentStep:ne+1,responseMessages:Ee,usage:$n,stepType:an,previousStepText:q,hasLeadingWhitespace:Wt,messageId:an==="continue"?dt:R()})}}})))}await oe({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:R()})}}).catch(ae=>{ke.addStream(new ReadableStream({start(oe){oe.enqueue({type:"error",error:ae}),oe.close()}})),ke.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return gk(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return gk(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await z2e({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(n){(t=e==null?void 0:e.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new _2e;return gk(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:s=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,a)=>{const o=i.type;switch(o){case"text-delta":{a.enqueue(_i("text",i.textDelta));break}case"reasoning":{n&&a.enqueue(_i("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&a.enqueue(_i("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&a.enqueue(_i("reasoning_signature",{signature:i.signature}));break}case"file":{a.enqueue(_i("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&a.enqueue(_i("source",i.source));break}case"tool-call-streaming-start":{a.enqueue(_i("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{a.enqueue(_i("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{a.enqueue(_i("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{a.enqueue(_i("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{a.enqueue(_i("error",e(i.error)));break}case"step-start":{a.enqueue(_i("start_step",{messageId:i.messageId}));break}case"step-finish":{a.enqueue(_i("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{s&&a.enqueue(_i("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:s,getErrorMessage:i,sendUsage:a,sendReasoning:o,sendSources:l,experimental_sendFinish:c}={}){zP({response:e,status:t,statusText:n,headers:BP(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:s,getErrorMessage:i,sendUsage:a,sendReasoning:o,sendSources:l,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){zP({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:BP(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?VN(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:s,sendUsage:i,sendReasoning:a,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:s,sendUsage:i,sendReasoning:a,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:Hx(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:Hx(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},W2e=z.object({name:z.string(),version:z.string()}).passthrough(),HN=z.object({_meta:z.optional(z.object({}).passthrough())}).passthrough(),Sy=HN,Z2e=z.object({method:z.string(),params:z.optional(HN)}),Y2e=z.object({experimental:z.optional(z.object({}).passthrough()),logging:z.optional(z.object({}).passthrough()),prompts:z.optional(z.object({listChanged:z.optional(z.boolean())}).passthrough()),resources:z.optional(z.object({subscribe:z.optional(z.boolean()),listChanged:z.optional(z.boolean())}).passthrough()),tools:z.optional(z.object({listChanged:z.optional(z.boolean())}).passthrough())}).passthrough();Sy.extend({protocolVersion:z.string(),capabilities:Y2e,serverInfo:W2e,instructions:z.optional(z.string())});var X2e=Sy.extend({nextCursor:z.optional(z.string())}),J2e=z.object({name:z.string(),description:z.optional(z.string()),inputSchema:z.object({type:z.literal("object"),properties:z.optional(z.object({}).passthrough())}).passthrough()}).passthrough();X2e.extend({tools:z.array(J2e)});var Q2e=z.object({type:z.literal("text"),text:z.string()}).passthrough(),eEe=z.object({type:z.literal("image"),data:z.string().base64(),mimeType:z.string()}).passthrough(),Tq=z.object({uri:z.string(),mimeType:z.optional(z.string())}).passthrough(),tEe=Tq.extend({text:z.string()}),nEe=Tq.extend({blob:z.string().base64()}),rEe=z.object({type:z.literal("resource"),resource:z.union([tEe,nEe])}).passthrough();Sy.extend({content:z.array(z.union([Q2e,eEe,rEe])),isError:z.boolean().default(!1).optional()}).or(Sy.extend({toolResult:z.unknown()}));var w_="2.0",sEe=z.object({jsonrpc:z.literal(w_),id:z.union([z.string(),z.number().int()])}).merge(Z2e).strict(),iEe=z.object({jsonrpc:z.literal(w_),id:z.union([z.string(),z.number().int()]),result:Sy}).strict(),aEe=z.object({jsonrpc:z.literal(w_),id:z.union([z.string(),z.number().int()]),error:z.object({code:z.number().int(),message:z.string(),data:z.optional(z.unknown())})}).strict(),oEe=z.object({jsonrpc:z.literal(w_)}).merge(z.object({method:z.string(),params:z.optional(HN)})).strict();z.union([sEe,oEe,iEe,aEe]);var lEe={};qN(lEe,{mergeIntoDataStream:()=>dEe,toDataStream:()=>cEe,toDataStreamResponse:()=>uEe});function Aq(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,s){s.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function GN(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var s;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&ZP((s=n.data)==null?void 0:s.chunk,r);return}ZP(n,r)}})).pipeThrough(Aq(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(_i("text",n))}}))}function cEe(e,t){return GN(e,t).pipeThrough(new TextEncoderStream)}function uEe(e,t){var n;const r=GN(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),s=t==null?void 0:t.data,i=t==null?void 0:t.init,a=s?VN(s.stream,r):r;return new Response(a,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:Hx(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function dEe(e,t){t.dataStream.merge(GN(e,t.callbacks))}function ZP(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var fEe={};qN(fEe,{mergeIntoDataStream:()=>mEe,toDataStream:()=>hEe,toDataStreamResponse:()=>pEe});function KN(e,t){const n=gEe();return jJ(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,s){s.enqueue(n(r.delta))}})).pipeThrough(Aq(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,s)=>{s.enqueue(_i("text",r))}}))}function hEe(e,t){return KN(e,t).pipeThrough(new TextEncoderStream)}function pEe(e,t={}){var n;const{init:r,data:s,callbacks:i}=t,a=KN(e,i).pipeThrough(new TextEncoderStream),o=s?VN(s.stream,a):a;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:Hx(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function mEe(e,t){t.dataStream.merge(KN(e,t.callbacks))}function gEe(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class yEe{static async executeInteraction(t,n,r){let s,i=!1,a=null,o,l,c;try{s=await H2e(n);for await(const d of s.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(d.type){case"text-delta":r.onChunk(d.textDelta);break;case"reasoning":r.onReasoningChunk(d.textDelta);break;case"tool-call":r.onToolCall(d);break;case"tool-result":r.onToolResult(d);break;case"finish":i=!0,a=d.finishReason,o=d.usage,l=d.providerMetadata;break;case"error":r.onError(new Error(`AI Stream Error Part: ${d.error instanceof Error?d.error.message:d.error}`));return;default:console.warn(`[AIService] Received unexpected stream part type: ${d.type}`,d);break}}s!=null&&s.reasoning?(c=await s.reasoning,console.log(`[AIService] Extracted final reasoning for ${t}`)):console.log(`[AIService] No final reasoning found in stream result for ${t}.`),!n.abortSignal.aborted&&i?r.onFinish({finishReason:a,usage:o,providerMetadata:l,reasoning:c}):!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(d){console.error(`[AIService] Error during streamText call for ${t}:`,d),d instanceof Error&&d.name==="AbortError"||r.onError(d instanceof Error?d:new Error(String(d)))}finally{console.log(`[AIService] Stream processing finished for ${t}.`)}}}const Iw={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var O,P,U,j,V,$,re,J,te;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const s=await ox(D0.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(s===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=s&&typeof s=="object"?s.prompt:e,a=pi(),o=new AbortController;this._activeControllers.set(a,o),this._streamingToolData.set(a,{calls:[],results:[]}),this._firstChunkTimestamps.delete(a),this._interactionStartTimes.delete(a);const l=Hn.getState(),d=l.interactions.filter(X=>X.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((X,ie)=>Math.max(X,ie.index),-1)+1,m=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,g=performance.now();this._interactionStartTimes.set(a,g);const v={id:a,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:m};r!=="conversation.title_generation"?(l._addInteractionToState(v),l._addStreamingId(a)):(l._addInteractionToState(v),l._addStreamingId(a),console.log(`[InteractionService] Added title generation interaction ${a} to state.`)),Nt.saveInteraction({...v}).catch(X=>{console.error(`[InteractionService] Failed initial persistence for ${a}`,X)}),We.emit(zn.started,{interactionId:a,conversationId:t,type:v.type});const b=(O=i.metadata)==null?void 0:O.modelId;if(!b)return this._finalizeInteraction(a,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:w,modelId:x}=Mo(b);if(!w||!x)return this._finalizeInteraction(a,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const _=gr.getState().dbProviderConfigs.find(X=>X.id===w);if(!_)return this._finalizeInteraction(a,"ERROR",new Error(`Provider configuration not found for ID: ${w}`),r),null;const E=gr.getState().getApiKeyForProvider(w),k=DA(_,x,E);if(!k)return this._finalizeInteraction(a,"ERROR",new Error(`Failed to instantiate model instance for ${b} from provider ${_.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const T=r!=="conversation.title_generation"?(((P=i.metadata)==null?void 0:P.enabledTools)??[]).reduce((X,ie)=>{const ee=dd.getState().getRegisteredTools()[ie];if(ee!=null&&ee.implementation){const Q={...ee.definition};Q.execute=async he=>{const Se=Hn.getState().currentConversationId,ce=Se?ir.getState().getConversationById(Se):null,je=(ce==null?void 0:ce.projectId)??"orphan";let De;try{if(We.emit(sn.initializeVFSRequest,{vfsKey:je,options:{force:!0}}),await new Promise(Re=>setTimeout(Re,100)),De=Ls.getState().fs,Ls.getState().configuredVfsKey!==je||!De)throw new Error(`Filesystem for key "${je}" not ready after request.`)}catch(Re){return{_isError:!0,error:`Filesystem error: ${Re.message}`}}try{const Re=Dne(),xe=ee.definition.parameters.parse(he),Fe=ee.implementation,st={...Re,fsInstance:De};return await Fe(xe,st)}catch(Re){const xe=Re instanceof Error?Re.message:String(Re);return Re instanceof z.ZodError?{_isError:!0,error:`Invalid arguments: ${Re.errors.map(Fe=>`${Fe.path.join(".")} (${Fe.message})`).join(", ")}`}:{_isError:!0,error:xe}}},X[ie]=Q}return X},{}):void 0,R=((U=i.parameters)==null?void 0:U.maxSteps)??ur.getState().toolMaxSteps,M={model:k,messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(j=i.parameters)==null?void 0:j.temperature,maxTokens:(V=i.parameters)==null?void 0:V.max_tokens,topP:($=i.parameters)==null?void 0:$.top_p,topK:(re=i.parameters)==null?void 0:re.top_k,presencePenalty:(J=i.parameters)==null?void 0:J.presence_penalty,frequencyPenalty:(te=i.parameters)==null?void 0:te.frequency_penalty,maxSteps:R,...T&&Object.keys(T).length>0&&{tools:T},toolChoice:i.toolChoice??(T&&Object.keys(T).length>0?"auto":"none")},I={onChunk:X=>this._handleChunk(a,X),onReasoningChunk:X=>this._handleReasoningChunk(a,X),onToolCall:X=>this._handleToolCall(a,X),onToolResult:X=>this._handleToolResult(a,X),onFinish:X=>this._handleFinish(a,X,r),onError:X=>this._handleError(a,X,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${a}`),yEe.executeInteraction(a,M,I).catch(X=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${a}:`,X),this._handleError(a,X instanceof Error?X:new Error("Failed to start AI execution"),r)}),a},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),ze.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=Hn.getState(),r=n.interactions.find(s=>s.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await ox(D0.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const s=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;Hn.getState().appendInteractionResponseChunk(e,s),We.emit(zn.streamChunk,{interactionId:e,chunk:s})}},_handleReasoningChunk(e,t){Hn.getState().appendReasoningChunk(e,t)},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),Hn.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),Hn.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",s){var T;const i=Hn.getState(),a=i.interactions.find(R=>R.id===e);if(!a||a.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=i.activeReasoningBuffers[e]??"",c=this._streamingToolData.get(e)||{calls:[],results:[]},d=(a==null?void 0:a.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}, Reasoning Length: ${l.length}`);const h=performance.now(),m=this._interactionStartTimes.get(e),g=this._firstChunkTimestamps.get(e),v=m?Math.round(h-m):void 0,b=m&&g?Math.round(g-m):void 0,w=(s==null?void 0:s.reasoning)??l,x={status:t,endedAt:new Date,response:o||null,metadata:{...d,...(s==null?void 0:s.usage)&&{promptTokens:s.usage.promptTokens,completionTokens:s.usage.completionTokens,totalTokens:s.usage.totalTokens},...(s==null?void 0:s.providerMetadata)&&{providerMetadata:s.providerMetadata},toolCalls:c.calls,toolResults:c.results,reasoning:w||void 0,timeToFirstToken:b,generationTime:v,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const R=x.response.trim().replace(/^"|"$/g,"");R&&a&&(console.log(`[InteractionService] Updating conversation ${a.conversationId} title to: "${R}"`),We.emit(Qn.updateConversationRequest,{id:a.conversationId,updates:{title:R}}))}i._updateInteractionInState(e,x),i._removeStreamingId(e);const _=Hn.getState().interactions.find(R=>R.id===e);_?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((T=_.response)==null?void 0:T.length)??0}`),Nt.saveInteraction({..._}).catch(R=>{console.error(`[InteractionService] Failed final persistence for ${e}`,R)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let E=[],k=[];try{E=c.calls.map(R=>JSON.parse(R)),k=c.results.map(R=>JSON.parse(R))}catch(R){console.error("[InteractionService] Failed to parse tool strings for event emitter:",R)}We.emit(zn.completed,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:E,toolResults:k}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},rA={async submitPrompt(e){var P,U,j,V,$,re;console.log("[ConversationService] submitPrompt called",e);const t=Hn.getState(),n=gi.getState(),r=jl.getState(),s=ir.getState(),i=ur.getState(),a=t.currentConversationId;if(!a){ze.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const o=s.getConversationById(a),l=(o==null?void 0:o.projectId)??null,c=n.getEffectiveProjectSettings(l),h=t.interactions.filter(J=>J.conversationId===a).length===0&&i.autoTitleEnabled&&((P=e.metadata)==null?void 0:P.autoTitleEnabledForTurn)===!0&&i.autoTitleModelId,g=t.interactions.filter(J=>J.status==="COMPLETED"&&J.type==="message.user_assistant"),v=gM(g);let b=e.content;const w=[],x=((U=e.metadata)==null?void 0:U.effectiveRulesContent)??[],_=x.filter(J=>J.type==="system").map(J=>J.content),E=x.filter(J=>J.type==="before").map(J=>J.content),k=x.filter(J=>J.type==="after").map(J=>J.content);E.length>0&&(b=`${E.join(`
`)}

${b}`),k.length>0&&(b=`${b}

    ${k.join(`
`)}`),b&&w.push({type:"text",text:b});const T=((j=e.metadata)==null?void 0:j.attachedFiles)??[];if(T.length>0){const J=await this._processFilesForPrompt(T,a);w.unshift(...J)}w.length>0?v.push({role:"user",content:w}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");let M=((V=e.metadata)==null?void 0:V.turnSystemPrompt)??c.systemPrompt??void 0;_.length>0&&(M=`${M?`${M}

        `:""}${_.join(`
`)}`);const I={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(I).forEach(J=>{(I[J]===null||I[J]===void 0)&&delete I[J]});const O={system:M,messages:v,parameters:I,metadata:{...(({turnSystemPrompt:J,activeTagIds:te,activeRuleIds:X,effectiveRulesContent:ie,autoTitleEnabledForTurn:Z,...ee})=>({...ee,effectivelyAppliedTagIds:te,effectivelyAppliedRuleIds:X}))(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:($=e.metadata.attachedFiles)==null?void 0:$.map(({contentBase64:J,contentText:te,...X})=>X)}};try{const J=Iw.startInteraction(O,a,e);if(h){console.log("[ConversationService] Triggering asynchronous title generation.");const te=(((re=e.metadata)==null?void 0:re.effectiveRulesContent)??[]).map(X=>({id:X.sourceRuleId||pi(),name:X.sourceRuleId?`Rule ${X.sourceRuleId.substring(0,4)}`:"Context Rule",content:X.content,type:X.type,createdAt:new Date,updatedAt:new Date}));this.generateConversationTitle(a,e,te).catch(X=>{console.error("[ConversationService] Background title generation failed:",X)})}await J}catch(J){throw console.error("[ConversationService] Error starting interaction:",J),ze.error(`Failed to start interaction: ${J instanceof Error?J.message:String(J)}`),J}},async generateConversationTitle(e,t,n){var o,l;const r=ur.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let s=t.content;if(s.length>r.autoTitlePromptMaxLength&&(s=s.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const c=t.metadata.attachedFiles.map(d=>d.name).join(", ");s+=`

[Attached files: ${c}]`}if(r.autoTitleIncludeRules&&n.length>0){const c=n.map(d=>d.name).join(", ");s+=`

[Active rules: ${c}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:s}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},a={id:pi(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await Iw.startInteraction(i,e,a,"conversation.title_generation")}catch(c){console.error("[ConversationService] Error starting title generation interaction:",c)}},async regenerateInteraction(e){var O,P,U;console.log("[ConversationService] regenerateInteraction called",e);const t=Hn.getState(),n=gi.getState(),r=jl.getState(),s=ir.getState(),i=t.interactions.find(j=>j.id===e);if(!i||!i.prompt){ze.error("Cannot regenerate: Original interaction data missing.");return}const a=i.prompt,o=i.conversationId,l=s.getConversationById(o),c=(l==null?void 0:l.projectId)??null,d=n.getEffectiveProjectSettings(c),h=i.index,m=t.interactions.filter(j=>j.conversationId===o&&j.index<h&&j.status==="COMPLETED"&&j.type==="message.user_assistant").sort((j,V)=>j.index-V.index),g=gM(m);let v=a.content;const b=[],w=((O=a.metadata)==null?void 0:O.effectiveRulesContent)??[],x=w.filter(j=>j.type==="system").map(j=>j.content),_=w.filter(j=>j.type==="before").map(j=>j.content),E=w.filter(j=>j.type==="after").map(j=>j.content);_.length>0&&(v=`${_.join(`
`)}

${v}`),E.length>0&&(v=`${v}

    ${E.join(`
`)}`),v&&b.push({type:"text",text:v});const k=((P=a.metadata)==null?void 0:P.attachedFiles)??[];if(k.length>0){const j=await this._processFilesForPrompt(k,o);b.unshift(...j)}b.length>0?g.push({role:"user",content:b}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");let R=((U=a.metadata)==null?void 0:U.turnSystemPrompt)??d.systemPrompt??void 0;x.length>0&&(R=`${R?`${R}

        `:""}${x.join(`
`)}`);const M={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...a.parameters??{}};Object.keys(M).forEach(j=>{(M[j]===null||M[j]===void 0)&&delete M[j]});const I={system:R,messages:g,parameters:M,metadata:{...(({turnSystemPrompt:j,activeTagIds:V,activeRuleIds:$,effectiveRulesContent:re,autoTitleEnabledForTurn:J,...te})=>({...te,effectivelyAppliedTagIds:V,effectivelyAppliedRuleIds:$}))(a.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:k.map(({contentBase64:j,contentText:V,...$})=>$)}};try{await Iw.startInteraction(I,o,a,"message.assistant_regen")}catch(j){throw console.error("[ConversationService] Error starting regeneration interaction:",j),ze.error(`Failed to start regeneration: ${j instanceof Error?j.message:String(j)}`),j}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let s;if(r.length>0){const i=ir.getState().getConversationById(t),a=(i==null?void 0:i.projectId)??"orphan";try{s=await this._ensureVfsReady(a)}catch{ze.error(`Filesystem unavailable for key ${a}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),s=void 0}}for(const i of e){let a=null;try{if(i.source==="direct")a=mM(i);else if(i.source==="vfs"&&s&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await xd(i.path,{fsInstance:s});a=mM({...i,contentBytes:o})}else if(i.source==="vfs"&&!s)continue;a&&n.push(a)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){return console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`),new Promise((t,n)=>{const r=o=>{Ls.getState().configuredVfsKey===e&&(i(),t(o.fsInstance))},s=o=>{if(Ls.getState().configuredVfsKey===e&&!o.isLoading&&!o.operationLoading)if(o.error)i(),n(new Error(o.error));else{const l=Ls.getState().fs;l&&(i(),t(l))}},i=()=>{We.off(sn.fsInstanceChanged,r),We.off(sn.loadingStateChanged,s)};We.on(sn.fsInstanceChanged,r),We.on(sn.loadingStateChanged,s);const a=Ls.getState();if(a.configuredVfsKey===e&&a.fs&&!a.loading&&!a.operationLoading&&!a.error){i(),t(a.fs);return}if(a.configuredVfsKey===e&&a.error&&!a.loading&&!a.operationLoading){i(),n(new Error(a.error));return}We.emit(sn.initializeVFSRequest,{vfsKey:e,options:{force:!0}})})}};var bEe=(e,t,n,r,s,i,a,o)=>{let l=document.documentElement,c=["light","dark"];function d(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",w=b&&i?s.map(x=>i[x]||x):s;b?(l.classList.remove(...w),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(v,g)}),h(g)}function h(g){o&&c.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(t)||n,v=a&&g==="system"?m():g;d(v)}catch{}},vEe=C.createContext(void 0),wEe={setTheme:e=>{},themes:[]},xEe=()=>{var e;return(e=C.useContext(vEe))!=null?e:wEe};C.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,themes:o,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,t,i,e,o,a,r,s]).slice(1,-1);return C.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${bEe.toString()})(${d})`}})});const _Ee=({...e})=>{const{theme:t="system"}=xEe();return p.jsx(iJ,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function kd({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:mt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const Rq=C.memo(C.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:s,onValueChange:i,...a},o)=>{const l=C.useRef(null),[c,d]=C.useState(e);C.useImperativeHandle(o,()=>({getValue:()=>c,setValue:g=>{d(g),i&&i(g),We.emit(Nn.inputChanged,{value:g}),requestAnimationFrame(()=>{const v=l.current;v&&(v.style.height="auto",v.style.height=`${v.scrollHeight}px`,v.style.overflowY=v.scrollHeight>250?"auto":"hidden")})},focus:()=>{var g;return(g=l.current)==null?void 0:g.focus()},clearValue:()=>{d(""),i&&i(""),We.emit(Nn.inputChanged,{value:""}),requestAnimationFrame(()=>{const g=l.current;g&&(g.style.height="auto",g.style.height=`${g.scrollHeight}px`,g.style.overflowY="hidden")})}}));const h=g=>{var v;if(g.key==="Enter"&&!g.shiftKey&&!n){g.preventDefault();const b=Mc.getState().attachedFilesMetadata.length>0;(c.trim().length>0||b)&&(t(),(v=o==null?void 0:o.current)==null||v.clearValue())}},m=g=>{const v=g.target.value;d(v),i&&i(v),We.emit(Nn.inputChanged,{value:v})};return C.useEffect(()=>{const g=l.current;if(g){g.style.height="auto";const v=g.scrollHeight,b=250;g.style.height=`${Math.min(v,b)}px`,g.style.overflowY=v>b?"auto":"hidden"}},[c]),C.useEffect(()=>{e!==c&&(d(e),i&&i(e))},[e,i]),p.jsx(kd,{ref:l,value:c,onChange:m,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:mt("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",s),"aria-label":"Chat input",...a})}));Rq.displayName="InputArea";const Rs={dbModsLoaded:"mod.db.mods.loaded",loadedInstancesChanged:"mod.loaded.instances.changed",settingsTabsChanged:"mod.settings.tabs.changed",loadingStateChanged:"mod.loading.state.changed",modLoaded:"mod.sdk.loaded",modError:"mod.sdk.error",loadDbModsRequest:"mod.load.db.mods.request",addDbModRequest:"mod.add.db.mod.request",updateDbModRequest:"mod.update.db.mod.request",deleteDbModRequest:"mod.delete.db.mod.request"},ld=lo(co((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Nt.loadMods();e({dbMods:n,isLoading:!1}),We.emit(Rs.dbModsLoaded,{dbMods:n})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),We.emit(Rs.loadingStateChanged,{isLoading:!1,error:r}),ze.error(r)}},addDbMod:async n=>{const r=pi(),s={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(s),i.dbMods.sort((a,o)=>a.loadOrder-o.loadOrder)});try{return await Nt.saveMod(s),ze.success(`Mod "${s.name}" added.`),We.emit(Rs.dbModsLoaded,{dbMods:t().dbMods}),r}catch(i){const a="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=a}),We.emit(Rs.loadingStateChanged,{isLoading:t().isLoading,error:a}),ze.error(a),i}},updateDbMod:async(n,r)=>{let s,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(s={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const a=i!==-1?t().dbMods[i]:void 0;if(a)try{await Nt.saveMod(a),ze.success(`Mod "${a.name}" updated.`),We.emit(Rs.dbModsLoaded,{dbMods:t().dbMods})}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(c=>{const d=c.dbMods.findIndex(h=>h.id===n);d!==-1&&s&&(c.dbMods[d]=s,c.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),c.error=l}),We.emit(Rs.loadingStateChanged,{isLoading:t().isLoading,error:l}),ze.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const s=r.name;e(i=>({dbMods:i.dbMods.filter(a=>a.id!==n)}));try{await Nt.deleteMod(n),ze.success(`Mod "${s}" deleted.`),We.emit(Rs.dbModsLoaded,{dbMods:t().dbMods})}catch(i){const a="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,c)=>l.loadOrder-c.loadOrder),o.error=a}),We.emit(Rs.loadingStateChanged,{isLoading:t().isLoading,error:a}),ze.error(a),i}},setLoadedMods:n=>{e({loadedMods:n}),We.emit(Rs.loadedInstancesChanged,{loadedMods:n})},_addSettingsTab:n=>{e(r=>{if(!r.modSettingsTabs.some(s=>s.id===n.id))r.modSettingsTabs.push(n),r.modSettingsTabs.sort((s,i)=>(s.order??999)-(i.order??999));else{console.warn(`ModStore: Settings tab with ID "${n.id}" already registered. Overwriting.`);const s=r.modSettingsTabs.findIndex(i=>i.id===n.id);r.modSettingsTabs[s]=n,r.modSettingsTabs.sort((i,a)=>(i.order??999)-(a.order??999))}}),We.emit(Rs.settingsTabsChanged,{tabs:t().modSettingsTabs})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(s=>s.id!==n)}),We.emit(Rs.settingsTabsChanged,{tabs:t().modSettingsTabs})},getRegisteredActionHandlers:()=>{const n="modStore",r=t(),s=i=>async a=>{await i(a)};return[{eventName:Rs.loadDbModsRequest,handler:r.loadDbMods,storeId:n},{eventName:Rs.addDbModRequest,handler:s(r.addDbMod),storeId:n},{eventName:Rs.updateDbModRequest,handler:i=>r.updateDbMod(i.id,i.changes),storeId:n},{eventName:Rs.deleteDbModRequest,handler:i=>r.deleteDbMod(i.id),storeId:n}]}}))),Td={loaded:"app.loaded",errorBoundaryTriggered:"app.error.boundary.triggered",initializationPhaseCompleted:"app.initialization.phase.completed"};function sA(e){const t=e.id,n=e.name;return{modId:t,modName:n,registerPromptControl:s=>(We.emit(xr.registerPromptControlRequest,{control:s}),()=>We.emit(xr.unregisterPromptControlRequest,{id:s.id})),registerChatControl:s=>{const i={...s,status:s.status??(()=>"ready")};return We.emit(xr.registerChatControlRequest,{control:i}),()=>We.emit(xr.unregisterChatControlRequest,{id:s.id})},registerTool:(s,i,a)=>(console.log(`[${n}] Registering tool: ${s}`),We.emit(xr.registerToolRequest,{modId:t,toolName:s,definition:i,implementation:a}),()=>We.emit(xr.unregisterToolRequest,{toolName:s})),on:(s,i)=>(We.on(s,i),()=>We.off(s,i)),emit:(s,i)=>{We.emit(s,i)},addMiddleware:(s,i)=>(We.emit(xr.registerMiddlewareRequest,{hookName:s,modId:t,callback:i}),()=>We.emit(xr.unregisterMiddlewareRequest,{hookName:s,modId:t,callback:i})),registerSettingsTab:s=>(ld.getState()._addSettingsTab(s),()=>ld.getState()._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=Hn.getState(),i=ir.getState(),a=ur.getState(),o=gr.getState(),{providerId:l}=Mo(o.selectedModelId),c=i.selectedItemType==="conversation"?i.selectedItemId:null;return Object.freeze({selectedConversationId:c,interactions:Object.freeze(s.currentConversationId===c?s.interactions.map(d=>Object.freeze({...d})):[]),isStreaming:s.status==="streaming",selectedProviderId:l,selectedModelId:o.selectedModelId,activeSystemPrompt:a.globalSystemPrompt,temperature:a.temperature,maxTokens:a.maxTokens,theme:a.theme,gitUserName:a.gitUserName,gitUserEmail:a.gitUserEmail})},showToast:(s,i)=>{ze[s](`[Mod: ${n}] ${i}`)},log:(s,...i)=>{console[s](`[Mod: ${n}]`,...i)},registerModalProvider:(s,i)=>(We.emit(xr.registerModalProviderRequest,{modalId:s,provider:i}),()=>We.emit(xr.unregisterModalProviderRequest,{modalId:s})),getVfsInstance:async s=>Ls.getState().initializeVFS(s,{force:!0})}}async function SEe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let s=r.scriptContent,i=null,a=null;try{if(i=sA(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);s=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!s)throw new Error("Mod script content is empty.");new Function("modApi",s)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){a=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),ze.error(`Error loading mod "${r.name}": ${a instanceof Error?a.message:a}`)}i||(i=sA(r));const o={id:r.id,name:r.name,api:i,error:a};return We.emit(o.error?Rs.modError:Rs.modLoaded,{id:r.id,name:r.name,error:o.error??"unknown error"}),o}));return We.emit(Td.loaded,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}const hr={dataLoaded:"rules.data.loaded",ruleSaved:"rules.rule.saved",ruleDeleted:"rules.rule.deleted",tagSaved:"rules.tag.saved",tagDeleted:"rules.tag.deleted",linkSaved:"rules.link.saved",linkDeleted:"rules.link.deleted",loadingStateChanged:"rules.loading.state.changed",loadRulesAndTagsRequest:"rules.load.rules.and.tags.request",addRuleRequest:"rules.add.rule.request",updateRuleRequest:"rules.update.rule.request",deleteRuleRequest:"rules.delete.rule.request",addTagRequest:"rules.add.tag.request",updateTagRequest:"rules.update.tag.request",deleteTagRequest:"rules.delete.tag.request",linkTagToRuleRequest:"rules.link.tag.to.rule.request",unlinkTagFromRuleRequest:"rules.unlink.tag.from.rule.request"};function EEe(e){const t=new Map(e.map(a=>[a.id,a])),n=new Set,r=new Set,s=[];function i(a){if(n.has(a.id))return!0;if(r.has(a.id))return console.error(`[Init] Circular dependency detected involving module: ${a.id}`),ze.error("Initialization Error: Circular dependency in controls."),!1;r.add(a.id);for(const o of a.dependencies??[]){const l=t.get(o);if(!l)return console.error(`[Init] Missing dependency "${o}" for module "${a.id}"`),ze.error(`Initialization Error: Missing dependency "${o}" for "${a.id}".`),r.delete(a.id),!1;if(!i(l))return r.delete(a.id),!1}return r.delete(a.id),n.add(a.id),s.push(a),!0}for(const a of e)if(!n.has(a.id)&&!i(a))return null;return s}async function CEe(e,t){console.log("[Init] Core Data: Requesting loads..."),t.emit(en.loadSettingsRequest,void 0),t.emit(Un.loadInitialDataRequest,void 0),t.emit(hr.loadRulesAndTagsRequest,void 0),t.emit(Qn.loadSidebarItemsRequest,void 0),await new Promise(n=>{let r=!1,s=!1,i=!1,a=!1;const o=()=>{r&&s&&i&&a&&n()},l=t.on(en.loaded,()=>{r=!0,l(),o()}),c=t.on(Un.initialDataLoaded,()=>{s=!0,c(),o()}),d=t.on(hr.dataLoaded,()=>{i=!0,d(),o()}),h=t.on(Qn.sidebarItemsLoaded,()=>{a=!0,h(),o()})}),We.emit(Td.initializationPhaseCompleted,{phase:"coreData"}),console.log("[Init] Core Data: Loaded (or load requested).")}async function kEe(e,t){console.log("[Init] Control Modules: Instantiation & Dependency Resolution START");const n=e.map(s=>new s),r=EEe(n);if(!r)throw console.error("[Init] Control Modules: Dependency resolution FAILED."),new Error("Failed to resolve control module dependency order.");console.log(`[Init] Control Modules: Dependency order resolved (${r.length} modules):`,r.map(s=>s.id)),console.log("[Init] Control Modules: Instantiation & Dependency Resolution COMPLETE"),console.log("[Init] Control Modules: Initialization START");for(const s of r)try{await s.initialize(t)}catch(i){console.error(`[Init] Error initializing module "${s.id}":`,i),ze.error(`Module Init Error (${s.id}): ${i instanceof Error?i.message:String(i)}`)}return We.emit(Td.initializationPhaseCompleted,{phase:"controlModulesInit"}),console.log("[Init] Control Modules: Initialization COMPLETE."),r}function TEe(e,t){console.log("[Init] Control Modules: Registration START");for(const n of e)try{n.register(t)}catch(r){console.error(`[Init] Error registering module "${n.id}":`,r),ze.error(`Module Registration Error (${n.id}): ${r instanceof Error?r.message:String(r)}`)}We.emit(Td.initializationPhaseCompleted,{phase:"controlModulesRegister"}),console.log("[Init] Control Modules: Registration COMPLETE.")}async function AEe(e,t){console.log("[Init] External Mods: Loading DB records..."),t.emit(Rs.loadDbModsRequest,void 0),await new Promise(s=>{const i=t.on(Rs.dbModsLoaded,()=>{i(),s()})});const n=ld.getState().dbMods;console.log(`[Init] External Mods: Processing ${n.length} mods...`);const r=await SEe(n);ld.getState().setLoadedMods(r),We.emit(Td.initializationPhaseCompleted,{phase:"externalMods"}),console.log(`[Init] External Mods: ${r.length} mods processed.`)}function REe(e,t){var a;console.log("[Init] Core UI States: Initializing...");const n=e.selectedItemId,r=e.selectedItemType,s=r==="project"?n:r==="conversation"?((a=e.getConversationById(n))==null?void 0:a.projectId)??null:null,i=e.getEffectiveProjectSettings(s);t.emit(Nn.initializePromptStateRequest,{effectiveSettings:i}),We.emit(Td.initializationPhaseCompleted,{phase:"uiStateSync"}),console.log("[Init] Core UI States: Initial prompt state synchronization requested.")}async function NEe(e,t){console.log("LiteChat: Full initialization sequence START.");const n={requestLoadSettings:()=>t.emit(en.loadSettingsRequest,void 0),requestLoadProviderData:()=>t.emit(Un.loadInitialDataRequest,void 0),requestLoadRulesAndTags:()=>t.emit(hr.loadRulesAndTagsRequest,void 0),requestLoadSidebarItems:()=>t.emit(Qn.loadSidebarItemsRequest,void 0),requestLoadDbMods:()=>t.emit(Rs.loadDbModsRequest,void 0),setLoadedMods:ld.getState().setLoadedMods,getConversationById:ir.getState().getConversationById,getEffectiveProjectSettings:gi.getState().getEffectiveProjectSettings,initializePromptState:jl.getState().initializePromptState,selectedItemId:ir.getState().selectedItemId,selectedItemType:ir.getState().selectedItemType};let r=[];try{await CEe(n,t),r=await kEe(e,t),TEe(r,t),await AEe(n,t),REe(n,t),We.emit(Td.initializationPhaseCompleted,{phase:"all"}),console.log("LiteChat: Full initialization sequence COMPLETE.")}catch(s){throw console.error("LiteChat: Full initialization sequence FAILED:",s),ze.error(`Initialization sequence failed: ${s instanceof Error?s.message:String(s)}`),id.getState().setGlobalError("Initialization sequence failed."),s}return r}const IEe=lo(co((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,s]=await Promise.all([Nt.loadRules(),Nt.loadTags(),Nt.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:s,isLoading:!1}),We.emit(hr.dataLoaded,{rules:n,tags:r,links:s})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),ze.error("Failed to load rules and tags."),We.emit(hr.loadingStateChanged,{isLoading:!1,error:"Failed load rules/tags"})}},addRule:async n=>{const r=pi(),s=new Date,i={id:r,createdAt:s,updatedAt:s,...n};e(a=>{a.rules.push(i),a.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await Nt.saveRule(i),ze.success(`Rule "${i.name}" added.`),We.emit(hr.ruleSaved,{rule:i}),r}catch(a){throw console.error("RulesStore: Error adding rule",a),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),ze.error("Failed to save new rule."),a}},updateRule:async(n,r)=>{const s=t().rules.find(a=>a.id===n);if(!s)return;const i={...s,...r,updatedAt:new Date};e(a=>{const o=a.rules.findIndex(l=>l.id===n);o!==-1&&(a.rules[o]=i,a.rules.sort((l,c)=>l.name.localeCompare(c.name)))});try{await Nt.saveRule(i),ze.success(`Rule "${i.name}" updated.`),We.emit(hr.ruleSaved,{rule:i})}catch(a){throw console.error("RulesStore: Error updating rule",a),e(o=>{const l=o.rules.findIndex(c=>c.id===n);l!==-1&&(o.rules[l]=s,o.rules.sort((c,d)=>c.name.localeCompare(d.name))),o.error="Failed to save rule update"}),ze.error("Failed to save rule update."),a}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const s=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(a=>a.id!==n),tagRuleLinks:i.tagRuleLinks.filter(a=>a.ruleId!==n)}));try{await Nt.deleteRule(n),ze.success(`Rule "${r.name}" deleted.`),We.emit(hr.ruleDeleted,{ruleId:n})}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(a=>{a.rules.push(r),a.rules.sort((o,l)=>o.name.localeCompare(l.name)),a.tagRuleLinks.push(...s),a.error="Failed to delete rule"}),ze.error("Failed to delete rule."),i}},addTag:async n=>{const r=pi(),s=new Date,i={id:r,createdAt:s,updatedAt:s,...n};e(a=>{a.tags.push(i),a.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await Nt.saveTag(i),ze.success(`Tag "${i.name}" added.`),We.emit(hr.tagSaved,{tag:i}),r}catch(a){throw console.error("RulesStore: Error adding tag",a),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),ze.error("Failed to save new tag."),a}},updateTag:async(n,r)=>{const s=t().tags.find(a=>a.id===n);if(!s)return;const i={...s,...r,updatedAt:new Date};e(a=>{const o=a.tags.findIndex(l=>l.id===n);o!==-1&&(a.tags[o]=i,a.tags.sort((l,c)=>l.name.localeCompare(c.name)))});try{await Nt.saveTag(i),ze.success(`Tag "${i.name}" updated.`),We.emit(hr.tagSaved,{tag:i})}catch(a){throw console.error("RulesStore: Error updating tag",a),e(o=>{const l=o.tags.findIndex(c=>c.id===n);l!==-1&&(o.tags[l]=s,o.tags.sort((c,d)=>c.name.localeCompare(d.name))),o.error="Failed to save tag update"}),ze.error("Failed to save tag update."),a}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const s=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(a=>a.id!==n),tagRuleLinks:i.tagRuleLinks.filter(a=>a.tagId!==n)}));try{await Nt.deleteTag(n),ze.success(`Tag "${r.name}" deleted.`),We.emit(hr.tagDeleted,{tagId:n})}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(a=>{a.tags.push(r),a.tags.sort((o,l)=>o.name.localeCompare(l.name)),a.tagRuleLinks.push(...s),a.error="Failed to delete tag"}),ze.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const s=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===s))return;const a={id:s,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(a)});try{await Nt.saveTagRuleLink(a),We.emit(hr.linkSaved,{link:a})}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(c=>c.id!==s)})),ze.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const s=`${n}-${r}`,i=t().tagRuleLinks.find(a=>a.id===s);if(i){e(a=>({tagRuleLinks:a.tagRuleLinks.filter(o=>o.id!==s)}));try{await Nt.deleteTagRuleLink(s),We.emit(hr.linkDeleted,{linkId:s})}catch(a){throw console.error("RulesStore: Error unlinking tag from rule",a),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),ze.error("Failed to unlink tag and rule."),a}}},getRulesForTag:n=>{const r=t(),s=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>s.has(i.id))},getTagsForRule:n=>{const r=t(),s=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>s.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(s=>r.has(s.id))},getRegisteredActionHandlers:()=>{const n="rulesStore",r=t(),s=i=>async a=>{await i(a)};return[{eventName:hr.loadRulesAndTagsRequest,handler:r.loadRulesAndTags,storeId:n},{eventName:hr.addRuleRequest,handler:s(r.addRule),storeId:n},{eventName:hr.updateRuleRequest,handler:i=>r.updateRule(i.id,i.updates),storeId:n},{eventName:hr.deleteRuleRequest,handler:i=>r.deleteRule(i.id),storeId:n},{eventName:hr.addTagRequest,handler:s(r.addTag),storeId:n},{eventName:hr.updateTagRequest,handler:i=>r.updateTag(i.id,i.updates),storeId:n},{eventName:hr.deleteTagRequest,handler:i=>r.deleteTag(i.id),storeId:n},{eventName:hr.linkTagToRuleRequest,handler:i=>r.linkTagToRule(i.tagId,i.ruleId),storeId:n},{eventName:hr.unlinkTagFromRuleRequest,handler:i=>r.unlinkTagFromRule(i.tagId,i.ruleId),storeId:n}]}}))),jEe=[ur,gr,IEe,ir,gi,Hn,Mc,jl,ld,id,Ls,dd];class Nq{static initialize(){if(this.isInitialized){console.warn("[Coordinator] Already initialized. Skipping re-initialization.");return}console.log("[Coordinator] Initializing dynamic event listeners for action requests...");const t=[];jEe.forEach(n=>{const r=n.getState();if(r&&typeof r.getRegisteredActionHandlers=="function")try{const s=r.getRegisteredActionHandlers();Array.isArray(s)?t.push(...s):console.warn(`[Coordinator] getRegisteredActionHandlers for store did not return an array. Store ID: ${r.id||"Unknown"}`)}catch(s){console.error("[Coordinator] Error calling getRegisteredActionHandlers for a store:",s)}}),t.length===0?console.warn("[Coordinator] No action handlers were registered by any store."):t.forEach(n=>{n&&n.eventName&&typeof n.handler=="function"?We.on(n.eventName,n.handler):console.error("[Coordinator] Invalid action handler structure encountered:",n)}),this.isInitialized=!0,console.log(`[Coordinator] Dynamic event listeners initialized. Total handlers: ${t.length}.`)}}Me(Nq,"isInitialized",!1);const MEe=()=>{const[e,t]=C.useState({}),n=dd(r=>r.modalProviders);return C.useEffect(()=>{const r=i=>{t(a=>({...a,[i.modalId]:{...i,isOpen:!0}})),We.emit(ar.modalStateChanged,{...i,isOpen:!0})},s=i=>{t(a=>{const o={...a};return o[i.modalId]&&(o[i.modalId].isOpen=!1),o}),We.emit(ar.modalStateChanged,{modalId:i.modalId,isOpen:!1})};return We.on(ar.openModalRequest,r),We.on(ar.closeModalRequest,s),()=>{We.off(ar.openModalRequest,r),We.off(ar.closeModalRequest,s)}},[]),p.jsx(p.Fragment,{children:Object.entries(e).map(([r,s])=>{if(!s.isOpen)return null;const i=n[r];if(!i)return console.warn(`[ModalManager] No provider for modalId: ${r}`),null;const a={isOpen:!0,onClose:()=>We.emit(ar.closeModalRequest,{modalId:r}),modalProps:s.modalProps,targetId:s.targetId,initialTab:s.initialTab,initialSubTab:s.initialSubTab};return p.jsx(i,{...a},r)})})};let YP=[],XP=null,Hg=!1;const DEe=({controls:e=[]})=>{const[t,n]=C.useState(!0),[r,s]=C.useState(!1),i=C.useRef(null),{selectedItemId:a,selectedItemType:o,getConversationById:l}=ir(En(O=>({selectedItemId:O.selectedItemId,selectedItemType:O.selectedItemType,getConversationById:O.getConversationById}))),{getEffectiveProjectSettings:c}=gi(En(O=>({getEffectiveProjectSettings:O.getEffectiveProjectSettings}))),{interactions:d,status:h}=Hn(En(O=>({interactions:O.interactions,status:O.status}))),{globalError:m,isSidebarCollapsed:g,isChatControlPanelOpen:v}=id(En(O=>({globalError:O.globalError,isSidebarCollapsed:O.isSidebarCollapsed,isChatControlPanelOpen:O.isChatControlPanelOpen}))),b=dd(En(O=>Object.values(O.chatControls))),w=C.useCallback(()=>{s(O=>!O)},[]);C.useEffect(()=>{r&&s(!1)},[a,o,r]),C.useEffect(()=>{const O=sA({id:"core-litechat-app",name:"LiteChat App Core"});Nq.initialize(),XP||(XP=(async()=>{if(Hg){n(!1);return}n(!0);try{YP=await NEe(e,O),Hg=!0}catch(U){console.error("[LiteChat] App: Top-level initialization error:",U),Hg=!1}finally{n(!1)}})().then(()=>YP))},[e]);const x=C.useRef({itemId:null,itemType:null});C.useEffect(()=>{if(t||!Hg)return;const O={itemId:a,itemType:o};if(O.itemId!==x.current.itemId||O.itemType!==x.current.itemType){let P=null;if(o==="project")P=a;else if(o==="conversation"&&a){const j=l(a);P=(j==null?void 0:j.projectId)??null}const U=c(P);We.emit(Nn.initializePromptStateRequest,{effectiveSettings:U}),We.emit(ar.contextChanged,{selectedItemId:a,selectedItemType:o}),x.current=O}},[a,o,l,c,t]),C.useEffect(()=>{if(t||!Hg)return;let O=null;if(v["core-vfs-modal-panel"]||o==="project")if(o==="project")O=a;else if(o==="conversation"){const U=l(a);O=(U==null?void 0:U.projectId)??"orphan"}else O="orphan";else if(o==="conversation"){const U=l(a);O=(U==null?void 0:U.projectId)??"orphan"}Ls.getState().vfsKey!==O&&We.emit(sn.setVfsKeyRequest,{key:O})},[a,o,l,t,v]);const _=C.useCallback(async O=>{var V;const P=ir.getState();let U=P.selectedItemType==="conversation"?P.selectedItemId:null;const j=P.selectedItemType==="project"?P.selectedItemId:P.selectedItemType==="conversation"?((V=P.getConversationById(P.selectedItemId))==null?void 0:V.projectId)??null:null;if(!U)try{const $={title:"New Chat",projectId:j},re=await P.addConversation($);await P.selectItem(re,"conversation"),U=ir.getState().selectedItemId}catch($){console.error("[LiteChat] App: Failed to create new conversation",$),ze.error("Failed to start new chat.");return}try{const $=jl.getState(),re={...O,metadata:{...O.metadata,modelId:$.modelId}};await rA.submitPrompt(re)}catch($){console.error("[LiteChat] App: Error submitting prompt:",$)}},[]),E=C.useCallback(async O=>{try{await rA.regenerateInteraction(O)}catch(P){console.error("[LiteChat] App: Error regenerating interaction:",P)}},[]),k=C.useCallback(O=>{Iw.abortInteraction(O)},[]),T=C.useMemo(()=>b.filter(O=>(O.panel??"main")==="sidebar"&&(O.show?O.show():!0)),[b]),R=C.useMemo(()=>b.filter(O=>O.panel==="sidebar-footer"&&(O.show?O.show():!0)),[b]),M=C.useMemo(()=>b.filter(O=>O.panel==="header"&&(O.show?O.show():!0)),[b]),I=o==="conversation"?a:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(Fn,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsx(MEe,{}),p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:mt("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",g?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:mt(g?"hidden":"block"),children:p.jsx(tp,{controls:T,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:mt(g?"block":"hidden"),children:p.jsx(tp,{controls:T,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:mt("flex-shrink-0 border-t border-border p-2",g?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx(tp,{controls:R,panelId:"sidebar-footer",renderMode:g?"icon":"full",className:mt("flex",g?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm animate-fadeIn",onClick:w}),p.jsxs("div",{className:"relative w-4/5 max-w-xs bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[p.jsx("h2",{className:"font-semibold",children:"LiteChat Menu"}),p.jsx("button",{onClick:w,className:"p-1 rounded-md hover:bg-muted","aria-label":"Close menu",children:p.jsx(qi,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:p.jsx(tp,{controls:T,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4",children:p.jsx(tp,{controls:R,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-muted",onClick:w,"aria-label":"Open menu",children:p.jsx(mY,{className:"h-5 w-5"})}),p.jsx(tp,{controls:M,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(j1e,{conversationId:I,interactions:d,onRegenerateInteraction:E,onStopInteraction:k,status:h,className:"flex-grow overflow-y-hidden"}),m&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",m]}),p.jsx(Lne,{InputAreaRenderer:Rq,onSubmit:_,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:i,selectedItemId:a,selectedItemType:o})]})]}),p.jsx(_Ee,{richColors:!0,position:"bottom-right",closeButton:!0})]})},OEe="prism-theme-link",PEe="prism-default-light-theme-link",FEe="prism-default-dark-theme-link",LEe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",$Ee="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",yk=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},BEe=()=>{const{prismThemeUrl:e,theme:t}=ur(En(s=>({prismThemeUrl:s.prismThemeUrl,theme:s.theme}))),n=C.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=C.useMemo(()=>{const s=t==="system"?n:t;return s==="dark"||s==="TijuDark"?"dark":"light"},[t,n]);return C.useEffect(()=>{if(typeof window>"u")return;const s=yk(PEe),i=yk(FEe),a=yk(OEe);return s.disabled=!0,i.disabled=!0,a.disabled=!0,s.href=LEe,i.href=$Ee,e?(a.href=e,a.disabled=!1):(console.log(r),r==="dark"?i.disabled=!1:s.disabled=!1),()=>{}},[e,r]),null},bk=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),vk=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],zEe=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=ur(En(s=>({theme:s.theme,customFontFamily:s.customFontFamily,customFontSize:s.customFontSize,customThemeColors:s.customThemeColors})));return C.useEffect(()=>{const s=document.body,i=document.documentElement;s.classList.remove("light","dark","TijuLight","TijuDark","custom"),vk.forEach(a=>{i.style.removeProperty(`--${bk(a)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?s.classList.add("light"):e==="dark"?s.classList.add("dark"):e==="TijuLight"?s.classList.add("TijuLight"):e==="TijuDark"?s.classList.add("TijuDark"):e==="custom"?(s.classList.add("custom"),t?i.style.setProperty("--custom-font-family",t):i.style.removeProperty("--custom-font-family"),n?i.style.setProperty("--custom-font-size",`${n}px`):i.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([a,o])=>{if(o&&vk.includes(a)){const l=`--${bk(a)}`;i.style.setProperty(l,o)}else if(vk.includes(a)){const l=`--${bk(a)}`;i.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?s.classList.add("dark"):s.classList.add("light")},[e,t,n,r]),null},UEe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1750 c-26 15 -48 65 -41 94
             15 61 181 167 304 196
             30 7 100 12 155 12
             81 -1 115 -6 178 -27
             135 -45 247 -133 249 -194
             2 -60 -48 -103 -104 -88
             -13 3 -50 25 -83 50
             -85 64 -172 90 -280 84
             -92 -6 -165 -35 -259 -103
             -49 -35 -86 -43 -119 -24z`})})]})},JP="0.1.0-dev",QP="https://github.com/DimitriGilbert/LiteChat",e8=({textToCopy:e,label:t,className:n})=>{const[r,s]=C.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(e),s(!0),ze.success(`${t} copied to clipboard!`),setTimeout(()=>s(!1),2e3)}catch(a){ze.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,a)}};return p.jsxs(At,{variant:"outline",onClick:i,className:n,children:[r?p.jsx(ni,{className:"mr-2 h-4 w-4 text-green-500"}):p.jsx(RZ,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class qEe extends C.Component{constructor(){super(...arguments);Me(this,"state",{hasError:!1,error:null,errorInfo:null});Me(this,"handleReportOnGitHub",async()=>{const n=this.generateErrorReport(!0);try{await navigator.clipboard.writeText(n),ze.success("Error report copied to clipboard. Paste it into the GitHub issue body.");const r=`${QP}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(r,"_blank","noopener,noreferrer")}catch(r){ze.error("Failed to copy error report. Please copy manually."),console.error("Clipboard copy failed for GitHub report:",r);const s=`${QP}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(s,"_blank","noopener,noreferrer")}})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueTitle(){var i;const{error:n,errorInfo:r}=this.state;let s="Crash Report: ";if(r!=null&&r.componentStack){const a=(i=r.componentStack.trim().split(/\s+at\s+/)[1])==null?void 0:i.split(" ")[0];a&&(s+=`Error in <${a}> - `)}return s+=(n==null?void 0:n.message.substring(0,70))??"Unknown Error",n&&n.message.length>70&&(s+="..."),s}generateErrorReport(n=!1){const{error:r,errorInfo:s}=this.state,i=`
`,a=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${JP}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${a}${i}${r.message}${i}${a}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,s!=null&&s.componentStack&&(o+=`**Component Stack:**${i}${a}text${i}${s.componentStack.trim()}${i}${a}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${a}text${i}${r.stack.trim()}${i}${a}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,a;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${JP}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((a=n==null?void 0:n.stack)==null?void 0:a.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(UEe,{className:"h-24 w-24 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(At,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsx(e8,{textToCopy:this.generateErrorReport(),label:"Details"}),p.jsx(e8,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),p.jsxs(At,{variant:"outline",onClick:this.handleReportOnGitHub,children:[p.jsx(J8,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})]})]})}):this.props.children}}const Iq=(e,t)=>{if(!t)return null;let n=qu,r="text-muted-foreground/70",s=`Linked to ${t}`;switch(e){case"syncing":n=Fn,r="animate-spin text-blue-500",s=`Syncing with ${t}...`;break;case"error":n=Ic,r="text-destructive",s=`Sync error with ${t}`;break;case"needs-sync":n=kA,r="text-orange-500",s=`Needs sync with ${t}`;break;case"idle":n=t1,r="text-green-500",s=`Synced with ${t}`;break;default:n=qu,r="text-muted-foreground/70",s=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(n,{className:mt("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(Wn,{side:"right",children:s})]})})},jq=C.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:s,onSelectItem:i,onDeleteConversation:a,onDeleteProject:o,onExportConversation:l,onExportProject:c,expandedProjects:d,toggleProjectExpansion:h,editingItemId:m,editingItemType:g,handleStartEditing:v,handleSaveEdit:b,handleCancelEdit:w,isSavingEdit:x,originalNameToCompare:_})=>{const E=e.id===n,k=e.itemType==="project",T=e.id===m&&e.itemType===g,[R,M]=C.useState(k?e.name:e.title),I=C.useRef(null);C.useEffect(()=>{if(T){const ce=k?e.name:e.title;M(ce),requestAnimationFrame(()=>{var je,De;(je=I.current)==null||je.focus(),(De=I.current)==null||De.select()})}},[T,e,k]),C.useEffect(()=>{if(!T){const ce=k?e.name:e.title;R!==ce&&M(ce)}},[k?e.name:e.title,T,R,k]);const O=k&&d.has(e.id),P=k,U=!k&&e.syncRepoId?r[e.id]:void 0,j=!k&&e.syncRepoId?s.get(e.syncRepoId):void 0,V=!k&&j?Iq(U,j):null,$=id(ce=>ce.openProjectSettingsModal),re=()=>{T||(k&&h(e.id),i(e.id,e.itemType))},J=ce=>{ce.stopPropagation(),k?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,ce):a(e.id,ce)},te=ce=>{ce.stopPropagation(),v(e)},X=()=>{M(_),w(e.itemType==="project"&&_==="New Project")},ie=async()=>{if(x)return;const ce=R.trim();await b(e.id,e.itemType,ce)},Z=()=>{var De;if(x)return;const ce=R.trim(),je=e.itemType==="project"&&_==="New Project";if(!ce){_!=="New Project"?(ze.error("Name cannot be empty."),M(_),(De=I.current)==null||De.focus()):X();return}ce!==_||je?ie():X()},ee=ce=>{ce.key==="Enter"?(ce.preventDefault(),ie()):ce.key==="Escape"&&(ce.preventDefault(),X())},Q=k?e.name:e.title,he=x?Fn:ni,Se=x?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs("li",{className:mt("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!T&&"hover:bg-muted/50 hover:text-primary/80",E&&!T?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",T&&"bg-muted ring-1 ring-primary",!T&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:re,title:T?"":Q,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[P&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:ce=>{ce.stopPropagation(),h(e.id)},children:O?p.jsx(Po,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(Y8,{className:"h-3 w-3 text-muted-foreground"})}),!P&&p.jsx("span",{className:"w-3 flex-shrink-0"}),k?p.jsx(xf,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(Mk,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),T?p.jsx(gn,{ref:I,value:R,onChange:ce=>M(ce.target.value),onKeyDown:ee,onBlur:Z,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:ce=>ce.stopPropagation(),disabled:x}):p.jsx("span",{className:"truncate min-w-0 flex-1",children:Q}),V]}),p.jsx("div",{className:mt("items-center flex-shrink-0 ml-1",T?"flex":"hidden group-hover:flex transition-all duration-150"),onClick:ce=>ce.stopPropagation(),children:T?p.jsxs(p.Fragment,{children:[p.jsx(fn,{tooltipText:"Save (Enter)",onClick:ce=>{ce.stopPropagation(),ie()},disabled:x||!R.trim(),"aria-label":"Save changes",icon:p.jsx(he,{}),iconClassName:Se,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(fn,{tooltipText:"Cancel (Esc)",onClick:ce=>{ce.stopPropagation(),X()},disabled:x,"aria-label":"Cancel edit",icon:p.jsx(qi,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[k&&p.jsx(fn,{tooltipText:"Project Settings",onClick:ce=>{ce.stopPropagation(),$(e.id)},"aria-label":`Settings for ${Q}`,icon:p.jsx(CZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(fn,{tooltipText:"Edit",onClick:te,"aria-label":`Edit ${Q}`,icon:p.jsx(Ny,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),k?p.jsx(fn,{tooltipText:"Export Project (JSON)",onClick:ce=>c(e.id,ce),"aria-label":`Export project ${Q}`,icon:p.jsx(BZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(fn,{tooltipText:"Export Conversation","aria-label":`Export ${Q}`,icon:p.jsx(yf,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                 bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:ce=>ce.stopPropagation(),children:[p.jsx(At,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ce=>l(e.id,"json",ce),children:"JSON"}),p.jsx(At,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:ce=>l(e.id,"md",ce),children:"MD"})]})]}),p.jsx(fn,{tooltipText:"Delete",onClick:J,"aria-label":`Delete ${Q}`,icon:p.jsx(oa,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]})});jq.displayName="ConversationItemRenderer";function VEe({updateProject:e,updateConversation:t,deleteProject:n}){const[r,s]=C.useState(null),[i,a]=C.useState(null),[o,l]=C.useState(""),[c,d]=C.useState(!1),h=C.useCallback(v=>{s(v.id),a(v.itemType);const b=v.itemType==="project"?v.name:v.title;l(b),d(!1)},[]),m=C.useCallback(v=>{const b=r,w=v??(i==="project"&&o==="New Project");s(null),a(null),l(""),d(!1),w&&b&&n(b).catch(x=>{console.error("Failed to delete new project on cancel:",x),ze.error("Failed to clean up cancelled new project.")})},[r,i,o,n]),g=C.useCallback(async(v,b,w)=>{if(v!==r||b!==i||c)return;const x=w==null?void 0:w.trim();if(!x){ze.error("Name cannot be empty.");return}if(x===o&&!(b==="project"&&o==="New Project")){m();return}d(!0);try{b==="project"?await e(v,{name:x}):await t(v,{title:x}),ze.success("Item renamed successfully."),s(null),a(null),l("")}catch(E){console.error("Failed to save item name:",E),ze.error(`Failed to rename item: ${E instanceof Error?E.message:String(E)}`)}finally{d(!1)}},[r,i,c,e,t,m,o]);return{editingItemId:r,editingItemType:i,isSavingEdit:c,handleStartEditing:h,handleSaveEdit:g,handleCancelEdit:m,originalNameToCompare:o}}const Mq=(e,t,n,r,s,i,a,o,l)=>{if(!n)return!0;const c=`${t}-${e}`;if(l[c]!==void 0)return l[c];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const m=o.get(e)||[],g=a.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of m)if(Mq(v.id,"project",n,r,s,i,a,o,l)){d=!0;break}}}}return l[c]=d,d},HEe=({module:e})=>{const t=C.useRef(null),n=C.useRef(null),[r,s]=C.useState(!1),[,i]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>i({})),e.isLoading&&!ir.getState().isLoading&&!gi.getState().isLoading&&e.setIsLoading(!1),()=>e.setNotifyCallback(null)),[e]),C.useEffect(()=>{const ue=t.current;if(ue){const ke=ue.querySelector("[data-radix-scroll-area-viewport]");if(ke&&n.current!==ke?(n.current=ke,r||s(!0),i({})):!ke&&n.current&&(n.current=null,s(!1)),!n.current){const ae=new MutationObserver(()=>{const oe=ue.querySelector("[data-radix-scroll-area-viewport]");oe&&n.current!==oe&&(n.current=oe,s(!0),i({}),ae.disconnect())});return ae.observe(ue,{childList:!0,subtree:!0}),()=>ae.disconnect()}}},[t.current,r]);const{selectedItemId:a,selectedItemType:o,conversations:l,syncRepos:c,conversationSyncStatus:d,selectItem:h,addConversation:m,updateConversation:g,deleteConversation:v,exportConversation:b,exportProject:w,getConversationById:x}=ir(En(ue=>({selectedItemId:ue.selectedItemId,selectedItemType:ue.selectedItemType,conversations:ue.conversations,syncRepos:ue.syncRepos,conversationSyncStatus:ue.conversationSyncStatus,selectItem:ue.selectItem,addConversation:ue.addConversation,updateConversation:ue.updateConversation,deleteConversation:ue.deleteConversation,exportConversation:ue.exportConversation,exportProject:ue.exportProject,getConversationById:ue.getConversationById}))),{projects:_,addProject:E,updateProject:k,deleteProject:T,getProjectById:R}=gi(En(ue=>({projects:ue.projects,addProject:ue.addProject,updateProject:ue.updateProject,deleteProject:ue.deleteProject,getProjectById:ue.getProjectById}))),M=e.isLoading,[I,O]=yt.useState(new Set),[P,U]=C.useState(""),j=VEe({updateProject:k,updateConversation:g,deleteProject:T}),{editingItemId:V,editingItemType:$,isSavingEdit:re,handleStartEditing:J,handleSaveEdit:te,handleCancelEdit:X,originalNameToCompare:ie}=j,Z=C.useCallback(ue=>{O(ke=>{const ae=new Set(ke);return ae.has(ue)?ae.delete(ue):ae.add(ue),ae})},[]),ee=C.useCallback(()=>{if(o==="project")return a;if(o==="conversation"&&a){const ue=x(a);return(ue==null?void 0:ue.projectId)??null}return null},[a,o,x]),Q=C.useCallback(async()=>{if(!V)try{const ue=ee(),ke=await m({title:"New Chat",projectId:ue});h(ke,"conversation")}catch(ue){console.error("Failed to create new chat:",ue),ze.error("Failed to create new chat.")}},[V,ee,m,h]),he=C.useCallback(async()=>{if(!V)try{const ue=ee(),ke=await E({name:"New Project",parentId:ue});h(ke,"project"),ue&&O(ae=>new Set(ae).add(ue)),setTimeout(()=>{const ae=R(ke);ae&&J({...ae,itemType:"project"})},50)}catch(ue){console.error("Failed to create new project:",ue)}},[V,ee,E,h,R,J]),Se=C.useCallback((ue,ke)=>{ue===V&&ke===$||(V&&(ue!==V||ke!==$)&&X(),(ue!==a||ke!==o)&&h(ue,ke))},[V,$,a,o,X,h]),ce=C.useCallback((ue,ke)=>{ke.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&v(ue).catch(ae=>{console.error("Failed to delete conversation:",ae),ze.error("Failed to delete conversation.")})},[v]),je=C.useCallback((ue,ke)=>{ke.stopPropagation(),T(ue).catch(ae=>{console.error("Failed to delete project:",ae),ze.error("Failed to delete project.")})},[T]),De=C.useCallback(async(ue,ke,ae)=>{ae.stopPropagation();try{await b(ue,ke)}catch(oe){console.error(`Failed to export conversation as ${ke}:`,oe)}},[b]),Re=C.useCallback(async(ue,ke)=>{ke.stopPropagation();try{await w(ue)}catch(ae){console.error("Failed to export project:",ae)}},[w]),xe=C.useMemo(()=>new Map((c||[]).map(ue=>[ue.id,ue.name])),[c]),{projectsById:Fe,conversationsByProjectId:st,projectsByParentId:He}=C.useMemo(()=>{const ue=new Map(_.map(oe=>[oe.id,oe])),ke=new Map;l.forEach(oe=>{const ne=oe.projectId??null;ke.has(ne)||ke.set(ne,[]),ke.get(ne).push(oe)});const ae=new Map;return _.forEach(oe=>{const ne=oe.parentId??null;ae.has(ne)||ae.set(ne,[]),ae.get(ne).push(oe)}),{projectsById:ue,conversationsByProjectId:ke,projectsByParentId:ae}},[_,l]),Ne=C.useMemo(()=>{const ue=[],ke=P.toLowerCase(),ae={};function oe(ne,Ee){const Le=(He.get(ne)||[]).filter(St=>Mq(St.id,"project",ke,_,l,Fe,st,He,ae)),Te=(st.get(ne)||[]).filter(St=>St.title.toLowerCase().includes(ke)),Xe=[...Le,...Te];Xe.sort((St,dt)=>new Date(dt.updatedAt).getTime()-new Date(St.updatedAt).getTime()),Xe.forEach(St=>{"path"in St?(ue.push({id:`project-${St.id}`,originalId:St.id,type:"project",level:Ee,data:St,updatedAt:St.updatedAt}),I.has(St.id)&&oe(St.id,Ee+1)):ue.push({id:`conversation-${St.id}`,originalId:St.id,type:"conversation",level:Ee,data:St,updatedAt:St.updatedAt})})}return oe(null,0),ue},[_,l,P,I,Fe,st,He]),H=PN({count:Ne.length,getScrollElement:()=>n.current,estimateSize:()=>30,overscan:10});return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{size:"sm",variant:"ghost",onClick:he,"aria-label":"New Project",disabled:M||!!V,className:"h-7 w-7 p-0",children:p.jsx(wA,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"bottom",children:"New Project"})]})}),p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{size:"sm",variant:"ghost",onClick:Q,"aria-label":"New Chat",disabled:M||!!V,className:"h-7 w-7 p-0",children:p.jsx(Pf,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(Qs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter...",value:P,onChange:ue=>U(ue.target.value),className:"h-8 text-xs pl-8",disabled:M})]}),p.jsxs(Gi,{className:"flex-grow",ref:t,children:[M&&Ne.length===0?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"}),p.jsx("div",{className:"h-8 w-full bg-muted rounded animate-pulse"})]}):!M&&Ne.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:P.trim()!==""?"No items match your filter.":"Workspace is empty."}):r&&p.jsx("div",{style:{height:`${H.getTotalSize()}px`,width:"100%",position:"relative"},children:H.getVirtualItems().map(ue=>{const ke=Ne[ue.index];if(!ke)return null;const ae={...ke.data,itemType:ke.type};return p.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${ue.size}px`,transform:`translateY(${ue.start}px)`},className:"px-1",children:p.jsx(jq,{item:ae,level:ke.level,selectedItemId:a,conversationSyncStatus:d,repoNameMap:xe,onSelectItem:()=>Se(ke.originalId,ke.type),onDeleteConversation:ce,onDeleteProject:je,onExportConversation:De,onExportProject:Re,expandedProjects:I,toggleProjectExpansion:Z,editingItemId:V,editingItemType:$,handleStartEditing:J,handleSaveEdit:te,handleCancelEdit:X,isSavingEdit:re,originalNameToCompare:ie})},ke.id)})}),!r&&!M&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},GEe=({module:e})=>{const{addConversation:t,selectItem:n,selectedItemId:r,selectedItemType:s}=ir(En(c=>({addConversation:c.addConversation,selectItem:c.selectItem,selectedItemId:c.selectedItemId,selectedItemType:c.selectedItemType,getConversationById:c.getConversationById}))),{addProject:i}=gi(En(c=>({addProject:c.addProject}))),a=C.useCallback(()=>{if(s==="project")return r;if(s==="conversation"&&r){const c=ir.getState().getConversationById(r);return(c==null?void 0:c.projectId)??null}return null},[r,s]),o=async()=>{e.setIsLoading(!0);try{const c=a(),d=await t({title:"New Chat",projectId:c});n(d,"conversation")}catch(c){console.error("Failed to create new chat:",c),ze.error("Failed to create new chat.")}finally{e.setIsLoading(!1)}},l=async()=>{e.setIsLoading(!0);try{const c=a(),d=await i({name:"New Project",parentId:c});n(d,"project")}catch(c){console.error("Failed to create new project:",c),ze.error("Failed to create new project.")}finally{e.setIsLoading(!1)}};return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",onClick:l,className:"h-8 w-8","aria-label":"New Project",disabled:e.isLoading,children:p.jsx(wA,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"right",children:"New Project"})]})}),p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Chat",disabled:e.isLoading,children:p.jsx(Pf,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"right",children:"New Chat"})]})})]})};class KEe{constructor(){Me(this,"id","core-conversation-list");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"isLoading",!0);Me(this,"notifyComponentUpdate",null);Me(this,"setIsLoading",t=>{var n;this.isLoading!==t&&(this.isLoading=t,(n=this.notifyComponentUpdate)==null||n.call(this))});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.isLoading=ir.getState().isLoading||gi.getState().isLoading}updateLoadingState(){var n;const t=ir.getState().isLoading||gi.getState().isLoading;this.isLoading!==t&&(this.isLoading=t,(n=this.notifyComponentUpdate)==null||n.call(this))}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Module "${this.id}" already registered. Skipping.`);return}this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar",status:()=>this.isLoading?"loading":"ready",renderer:()=>yt.createElement(HEe,{module:this}),iconRenderer:()=>yt.createElement(GEe,{module:this}),show:()=>!0})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}const t8=({module:e})=>{const t=(n,r)=>{e.openSettingsModal(n,r)};return p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(Dk,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",children:"Settings"})]})})};var x_="Dialog",[Dq,G3e]=Ii(x_),[WEe,Ko]=Dq(x_),Oq=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,o=C.useRef(null),l=C.useRef(null),[c,d]=Bo({prop:r,defaultProp:s??!1,onChange:i,caller:x_});return p.jsx(WEe,{scope:t,triggerRef:o,contentRef:l,contentId:ei(),titleId:ei(),descriptionId:ei(),open:c,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(h=>!h),[d]),modal:a,children:n})};Oq.displayName=x_;var Pq="DialogTrigger",ZEe=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ko(Pq,n),i=In(t,s.triggerRef);return p.jsx(rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":YN(s.open),...r,ref:i,onClick:Ut(e.onClick,s.onOpenToggle)})});ZEe.displayName=Pq;var WN="DialogPortal",[YEe,Fq]=Dq(WN,{forceMount:void 0}),Lq=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=Ko(WN,t);return p.jsx(YEe,{scope:t,forceMount:n,children:C.Children.map(r,a=>p.jsx(ii,{present:n||i.open,children:p.jsx(sm,{asChild:!0,container:s,children:a})}))})};Lq.displayName=WN;var Kx="DialogOverlay",$q=C.forwardRef((e,t)=>{const n=Fq(Kx,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Ko(Kx,e.__scopeDialog);return i.modal?p.jsx(ii,{present:r||i.open,children:p.jsx(JEe,{...s,ref:t})}):null});$q.displayName=Kx;var XEe=Uu("DialogOverlay.RemoveScroll"),JEe=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ko(Kx,n);return p.jsx(yb,{as:XEe,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(rn.div,{"data-state":YN(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Df="DialogContent",Bq=C.forwardRef((e,t)=>{const n=Fq(Df,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Ko(Df,e.__scopeDialog);return p.jsx(ii,{present:r||i.open,children:i.modal?p.jsx(QEe,{...s,ref:t}):p.jsx(eCe,{...s,ref:t})})});Bq.displayName=Df;var QEe=C.forwardRef((e,t)=>{const n=Ko(Df,e.__scopeDialog),r=C.useRef(null),s=In(t,n.contentRef,r);return C.useEffect(()=>{const i=r.current;if(i)return d_(i)},[]),p.jsx(zq,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ut(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ut(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:Ut(e.onFocusOutside,i=>i.preventDefault())})}),eCe=C.forwardRef((e,t)=>{const n=Ko(Df,e.__scopeDialog),r=C.useRef(!1),s=C.useRef(!1);return p.jsx(zq,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),zq=C.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,o=Ko(Df,n),l=C.useRef(null),c=In(t,l);return c_(),p.jsxs(p.Fragment,{children:[p.jsx(gb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(tm,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":YN(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(tCe,{titleId:o.titleId}),p.jsx(rCe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),ZN="DialogTitle",Uq=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ko(ZN,n);return p.jsx(rn.h2,{id:s.titleId,...r,ref:t})});Uq.displayName=ZN;var qq="DialogDescription",Vq=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ko(qq,n);return p.jsx(rn.p,{id:s.descriptionId,...r,ref:t})});Vq.displayName=qq;var Hq="DialogClose",Gq=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Ko(Hq,n);return p.jsx(rn.button,{type:"button",...r,ref:t,onClick:Ut(e.onClick,()=>s.onOpenChange(!1))})});Gq.displayName=Hq;function YN(e){return e?"open":"closed"}var Kq="DialogTitleWarning",[K3e,Wq]=$ne(Kq,{contentName:Df,titleName:ZN,docsSlug:"dialog"}),tCe=({titleId:e})=>{const t=Wq(Kq),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},nCe="DialogDescriptionWarning",rCe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Wq(nCe).contentName}}.`;return C.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Zq=Oq,Yq=Lq,Xq=$q,Jq=Bq,sCe=Uq,iCe=Vq,Qq=Gq;function __({...e}){return p.jsx(Zq,{"data-slot":"dialog",...e})}function aCe({...e}){return p.jsx(Yq,{"data-slot":"dialog-portal",...e})}function oCe({...e}){return p.jsx(Qq,{"data-slot":"dialog-close",...e})}function lCe({className:e,...t}){return p.jsx(Xq,{"data-slot":"dialog-overlay",className:mt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function S_({className:e,children:t,...n}){return p.jsxs(aCe,{"data-slot":"dialog-portal",children:[p.jsx(lCe,{}),p.jsxs(Jq,{"data-slot":"dialog-content",className:mt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(Qq,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(qi,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function E_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:mt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function C_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:mt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function k_({className:e,...t}){return p.jsx(sCe,{"data-slot":"dialog-title",className:mt("text-lg leading-none font-semibold",e),...t})}function T_({className:e,...t}){return p.jsx(iCe,{"data-slot":"dialog-description",className:mt("text-muted-foreground text-sm",e),...t})}var wk="rovingFocusGroup.onEntryFocus",cCe={bubbles:!1,cancelable:!0},vb="RovingFocusGroup",[iA,eV,uCe]=l_(vb),[dCe,A_]=Ii(vb,[uCe]),[fCe,hCe]=dCe(vb),tV=C.forwardRef((e,t)=>p.jsx(iA.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(iA.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(pCe,{...e,ref:t})})}));tV.displayName=vb;var pCe=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=e,m=C.useRef(null),g=In(t,m),v=wm(i),[b,w]=Bo({prop:a,defaultProp:o??null,onChange:l,caller:vb}),[x,_]=C.useState(!1),E=Xs(c),k=eV(n),T=C.useRef(!1),[R,M]=C.useState(0);return C.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(wk,E),()=>I.removeEventListener(wk,E)},[E]),p.jsx(fCe,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:b,onItemFocus:C.useCallback(I=>w(I),[w]),onItemShiftTab:C.useCallback(()=>_(!0),[]),onFocusableItemAdd:C.useCallback(()=>M(I=>I+1),[]),onFocusableItemRemove:C.useCallback(()=>M(I=>I-1),[]),children:p.jsx(rn.div,{tabIndex:x||R===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Ut(e.onMouseDown,()=>{T.current=!0}),onFocus:Ut(e.onFocus,I=>{const O=!T.current;if(I.target===I.currentTarget&&O&&!x){const P=new CustomEvent(wk,cCe);if(I.currentTarget.dispatchEvent(P),!P.defaultPrevented){const U=k().filter(J=>J.focusable),j=U.find(J=>J.active),V=U.find(J=>J.id===b),re=[j,V,...U].filter(Boolean).map(J=>J.ref.current);sV(re,d)}}T.current=!1}),onBlur:Ut(e.onBlur,()=>_(!1))})})}),nV="RovingFocusGroupItem",rV=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...o}=e,l=ei(),c=i||l,d=hCe(nV,n),h=d.currentTabStopId===c,m=eV(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=d;return C.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),p.jsx(iA.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:p.jsx(rn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Ut(e.onMouseDown,w=>{r?d.onItemFocus(c):w.preventDefault()}),onFocus:Ut(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Ut(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=yCe(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let E=m().filter(k=>k.focusable).map(k=>k.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const k=E.indexOf(w.currentTarget);E=d.loop?bCe(E,k+1):E.slice(k+1)}setTimeout(()=>sV(E))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:b!=null}):a})})});rV.displayName=nV;var mCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gCe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function yCe(e,t,n){const r=gCe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return mCe[r]}function sV(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function bCe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var iV=tV,aV=rV,R_="Tabs",[vCe,W3e]=Ii(R_,[A_]),oV=A_(),[wCe,XN]=vCe(R_),lV=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=wm(o),[h,m]=Bo({prop:r,onChange:s,defaultProp:i??"",caller:R_});return p.jsx(wCe,{scope:n,baseId:ei(),value:h,onValueChange:m,orientation:a,dir:d,activationMode:l,children:p.jsx(rn.div,{dir:d,"data-orientation":a,...c,ref:t})})});lV.displayName=R_;var cV="TabsList",uV=C.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=XN(cV,n),a=oV(n);return p.jsx(iV,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(rn.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});uV.displayName=cV;var dV="TabsTrigger",fV=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,a=XN(dV,n),o=oV(n),l=mV(a.baseId,r),c=gV(a.baseId,r),d=r===a.value;return p.jsx(aV,{asChild:!0,...o,focusable:!s,active:d,children:p.jsx(rn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:t,onMouseDown:Ut(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(r):h.preventDefault()}),onKeyDown:Ut(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(r)}),onFocus:Ut(e.onFocus,()=>{const h=a.activationMode!=="manual";!d&&!s&&h&&a.onValueChange(r)})})})});fV.displayName=dV;var hV="TabsContent",pV=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=e,o=XN(hV,n),l=mV(o.baseId,r),c=gV(o.baseId,r),d=r===o.value,h=C.useRef(d);return C.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),p.jsx(ii,{present:s||d,children:({present:m})=>p.jsx(rn.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});pV.displayName=hV;function mV(e,t){return`${e}-trigger-${t}`}function gV(e,t){return`${e}-content-${t}`}var xCe=lV,_Ce=uV,SCe=fV,ECe=pV;function CCe({className:e,...t}){return p.jsx(xCe,{"data-slot":"tabs",className:mt("flex flex-col gap-2",e),...t})}function kCe({className:e,...t}){return p.jsx(_Ce,{"data-slot":"tabs-list",className:mt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function TCe({className:e,...t}){return p.jsx(SCe,{"data-slot":"tabs-trigger",className:mt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ACe({className:e,...t}){return p.jsx(ECe,{"data-slot":"tabs-content",className:mt("flex-1 outline-none",e),...t})}const Kc=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:s,listClassName:i,contentContainerClassName:a,scrollable:o})=>{var g;const[l,c]=C.useState(n??t??((g=e[0])==null?void 0:g.value));C.useEffect(()=>{n!==void 0&&n!==l&&c(n)},[n,l]);const d=v=>{console.log("handleValueChange",v),c(v),r&&r(v)},h=mt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),m=({children:v})=>{const b=mt("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",a);return o?p.jsx(Gi,{className:b,children:v}):p.jsx("div",{className:b,children:v})};return p.jsxs(CCe,{value:l,onValueChange:d,defaultValue:t,className:mt("flex flex-col h-full",s),children:[p.jsx(kCe,{className:mt("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>p.jsx(TCe,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),p.jsx(m,{children:e.map(v=>p.jsx(ACe,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})},yV=C.memo(({isOpen:e,onClose:t,initialTab:n})=>{const{modSettingsTabs:r}=ld(En(d=>({modSettingsTabs:d.modSettingsTabs||[]}))),s=C.useMemo(()=>[...r.map(m=>{const g=m.component;return{value:m.id,label:m.title,content:p.jsx(g,{}),order:m.order??999}})].sort((m,g)=>(m.order??999)-(g.order??999)),[r]),i=C.useCallback(()=>s.length>0?s[0].value:"general",[s]),[a,o]=C.useState(i());C.useEffect(()=>{if(e){let d=i();n&&s.some(h=>h.value===n)?d=n:n&&(console.warn(`[SettingsModal] Initial tab "${n}" not found. Defaulting to "${d}".`),ze.error(`Settings tab "${n}" not found. Opening default tab.`)),o(d)}},[e,n,s,i]);const l=d=>{d||t()},c=d=>{o(d)};return p.jsx(__,{open:e,onOpenChange:l,children:p.jsxs(S_,{className:mt("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(E_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx(k_,{children:"Settings"}),p.jsx(T_,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),s.length>0?p.jsx(Kc,{tabs:s,initialValue:a,onValueChange:c,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0},a):p.jsx("div",{className:"flex-grow flex items-center justify-center text-muted-foreground p-4",children:"No settings tabs available or still loading. Check console for module registration errors."}),p.jsx(C_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(At,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});yV.displayName="SettingsModalComponent";const RCe=yV;class NCe{constructor(){Me(this,"id","core-settings-trigger");Me(this,"modalId","settingsModal");Me(this,"unregisterChatControlCallback",null);Me(this,"unregisterModalProviderCallback",null);Me(this,"modApiRef",null);Me(this,"openSettingsModal",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(ar.openModalRequest,{modalId:this.modalId,initialTab:t||"general",initialSubTab:n})});Me(this,"closeSettingsModal",()=>{var t;(t=this.modApiRef)==null||t.emit(ar.closeModalRequest,{modalId:this.modalId})})}async initialize(t){this.modApiRef=t}register(t){if(this.modApiRef=t,this.unregisterChatControlCallback&&this.unregisterModalProviderCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterChatControlCallback||(this.unregisterChatControlCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:()=>yt.createElement(t8,{module:this}),iconRenderer:()=>yt.createElement(t8,{module:this}),show:()=>!0})),this.unregisterModalProviderCallback||(this.unregisterModalProviderCallback=t.registerModalProvider(this.modalId,n=>yt.createElement(RCe,{isOpen:n.isOpen,onClose:n.onClose})))}destroy(){this.unregisterChatControlCallback&&(this.unregisterChatControlCallback(),this.unregisterChatControlCallback=null),this.unregisterModalProviderCallback&&(this.unregisterModalProviderCallback(),this.unregisterModalProviderCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const ICe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getIsSidebarCollapsed();return p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",onClick:()=>e.toggleSidebar(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(kY,{className:"h-4 w-4"}):p.jsx(EY,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};class jCe{constructor(){Me(this,"id","core-sidebar-toggle");Me(this,"unregisterCallback",null);Me(this,"notifyComponentUpdate",null);Me(this,"modApiRef",null);Me(this,"getIsSidebarCollapsed",()=>id.getState().isSidebarCollapsed);Me(this,"toggleSidebar",t=>{var s,i;const n=id.getState().isSidebarCollapsed,r=t??!n;n!==r&&((s=this.modApiRef)==null||s.emit(ar.toggleSidebarRequest,{isCollapsed:r}),(i=this.notifyComponentUpdate)==null||i.call(this))});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>yt.createElement(ICe,{module:this});this.unregisterCallback=t.registerChatControl({id:this.id,panel:"sidebar-footer",status:()=>"ready",renderer:n,iconRenderer:n,show:()=>!0})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}var bV=["PageUp","PageDown"],vV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Cm="Slider",[aA,MCe,DCe]=l_(Cm),[xV,Z3e]=Ii(Cm,[DCe]),[OCe,N_]=xV(Cm),_V=C.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...b}=e,w=C.useRef(new Set),x=C.useRef(0),E=a==="horizontal"?PCe:FCe,[k=[],T]=Bo({prop:d,defaultProp:c,onChange:U=>{var V;(V=[...w.current][x.current])==null||V.focus(),h(U)}}),R=C.useRef(k);function M(U){const j=UCe(k,U);P(U,j)}function I(U){P(U,x.current)}function O(){const U=R.current[x.current];k[x.current]!==U&&m(k)}function P(U,j,{commit:V}={commit:!1}){const $=GCe(i),re=KCe(Math.round((U-r)/i)*i+r,$),J=ay(re,[r,s]);T((te=[])=>{const X=BCe(te,J,j);if(HCe(X,l*i)){x.current=X.indexOf(J);const ie=String(X)!==String(te);return ie&&V&&m(X),ie?X:te}else return te})}return p.jsx(OCe,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:k,orientation:a,form:v,children:p.jsx(aA.Provider,{scope:e.__scopeSlider,children:p.jsx(aA.Slot,{scope:e.__scopeSlider,children:p.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:Ut(b.onPointerDown,()=>{o||(R.current=k)}),min:r,max:s,inverted:g,onSlideStart:o?void 0:M,onSlideMove:o?void 0:I,onSlideEnd:o?void 0:O,onHomeKeyDown:()=>!o&&P(r,0,{commit:!0}),onEndKeyDown:()=>!o&&P(s,k.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:j})=>{if(!o){const re=bV.includes(U.key)||U.shiftKey&&vV.includes(U.key)?10:1,J=x.current,te=k[J],X=i*re*j;P(te+X,J,{commit:!0})}}})})})})});_V.displayName=Cm;var[SV,EV]=xV(Cm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),PCe=C.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,[h,m]=C.useState(null),g=In(t,E=>m(E)),v=C.useRef(void 0),b=wm(s),w=b==="ltr",x=w&&!i||!w&&i;function _(E){const k=v.current||h.getBoundingClientRect(),T=[0,k.width],M=JN(T,x?[n,r]:[r,n]);return v.current=k,M(E-k.left)}return p.jsx(SV,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:p.jsx(CV,{dir:b,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const k=_(E.clientX);a==null||a(k)},onSlideMove:E=>{const k=_(E.clientX);o==null||o(k)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const T=wV[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:T?-1:1})}})})}),FCe=C.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=e,d=C.useRef(null),h=In(t,d),m=C.useRef(void 0),g=!s;function v(b){const w=m.current||d.current.getBoundingClientRect(),x=[0,w.height],E=JN(x,g?[r,n]:[n,r]);return m.current=w,E(b-w.top)}return p.jsx(SV,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:p.jsx(CV,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const w=v(b.clientY);i==null||i(w)},onSlideMove:b=>{const w=v(b.clientY);a==null||a(w)},onSlideEnd:()=>{m.current=void 0,o==null||o()},onStepKeyDown:b=>{const x=wV[g?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),CV=C.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=e,d=N_(Cm,n);return p.jsx(rn.span,{...c,ref:t,onKeyDown:Ut(e.onKeyDown,h=>{h.key==="Home"?(a(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):bV.concat(vV).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:Ut(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:Ut(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:Ut(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),kV="SliderTrack",TV=C.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=N_(kV,n);return p.jsx(rn.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});TV.displayName=kV;var oA="SliderRange",AV=C.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=N_(oA,n),i=EV(oA,n),a=C.useRef(null),o=In(t,a),l=s.values.length,c=s.values.map(m=>IV(m,s.min,s.max)),d=l>1?Math.min(...c):0,h=100-Math.max(...c);return p.jsx(rn.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});AV.displayName=oA;var lA="SliderThumb",RV=C.forwardRef((e,t)=>{const n=MCe(e.__scopeSlider),[r,s]=C.useState(null),i=In(t,o=>s(o)),a=C.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(LCe,{...e,ref:i,index:a})}),LCe=C.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...i}=e,a=N_(lA,n),o=EV(lA,n),[l,c]=C.useState(null),d=In(t,_=>c(_)),h=l?a.form||!!l.closest("form"):!0,m=v1(l),g=a.values[r],v=g===void 0?0:IV(g,a.min,a.max),b=zCe(r,a.values.length),w=m==null?void 0:m[o.size],x=w?qCe(w,v,o.direction):0;return C.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${x}px)`},children:[p.jsx(aA.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(rn.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:Ut(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),h&&p.jsx(NV,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:g},r)]})});RV.displayName=lA;var $Ce="RadioBubbleInput",NV=C.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=C.useRef(null),i=In(s,r),a=u_(t);return C.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[a,t]),p.jsx(rn.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});NV.displayName=$Ce;function BCe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,i)=>s-i)}function IV(e,t,n){const i=100/(n-t)*(e-t);return ay(i,[0,100])}function zCe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function UCe(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function qCe(e,t,n){const r=e/2,i=JN([0,50],[0,r]);return(r-i(t)*n)*n}function VCe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function HCe(e,t){if(t>0){const n=VCe(e);return Math.min(...n)>=t}return!0}function JN(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function GCe(e){return(String(e).split(".")[1]||"").length}function KCe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var WCe=_V,ZCe=TV,YCe=AV,XCe=RV;function zi({className:e,defaultValue:t,value:n,min:r=0,max:s=100,...i}){const a=C.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,s],[n,t,r,s]);return p.jsxs(WCe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:s,className:mt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[p.jsx(ZCe,{"data-slot":"slider-track",className:mt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(YCe,{"data-slot":"slider-range",className:mt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(o,l)=>p.jsx(XCe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}const JCe=({module:e,className:t})=>{const[,n]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>n({})),()=>e.setNotifyCallback(null)),[e]);const r=e.temperature,s=e.topP,i=e.maxTokens,a=e.topK,o=e.presencePenalty,l=e.frequencyPenalty,c=e.defaultTemperature,d=e.defaultTopP,h=e.defaultMaxTokens,m=e.defaultTopK,g=e.defaultPresencePenalty,v=e.defaultFrequencyPenalty,b=e.supportedParams,[w,x]=C.useState(r??c??.7),[_,E]=C.useState(s??d??1),[k,T]=C.useState(o??g??0),[R,M]=C.useState(l??v??0);C.useEffect(()=>{x(r??c??.7)},[r,c]),C.useEffect(()=>{E(s??d??1)},[s,d]),C.useEffect(()=>{T(o??g??0)},[o,g]),C.useEffect(()=>M(l??v??0),[l,v]);const I=C.useCallback((j,V)=>{const $=V.target.value,re=$===""?null:parseInt($,10);($===""||!isNaN(re)&&re!==null)&&j(re)},[]),O=C.useCallback((j,V)=>{j(V[0])},[]),P=C.useCallback(j=>{j(null)},[]),U=c!==void 0||d!==void 0||h!==void 0||m!==void 0||g!==void 0||v!==void 0;return p.jsxs("div",{className:mt("space-y-4 p-4",t),children:[b.has("temperature")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",w.toFixed(2),")"]}),p.jsx(zi,{id:"param-temperature",min:0,max:1,step:.01,value:[w],onValueChange:j=>x(j[0]),onValueCommit:j=>O(e.setTemperature,j)}),U&&p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>P(e.setTemperature),disabled:r===null,children:["Use Default (",(c==null?void 0:c.toFixed(2))??"N/A",")"]})]}),b.has("top_p")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(_??0).toFixed(2),")"]}),p.jsx(zi,{id:"param-top-p",min:0,max:1,step:.01,value:[_??1],onValueChange:j=>E(j[0]),onValueCommit:j=>O(e.setTopP,j)}),U&&p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>P(e.setTopP),disabled:s===null,children:["Use Default (",(d==null?void 0:d.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[b.has("max_tokens")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(gn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${h??"None"}`,value:i??"",onChange:j=>I(e.setMaxTokens,j),min:"1",className:"h-8 text-xs"}),U&&p.jsx(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>P(e.setMaxTokens),disabled:i===null,children:"Use Default"})]}),b.has("top_k")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),p.jsx(gn,{id:"param-top-k",type:"number",placeholder:`Default: ${m??"None"}`,value:a??"",onChange:j=>I(e.setTopK,j),min:"1",className:"h-8 text-xs"}),U&&p.jsx(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>P(e.setTopK),disabled:a===null,children:"Use Default"})]})]}),b.has("presence_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(k??0).toFixed(2),")"]}),p.jsx(zi,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[k??0],onValueChange:j=>T(j[0]),onValueCommit:j=>O(e.setPresencePenalty,j)}),U&&p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>P(e.setPresencePenalty),disabled:o===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),b.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(R??0).toFixed(2),")"]}),p.jsx(zi,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[R??0],onValueChange:j=>M(j[0]),onValueCommit:j=>O(e.setFrequencyPenalty,j)}),U&&p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>P(e.setFrequencyPenalty),disabled:l===null,children:["Use Default (",(v==null?void 0:v.toFixed(2))??"N/A",")"]})]})]})},QCe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getIsStreaming();return e.getIsVisible()?p.jsxs(io,{children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(ao,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:n,"aria-label":"Adjust Advanced Parameters",children:p.jsx(qY,{className:"h-4 w-4"})})})}),p.jsx(Wn,{side:"top",children:"Advanced Parameters"})]})}),p.jsx(oo,{className:"w-auto p-0",align:"start",children:p.jsx(JCe,{module:e})})]}):null};class eke{constructor(){Me(this,"id","core-parameters");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"temperature",null);Me(this,"topP",null);Me(this,"maxTokens",null);Me(this,"topK",null);Me(this,"presencePenalty",null);Me(this,"frequencyPenalty",null);Me(this,"defaultTemperature",null);Me(this,"defaultTopP",null);Me(this,"defaultMaxTokens",null);Me(this,"defaultTopK",null);Me(this,"defaultPresencePenalty",null);Me(this,"defaultFrequencyPenalty",null);Me(this,"isStreaming",!1);Me(this,"isVisible",!0);Me(this,"supportedParams",new Set);Me(this,"notifyComponentUpdate",null);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"getIsVisible",()=>this.isVisible);Me(this,"setTemperature",t=>{var n,r;this.temperature=t,(n=this.modApiRef)==null||n.emit(Nn.setTemperatureRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setTopP",t=>{var n,r;this.topP=t,(n=this.modApiRef)==null||n.emit(Nn.setTopPRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setMaxTokens",t=>{var n,r;this.maxTokens=t,(n=this.modApiRef)==null||n.emit(Nn.setMaxTokensRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setTopK",t=>{var n,r;this.topK=t,(n=this.modApiRef)==null||n.emit(Nn.setTopKRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setPresencePenalty",t=>{var n,r;this.presencePenalty=t,(n=this.modApiRef)==null||n.emit(Nn.setPresencePenaltyRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setFrequencyPenalty",t=>{var n,r;this.frequencyPenalty=t,(n=this.modApiRef)==null||n.emit(Nn.setFrequencyPenaltyRequest,{value:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState(),this.updateSupportedParams();const n=t.on(zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(Un.selectedModelChanged,()=>{var a;this.updateSupportedParams(),this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(en.enableAdvancedSettingsChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(Nn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;let c=!1;"temperature"in l&&this.temperature!==l.temperature&&(this.temperature=l.temperature??null,c=!0),"topP"in l&&this.topP!==l.topP&&(this.topP=l.topP??null,c=!0),"maxTokens"in l&&this.maxTokens!==l.maxTokens&&(this.maxTokens=l.maxTokens??null,c=!0),"topK"in l&&this.topK!==l.topK&&(this.topK=l.topK??null,c=!0),"presencePenalty"in l&&this.presencePenalty!==l.presencePenalty&&(this.presencePenalty=l.presencePenalty??null,c=!0),"frequencyPenalty"in l&&this.frequencyPenalty!==l.frequencyPenalty&&(this.frequencyPenalty=l.frequencyPenalty??null,c=!0),c&&((o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,s,i)}loadInitialState(){const t=ur.getState(),n=jl.getState();this.isStreaming=Hn.getState().status==="streaming",this.temperature=n.temperature,this.topP=n.topP,this.maxTokens=n.maxTokens,this.topK=n.topK,this.presencePenalty=n.presencePenalty,this.frequencyPenalty=n.frequencyPenalty,this.defaultTemperature=t.temperature,this.defaultTopP=t.topP,this.defaultMaxTokens=t.maxTokens,this.defaultTopK=t.topK,this.defaultPresencePenalty=t.presencePenalty,this.defaultFrequencyPenalty=t.frequencyPenalty,this.updateVisibility()}updateSupportedParams(){var o;const t=gr.getState();if(!t.selectedModelId){this.supportedParams=new Set;return}const{providerId:n,modelId:r}=Mo(t.selectedModelId);if(!n||!r){this.supportedParams=new Set;return}const s=t.dbProviderConfigs.find(l=>l.id===n);if(!s){this.supportedParams=new Set;return}const i=t.dbApiKeys.find(l=>l.id===s.apiKeyId),a=tL(s,r,i==null?void 0:i.value);this.supportedParams=new Set(((o=a==null?void 0:a.metadata)==null?void 0:o.supported_parameters)??[])}updateVisibility(){const r=ur.getState().enableAdvancedSettings&&["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"].some(s=>this.supportedParams.has(s));this.isVisible!==r&&(this.isVisible=r)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>yt.createElement(QCe,{module:this}),getParameters:()=>{const n={},r=(s,i)=>{i!==null&&(n[s]=i)};return r("temperature",this.temperature),r("top_p",this.topP),r("max_tokens",this.maxTokens),r("top_k",this.topK),r("presence_penalty",this.presencePenalty),r("frequency_penalty",this.frequencyPenalty),Object.keys(n).length>0?n:void 0}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const tke=({module:e})=>{const t=C.useRef(null),[,n]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>n({})),()=>e.setNotifyCallback(null)),[e]);const r=e.getIsStreaming(),s=e.getModelSupportsNonText(),i=C.useCallback(async l=>{const c=l.target.files;if(c){for(const d of Array.from(c))try{let h={};const m=e.isLikelyTextFile(d.name,d.type),g=d.type.startsWith("image/");if(m)h.contentText=await d.text();else if(g&&s){const v=new FileReader,b=new Promise((x,_)=>{v.onload=()=>x(v.result),v.onerror=E=>_(E)});v.readAsDataURL(d);const w=await b;w&&w.includes(",")&&(h.contentBase64=w.split(",")[1])}e.onFileAdd({source:"direct",name:d.name,type:d.type||"application/octet-stream",size:d.size,...h})}catch(h){console.error(`Error processing file ${d.name}:`,h),ze.error(`Failed to process file "${d.name}": ${h instanceof Error?h.message:String(h)}`)}l.target&&(l.target.value="")}},[e,s]),a=()=>{var l;(l=t.current)==null||l.click()},o=s?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:t,onChange:i,multiple:!0,className:"hidden",disabled:r}),p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{type:"button",variant:"ghost",size:"icon",onClick:a,disabled:r,className:"h-8 w-8","aria-label":o,children:p.jsx(EA,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",children:o})]})})]})},nke=({module:e})=>{const[,t]=C.useState({}),n=e.getAttachedFiles(),r=e.getIsStreaming();return C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]),n.length===0?null:p.jsx("div",{className:mt("max-h-40 overflow-y-auto pr-1","flex flex-wrap gap-1"),children:n.map(s=>p.jsx(G$,{fileMeta:s,onRemove:e.onFileRemove,isReadOnly:r},s.id))})},jV=20,rke=jV*1024*1024;class ske{constructor(){Me(this,"id","core-file-attachment");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"isStreaming",!1);Me(this,"modelSupportsNonText",!0);Me(this,"attachedFiles",[]);Me(this,"notifyComponentUpdate",null);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"getModelSupportsNonText",()=>this.modelSupportsNonText);Me(this,"getAttachedFiles",()=>this.attachedFiles);Me(this,"isLikelyTextFile",(t,n)=>v0(t,n));Me(this,"onFileAdd",t=>{var r;if(t.size>rke){ze.error(`File "${t.name}" exceeds the ${jV}MB limit.`);return}if(!v0(t.name,t.type)&&!this.modelSupportsNonText){ze.warning(`File "${t.name}" (${t.type}) cannot be uploaded. The current model only supports text input.`);return}(r=this.modApiRef)==null||r.emit(To.addAttachedFileRequest,t)});Me(this,"onFileRemove",t=>{var n;(n=this.modApiRef)==null||n.emit(To.removeAttachedFileRequest,{attachmentId:t})});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var i;this.modApiRef=t,this.isStreaming=Hn.getState().status==="streaming",this.attachedFiles=Mc.getState().attachedFilesMetadata,this.updateModelSupport(),(i=this.notifyComponentUpdate)==null||i.call(this);const n=t.on(zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(Un.selectedModelChanged,()=>{var a;this.updateModelSupport(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(To.attachedFilesChanged,a=>{var o;typeof a=="object"&&a&&"files"in a&&JSON.stringify(this.attachedFiles)!==JSON.stringify(a.files)&&(this.attachedFiles=a.files,(o=this.notifyComponentUpdate)==null||o.call(this))});this.eventUnsubscribers.push(n,r,s)}updateModelSupport(){var i,a;const{getSelectedModel:t}=gr.getState(),n=t(),r=(a=(i=n==null?void 0:n.metadata)==null?void 0:i.architecture)==null?void 0:a.input_modalities,s=!r||r.some(o=>o!=="text");this.modelSupportsNonText!==s&&(this.modelSupportsNonText=s)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>yt.createElement(tke,{module:this}),renderer:()=>yt.createElement(nke,{module:this})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const ike=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>{if(e&&typeof e.setNotifyTriggerUpdate=="function")return e.setNotifyTriggerUpdate(()=>t({})),()=>{e&&typeof e.setNotifyTriggerUpdate=="function"&&e.setNotifyTriggerUpdate(null)}},[e]);const n=e&&typeof e.getIsVfsModalOpen=="function"?e.getIsVfsModalOpen():!1,r=e&&typeof e.getSelectedFileIdsCount=="function"?e.getSelectedFileIdsCount():0,s=e&&typeof e.getEnableVfs=="function"?e.getEnableVfs():!1,i=Mc.getState().addAttachedFile,a=()=>{const o=Ls.getState().selectedFileIds;if(o.size===0){ze.info("No files selected in VFS to attach.");return}let l=0;const c=e.getVfsNodes();o.forEach(d=>{const h=c[d];h&&h.type==="file"&&(i({source:"vfs",name:h.name,type:h.mimeType||"application/octet-stream",size:h.size,path:h.path}),l++)}),l>0?(ze.success(`Attached ${l} file(s) from VFS to the next prompt.`),typeof e.clearVfsSelection=="function"&&e.clearVfsSelection(),e.toggleVfsModal):ze.warning("No valid files were selected to attach.")};return s?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:mt("h-8 w-8",n&&"bg-muted text-primary"),onClick:()=>e&&typeof e.toggleVfsModal=="function"&&e.toggleVfsModal(),"aria-label":"Toggle Virtual File System",children:p.jsx(_A,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",children:"Virtual Filesystem"})]})}),r>0&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsxs(At,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:a,"aria-label":`Attach ${r} selected VFS file(s)`,children:[p.jsx(EA,{className:"h-4 w-4 mr-1"}),"Attach (",r,")"]})}),p.jsx(Wn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null};function Jf({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:mt("w-full caption-bottom text-sm",e),...t})})}function km({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:mt("[&_tr]:border-b",e),...t})}function Qf({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:mt("[&_tr:last-child]:border-0",e),...t})}function ts({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:mt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Lr({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:mt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function On({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:mt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function ake({className:e,...t}){return p.jsx("caption",{"data-slot":"table-caption",className:mt("text-muted-foreground mt-4 text-sm",e),...t})}const MV=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:s,isOperationLoading:i,isMobile:a=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return a?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(xf,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(gn,{ref:s,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:i}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(At,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(ni,{className:"h-4 w-4"})}),p.jsx(At,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(qi,{className:"h-4 w-4"})})]})]}):p.jsxs(ts,{className:"bg-muted/30",children:[p.jsx(On,{className:"px-2 py-1"}),p.jsx(On,{className:"px-2 py-1",children:p.jsx(xf,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(On,{className:"py-1 px-2",colSpan:3,children:p.jsx(gn,{ref:s,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),p.jsx(On,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(ni,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",children:"Create (Enter)"})]})}),p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(qi,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var I_="Checkbox",[oke,Y3e]=Ii(I_),[lke,cke]=oke(I_),DV=C.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:o,value:l="on",onCheckedChange:c,form:d,...h}=e,[m,g]=C.useState(null),v=In(t,k=>g(k)),b=C.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,_]=Bo({prop:s,defaultProp:i??!1,onChange:c,caller:I_}),E=C.useRef(x);return C.useEffect(()=>{const k=m==null?void 0:m.form;if(k){const T=()=>_(E.current);return k.addEventListener("reset",T),()=>k.removeEventListener("reset",T)}},[m,_]),p.jsxs(lke,{scope:n,state:x,disabled:o,children:[p.jsx(rn.button,{type:"button",role:"checkbox","aria-checked":zu(x)?"mixed":x,"aria-required":a,"data-state":LV(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onKeyDown:Ut(e.onKeyDown,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:Ut(e.onClick,k=>{_(T=>zu(T)?!0:!T),w&&(b.current=k.isPropagationStopped(),b.current||k.stopPropagation())})}),w&&p.jsx(FV,{control:m,bubbles:!b.current,name:r,value:l,checked:x,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:zu(i)?!1:i})]})});DV.displayName=I_;var OV="CheckboxIndicator",PV=C.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,i=cke(OV,n);return p.jsx(ii,{present:r||zu(i.state)||i.state===!0,children:p.jsx(rn.span,{"data-state":LV(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});PV.displayName=OV;var uke="CheckboxBubbleInput",FV=C.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:s,...i},a)=>{const o=C.useRef(null),l=In(o,a),c=u_(n),d=v1(t);C.useEffect(()=>{const m=o.current;if(!m)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&b){const w=new Event("click",{bubbles:r});m.indeterminate=zu(n),b.call(m,zu(n)?!1:n),m.dispatchEvent(w)}},[c,n,r]);const h=C.useRef(zu(n)?!1:n);return p.jsx(rn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});FV.displayName=uke;function zu(e){return e==="indeterminate"}function LV(e){return zu(e)?"indeterminate":e?"checked":"unchecked"}var dke=DV,fke=PV;function Ol({className:e,...t}){return p.jsx(dke,{"data-slot":"checkbox",className:mt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(fke,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(ni,{className:"size-3.5"})})})}var cA=["Enter"," "],hke=["ArrowDown","PageUp","Home"],$V=["ArrowUp","PageDown","End"],pke=[...hke,...$V],mke={ltr:[...cA,"ArrowRight"],rtl:[...cA,"ArrowLeft"]},gke={ltr:["ArrowLeft"],rtl:["ArrowRight"]},wb="Menu",[Ey,yke,bke]=l_(wb),[eh,j_]=Ii(wb,[bke,fd,A_]),M_=fd(),BV=A_(),[vke,th]=eh(wb),[wke,xb]=eh(wb),zV=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=e,o=M_(t),[l,c]=C.useState(null),d=C.useRef(!1),h=Xs(i),m=wm(s);return C.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),p.jsx(w1,{...o,children:p.jsx(vke,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:c,children:p.jsx(wke,{scope:t,onClose:C.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:a,children:r})})})};zV.displayName=wb;var xke="MenuAnchor",QN=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=M_(n);return p.jsx(Dy,{...s,...r,ref:t})});QN.displayName=xke;var eI="MenuPortal",[_ke,UV]=eh(eI,{forceMount:void 0}),qV=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,i=th(eI,t);return p.jsx(_ke,{scope:t,forceMount:n,children:p.jsx(ii,{present:n||i.open,children:p.jsx(sm,{asChild:!0,container:s,children:r})})})};qV.displayName=eI;var ro="MenuContent",[Ske,tI]=eh(ro),VV=C.forwardRef((e,t)=>{const n=UV(ro,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=th(ro,e.__scopeMenu),a=xb(ro,e.__scopeMenu);return p.jsx(Ey.Provider,{scope:e.__scopeMenu,children:p.jsx(ii,{present:r||i.open,children:p.jsx(Ey.Slot,{scope:e.__scopeMenu,children:a.modal?p.jsx(Eke,{...s,ref:t}):p.jsx(Cke,{...s,ref:t})})})})}),Eke=C.forwardRef((e,t)=>{const n=th(ro,e.__scopeMenu),r=C.useRef(null),s=In(t,r);return C.useEffect(()=>{const i=r.current;if(i)return d_(i)},[]),p.jsx(nI,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ut(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Cke=C.forwardRef((e,t)=>{const n=th(ro,e.__scopeMenu);return p.jsx(nI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),kke=Uu("MenuContent.ScrollLock"),nI=C.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...b}=e,w=th(ro,n),x=xb(ro,n),_=M_(n),E=BV(n),k=yke(n),[T,R]=C.useState(null),M=C.useRef(null),I=In(t,M,w.onContentChange),O=C.useRef(0),P=C.useRef(""),U=C.useRef(0),j=C.useRef(null),V=C.useRef("right"),$=C.useRef(0),re=v?yb:C.Fragment,J=v?{as:kke,allowPinchZoom:!0}:void 0,te=ie=>{var De,Re;const Z=P.current+ie,ee=k().filter(xe=>!xe.disabled),Q=document.activeElement,he=(De=ee.find(xe=>xe.ref.current===Q))==null?void 0:De.textValue,Se=ee.map(xe=>xe.textValue),ce=Lke(Se,Z,he),je=(Re=ee.find(xe=>xe.textValue===ce))==null?void 0:Re.ref.current;(function xe(Fe){P.current=Fe,window.clearTimeout(O.current),Fe!==""&&(O.current=window.setTimeout(()=>xe(""),1e3))})(Z),je&&setTimeout(()=>je.focus())};C.useEffect(()=>()=>window.clearTimeout(O.current),[]),c_();const X=C.useCallback(ie=>{var ee,Q;return V.current===((ee=j.current)==null?void 0:ee.side)&&Bke(ie,(Q=j.current)==null?void 0:Q.area)},[]);return p.jsx(Ske,{scope:n,searchRef:P,onItemEnter:C.useCallback(ie=>{X(ie)&&ie.preventDefault()},[X]),onItemLeave:C.useCallback(ie=>{var Z;X(ie)||((Z=M.current)==null||Z.focus(),R(null))},[X]),onTriggerLeave:C.useCallback(ie=>{X(ie)&&ie.preventDefault()},[X]),pointerGraceTimerRef:U,onPointerGraceIntentChange:C.useCallback(ie=>{j.current=ie},[]),children:p.jsx(re,{...J,children:p.jsx(gb,{asChild:!0,trapped:s,onMountAutoFocus:Ut(i,ie=>{var Z;ie.preventDefault(),(Z=M.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:p.jsx(tm,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:p.jsx(iV,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:R,onEntryFocus:Ut(l,ie=>{x.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(x1,{role:"menu","aria-orientation":"vertical","data-state":aH(w.open),"data-radix-menu-content":"",dir:x.dir,..._,...b,ref:I,style:{outline:"none",...b.style},onKeyDown:Ut(b.onKeyDown,ie=>{const ee=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,Q=ie.ctrlKey||ie.altKey||ie.metaKey,he=ie.key.length===1;ee&&(ie.key==="Tab"&&ie.preventDefault(),!Q&&he&&te(ie.key));const Se=M.current;if(ie.target!==Se||!pke.includes(ie.key))return;ie.preventDefault();const je=k().filter(De=>!De.disabled).map(De=>De.ref.current);$V.includes(ie.key)&&je.reverse(),Pke(je)}),onBlur:Ut(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(O.current),P.current="")}),onPointerMove:Ut(e.onPointerMove,Cy(ie=>{const Z=ie.target,ee=$.current!==ie.clientX;if(ie.currentTarget.contains(Z)&&ee){const Q=ie.clientX>$.current?"right":"left";V.current=Q,$.current=ie.clientX}}))})})})})})})});VV.displayName=ro;var Tke="MenuGroup",rI=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{role:"group",...r,ref:t})});rI.displayName=Tke;var Ake="MenuLabel",HV=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{...r,ref:t})});HV.displayName=Ake;var Wx="MenuItem",n8="menu.itemSelect",D_=C.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,i=C.useRef(null),a=xb(Wx,e.__scopeMenu),o=tI(Wx,e.__scopeMenu),l=In(t,i),c=C.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(n8,{bubbles:!0,cancelable:!0});h.addEventListener(n8,g=>r==null?void 0:r(g),{once:!0}),rL(h,m),m.defaultPrevented?c.current=!1:a.onClose()}};return p.jsx(GV,{...s,ref:l,disabled:n,onClick:Ut(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),c.current=!0},onPointerUp:Ut(e.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Ut(e.onKeyDown,h=>{const m=o.searchRef.current!=="";n||m&&h.key===" "||cA.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});D_.displayName=Wx;var GV=C.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=e,a=tI(Wx,n),o=BV(n),l=C.useRef(null),c=In(t,l),[d,h]=C.useState(!1),[m,g]=C.useState("");return C.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),p.jsx(Ey.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:p.jsx(aV,{asChild:!0,...o,focusable:!r,children:p.jsx(rn.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ut(e.onPointerMove,Cy(v=>{r?a.onItemLeave(v):(a.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ut(e.onPointerLeave,Cy(v=>a.onItemLeave(v))),onFocus:Ut(e.onFocus,()=>h(!0)),onBlur:Ut(e.onBlur,()=>h(!1))})})})}),Rke="MenuCheckboxItem",KV=C.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return p.jsx(JV,{scope:e.__scopeMenu,checked:n,children:p.jsx(D_,{role:"menuitemcheckbox","aria-checked":Zx(n)?"mixed":n,...s,ref:t,"data-state":iI(n),onSelect:Ut(s.onSelect,()=>r==null?void 0:r(Zx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});KV.displayName=Rke;var WV="MenuRadioGroup",[Nke,Ike]=eh(WV,{value:void 0,onValueChange:()=>{}}),ZV=C.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,i=Xs(r);return p.jsx(Nke,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx(rI,{...s,ref:t})})});ZV.displayName=WV;var YV="MenuRadioItem",XV=C.forwardRef((e,t)=>{const{value:n,...r}=e,s=Ike(YV,e.__scopeMenu),i=n===s.value;return p.jsx(JV,{scope:e.__scopeMenu,checked:i,children:p.jsx(D_,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":iI(i),onSelect:Ut(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});XV.displayName=YV;var sI="MenuItemIndicator",[JV,jke]=eh(sI,{checked:!1}),QV=C.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,i=jke(sI,n);return p.jsx(ii,{present:r||Zx(i.checked)||i.checked===!0,children:p.jsx(rn.span,{...s,ref:t,"data-state":iI(i.checked)})})});QV.displayName=sI;var Mke="MenuSeparator",eH=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});eH.displayName=Mke;var Dke="MenuArrow",tH=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=M_(n);return p.jsx(_1,{...s,...r,ref:t})});tH.displayName=Dke;var Oke="MenuSub",[X3e,nH]=eh(Oke),Qg="MenuSubTrigger",rH=C.forwardRef((e,t)=>{const n=th(Qg,e.__scopeMenu),r=xb(Qg,e.__scopeMenu),s=nH(Qg,e.__scopeMenu),i=tI(Qg,e.__scopeMenu),a=C.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,c={__scopeMenu:e.__scopeMenu},d=C.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return C.useEffect(()=>d,[d]),C.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),p.jsx(QN,{asChild:!0,...c,children:p.jsx(GV,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":aH(n.open),...e,ref:Rc(t,s.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ut(e.onPointerMove,Cy(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Ut(e.onPointerLeave,Cy(h=>{var g,v;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const b=(v=n.content)==null?void 0:v.dataset.side,w=b==="right",x=w?-5:5,_=m[w?"left":"right"],E=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:_,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:_,y:m.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ut(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||mke[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});rH.displayName=Qg;var sH="MenuSubContent",iH=C.forwardRef((e,t)=>{const n=UV(ro,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,i=th(ro,e.__scopeMenu),a=xb(ro,e.__scopeMenu),o=nH(sH,e.__scopeMenu),l=C.useRef(null),c=In(t,l);return p.jsx(Ey.Provider,{scope:e.__scopeMenu,children:p.jsx(ii,{present:r||i.open,children:p.jsx(Ey.Slot,{scope:e.__scopeMenu,children:p.jsx(nI,{id:o.contentId,"aria-labelledby":o.triggerId,...s,ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;a.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ut(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ut(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:Ut(e.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=gke[a.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(g=o.trigger)==null||g.focus(),d.preventDefault())})})})})})});iH.displayName=sH;function aH(e){return e?"open":"closed"}function Zx(e){return e==="indeterminate"}function iI(e){return Zx(e)?"indeterminate":e?"checked":"unchecked"}function Pke(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Fke(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Lke(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=Fke(e,Math.max(i,0));s.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function $ke(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const o=t[i],l=t[a],c=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-c)*(r-d)/(m-d)+c&&(s=!s)}return s}function Bke(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return $ke(n,t)}function Cy(e){return t=>t.pointerType==="mouse"?e(t):void 0}var oH=zV,lH=QN,cH=qV,uH=VV,dH=rI,fH=HV,hH=D_,pH=KV,mH=ZV,gH=XV,yH=QV,bH=eH,vH=tH,wH=rH,xH=iH,aI="ContextMenu",[zke,J3e]=Ii(aI,[j_]),Zi=j_(),[Uke,_H]=zke(aI),SH=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:s,modal:i=!0}=e,[a,o]=C.useState(!1),l=Zi(t),c=Xs(r),d=C.useCallback(h=>{o(h),c(h)},[c]);return p.jsx(Uke,{scope:t,open:a,onOpenChange:d,modal:i,children:p.jsx(oH,{...l,dir:s,open:a,onOpenChange:d,modal:i,children:n})})};SH.displayName=aI;var EH="ContextMenuTrigger",CH=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...s}=e,i=_H(EH,n),a=Zi(n),o=C.useRef({x:0,y:0}),l=C.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),c=C.useRef(0),d=C.useCallback(()=>window.clearTimeout(c.current),[]),h=m=>{o.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return C.useEffect(()=>d,[d]),C.useEffect(()=>void(r&&d()),[r,d]),p.jsxs(p.Fragment,{children:[p.jsx(lH,{...a,virtualRef:l}),p.jsx(rn.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...s,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Ut(e.onContextMenu,m=>{d(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:Ut(e.onPointerDown,hw(m=>{d(),c.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:Ut(e.onPointerMove,hw(d)),onPointerCancel:r?e.onPointerCancel:Ut(e.onPointerCancel,hw(d)),onPointerUp:r?e.onPointerUp:Ut(e.onPointerUp,hw(d))})]})});CH.displayName=EH;var qke="ContextMenuPortal",kH=e=>{const{__scopeContextMenu:t,...n}=e,r=Zi(t);return p.jsx(cH,{...r,...n})};kH.displayName=qke;var TH="ContextMenuContent",AH=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=_H(TH,n),i=Zi(n),a=C.useRef(!1);return p.jsx(uH,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&a.current&&o.preventDefault(),a.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!s.modal&&(a.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AH.displayName=TH;var Vke="ContextMenuGroup",Hke=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(dH,{...s,...r,ref:t})});Hke.displayName=Vke;var Gke="ContextMenuLabel",Kke=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(fH,{...s,...r,ref:t})});Kke.displayName=Gke;var Wke="ContextMenuItem",RH=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(hH,{...s,...r,ref:t})});RH.displayName=Wke;var Zke="ContextMenuCheckboxItem",Yke=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(pH,{...s,...r,ref:t})});Yke.displayName=Zke;var Xke="ContextMenuRadioGroup",Jke=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(mH,{...s,...r,ref:t})});Jke.displayName=Xke;var Qke="ContextMenuRadioItem",eTe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(gH,{...s,...r,ref:t})});eTe.displayName=Qke;var tTe="ContextMenuItemIndicator",nTe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(yH,{...s,...r,ref:t})});nTe.displayName=tTe;var rTe="ContextMenuSeparator",NH=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(bH,{...s,...r,ref:t})});NH.displayName=rTe;var sTe="ContextMenuArrow",iTe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(vH,{...s,...r,ref:t})});iTe.displayName=sTe;var aTe="ContextMenuSubTrigger",oTe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(wH,{...s,...r,ref:t})});oTe.displayName=aTe;var lTe="ContextMenuSubContent",cTe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,s=Zi(n);return p.jsx(xH,{...s,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cTe.displayName=lTe;function hw(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var uTe=SH,dTe=CH,fTe=kH,hTe=AH,pTe=RH,mTe=NH;function r8({...e}){return p.jsx(uTe,{"data-slot":"context-menu",...e})}function s8({...e}){return p.jsx(dTe,{"data-slot":"context-menu-trigger",...e})}function i8({className:e,...t}){return p.jsx(fTe,{children:p.jsx(hTe,{"data-slot":"context-menu-content",className:mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function Ca({className:e,inset:t,variant:n="default",...r}){return p.jsx(pTe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:mt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function a8({className:e,...t}){return p.jsx(mTe,{"data-slot":"context-menu-separator",className:mt("bg-border -mx-1 my-1 h-px",e),...t})}const gTe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:s,isOperationLoading:i,creatingFolder:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,handleDownload:m,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:w,handleGitPull:x,handleGitCommit:_,handleGitPush:E,handleGitStatus:k})=>{const T=e.type==="folder",R=U=>{U.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(T?o(e):l(!n,e.id))},M=U=>{U.key==="Enter"?h():U.key==="Escape"&&d()},I=T?r?e5:xf:Q8,O=T?r?"text-green-400":"text-yellow-400":"text-blue-400",P=p.jsxs(ts,{className:mt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!T&&"cursor-pointer"),onClick:R,onDoubleClick:()=>!i&&!t&&o(e),children:[p.jsx(On,{className:"px-2 py-1",children:p.jsx(Ol,{checked:n,onCheckedChange:U=>l(!!U,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||T})}),p.jsx(On,{className:"px-2 py-1",children:p.jsx(I,{className:mt("h-5 w-5",O)})}),p.jsx(On,{className:"py-1 px-2",children:t?p.jsx(gn,{ref:b,value:s,onChange:U=>v(U.target.value),onBlur:h,onKeyDown:M,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:U=>U.stopPropagation(),disabled:i}):p.jsx("span",{className:mt("truncate",T&&"cursor-pointer hover:underline"),title:e.name,onClick:U=>{T&&(U.stopPropagation(),o(e))},children:e.name})}),p.jsx(On,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?G0(e.size):""}),p.jsx(On,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(On,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:mt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(fn,{tooltipText:"Save (Enter)",onClick:U=>{U.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!s.trim(),icon:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(ni,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(fn,{tooltipText:"Cancel (Esc)",onClick:U=>{U.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:p.jsx(qi,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(fn,{tooltipText:"Rename",onClick:U=>{U.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||a,icon:p.jsx(t0,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(fn,{tooltipText:T?"Download folder (.zip)":"Download file",onClick:U=>{U.stopPropagation(),m(e)},"aria-label":T?"Download folder as ZIP":"Download file",disabled:i,icon:p.jsx(yf,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(fn,{tooltipText:"Delete",onClick:U=>{U.stopPropagation(),g(e)},"aria-label":`Delete ${T?"folder":"file"}`,disabled:i,icon:p.jsx(oa,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return T?p.jsxs(r8,{children:[p.jsx(s8,{disabled:t||i,asChild:!0,children:P}),p.jsxs(i8,{children:[p.jsx(Ca,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),p.jsx(a8,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs(Ca,{onSelect:()=>x(e.path),disabled:i,children:[p.jsx(n5,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs(Ca,{onSelect:()=>_(e.path),disabled:i,children:[p.jsx(t5,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs(Ca,{onSelect:()=>E(e.path),disabled:i,children:[p.jsx(xA,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs(Ca,{onSelect:()=>k(e.path),disabled:i,children:[p.jsx(SA,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs(Ca,{onSelect:()=>w(e.path),disabled:i,children:[p.jsx(qu,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(a8,{}),p.jsxs(Ca,{onSelect:()=>c(e),disabled:i,children:[p.jsx(t0,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(Ca,{onSelect:()=>m(e),disabled:i,children:[p.jsx(yf,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs(Ca,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(oa,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(r8,{children:[p.jsx(s8,{disabled:t||i,asChild:!0,children:P}),p.jsxs(i8,{children:[p.jsxs(Ca,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),p.jsxs(Ca,{onSelect:()=>c(e),disabled:i,children:[p.jsx(t0,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(Ca,{onSelect:()=>m(e),disabled:i,children:[p.jsx(yf,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs(Ca,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(oa,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},yTe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:s,selectedFileIds:i,isOperationLoading:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:w,setNewFolderName:x,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:k,handleGitInit:T,handleGitPull:R,handleGitCommit:M,handleGitPush:I,handleGitStatus:O})=>{const P=C.useMemo(()=>e,[e]);return a&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(Jf,{className:"w-full text-sm",children:[p.jsx(km,{className:"sticky top-0 bg-card z-10",children:p.jsxs(ts,{className:"hover:bg-card",children:[p.jsx(Lr,{className:"w-[40px] px-2"}),p.jsx(Lr,{className:"w-[40px] px-2"}),p.jsx(Lr,{children:"Name"}),p.jsx(Lr,{className:"w-[100px] text-right",children:"Size"}),p.jsx(Lr,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(Lr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(Qf,{children:[r&&p.jsx(MV,{newFolderName:s,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:a}),P.map(U=>{const j=t===U.path,V=i.has(U.id),$=k[U.path]??!1;return p.jsx(gTe,{entry:U,isEditingThis:j,isChecked:V,isGitRepo:$,newName:j?n:"",isOperationLoading:a,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:w,renameInputRef:_,handleGitInit:T,handleGitPull:R,handleGitCommit:M,handleGitPush:I,handleGitStatus:O},U.id)}),e.length===0&&!r&&!a&&p.jsx(ts,{children:p.jsx(On,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},bTe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:s,creatingFolder:i,handleNavigateHome:a,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:c,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:w,archiveInputRef:x,handleFileChange:_,handleArchiveChange:E})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:b,onChange:_,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:w,onChange:_,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(At,{variant:"ghost",size:"icon",onClick:k=>{k.preventDefault(),k.stopPropagation(),a()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx(cY,{className:"h-4 w-4"})}),p.jsx(At,{variant:"ghost",size:"icon",onClick:k=>{k.preventDefault(),k.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(JZ,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(At,{variant:"ghost",size:"icon",onClick:k=>{k.preventDefault(),k.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(r1,{className:"h-4 w-4"})}),p.jsxs(At,{variant:"outline",size:"sm",onClick:k=>{k.preventDefault(),k.stopPropagation(),c()},disabled:t||i||!!s,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(wA,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(At,{variant:"outline",size:"sm",onClick:k=>{k.preventDefault(),k.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(X8,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(At,{variant:"outline",size:"sm",onClick:k=>{k.preventDefault(),k.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(xf,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(At,{variant:"outline",size:"sm",onClick:k=>{k.preventDefault(),k.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(PZ,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(At,{variant:"outline",size:"sm",onClick:k=>{k.preventDefault(),k.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(qu,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(At,{variant:"outline",size:"sm",onClick:k=>{k.preventDefault(),k.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(JW,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),IH=({isOpen:e,onOpenChange:t,title:n,description:r,children:s,submitLabel:i="Submit",onSubmit:a,isSubmitting:o,submitDisabled:l=!1,className:c,contentClassName:d})=>{const h=async m=>{m==null||m.preventDefault(),!(o||l)&&await a()};return p.jsx(__,{open:e,onOpenChange:t,children:p.jsxs(S_,{className:mt(c),children:[p.jsxs(E_,{children:[p.jsx(k_,{children:n}),r&&p.jsx(T_,{children:r})]}),p.jsx("div",{className:mt("py-4",d),children:s}),p.jsxs(C_,{children:[p.jsx(oCe,{asChild:!0,children:p.jsx(At,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(At,{onClick:h,disabled:o||l,children:[o&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},vTe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:s,setCloneBranch:i,isCloning:a,onSubmitClone:o,currentPath:l})=>p.jsx(IH,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:a,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Ot,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(gn,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:a})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Ot,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(gn,{id:"clone-branch",value:s,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:a})]})]})}),wTe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:s,isCommitting:i,onSubmitCommit:a})=>p.jsx(IH,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:a,isSubmitting:i,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Ot,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(gn,{id:"commit-msg",value:r,onChange:o=>s(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})});var O_="DropdownMenu",[xTe,Q3e]=Ii(O_,[j_]),Yi=j_(),[_Te,jH]=xTe(O_),MH=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=Yi(t),c=C.useRef(null),[d,h]=Bo({prop:s,defaultProp:i??!1,onChange:a,caller:O_});return p.jsx(_Te,{scope:t,triggerId:ei(),triggerRef:c,contentId:ei(),open:d,onOpenChange:h,onOpenToggle:C.useCallback(()=>h(m=>!m),[h]),modal:o,children:p.jsx(oH,{...l,open:d,onOpenChange:h,dir:r,modal:o,children:n})})};MH.displayName=O_;var DH="DropdownMenuTrigger",OH=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,i=jH(DH,n),a=Yi(n);return p.jsx(lH,{asChild:!0,...a,children:p.jsx(rn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Rc(t,i.triggerRef),onPointerDown:Ut(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Ut(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});OH.displayName=DH;var STe="DropdownMenuPortal",PH=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Yi(t);return p.jsx(cH,{...r,...n})};PH.displayName=STe;var FH="DropdownMenuContent",LH=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=jH(FH,n),i=Yi(n),a=C.useRef(!1);return p.jsx(uH,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ut(e.onCloseAutoFocus,o=>{var l;a.current||(l=s.triggerRef.current)==null||l.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:Ut(e.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!s.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});LH.displayName=FH;var ETe="DropdownMenuGroup",CTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(dH,{...s,...r,ref:t})});CTe.displayName=ETe;var kTe="DropdownMenuLabel",TTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(fH,{...s,...r,ref:t})});TTe.displayName=kTe;var ATe="DropdownMenuItem",$H=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(hH,{...s,...r,ref:t})});$H.displayName=ATe;var RTe="DropdownMenuCheckboxItem",NTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(pH,{...s,...r,ref:t})});NTe.displayName=RTe;var ITe="DropdownMenuRadioGroup",jTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(mH,{...s,...r,ref:t})});jTe.displayName=ITe;var MTe="DropdownMenuRadioItem",DTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(gH,{...s,...r,ref:t})});DTe.displayName=MTe;var OTe="DropdownMenuItemIndicator",PTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(yH,{...s,...r,ref:t})});PTe.displayName=OTe;var FTe="DropdownMenuSeparator",BH=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(bH,{...s,...r,ref:t})});BH.displayName=FTe;var LTe="DropdownMenuArrow",$Te=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(vH,{...s,...r,ref:t})});$Te.displayName=LTe;var BTe="DropdownMenuSubTrigger",zTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(wH,{...s,...r,ref:t})});zTe.displayName=BTe;var UTe="DropdownMenuSubContent",qTe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Yi(n);return p.jsx(xH,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qTe.displayName=UTe;var VTe=MH,HTe=OH,GTe=PH,KTe=LH,WTe=$H,ZTe=BH;function YTe({...e}){return p.jsx(VTe,{"data-slot":"dropdown-menu",...e})}function XTe({...e}){return p.jsx(HTe,{"data-slot":"dropdown-menu-trigger",...e})}function JTe({className:e,sideOffset:t=4,...n}){return p.jsx(GTe,{children:p.jsx(KTe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function hl({className:e,inset:t,variant:n="default",...r}){return p.jsx(WTe,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:mt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function o8({className:e,...t}){return p.jsx(ZTe,{"data-slot":"dropdown-menu-separator",className:mt("bg-border -mx-1 my-1 h-px",e),...t})}const QTe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:s,selectedFileIds:i,isOperationLoading:a,handleNavigate:o,handleCheckboxChange:l,startEditing:c,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:w,setNewFolderName:x,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:k,handleGitInit:T,handleGitPull:R,handleGitCommit:M,handleGitPush:I,handleGitStatus:O})=>{const P=U=>{U.key==="Enter"?h():U.key==="Escape"&&d()};return a&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(MV,{newFolderName:s,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:a,isMobile:!0})}),e.map(U=>{const j=t===U.path,V=i.has(U.id),$=k[U.path]??!1,re=U.type==="folder",J=re?$?e5:xf:Q8,te=re?$?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:mt("flex items-center justify-between p-2 border rounded-md",j&&"bg-muted ring-1 ring-primary",a&&"opacity-70 cursor-not-allowed",!j&&"hover:bg-muted/50",!j&&"cursor-pointer"),onClick:()=>{j||a||(re?o(U):l(!V,U.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!re&&p.jsx(Ol,{checked:V,onCheckedChange:X=>l(!!X,U.id),"aria-label":`Select ${U.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:a,onClick:X=>X.stopPropagation()}),re&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(J,{className:mt("h-5 w-5 flex-shrink-0",te)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[j?p.jsx(gn,{ref:_,value:n,onChange:X=>w(X.target.value),onBlur:h,onKeyDown:P,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:X=>X.stopPropagation(),disabled:a}):p.jsx("span",{className:"text-sm font-medium truncate",title:U.name,children:U.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:U.type==="file"&&U.size!==void 0?G0(U.size):U.type==="folder"?$?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:j?p.jsxs(p.Fragment,{children:[p.jsx(At,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:X=>{X.stopPropagation(),h()},disabled:a||!n.trim(),"aria-label":"Save name",children:a?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(ni,{className:"h-4 w-4"})}),p.jsx(At,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),d()},disabled:a,"aria-label":"Cancel edit",children:p.jsx(qi,{className:"h-4 w-4"})})]}):p.jsxs(YTe,{children:[p.jsx(XTe,{asChild:!0,children:p.jsx(At,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:X=>X.stopPropagation(),disabled:a,"aria-label":"More actions",children:p.jsx(DZ,{className:"h-4 w-4"})})}),p.jsxs(JTe,{align:"end",onClick:X=>X.stopPropagation(),children:[re&&p.jsx(hl,{onSelect:()=>o(U),children:"Open Folder"}),!re&&p.jsxs(hl,{onSelect:()=>l(!V,U.id),children:[V?"Deselect":"Select"," File"]}),p.jsxs(hl,{onSelect:()=>c(U),children:[p.jsx(t0,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(hl,{onSelect:()=>v(U),children:[p.jsx(yf,{className:"mr-2 h-4 w-4"})," Download"," ",re?"as ZIP":""]}),re&&p.jsx(o8,{}),re&&$&&p.jsxs(p.Fragment,{children:[p.jsxs(hl,{onSelect:()=>R(U.path),children:[p.jsx(n5,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(hl,{onSelect:()=>M(U.path),children:[p.jsx(t5,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(hl,{onSelect:()=>I(U.path),children:[p.jsx(xA,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(hl,{onSelect:()=>O(U.path),children:[p.jsx(SA,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),re&&!$&&p.jsxs(hl,{onSelect:()=>T(U.path),children:[p.jsx(qu,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(o8,{}),p.jsxs(hl,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(U),children:[p.jsx(oa,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},U.id)}),e.length===0&&!r&&!a&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},oI=C.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:s,error:i,rootId:a,selectedFileIds:o,vfsKey:l,configuredVfsKey:c,initializingKey:d}=Ls(En(we=>({nodes:we.nodes,childrenMap:we.childrenMap,currentParentId:we.currentParentId,selectedFileIds:we.selectedFileIds,loading:we.loading,operationLoading:we.operationLoading,error:we.error,rootId:we.rootId,vfsKey:we.vfsKey,configuredVfsKey:we.configuredVfsKey,initializingKey:we.initializingKey}))),[h,m]=C.useState(""),[g,v]=C.useState(null),[b,w]=C.useState(!1),[x,_]=C.useState(""),[E,k]=C.useState({}),[T,R]=C.useState(!1),[M,I]=C.useState(""),[O,P]=C.useState(""),[U,j]=C.useState(!1),[V,$]=C.useState(!1),[re,J]=C.useState(null),[te,X]=C.useState(""),[ie,Z]=C.useState(!1),[ee,Q]=C.useState({}),he=C.useRef(null),Se=C.useRef(null),ce=C.useRef(null),je=C.useRef(null),De=C.useRef(null),Re=n?e[n]:null,xe=Re?Re.path:"/",st=(t[n||a||""]||[]).map(we=>e[we]).filter(we=>!!we).sort((we,Ue)=>we.type==="folder"&&Ue.type==="file"?-1:we.type==="file"&&Ue.type==="folder"?1:we.name.localeCompare(Ue.name)),He=C.useMemo(()=>st.filter(we=>we.type==="folder").map(we=>we.path),[st]),Ne=r||d!==null||l!==c,H=s||U||ie||Object.values(ee).some(Boolean);C.useEffect(()=>{n!==null&&!t[n]&&!Ne&&c===l?We.emit(sn.fetchNodesRequest,{parentId:n}):n===null&&a&&!t[a]&&!Ne&&c===l&&We.emit(sn.fetchNodesRequest,{parentId:a})},[n,t,a,Ne,c,l]),C.useEffect(()=>{var we,Ue;g&&((we=je.current)==null||we.focus(),(Ue=je.current)==null||Ue.select())},[g]),C.useEffect(()=>{var we;b&&((we=De.current)==null||we.focus())},[b]),C.useEffect(()=>{(async()=>{if(Ne||He.length===0)return;const Ue={};let Et=!1;for(const me of He)try{const G=await Ude(me);E[me]!==G&&(Ue[me]=G,Et=!0)}catch(G){console.error(`Error checking git status for ${me}:`,G),E[me]!==!1&&(Ue[me]=!1,Et=!0)}Et&&k(me=>({...me,...Ue}))})()},[He,Ne,E]);const ue=C.useCallback(async(we,Ue,Et)=>{if(!(H||Ne)){Et!==!1&&We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{We.emit(we,Ue)}catch(me){console.error("[FileManager Operation Error]:",me),We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:s,error:me instanceof Error?me.message:String(me)})}finally{Et!==!1&&We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:i})}}},[H,Ne,r,s,i]),ke=C.useCallback(we=>{H||Ne||g||we.type==="folder"&&ue(sn.setCurrentPathRequest,{path:we.path},!1)},[H,Ne,g,ue]),ae=C.useCallback(()=>{if(H||Ne||xe==="/")return;const we=q1(xe);ue(sn.setCurrentPathRequest,{path:we},!1)},[H,Ne,xe,ue]),oe=C.useCallback(()=>{H||Ne||xe==="/"||ue(sn.setCurrentPathRequest,{path:"/"},!1)},[H,Ne,xe,ue]),ne=C.useCallback(()=>{Ne||ue(sn.fetchNodesRequest,{parentId:n},!1)},[ue,n,Ne]),Ee=C.useCallback((we,Ue)=>{const Et=e[Ue];Et&&Et.type==="file"?we?We.emit(sn.selectFileRequest,{fileId:Ue}):We.emit(sn.deselectFileRequest,{fileId:Ue}):Et&&Et.type==="folder"&&ze.info("Folders cannot be attached to the prompt.")},[e]),Le=C.useCallback(we=>{H||Ne||b||(v(we.path),m(we.name),w(!1))},[H,Ne,b]),Te=C.useCallback(()=>{v(null),m("")},[]),Xe=C.useCallback(async()=>{if(!g||!h.trim()){Te();return}const we=Object.values(e).find(Ue=>Ue.path===g);we&&we.name!==h.trim()&&await ue(sn.renameNodeRequest,{id:we.id,newName:h.trim()}),Te()},[g,h,e,Te,ue]),St=C.useCallback(()=>{H||Ne||g||(w(!0),_(""),v(null))},[H,Ne,g]),dt=C.useCallback(()=>{w(!1),_("")},[]),It=C.useCallback(async()=>{if(!x.trim()){dt();return}await ue(sn.createDirectoryRequest,{parentId:n,name:x.trim()}),dt()},[x,n,dt,ue]),Vt=()=>{var we;return(we=he.current)==null?void 0:we.click()},Dt=()=>{var we;return(we=Se.current)==null?void 0:we.click()},Kt=()=>{var we;return(we=ce.current)==null?void 0:we.click()},be=C.useCallback(async we=>{const Ue=we.target.files;Ue&&Ue.length>0&&(await ue(sn.uploadFilesRequest,{parentId:n,files:Ue}),we.target&&(we.target.value=""))},[n,ue]),D=C.useCallback(async we=>{var Et;const Ue=(Et=we.target.files)==null?void 0:Et[0];if(Ue){We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{await Hde(Ue,xe),We.emit(sn.fetchNodesRequest,{parentId:n})}catch(me){console.error("Archive upload error:",me)}finally{We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:i}),we.target&&(we.target.value="")}}},[xe,n,r,i]),K=C.useCallback(async we=>{window.confirm(`Delete ${we.type} "${we.name}"?${we.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await ue(sn.deleteNodesRequest,{ids:[we.id]})},[ue]),pe=C.useCallback(async we=>{We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{we.type==="file"?await Vde(we.path):await ED(`${we.name}.zip`,we.path)}catch(Ue){console.error("Download error:",Ue)}finally{We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:i})}},[r,i]),Oe=C.useCallback(async()=>{if(st.length!==0){We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!0,error:null});try{const we=ws(xe)||"root";await ED(`${we}_export.zip`,xe)}catch(we){console.error("Download all error:",we)}finally{We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:!1,error:i})}}},[xe,st.length,r,i]),ve=C.useCallback(async(we,Ue)=>{if(!(ee[we]||Ne||s)){Q(Et=>({...Et,[we]:!0})),We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:s,error:null});try{await Ue()}catch(Et){console.error(`[FileManager Git Op Error @ ${we}]:`,Et)}finally{Q(Et=>({...Et,[we]:!1}))}}},[ee,Ne,s,r]),Ae=C.useCallback(we=>{ve(we,async()=>{await z$(we),k(Ue=>({...Ue,[we]:!0}))})},[ve]),de=C.useCallback(we=>{ze.info("Pulling default branch (auth not implemented yet)..."),ve(we,()=>Z1(we,"main"))},[ve]),ht=C.useCallback(we=>{J(we),X(""),$(!0)},[]),wt=C.useCallback(we=>{ze.info("Pushing default branch (auth not implemented yet)..."),ve(we,()=>FR(we,"main"))},[ve]),L=C.useCallback(we=>{ve(we,()=>U$(we))},[ve]),Be=C.useCallback(()=>{I(""),P(""),R(!0)},[]),rt=C.useCallback(async()=>{if(!M.trim()){ze.error("Repository URL cannot be empty.");return}j(!0),We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:s,error:null});try{const we=ws(M.trim().replace(/\.git$/,""))||"cloned_repo",Ue=pT(xe,we);await B$(Ue,M.trim(),O.trim()||void 0),R(!1),We.emit(sn.fetchNodesRequest,{parentId:n})}catch{}finally{j(!1)}},[M,O,xe,n,r,s]),ye=C.useCallback(async()=>{if(!re||!te.trim()){ze.error("Commit message cannot be empty.");return}Z(!0),We.emit(sn.loadingStateChanged,{isLoading:r,operationLoading:s,error:null});try{await PR(re,te.trim()),$(!1)}catch{}finally{Z(!1)}},[re,te,r,s]);return Ne?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(Fn,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:d?`Initializing filesystem: ${d}`:"Loading filesystem..."}),i&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!Ne?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",i]}),p.jsx(At,{variant:"outline",size:"sm",onClick:()=>We.emit(sn.initializeVFSRequest,{vfsKey:l||"default_fallback_key"}),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:mt("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(bTe,{currentPath:xe,isAnyLoading:H||Ne,isOperationLoading:s,entries:st,editingPath:g,creatingFolder:b,handleNavigateHome:oe,handleNavigateUp:ae,handleRefresh:ne,startCreatingFolder:St,handleUploadClick:Vt,handleFolderUploadClick:Dt,handleArchiveUploadClick:Kt,handleDownloadAll:Oe,handleCloneClick:Be,fileInputRef:he,folderInputRef:Se,archiveInputRef:ce,handleFileChange:be,handleArchiveChange:D}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx(yTe,{entries:st,editingPath:g,newName:h,creatingFolder:b,newFolderName:x,selectedFileIds:o,isOperationLoading:H,handleNavigate:ke,handleCheckboxChange:Ee,startEditing:Le,cancelEditing:Te,handleRename:Xe,cancelCreatingFolder:dt,handleCreateFolder:It,handleDownload:pe,handleDelete:K,setNewName:m,setNewFolderName:_,renameInputRef:je,newFolderInputRef:De,gitRepoStatus:E,handleGitInit:Ae,handleGitPull:de,handleGitCommit:ht,handleGitPush:wt,handleGitStatus:L})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(QTe,{entries:st,editingPath:g,newName:h,creatingFolder:b,newFolderName:x,selectedFileIds:o,isOperationLoading:H,handleNavigate:ke,handleCheckboxChange:Ee,startEditing:Le,cancelEditing:Te,handleRename:Xe,cancelCreatingFolder:dt,handleCreateFolder:It,handleDownload:pe,handleDelete:K,setNewName:m,setNewFolderName:_,renameInputRef:je,newFolderInputRef:De,gitRepoStatus:E,handleGitInit:Ae,handleGitPull:de,handleGitCommit:ht,handleGitPush:wt,handleGitStatus:L})}),p.jsx(vTe,{isOpen:T,onOpenChange:R,cloneRepoUrl:M,setCloneRepoUrl:I,cloneBranch:O,setCloneBranch:P,isCloning:U,onSubmitClone:rt,currentPath:xe}),p.jsx(wTe,{isOpen:V,onOpenChange:$,commitPath:re,commitMessage:te,setCommitMessage:X,isCommitting:ie,onSubmitCommit:ye})]})});oI.displayName="FileManager";const eAe=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(N4,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(N4,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(xf,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,tAe=({module:e,isOpen:t,onClose:n})=>{const r=e.getSelectedFileIdsCount(),s=Ls.getState().vfsKey,i=ir.getState().selectedItemType,a=Mc.getState().addAttachedFile,o=()=>{const c=Ls.getState().selectedFileIds;if(c.size===0){ze.info("No files selected in VFS to attach.");return}let d=0;const h=e.getVfsNodes();c.forEach(m=>{const g=h[m];g&&g.type==="file"&&(a({source:"vfs",name:g.name,type:g.mimeType||"application/octet-stream",size:g.size,path:g.path}),d++)}),d>0?(ze.success(`Attached ${d} file(s) from VFS to the next prompt.`),e.clearVfsSelection(),n()):ze.warning("No valid files were selected to attach.")},l=()=>{e.clearVfsSelection(),n()};return p.jsx(__,{open:t,onOpenChange:c=>!c&&l(),children:p.jsxs(S_,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(E_,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx(k_,{children:"Virtual Filesystem"}),p.jsx(T_,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(eAe,{vfsKey:s,selectedItemType:i})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(oI,{})}),p.jsxs(C_,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(At,{variant:"outline",onClick:l,children:"Close"}),p.jsxs(At,{onClick:o,disabled:r===0,children:[p.jsx(EA,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r,")"]})]})]})})};class nAe{constructor(){Me(this,"id","core-vfs");Me(this,"modalId","core-vfs-modal-panel");Me(this,"unregisterCallbacks",[]);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"notifyTriggerUpdate",null);Me(this,"isModalOpenByManager",!1);Me(this,"getEnableVfs",()=>Ls.getState().enableVfs);Me(this,"getIsVfsModalOpen",()=>this.isModalOpenByManager);Me(this,"getSelectedFileIdsCount",()=>Ls.getState().selectedFileIds.size);Me(this,"toggleVfsModal",()=>{var t,n;this.isModalOpenByManager?(t=this.modApiRef)==null||t.emit(ar.closeModalRequest,{modalId:this.modalId}):(n=this.modApiRef)==null||n.emit(ar.openModalRequest,{modalId:this.modalId})});Me(this,"clearVfsSelection",()=>{var t;(t=this.modApiRef)==null||t.emit(sn.clearSelectionRequest,void 0)});Me(this,"getVfsNodes",()=>Ls.getState().nodes);Me(this,"setNotifyTriggerUpdate",t=>{this.notifyTriggerUpdate=t})}async initialize(t){this.modApiRef=t,this.updateVfsKeyBasedOnContext();const n=t.on(ar.contextChanged,()=>{var s;this.updateVfsKeyBasedOnContext(),(s=this.notifyTriggerUpdate)==null||s.call(this)}),r=t.on(ar.modalStateChanged,s=>{var i;if(s.modalId===this.modalId){const a=s.isOpen;this.isModalOpenByManager!==a&&(this.isModalOpenByManager=a,(i=this.notifyTriggerUpdate)==null||i.call(this),a&&this.updateVfsKeyBasedOnContext())}});this.eventUnsubscribers.push(n,r)}updateVfsKeyBasedOnContext(){var i;const{selectedItemId:t,selectedItemType:n}=ir.getState(),r=Ls.getState().vfsKey;let s=null;if(this.isModalOpenByManager)if(n==="project")s=t;else if(n==="conversation"){const a=ir.getState().getConversationById(t);s=(a==null?void 0:a.projectId)??"orphan"}else s="orphan";else if(n==="project")s=t;else if(n==="conversation"){const a=ir.getState().getConversationById(t);s=(a==null?void 0:a.projectId)??"orphan"}else s="orphan";r!==s&&(console.log(`[${this.id}] Updating VFS key from "${r}" to "${s}"`),(i=this.modApiRef)==null||i.emit(sn.setVfsKeyRequest,{key:s}))}register(t){if(this.modApiRef=t,this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=t.registerPromptControl({id:"core-vfs-prompt-trigger",triggerRenderer:()=>yt.createElement(ike,{module:this})});this.unregisterCallbacks.push(n);const r=t.registerModalProvider(this.modalId,s=>yt.createElement(tAe,{module:this,...s}));this.unregisterCallbacks.push(r)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],this.notifyTriggerUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const rAe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.selectedItemId,r=e.selectedItemType,s=e.syncRepos,i=e.conversationSyncStatus,a=e.isStreaming,[o,l]=C.useState(null),[c,d]=C.useState("idle"),[h,m]=C.useState(!1),[g,v]=C.useState(!1);C.useEffect(()=>{if(r==="conversation"&&n){const R=e.getConversationById(n);l((R==null?void 0:R.syncRepoId)??null),d(i[n]??"idle")}else l(null),d("idle")},[n,r,i,e]);const b=yt.useMemo(()=>new Map(s.map(R=>[R.id,R.name])),[s]),w=o?b.get(o):void 0,x=C.useCallback(async R=>{if(!n||r!=="conversation")return;m(!0);const M=R==="none"?null:R;await e.linkConversationToRepo(n,M),m(!1)},[n,r,e]),_=C.useCallback(async()=>{!n||!o||(v(!0),await e.syncConversation(n),v(!1))},[n,o,e]),E=Iq(c,w),k=!o||g||h||a||c==="syncing";return r==="conversation"&&s.length>0?p.jsxs(io,{children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(ao,{asChild:!0,children:p.jsx(At,{variant:o?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:a||h||g,"aria-label":"Configure Git Sync",children:c==="syncing"||g||h?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(qu,{className:"h-4 w-4"})})})}),p.jsx(Wn,{side:"top",children:o?`Sync Status: ${c}`:"Link to Sync Repo"})]})}),p.jsxs(oo,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx(Ot,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(Cc,{value:o??"none",onValueChange:x,disabled:h||g||a,children:[p.jsx(Tc,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(kc,{placeholder:"Select repository..."})}),p.jsxs(Ac,{children:[p.jsx(Is,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(R=>p.jsx(Is,{value:R.id,children:R.name},R.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",E||"Not Linked"]}),p.jsxs(At,{size:"sm",variant:"outline",onClick:_,disabled:k,className:"h-8",children:[g||c==="syncing"?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(xA,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]}):null},e0=({title:e,description:t,children:n,className:r,titleClassName:s,descriptionClassName:i,contentClassName:a})=>p.jsxs("div",{className:mt("space-y-3",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:mt("text-lg font-medium",s),children:e}),t&&p.jsx("p",{className:mt("text-sm text-muted-foreground",i),children:t})]}),p.jsx("div",{className:mt(a),children:n})]}),sAe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=ur(En(s=>({gitUserName:s.gitUserName,setGitUserName:s.setGitUserName,gitUserEmail:s.gitUserEmail,setGitUserEmail:s.setGitUserEmail})));return p.jsx("div",{className:"space-y-6 p-1",children:p.jsx(e0,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"git-user-name",children:"Git User Name"}),p.jsx(gn,{id:"git-user-name",value:e??"",onChange:s=>t(s.target.value),placeholder:"Your Name"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"git-user-email",children:"Git User Email"}),p.jsx(gn,{id:"git-user-email",type:"email",value:n??"",onChange:s=>r(s.target.value),placeholder:"your.email@example.com"})]})]})})})},iAe=yt.memo(sAe),aAe=bA("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function zH({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:mt(aAe({variant:t}),e),...n})}function UH({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:mt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function qH({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:mt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const oAe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:s,repoInitializationStatus:i,isLoading:a}=ir(En(I=>({syncRepos:I.syncRepos,addSyncRepo:I.addSyncRepo,updateSyncRepo:I.updateSyncRepo,deleteSyncRepo:I.deleteSyncRepo,initializeOrSyncRepo:I.initializeOrSyncRepo,repoInitializationStatus:I.repoInitializationStatus,isLoading:I.isLoading}))),[o,l]=C.useState(!1),[c,d]=C.useState(null),[h,m]=C.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=C.useState(!1),[b,w]=C.useState({}),x=C.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),_=C.useCallback((I,O)=>{m(P=>({...P,[I]:O}))},[]),E=C.useCallback(async()=>{var I,O,P,U;if(!((I=h.name)!=null&&I.trim())||!((O=h.remoteUrl)!=null&&O.trim())){ze.error("Repository Name and Remote URL are required.");return}v(!0);try{const j={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((P=h.branch)==null?void 0:P.trim())||"main",username:((U=h.username)==null?void 0:U.trim())||null,password:h.password||null};c?await n(c,j):await t(j),x()}catch(j){console.error("Failed to save sync repo:",j)}finally{v(!1)}},[h,c,t,n,x]),k=I=>{d(I.id),m({name:I.name,remoteUrl:I.remoteUrl,branch:I.branch||"main",username:I.username??"",password:I.password??""}),l(!1)},T=C.useCallback(async(I,O)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${O}"? This will unlink it from any conversations and remove the local copy.`)){w(P=>({...P,[I]:!0}));try{await r(I),c===I&&x()}catch(P){console.error("Failed to delete sync repo:",P)}finally{w(P=>({...P,[I]:!1}))}}},[r,c,x]),R=C.useCallback(async I=>{await s(I)},[s]),M=()=>{var I,O;return p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Ot,{htmlFor:"repo-name",children:"Name"}),p.jsx(gn,{id:"repo-name",value:h.name||"",onChange:P=>_("name",P.target.value),placeholder:"e.g., My Backup",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx(Ot,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),p.jsx(gn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:P=>_("remoteUrl",P.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Ot,{htmlFor:"repo-branch",children:"Branch"}),p.jsx(gn,{id:"repo-branch",value:h.branch||"",onChange:P=>_("branch",P.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Ot,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(zH,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(kA,{className:"h-4 w-4"}),p.jsx(UH,{children:"Security Warning"}),p.jsx(qH,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"repo-username",children:"Username"}),p.jsx(gn,{id:"repo-username",value:h.username||"",onChange:P=>_("username",P.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"repo-password",children:"Password / Token"}),p.jsx(gn,{id:"repo-password",type:"password",value:h.password||"",onChange:P=>_("password",P.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(At,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[p.jsx(qi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(At,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((I=h.name)!=null&&I.trim())||!((O=h.remoteUrl)!=null&&O.trim()),type:"button",children:[g&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ff,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!c&&p.jsxs(At,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:a,children:[p.jsx(Pf,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||c)&&M(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),a&&!o&&!c?p.jsxs("div",{className:"space-y-2",children:[p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"})]}):e.length===0&&!o&&!c?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsxs("div",{className:"border rounded-md overflow-x-auto",children:[" ",p.jsxs(Jf,{children:[p.jsx(km,{children:p.jsxs(ts,{children:[p.jsx(Lr,{children:"Name"}),p.jsx(Lr,{className:"hidden md:table-cell",children:"Remote URL"})," ",p.jsx(Lr,{className:"hidden lg:table-cell",children:"Branch"})," ",p.jsx(Lr,{className:"hidden lg:table-cell",children:"Auth"})," ",p.jsx(Lr,{className:"text-right",children:"Actions"})]})}),p.jsx(Qf,{children:e.map(I=>{const O=b[I.id],P=c===I.id,U=!!I.username||!!I.password,j=i[I.id]||"idle",$=O||g||!!c||j==="syncing";let re=null,J="Initialize/Sync Repository";return j==="syncing"?(re=p.jsx(Fn,{className:"h-4 w-4 animate-spin mr-1"}),J="Initializing/Syncing..."):j==="idle"?(re=p.jsx(t1,{className:"h-4 w-4 text-green-500 mr-1"}),J="Sync Successful / Ready"):j==="error"?(re=p.jsx(Ic,{className:"h-4 w-4 text-destructive mr-1"}),J="Sync Failed"):re=p.jsx(r1,{className:"h-4 w-4 mr-1"}),p.jsxs(ts,{className:mt(P?"bg-muted/50":"",$&&!P?"opacity-70":""),children:[p.jsx(On,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:I.name}),p.jsx(On,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:I.remoteUrl}),p.jsx(On,{className:"hidden lg:table-cell",children:I.branch||"main"}),p.jsx(On,{className:"text-xs hidden lg:table-cell",children:U?"Configured":"None"}),p.jsxs(On,{className:"text-right space-x-1",children:[p.jsx(fn,{tooltipText:J,onClick:()=>R(I.id),"aria-label":`Initialize or Sync repo ${I.name}`,disabled:$,icon:re,variant:"outline",className:"h-8 w-8"}),p.jsx(fn,{tooltipText:"Edit",onClick:()=>k(I),"aria-label":`Edit repo ${I.name}`,disabled:$,icon:p.jsx(Ny,{}),className:"h-8 w-8"}),p.jsx(fn,{tooltipText:"Delete",onClick:()=>T(I.id,I.name),"aria-label":`Delete repo ${I.name}`,disabled:$,icon:O?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(oa,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},I.id)})})]})]})]})]})},lAe=yt.memo(oAe),cAe=()=>{const e=C.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(iAe,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(lAe,{})}],[]);return p.jsx(Kc,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},uAe=yt.memo(cAe);class dAe{constructor(){Me(this,"id","core-git-sync");Me(this,"unregisterPromptControlCallback",null);Me(this,"unregisterSettingsTabCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"selectedItemId",null);Me(this,"selectedItemType",null);Me(this,"syncRepos",[]);Me(this,"conversationSyncStatus",{});Me(this,"isStreaming",!1);Me(this,"notifyComponentUpdate",null);Me(this,"linkConversationToRepo",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(Qn.linkConversationToRepoRequest,{conversationId:t,repoId:n})});Me(this,"syncConversation",t=>{var n;(n=this.modApiRef)==null||n.emit(Qn.syncConversationRequest,{conversationId:t})});Me(this,"getConversationById",t=>ir.getState().getConversationById(t));Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.loadInitialState();const n=t.on(ar.contextChanged,o=>{var l;this.selectedItemId=o.selectedItemId,this.selectedItemType=o.selectedItemType,(l=this.notifyComponentUpdate)==null||l.call(this)}),r=t.on(Xg.repoChanged,()=>{var o;this.syncRepos=ir.getState().syncRepos,(o=this.notifyComponentUpdate)==null||o.call(this)}),s=t.on(Qn.conversationSyncStatusChanged,o=>{var l;typeof o=="object"&&o&&"conversationId"in o&&"status"in o&&(this.conversationSyncStatus={...this.conversationSyncStatus,[o.conversationId]:o.status},(l=this.notifyComponentUpdate)==null||l.call(this))}),i=t.on(zn.statusChanged,o=>{var l;typeof o=="object"&&o&&"status"in o&&(this.isStreaming=o.status==="streaming",(l=this.notifyComponentUpdate)==null||l.call(this))}),a=t.on(Qn.conversationUpdated,o=>{var l;typeof o=="object"&&o&&"conversationId"in o&&"updates"in o&&o.conversationId===this.selectedItemId&&o.updates.syncRepoId!==void 0&&(this.loadInitialState(),(l=this.notifyComponentUpdate)==null||l.call(this))});this.eventUnsubscribers.push(n,r,s,i,a)}loadInitialState(){const t=ir.getState();this.selectedItemId=t.selectedItemId,this.selectedItemType=t.selectedItemType,this.syncRepos=t.syncRepos,this.conversationSyncStatus=t.conversationSyncStatus,this.isStreaming=Hn.getState().status==="streaming"}register(t){this.modApiRef=t,this.unregisterPromptControlCallback||(this.unregisterPromptControlCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>yt.createElement(rAe,{module:this})})),this.unregisterSettingsTabCallback||(this.unregisterSettingsTabCallback=t.registerSettingsTab({id:"git",title:"Git",component:uAe,order:60}))}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterPromptControlCallback&&(this.unregisterPromptControlCallback(),this.unregisterPromptControlCallback=null),this.unregisterSettingsTabCallback&&(this.unregisterSettingsTabCallback(),this.unregisterSettingsTabCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const fAe=z.object({path:z.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),hAe=z.object({path:z.string().describe("The path of the file to read within the VFS."),encoding:z.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),pAe=z.object({path:z.string().describe("The path where the file should be written."),content:z.string().describe("The content to write to the file."),encoding:z.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),mAe=z.object({path:z.string().describe("The path of the file or directory to delete."),recursive:z.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),gAe=z.object({path:z.string().describe("The path of the directory to create (including parents).")}),yAe=z.object({oldPath:z.string().describe("The current path of the item to rename."),newName:z.string().describe("The new name for the item.")});class bAe{constructor(){Me(this,"id","core-vfs-tools");Me(this,"unregisterCallbacks",[])}async initialize(t){console.log(`[${this.id}] Initialized.`)}register(t){if(this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}console.log(`[${this.id}] Registering Core VFS Tools...`);const n={description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:fAe};this.unregisterCallbacks.push(t.registerTool("vfsListFiles",n,async({path:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=or(l||"/");try{const m=await LR(h,{fsInstance:d});return{success:!0,path:h,entries:m.map(g=>({name:g.name,type:g.isDirectory?"folder":"file",size:g.size,lastModified:g.lastModified.toISOString()}))}}catch(m){return{success:!1,path:h,error:m.message}}}));const r={description:"Read the content of a file from the VFS.",parameters:hAe};this.unregisterCallbacks.push(t.registerTool("vfsReadFile",r,async({path:l,encoding:c},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=or(l);try{const g=await xd(m,{fsInstance:h});let v;return c==="base64"?v=btoa(String.fromCharCode(...g)):v=new TextDecoder().decode(g),{success:!0,path:m,content:v,encoding:c}}catch(g){return{success:!1,path:m,error:g.message}}}));const s={description:"Write content to a file in the VFS.",parameters:pAe};this.unregisterCallbacks.push(t.registerTool("vfsWriteFile",s,async({path:l,content:c,encoding:d},h)=>{const m=h==null?void 0:h.fsInstance;if(!m)return{success:!1,error:"Filesystem instance not available in context."};const g=or(l);try{let v;if(d==="base64"){const b=atob(c),w=b.length,x=new Uint8Array(w);for(let _=0;_<w;_++)x[_]=b.charCodeAt(_);v=x}else v=c;return await Y1(g,v,{fsInstance:m}),{success:!0,path:g}}catch(v){return{success:!1,path:g,error:v.message}}}));const i={description:"Delete a file or directory from the VFS.",parameters:mAe};this.unregisterCallbacks.push(t.registerTool("vfsDelete",i,async({path:l,recursive:c},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=or(l);try{return await $R(m,c,{fsInstance:h}),{success:!0,path:m}}catch(g){return{success:!1,path:m,error:g.message}}}));const a={description:"Create a directory (including parents) in the VFS.",parameters:gAe};this.unregisterCallbacks.push(t.registerTool("vfsCreateDirectory",a,async({path:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=or(l);try{return await q$(h,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}));const o={description:"Rename a file or directory in the VFS.",parameters:yAe};this.unregisterCallbacks.push(t.registerTool("vfsRename",o,async({oldPath:l,newName:c},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=or(l),g=or(m.substring(0,m.lastIndexOf("/"))||"/"),v=Dl(g,c);try{return await H$(m,v,{fsInstance:h}),{success:!0,oldPath:m,newPath:v}}catch(b){return{success:!1,oldPath:m,newName:c,error:b.message}}})),console.log(`[${this.id}] Core VFS Tools Registered.`)}destroy(){this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],console.log(`[${this.id}] Destroyed.`)}}const vAe=z.object({path:z.string().describe("The directory path within the VFS to initialize as a Git repository.")}),wAe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to commit."),message:z.string().describe("The commit message.")}),xAe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:z.string().optional().describe("The branch name to pull.")}),_Ae=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to push."),branch:z.string().optional().describe("The branch name to push.")}),SAe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to check status.")});class EAe{constructor(){Me(this,"id","core-git-tools");Me(this,"unregisterCallbacks",[])}async initialize(t){}register(t){if(this.unregisterCallbacks.length>0){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n={description:"Initialize an empty Git repository in a VFS directory.",parameters:vAe};this.unregisterCallbacks.push(t.registerTool("gitInit",n,async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await z$(o,{fsInstance:c}),{success:!0,message:`Repository initialized at ${o}`}}catch(d){return{success:!1,error:d.message}}}));const r={description:"Stage all changes and commit them in a VFS Git repository.",parameters:wAe};this.unregisterCallbacks.push(t.registerTool("gitCommit",r,async({path:o,message:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=ur.getState();if(!h.gitUserName||!h.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await PR(o,l,{fsInstance:d}),{success:!0,message:`Changes committed in ${o}`}}catch(m){return{success:!1,error:m.message}}}));const s={description:"Pull changes from the remote repository for the specified branch.",parameters:xAe};this.unregisterCallbacks.push(t.registerTool("gitPull",s,async({path:o,branch:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};try{return await Z1(o,l||"main",void 0,{fsInstance:d}),{success:!0,message:`Pulled changes for ${o}`}}catch(h){return{success:!1,error:h.message}}}));const i={description:"Push committed changes from the local branch to the remote repository.",parameters:_Ae};this.unregisterCallbacks.push(t.registerTool("gitPush",i,async({path:o,branch:l},c)=>{const d=c==null?void 0:c.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};try{return await FR(o,l||"main",void 0,{fsInstance:d}),{success:!0,message:`Pushed changes for ${o}`}}catch(h){return{success:!1,error:h.message}}}));const a={description:"Get the Git status for a VFS repository.",parameters:SAe};this.unregisterCallbacks.push(t.registerTool("gitStatus",a,async({path:o},l)=>{const c=l==null?void 0:l.fsInstance;if(!c)return{success:!1,error:"Filesystem instance not available in context."};try{return await U$(o,{fsInstance:c}),{success:!0,message:`Status checked for ${o}`}}catch(d){return{success:!1,error:d.message}}}))}destroy(){this.unregisterCallbacks.forEach(t=>t()),this.unregisterCallbacks=[],console.log(`[${this.id}] Destroyed.`)}}const CAe=({module:e,popoverMaxSteps:t,setPopoverMaxSteps:n,className:r})=>{const s=e.getEnabledTools(),i=e.getSelectedItemId(),a=e.getSelectedItemType(),o=e.getGlobalDefaultMaxSteps(),l=dd(_=>_.tools),[c,d]=C.useState(""),h=C.useMemo(()=>Object.entries(l).map(([_,{definition:E,modId:k}])=>({name:_,description:E.description??"No description provided.",modId:k})).sort((_,E)=>_.name.localeCompare(E.name)),[l]),m=C.useMemo(()=>{const _=c.trim().toLowerCase();return _?h.filter(E=>E.name.toLowerCase().includes(_)||E.description.toLowerCase().includes(_)||E.modId.toLowerCase().includes(_)):h},[h,c]),g=C.useCallback((_,E)=>{e.setEnabledTools(k=>{const T=new Set(k);return E?T.add(_):T.delete(_),T})},[e]),v=C.useCallback(_=>{e.setEnabledTools(()=>_?new Set(h.map(E=>E.name)):new Set)},[h,e]),b=_=>{const E=_.target.value;if(E===""){n(null);return}const k=parseInt(E,10);if(isNaN(k))n(null);else{const T=Math.max(1,Math.min(20,k));n(T)}},w=t===null?"":String(t),x=a!=="conversation"||!i;return p.jsxs("div",{className:mt("p-4 h-[28rem] max-w-2xl space-y-3",r),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter tools...",value:c,onChange:_=>d(_.target.value),className:"pl-8 h-9",disabled:x})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(Ot,{className:"text-xs text-muted-foreground",children:[m.length," tools shown (",s.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(At,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:x||h.length===0,children:"Enable All"}),p.jsx(At,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:x||h.length===0||s.size===0,children:"Disable All"})]})]}),p.jsx(Gi,{className:"h-56 border rounded-md p-2 bg-background/50",children:x?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(ia,{id:`tool-switch-${_.name}`,checked:s.has(_.name),onCheckedChange:E=>g(_.name,E),className:"flex-shrink-0",disabled:x}),p.jsxs(Ot,{htmlFor:`tool-switch-${_.name}`,className:mt("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${_.name} (from ${_.modId})`,children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:_.description})]})]},_.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Ot,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(gn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:w,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(o??5),disabled:x}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})},kAe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=C.useState(!1),[s,i]=C.useState(e.getMaxStepsOverride()),a=e.getEnabledTools(),o=e.getMaxStepsOverride(),l=e.getIsStreaming(),c=e.getIsVisible();C.useEffect(()=>{i(e.getMaxStepsOverride())},[e.getMaxStepsOverride()]);const d=g=>{r(g),!g&&s!==e.getMaxStepsOverride()&&e.setMaxStepsOverride(s)},h=a.size>0||o!==null,m=l;return c?p.jsxs(io,{open:n,onOpenChange:d,children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(ao,{asChild:!0,children:p.jsx(At,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:m,"aria-label":"Configure Tools",children:p.jsx(Sf,{className:"h-4 w-4"})})})}),p.jsx(Wn,{side:"top",children:`Tools (${a.size} enabled)`})]})}),p.jsx(oo,{className:"w-auto p-0",align:"start",children:p.jsx(CAe,{module:e,popoverMaxSteps:s,setPopoverMaxSteps:i})})]}):null};class TAe{constructor(){Me(this,"id","core-tool-selector");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"transientEnabledTools",new Set);Me(this,"transientMaxStepsOverride",null);Me(this,"isStreaming",!1);Me(this,"isVisible",!0);Me(this,"selectedItemId",null);Me(this,"selectedItemType",null);Me(this,"allToolsCount",0);Me(this,"globalDefaultMaxSteps",5);Me(this,"notifyComponentUpdate",null);Me(this,"getEnabledTools",()=>this.transientEnabledTools);Me(this,"getMaxStepsOverride",()=>this.transientMaxStepsOverride);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"getIsVisible",()=>this.isVisible);Me(this,"getSelectedItemId",()=>this.selectedItemId);Me(this,"getSelectedItemType",()=>this.selectedItemType);Me(this,"getAllToolsCount",()=>this.allToolsCount);Me(this,"getGlobalDefaultMaxSteps",()=>this.globalDefaultMaxSteps);Me(this,"setEnabledTools",t=>{var n;this.transientEnabledTools=t(this.transientEnabledTools),(n=this.notifyComponentUpdate)==null||n.call(this)});Me(this,"setMaxStepsOverride",t=>{var n;this.transientMaxStepsOverride=t,(n=this.notifyComponentUpdate)==null||n.call(this)});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var o;this.loadInitialState(),this.updateVisibility(),(o=this.notifyComponentUpdate)==null||o.call(this);const n=t.on(zn.statusChanged,l=>{var c;typeof l=="object"&&l&&"status"in l&&this.isStreaming!==(l.status==="streaming")&&(this.isStreaming=l.status==="streaming",(c=this.notifyComponentUpdate)==null||c.call(this))}),r=t.on(Un.selectedModelChanged,()=>{var l;this.updateVisibility(),(l=this.notifyComponentUpdate)==null||l.call(this)}),s=t.on(ar.contextChanged,l=>{var c;this.selectedItemId=l.selectedItemId,this.selectedItemType=l.selectedItemType,this.updateVisibility(),(c=this.notifyComponentUpdate)==null||c.call(this)}),i=t.on(en.toolMaxStepsChanged,l=>{var c;typeof l=="object"&&l&&"steps"in l&&(this.globalDefaultMaxSteps=l.steps,(c=this.notifyComponentUpdate)==null||c.call(this))}),a=t.on(xr.toolsChanged,l=>{var c;if(l&&typeof l.tools=="object"){const d=Object.keys(l.tools).length;this.allToolsCount!==d&&(this.allToolsCount=d,this.updateVisibility(),(c=this.notifyComponentUpdate)==null||c.call(this))}});this.eventUnsubscribers.push(n,r,s,i,a)}loadInitialState(){this.isStreaming=Hn.getState().status==="streaming",this.selectedItemId=ir.getState().selectedItemId,this.selectedItemType=ir.getState().selectedItemType,this.allToolsCount=Object.keys(dd.getState().tools).length,this.globalDefaultMaxSteps=ur.getState().toolMaxSteps}updateVisibility(){var a,o;const{getSelectedModel:t}=gr.getState(),n=t(),r=this.allToolsCount>0,s=((o=(a=n==null?void 0:n.metadata)==null?void 0:a.supported_parameters)==null?void 0:o.includes("tools"))??!1,i=r&&s;this.isVisible!==i&&(this.isVisible=i)}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,triggerRenderer:()=>yt.createElement(kAe,{module:this}),getMetadata:()=>{if(this.transientEnabledTools.size>0||this.transientMaxStepsOverride!==null)return{enabledTools:Array.from(this.transientEnabledTools),...this.transientMaxStepsOverride!==null&&{maxSteps:this.transientMaxStepsOverride}}},clearOnSubmit:()=>{var r;let n=!1;this.transientEnabledTools.size>0&&(this.transientEnabledTools=new Set,n=!0),this.transientMaxStepsOverride!==null&&(this.transientMaxStepsOverride=null,n=!0),n&&((r=this.notifyComponentUpdate)==null||r.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}var l8=1,AAe=.9,RAe=.8,NAe=.17,xk=.1,_k=.999,IAe=.9999,jAe=.99,MAe=/[\\\/_+.#"@\[\(\{&]/,DAe=/[\\\/_+.#"@\[\(\{&]/g,OAe=/[\s-]/,VH=/[\s-]/g;function uA(e,t,n,r,s,i,a){if(i===t.length)return s===e.length?l8:jAe;var o=`${s},${i}`;if(a[o]!==void 0)return a[o];for(var l=r.charAt(i),c=n.indexOf(l,s),d=0,h,m,g,v;c>=0;)h=uA(e,t,n,r,c+1,i+1,a),h>d&&(c===s?h*=l8:MAe.test(e.charAt(c-1))?(h*=RAe,g=e.slice(s,c-1).match(DAe),g&&s>0&&(h*=Math.pow(_k,g.length))):OAe.test(e.charAt(c-1))?(h*=AAe,v=e.slice(s,c-1).match(VH),v&&s>0&&(h*=Math.pow(_k,v.length))):(h*=NAe,s>0&&(h*=Math.pow(_k,c-s))),e.charAt(c)!==t.charAt(i)&&(h*=IAe)),(h<xk&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(m=uA(e,t,n,r,c+1,i+2,a),m*xk>h&&(h=m*xk)),h>d&&(d=h),c=n.indexOf(l,c+1);return a[o]=d,d}function c8(e){return e.toLowerCase().replace(VH," ")}function PAe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,uA(e,t,c8(e),c8(t),0,0,{})}var Gg='[cmdk-group=""]',Sk='[cmdk-group-items=""]',FAe='[cmdk-group-heading=""]',HH='[cmdk-item=""]',u8=`${HH}:not([aria-disabled="true"])`,dA="cmdk-item-select",rp="data-value",LAe=(e,t,n)=>PAe(e,t,n),GH=C.createContext(void 0),_b=()=>C.useContext(GH),KH=C.createContext(void 0),lI=()=>C.useContext(KH),WH=C.createContext(void 0),ZH=C.forwardRef((e,t)=>{let n=sp(()=>{var Q,he;return{search:"",value:(he=(Q=e.value)!=null?Q:e.defaultValue)!=null?he:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=sp(()=>new Set),s=sp(()=>new Map),i=sp(()=>new Map),a=sp(()=>new Set),o=YH(e),{label:l,children:c,value:d,onValueChange:h,filter:m,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:w=!0,...x}=e,_=ei(),E=ei(),k=ei(),T=C.useRef(null),R=ZAe();Of(()=>{if(d!==void 0){let Q=d.trim();n.current.value=Q,M.emit()}},[d]),Of(()=>{R(6,V)},[]);let M=C.useMemo(()=>({subscribe:Q=>(a.current.add(Q),()=>a.current.delete(Q)),snapshot:()=>n.current,setState:(Q,he,Se)=>{var ce,je,De,Re;if(!Object.is(n.current[Q],he)){if(n.current[Q]=he,Q==="search")j(),P(),R(1,U);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let xe=document.getElementById(k);xe?xe.focus():(ce=document.getElementById(_))==null||ce.focus()}if(R(7,()=>{var xe;n.current.selectedItemId=(xe=$())==null?void 0:xe.id,M.emit()}),Se||R(5,V),((je=o.current)==null?void 0:je.value)!==void 0){let xe=he??"";(Re=(De=o.current).onValueChange)==null||Re.call(De,xe);return}}M.emit()}},emit:()=>{a.current.forEach(Q=>Q())}}),[]),I=C.useMemo(()=>({value:(Q,he,Se)=>{var ce;he!==((ce=i.current.get(Q))==null?void 0:ce.value)&&(i.current.set(Q,{value:he,keywords:Se}),n.current.filtered.items.set(Q,O(he,Se)),R(2,()=>{P(),M.emit()}))},item:(Q,he)=>(r.current.add(Q),he&&(s.current.has(he)?s.current.get(he).add(Q):s.current.set(he,new Set([Q]))),R(3,()=>{j(),P(),n.current.value||U(),M.emit()}),()=>{i.current.delete(Q),r.current.delete(Q),n.current.filtered.items.delete(Q);let Se=$();R(4,()=>{j(),(Se==null?void 0:Se.getAttribute("id"))===Q&&U(),M.emit()})}),group:Q=>(s.current.has(Q)||s.current.set(Q,new Set),()=>{i.current.delete(Q),s.current.delete(Q)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:_,inputId:k,labelId:E,listInnerRef:T}),[]);function O(Q,he){var Se,ce;let je=(ce=(Se=o.current)==null?void 0:Se.filter)!=null?ce:LAe;return Q?je(Q,n.current.search,he):0}function P(){if(!n.current.search||o.current.shouldFilter===!1)return;let Q=n.current.filtered.items,he=[];n.current.filtered.groups.forEach(ce=>{let je=s.current.get(ce),De=0;je.forEach(Re=>{let xe=Q.get(Re);De=Math.max(xe,De)}),he.push([ce,De])});let Se=T.current;re().sort((ce,je)=>{var De,Re;let xe=ce.getAttribute("id"),Fe=je.getAttribute("id");return((De=Q.get(Fe))!=null?De:0)-((Re=Q.get(xe))!=null?Re:0)}).forEach(ce=>{let je=ce.closest(Sk);je?je.appendChild(ce.parentElement===je?ce:ce.closest(`${Sk} > *`)):Se.appendChild(ce.parentElement===Se?ce:ce.closest(`${Sk} > *`))}),he.sort((ce,je)=>je[1]-ce[1]).forEach(ce=>{var je;let De=(je=T.current)==null?void 0:je.querySelector(`${Gg}[${rp}="${encodeURIComponent(ce[0])}"]`);De==null||De.parentElement.appendChild(De)})}function U(){let Q=re().find(Se=>Se.getAttribute("aria-disabled")!=="true"),he=Q==null?void 0:Q.getAttribute(rp);M.setState("value",he||void 0)}function j(){var Q,he,Se,ce;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let je=0;for(let De of r.current){let Re=(he=(Q=i.current.get(De))==null?void 0:Q.value)!=null?he:"",xe=(ce=(Se=i.current.get(De))==null?void 0:Se.keywords)!=null?ce:[],Fe=O(Re,xe);n.current.filtered.items.set(De,Fe),Fe>0&&je++}for(let[De,Re]of s.current)for(let xe of Re)if(n.current.filtered.items.get(xe)>0){n.current.filtered.groups.add(De);break}n.current.filtered.count=je}function V(){var Q,he,Se;let ce=$();ce&&(((Q=ce.parentElement)==null?void 0:Q.firstChild)===ce&&((Se=(he=ce.closest(Gg))==null?void 0:he.querySelector(FAe))==null||Se.scrollIntoView({block:"nearest"})),ce.scrollIntoView({block:"nearest"}))}function $(){var Q;return(Q=T.current)==null?void 0:Q.querySelector(`${HH}[aria-selected="true"]`)}function re(){var Q;return Array.from(((Q=T.current)==null?void 0:Q.querySelectorAll(u8))||[])}function J(Q){let he=re()[Q];he&&M.setState("value",he.getAttribute(rp))}function te(Q){var he;let Se=$(),ce=re(),je=ce.findIndex(Re=>Re===Se),De=ce[je+Q];(he=o.current)!=null&&he.loop&&(De=je+Q<0?ce[ce.length-1]:je+Q===ce.length?ce[0]:ce[je+Q]),De&&M.setState("value",De.getAttribute(rp))}function X(Q){let he=$(),Se=he==null?void 0:he.closest(Gg),ce;for(;Se&&!ce;)Se=Q>0?KAe(Se,Gg):WAe(Se,Gg),ce=Se==null?void 0:Se.querySelector(u8);ce?M.setState("value",ce.getAttribute(rp)):te(Q)}let ie=()=>J(re().length-1),Z=Q=>{Q.preventDefault(),Q.metaKey?ie():Q.altKey?X(1):te(1)},ee=Q=>{Q.preventDefault(),Q.metaKey?J(0):Q.altKey?X(-1):te(-1)};return C.createElement(rn.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:Q=>{var he;(he=x.onKeyDown)==null||he.call(x,Q);let Se=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||Se))switch(Q.key){case"n":case"j":{w&&Q.ctrlKey&&Z(Q);break}case"ArrowDown":{Z(Q);break}case"p":case"k":{w&&Q.ctrlKey&&ee(Q);break}case"ArrowUp":{ee(Q);break}case"Home":{Q.preventDefault(),J(0);break}case"End":{Q.preventDefault(),ie();break}case"Enter":{Q.preventDefault();let ce=$();if(ce){let je=new Event(dA);ce.dispatchEvent(je)}}}}},C.createElement("label",{"cmdk-label":"",htmlFor:I.inputId,id:I.labelId,style:XAe},l),P_(e,Q=>C.createElement(KH.Provider,{value:M},C.createElement(GH.Provider,{value:I},Q))))}),$Ae=C.forwardRef((e,t)=>{var n,r;let s=ei(),i=C.useRef(null),a=C.useContext(WH),o=_b(),l=YH(e),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:a==null?void 0:a.forceMount;Of(()=>{if(!c)return o.item(s,a==null?void 0:a.id)},[c]);let d=XH(s,i,[e.value,e.children,i],e.keywords),h=lI(),m=cd(R=>R.value&&R.value===d.current),g=cd(R=>c||o.filter()===!1?!0:R.search?R.filtered.items.get(s)>0:!0);C.useEffect(()=>{let R=i.current;if(!(!R||e.disabled))return R.addEventListener(dA,v),()=>R.removeEventListener(dA,v)},[g,e.onSelect,e.disabled]);function v(){var R,M;b(),(M=(R=l.current).onSelect)==null||M.call(R,d.current)}function b(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:w,value:x,onSelect:_,forceMount:E,keywords:k,...T}=e;return C.createElement(rn.div,{ref:Rc(i,t),...T,id:s,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!m,"data-disabled":!!w,"data-selected":!!m,onPointerMove:w||o.getDisablePointerSelection()?void 0:b,onClick:w?void 0:v},e.children)}),BAe=C.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:s,...i}=e,a=ei(),o=C.useRef(null),l=C.useRef(null),c=ei(),d=_b(),h=cd(g=>s||d.filter()===!1?!0:g.search?g.filtered.groups.has(a):!0);Of(()=>d.group(a),[]),XH(a,o,[e.value,e.heading,l]);let m=C.useMemo(()=>({id:a,forceMount:s}),[s]);return C.createElement(rn.div,{ref:Rc(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&C.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),P_(e,g=>C.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},C.createElement(WH.Provider,{value:m},g))))}),zAe=C.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,s=C.useRef(null),i=cd(a=>!a.search);return!n&&!i?null:C.createElement(rn.div,{ref:Rc(s,t),...r,"cmdk-separator":"",role:"separator"})}),UAe=C.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,s=e.value!=null,i=lI(),a=cd(c=>c.search),o=cd(c=>c.selectedItemId),l=_b();return C.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),C.createElement(rn.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:s?e.value:a,onChange:c=>{s||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),qAe=C.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...s}=e,i=C.useRef(null),a=C.useRef(null),o=cd(c=>c.selectedItemId),l=_b();return C.useEffect(()=>{if(a.current&&i.current){let c=a.current,d=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return m.observe(c),()=>{cancelAnimationFrame(h),m.unobserve(c)}}},[]),C.createElement(rn.div,{ref:Rc(i,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},P_(e,c=>C.createElement("div",{ref:Rc(a,l.listInnerRef),"cmdk-list-sizer":""},c)))}),VAe=C.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:i,container:a,...o}=e;return C.createElement(Zq,{open:n,onOpenChange:r},C.createElement(Yq,{container:a},C.createElement(Xq,{"cmdk-overlay":"",className:s}),C.createElement(Jq,{"aria-label":e.label,"cmdk-dialog":"",className:i},C.createElement(ZH,{ref:t,...o}))))}),HAe=C.forwardRef((e,t)=>cd(n=>n.filtered.count===0)?C.createElement(rn.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),GAe=C.forwardRef((e,t)=>{let{progress:n,children:r,label:s="Loading...",...i}=e;return C.createElement(rn.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},P_(e,a=>C.createElement("div",{"aria-hidden":!0},a)))}),Tm=Object.assign(ZH,{List:qAe,Item:$Ae,Input:UAe,Group:BAe,Separator:zAe,Dialog:VAe,Empty:HAe,Loading:GAe});function KAe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function WAe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function YH(e){let t=C.useRef(e);return Of(()=>{t.current=e}),t}var Of=typeof window>"u"?C.useEffect:C.useLayoutEffect;function sp(e){let t=C.useRef();return t.current===void 0&&(t.current=e()),t}function cd(e){let t=lI(),n=()=>e(t.snapshot());return C.useSyncExternalStore(t.subscribe,n,n)}function XH(e,t,n,r=[]){let s=C.useRef(),i=_b();return Of(()=>{var a;let o=(()=>{var c;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(c=d.current.textContent)==null?void 0:c.trim():s.current}})(),l=r.map(c=>c.trim());i.value(e,o,l),(a=t.current)==null||a.setAttribute(rp,o),s.current=o}),s}var ZAe=()=>{let[e,t]=C.useState(),n=sp(()=>new Map);return Of(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,s)=>{n.current.set(r,s),t({})}};function YAe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function P_({asChild:e,children:t},n){return e&&C.isValidElement(t)?C.cloneElement(YAe(t),{ref:t.ref},n(t.props.children)):n(t)}var XAe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function JH({className:e,...t}){return p.jsx(Tm,{"data-slot":"command",className:mt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function QH({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(Qs,{className:"size-4 shrink-0 opacity-50"}),p.jsx(Tm.Input,{"data-slot":"command-input",className:mt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function eG({className:e,...t}){return p.jsx(Tm.List,{"data-slot":"command-list",className:mt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function tG({...e}){return p.jsx(Tm.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function nG({className:e,...t}){return p.jsx(Tm.Group,{"data-slot":"command-group",className:mt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function rG({className:e,...t}){return p.jsx(Tm.Item,{"data-slot":"command-item",className:mt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const F_=yt.memo(({module:e,value:t,onChange:n,className:r,disabled:s})=>{const[,i]=C.useState({});C.useEffect(()=>{if(e)return e.setNotifyCallback(()=>i({})),()=>e.setNotifyCallback(null)},[e]);const a=!!e,o=a?e.selectedModelId:t,l=a?e.isStreaming:s,c=a?e.isLoadingProviders:!1,d=a?e.globallyEnabledModels:[],h=gr($=>$.dbProviderConfigs),[m,g]=C.useState(!1),[v,b]=C.useState(!1),[w,x]=C.useState(""),[_,E]=C.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[k,T]=C.useState(()=>new Set(h.map($=>$.id)));C.useEffect(()=>{T(new Set(h.map($=>$.id)))},[h]);const R=C.useMemo(()=>{let $=d;k.size!==h.length&&($=d.filter(te=>k.has(te.providerId)));let re=$;if(w.trim()){const te=w.toLowerCase();re=$.filter(X=>X.name.toLowerCase().includes(te)||X.providerName.toLowerCase().includes(te)||X.id.toLowerCase().includes(te))}const J=Object.entries(_).filter(([,te])=>te).map(([te])=>te);return J.length===0?re:re.filter(te=>{var Z,ee;const X=new Set(((Z=te.metadataSummary)==null?void 0:Z.supported_parameters)??[]),ie=new Set(((ee=te.metadataSummary)==null?void 0:ee.input_modalities)??[]);return J.every(Q=>{switch(Q){case"reasoning":return X.has("reasoning");case"webSearch":return X.has("web_search")||X.has("web_search_options");case"tools":return X.has("tools");case"multimodal":return Array.from(ie).some(he=>he!=="text");default:return!0}})})},[d,w,_,k,h.length]),M=C.useMemo(()=>d.find($=>$.id===o),[d,o]),I=C.useCallback($=>{const re=$===o?null:$;a&&e?e.handleSelectionChange(re):n&&n(re),g(!1),x("")},[a,e,n,o]),O=$=>{E(re=>({...re,[$]:!re[$]}))},P=C.useCallback(($,re)=>{T(J=>{const te=new Set(J);return re?te.add($):te.delete($),te})},[]);if(c)return p.jsx(cr,{className:mt("h-9 w-[250px]",r)});const U=Object.values(_).filter(Boolean).length,j=k.size!==h.length?1:0,V=U+j;return p.jsxs(io,{open:m,onOpenChange:g,children:[p.jsx(ao,{asChild:!0,children:p.jsxs(At,{variant:"outline",role:"combobox","aria-expanded":m,disabled:l||d.length===0,className:mt("w-auto justify-between h-9 text-sm font-normal relative",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:M?`${M.name} (${M.providerName})`:"Select Model..."}),p.jsx(e1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),V>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:V})]})}),p.jsx(oo,{className:"w-[--radix-popover-trigger-width] p-0",style:{maxHeight:"min(40vh, 400px)",overflow:"hidden"},children:p.jsxs(JH,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(Qs,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(QH,{placeholder:"Search model...",value:w,onValueChange:x,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsxs(io,{open:v,onOpenChange:b,children:[p.jsx(ao,{asChild:!0,children:p.jsx(fn,{tooltipText:"Filter by Provider",icon:p.jsx(n1,{}),variant:j>0?"secondary":"ghost",className:mt("h-7 w-7 relative",j>0&&"text-primary"),"aria-label":"Filter by provider",children:j>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1 text-[10px] font-semibold leading-none text-white bg-primary rounded-full",children:k.size})})}),p.jsx(oo,{className:"w-60 p-0",children:p.jsxs("div",{className:"p-2 space-y-1",children:[p.jsx(Ot,{className:"text-xs px-2 font-semibold",children:"Filter by Provider"}),p.jsx(Gi,{className:"h-48",children:h.map($=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(Ol,{id:`selector-provider-filter-${$.id}`,checked:k.has($.id),onCheckedChange:re=>P($.id,!!re)}),p.jsxs(Ot,{htmlFor:`selector-provider-filter-${$.id}`,className:"text-sm font-normal cursor-pointer",children:[$.name," (",$.type,")"]})]},$.id))})]})})]}),p.jsx(fn,{tooltipText:"Filter: Reasoning",icon:p.jsx(Al,{}),onClick:()=>O("reasoning"),variant:_.reasoning?"secondary":"ghost",className:mt("h-7 w-7",_.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),p.jsx(fn,{tooltipText:"Filter: Web Search",icon:p.jsx(Qs,{}),onClick:()=>O("webSearch"),variant:_.webSearch?"secondary":"ghost",className:mt("h-7 w-7",_.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),p.jsx(fn,{tooltipText:"Filter: Tools",icon:p.jsx(Sf,{}),onClick:()=>O("tools"),variant:_.tools?"secondary":"ghost",className:mt("h-7 w-7",_.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),p.jsx(fn,{tooltipText:"Filter: Multimodal",icon:p.jsx(_f,{}),onClick:()=>O("multimodal"),variant:_.multimodal?"secondary":"ghost",className:mt("h-7 w-7",_.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),p.jsxs(eG,{className:"max-h-[calc(min(40vh,400px)-70px)] overflow-y-auto",children:[p.jsx(tG,{children:V>0?"No models match all active filters.":d.length===0?"No models enabled globally.":"No model found."}),p.jsx(nG,{children:R.map($=>{var ee,Q;const re=new Set(((ee=$.metadataSummary)==null?void 0:ee.supported_parameters)??[]),J=new Set(((Q=$.metadataSummary)==null?void 0:Q.input_modalities)??[]),te=re.has("reasoning"),X=re.has("web_search")||re.has("web_search_options"),ie=re.has("tools"),Z=Array.from(J).some(he=>he!=="text");return p.jsxs(rG,{value:$.id,onSelect:I,className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center min-w-0",children:[p.jsx(ni,{className:mt("mr-2 h-4 w-4 flex-shrink-0",o===$.id?"opacity-100":"opacity-0")}),p.jsxs("span",{className:"truncate",children:[$.name," (",$.providerName,")"]})]}),p.jsxs("div",{className:"ml-auto flex items-center gap-1 pl-2 flex-shrink-0",children:[te&&p.jsx(Al,{className:"h-3 w-3 text-blue-500"}),X&&p.jsx(Qs,{className:"h-3 w-3 text-green-500"}),ie&&p.jsx(Sf,{className:"h-3 w-3 text-orange-500"}),Z&&p.jsx(_f,{className:"h-3 w-3 text-purple-500"})]})]},$.id)})})]})]})})]})});F_.displayName="GlobalModelSelector";const JAe=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:s,effectiveModelId:i,isSaving:a})=>{var d;const{getAvailableModelListItems:o}=gr(En(h=>({getAvailableModelListItems:h.getAvailableModelListItems}))),c=((d=o().find(h=>h.id===i))==null?void 0:d.name)||i;return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),p.jsx(kd,{id:"project-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,100))||"Default"}${s&&s.length>100?"...":""}`,value:e??"",onChange:h=>t(h.target.value||null),rows:6,disabled:a,className:"mt-1"}),p.jsx(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"project-model-selector",children:"Default Model (Overrides Parent/Global)"}),p.jsx(F_,{value:n,onChange:r,disabled:a,className:"w-full mt-1"}),p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:a||n===null,children:["Use Inherited/Default (",c||"Global Default",")"]})]})]})},QAe=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:s,setTopP:i,topK:a,setTopK:o,presencePenalty:l,setPresencePenalty:c,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:m,setLocalTemp:g,localTopP:v,setLocalTopP:b,localPresence:w,setLocalPresence:x,localFrequency:_,setLocalFrequency:E,effectiveTemperature:k,effectiveMaxTokens:T,effectiveTopP:R,effectiveTopK:M,effectivePresencePenalty:I,effectiveFrequencyPenalty:O,isSaving:P})=>{const U=C.useCallback((V,$)=>{const re=$.target.value,J=re===""?null:parseInt(re,10);(re===""||!isNaN(J)&&J!==null)&&V(J)},[]),j=C.useCallback((V,$)=>{V($[0])},[]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),p.jsx(zi,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:V=>g(V[0]),onValueCommit:V=>j(t,V),disabled:P}),p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:P||e===null,children:["Use Inherited/Default (",(k==null?void 0:k.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),p.jsx(zi,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:V=>b(V[0]),onValueCommit:V=>j(i,V),disabled:P}),p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:P||s===null,children:["Use Inherited/Default (",(R==null?void 0:R.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(gn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${T??"Default"}`,value:n??"",onChange:V=>U(r,V),min:"1",className:"h-8 text-xs",disabled:P}),p.jsx(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:P||n===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),p.jsx(gn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${M??"Default"}`,value:a??"",onChange:V=>U(o,V),min:"1",className:"h-8 text-xs",disabled:P}),p.jsx(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:P||a===null,children:"Use Inherited/Default"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",w.toFixed(2),")"]}),p.jsx(zi,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[w],onValueChange:V=>x(V[0]),onValueCommit:V=>j(c,V),disabled:P}),p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c(null),disabled:P||l===null,children:["Use Inherited/Default (",(I==null?void 0:I.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",_.toFixed(2),")"]}),p.jsx(zi,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:V=>E(V[0]),onValueCommit:V=>j(h,V),disabled:P}),p.jsxs(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:P||d===null,children:["Use Inherited/Default (",(O==null?void 0:O.toFixed(2))??"N/A",")"]})]})]})},eRe=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:s})=>{var a;const i=((a=r.find(o=>o.id===n))==null?void 0:a.name)??"None";return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(Cc,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:s||r.length===0,children:[p.jsx(Tc,{id:"project-sync-repo",children:p.jsx(kc,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),p.jsxs(Ac,{children:[p.jsx(Is,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>p.jsx(Is,{value:o.id,children:o.name},o.id))]})]}),p.jsx(At,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]})})},tRe=({projectId:e})=>{const t=C.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(oI,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Ot,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx(Ot,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx(Kc,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:mt("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},nRe=({allRules:e,selectedRuleIds:t,onSelectionChange:n,disabled:r=!1})=>{const[s,i]=C.useState(""),a=C.useMemo(()=>{const o=s.toLowerCase();return o?e.filter(l=>l.name.toLowerCase().includes(o)||l.content.toLowerCase().includes(o)||l.type.toLowerCase().includes(o)):e},[e,s]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter rules...",value:s,onChange:o=>i(o.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(Gi,{className:"h-48 border rounded-md p-2 bg-background/50",children:a.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No rules defined globally.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:a.map(o=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Ol,{id:`project-default-rule-${o.id}`,checked:t.has(o.id),onCheckedChange:l=>n(o.id,!!l),className:"mt-0.5",disabled:r}),p.jsxs(Ot,{htmlFor:`project-default-rule-${o.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:o.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",o.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",o.content]})]})]})},o.id))})})]})},rRe=({defaultRuleIds:e,setDefaultRuleIds:t,isSaving:n,allRules:r})=>{const s=C.useMemo(()=>new Set(e??[]),[e]),i=C.useCallback((a,o)=>{const l=new Set(s);o?l.add(a):l.delete(a);const c=Array.from(l);t(c.length>0?c:null)},[s,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(Ot,{children:"Default Rules for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select rules that will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(nRe,{allRules:r,selectedRuleIds:s,onSelectionChange:i,disabled:n})]})},sRe=({allTags:e,selectedTagIds:t,onSelectionChange:n,disabled:r=!1,getRulesForTag:s})=>{const[i,a]=C.useState(""),o=C.useMemo(()=>{const l=i.toLowerCase();return l?e.filter(c=>{var d;return c.name.toLowerCase().includes(l)||((d=c.description)==null?void 0:d.toLowerCase().includes(l))}):e},[e,i]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter tags...",value:i,onChange:l=>a(l.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(Gi,{className:"h-48 border rounded-md p-2 bg-background/50",children:o.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No tags defined globally.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:o.map(l=>{const c=s(l.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Ol,{id:`project-default-tag-${l.id}`,checked:t.has(l.id),onCheckedChange:d=>n(l.id,!!d),className:"mt-0.5",disabled:r}),p.jsxs(Ot,{htmlFor:`project-default-tag-${l.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:l.name}),l.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:l.description}),c.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",c.map(d=>d.name).join(", ")]})]})]})},l.id)})})})]})},iRe=({defaultTagIds:e,setDefaultTagIds:t,isSaving:n,allTags:r,getRulesForTag:s})=>{const i=C.useMemo(()=>new Set(e??[]),[e]),a=C.useCallback((o,l)=>{const c=new Set(i);l?c.add(o):c.delete(o);const d=Array.from(c);t(d.length>0?d:null)},[i,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(Ot,{children:"Default Tags for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select tags whose rules will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(sRe,{allTags:r,selectedTagIds:i,onSelectionChange:a,disabled:n,getRulesForTag:s})]})},aRe=({isOpen:e,onClose:t,projectId:n,module:r})=>{const{getProjectById:s,updateProject:i}=gi(En(ue=>({getProjectById:ue.getProjectById,updateProject:ue.updateProject}))),a=gi(ue=>ue.getEffectiveProjectSettings),o=ir(ue=>ue.syncRepos),l=ur(En(ue=>({globalSystemPrompt:ue.globalSystemPrompt,temperature:ue.temperature,maxTokens:ue.maxTokens,topP:ue.topP,topK:ue.topK,presencePenalty:ue.presencePenalty,frequencyPenalty:ue.frequencyPenalty}))),c=gr(ue=>ue.selectedModelId),d=Ls(ue=>ue.setVfsKey),[h,m]=C.useState(null),[g,v]=C.useState(null),[b,w]=C.useState(null),[x,_]=C.useState(null),[E,k]=C.useState(null),[T,R]=C.useState(null),[M,I]=C.useState(null),[O,P]=C.useState(null),[U,j]=C.useState(null),[V,$]=C.useState(null),[re,J]=C.useState(null),[te,X]=C.useState(.7),[ie,Z]=C.useState(1),[ee,Q]=C.useState(0),[he,Se]=C.useState(0),[ce,je]=C.useState(!1),[De,Re]=C.useState("prompt"),{project:xe,effectiveSettings:Fe}=C.useMemo(()=>{const ue=n?s(n):null,ke=n?a(n):null;return{project:ue,effectiveSettings:ke}},[n,s,a]),st=C.useCallback(ue=>{var ae;if(!ue)return null;const ke=s(ue);return ke?((ae=ke.metadata)==null?void 0:ae.syncRepoId)!==void 0?ke.metadata.syncRepoId:st(ke.parentId):null},[s]),He=n?st(n):null;C.useEffect(()=>{var ue;e&&n&&xe&&Fe?(d(n),m(xe.systemPrompt??null),v(xe.modelId??null),w(xe.temperature??null),_(xe.maxTokens??null),k(xe.topP??null),R(xe.topK??null),I(xe.presencePenalty??null),P(xe.frequencyPenalty??null),j(((ue=xe.metadata)==null?void 0:ue.syncRepoId)??null),$(xe.defaultTagIds??null),J(xe.defaultRuleIds??null),X(Fe.temperature??l.temperature),Z(Fe.topP??l.topP??1),Q(Fe.presencePenalty??l.presencePenalty??0),Se(Fe.frequencyPenalty??l.frequencyPenalty??0),Re("prompt")):e||(d(null),m(null),v(null),w(null),_(null),k(null),R(null),I(null),P(null),j(null),$(null),J(null))},[e,n,xe,Fe,l,d]),C.useEffect(()=>X(b??(Fe==null?void 0:Fe.temperature)??l.temperature),[b,Fe,l.temperature]),C.useEffect(()=>Z(E??(Fe==null?void 0:Fe.topP)??l.topP??1),[E,Fe,l.topP]),C.useEffect(()=>Q(M??(Fe==null?void 0:Fe.presencePenalty)??l.presencePenalty??0),[M,Fe,l.presencePenalty]),C.useEffect(()=>Se(O??(Fe==null?void 0:Fe.frequencyPenalty)??l.frequencyPenalty??0),[O,Fe,l.frequencyPenalty]);const Ne=async()=>{if(!(!n||!xe)){je(!0);try{const ue=xe.parentId?a(xe.parentId):{systemPrompt:l.globalSystemPrompt,modelId:c,temperature:l.temperature,maxTokens:l.maxTokens,topP:l.topP,topK:l.topK,presencePenalty:l.presencePenalty,frequencyPenalty:l.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null},ke=xe.parentId?st(xe.parentId):null,ae={},oe={...xe.metadata??{}};h!==ue.systemPrompt?ae.systemPrompt=h:ae.systemPrompt=void 0,g!==ue.modelId?ae.modelId=g:ae.modelId=void 0,b!==ue.temperature?ae.temperature=b:ae.temperature=void 0,x!==ue.maxTokens?ae.maxTokens=x:ae.maxTokens=void 0,E!==ue.topP?ae.topP=E:ae.topP=void 0,T!==ue.topK?ae.topK=T:ae.topK=void 0,M!==ue.presencePenalty?ae.presencePenalty=M:ae.presencePenalty=void 0,O!==ue.frequencyPenalty?ae.frequencyPenalty=O:ae.frequencyPenalty=void 0,U!==ke?oe.syncRepoId=U:delete oe.syncRepoId,JSON.stringify(V)!==JSON.stringify(ue.defaultTagIds)?ae.defaultTagIds=V:ae.defaultTagIds=void 0,JSON.stringify(re)!==JSON.stringify(ue.defaultRuleIds)?ae.defaultRuleIds=re:ae.defaultRuleIds=void 0,ae.metadata=oe,await i(n,ae),ze.success(`Project "${xe.name}" settings updated.`),t()}catch(ue){ze.error("Failed to save project settings."),console.error("Failed to save project settings:",ue)}finally{je(!1)}}},H=C.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(JAe,{systemPrompt:h,setSystemPrompt:m,modelId:g,setModelId:v,effectiveSystemPrompt:(Fe==null?void 0:Fe.systemPrompt)??l.globalSystemPrompt,effectiveModelId:(Fe==null?void 0:Fe.modelId)??c,isSaving:ce})},{value:"params",label:"Parameters",content:p.jsx(QAe,{temperature:b,setTemperature:w,maxTokens:x,setMaxTokens:_,topP:E,setTopP:k,topK:T,setTopK:R,presencePenalty:M,setPresencePenalty:I,frequencyPenalty:O,setFrequencyPenalty:P,localTemp:te,setLocalTemp:X,localTopP:ie,setLocalTopP:Z,localPresence:ee,setLocalPresence:Q,localFrequency:he,setLocalFrequency:Se,effectiveTemperature:(Fe==null?void 0:Fe.temperature)??l.temperature,effectiveMaxTokens:(Fe==null?void 0:Fe.maxTokens)??l.maxTokens,effectiveTopP:(Fe==null?void 0:Fe.topP)??l.topP,effectiveTopK:(Fe==null?void 0:Fe.topK)??l.topK,effectivePresencePenalty:(Fe==null?void 0:Fe.presencePenalty)??l.presencePenalty,effectiveFrequencyPenalty:(Fe==null?void 0:Fe.frequencyPenalty)??l.frequencyPenalty,isSaving:ce})},{value:"rules-tags",label:"Rules & Tags",content:p.jsxs("div",{className:"space-y-6",children:[p.jsx(rRe,{defaultRuleIds:re,setDefaultRuleIds:J,isSaving:ce,allRules:r.getAllRules()}),p.jsx(iRe,{defaultTagIds:V,setDefaultTagIds:$,isSaving:ce,allTags:r.getAllTags(),getRulesForTag:r.getRulesForTag})]})},{value:"sync",label:"Sync",content:p.jsx(eRe,{syncRepoId:U,setSyncRepoId:j,effectiveSyncRepoId:He,syncRepos:o,isSaving:ce})},{value:"vfs",label:"Filesystem",content:p.jsx(tRe,{projectId:n,projectName:(xe==null?void 0:xe.name)??null,isSaving:ce})}],[h,g,b,x,E,T,M,O,U,V,re,Fe,l,c,ce,te,ie,ee,he,He,o,n,xe==null?void 0:xe.name,r]);return p.jsx(__,{open:e,onOpenChange:t,children:p.jsxs(S_,{className:mt("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(E_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs(k_,{children:["Project Settings: ",xe==null?void 0:xe.name]}),p.jsx(T_,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx(Kc,{tabs:H,initialValue:De,onValueChange:Re,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsxs(C_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(At,{variant:"outline",onClick:t,disabled:ce,children:"Cancel"}),p.jsxs(At,{onClick:Ne,disabled:ce,children:[ce&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};class oRe{constructor(){Me(this,"id","core-project-settings");Me(this,"modalId","projectSettingsModal");Me(this,"unregisterModalProviderCallback",null);Me(this,"modApiRef",null);Me(this,"eventUnsubscribers",[]);Me(this,"allRules",[]);Me(this,"allTags",[]);Me(this,"tagRuleLinks",[]);Me(this,"getAllRules",()=>this.allRules);Me(this,"getAllTags",()=>this.allTags);Me(this,"getRulesForTag",t=>{const n=new Set(this.tagRuleLinks.filter(r=>r.tagId===t).map(r=>r.ruleId));return this.allRules.filter(r=>n.has(r.id))});Me(this,"openModal",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(ar.openModalRequest,{modalId:this.modalId,targetId:t,initialTab:n})});Me(this,"closeModal",()=>{var t;(t=this.modApiRef)==null||t.emit(ar.closeModalRequest,{modalId:this.modalId})})}async initialize(t){this.modApiRef=t;const n=t.on(hr.dataLoaded,r=>{r&&(this.allRules=r.rules||[],this.allTags=r.tags||[],this.tagRuleLinks=(r.links||[]).map(s=>({tagId:s.tagId,ruleId:s.ruleId})))});this.eventUnsubscribers.push(n),t.emit(hr.loadRulesAndTagsRequest,void 0),console.log(`[${this.id}] Initialized.`)}register(t){if(this.modApiRef=t,this.unregisterModalProviderCallback){console.warn(`[${this.id}] Modal provider already registered. Skipping.`);return}this.unregisterModalProviderCallback=t.registerModalProvider(this.modalId,n=>yt.createElement(aRe,{isOpen:n.isOpen,onClose:n.onClose,projectId:n.targetId||null,module:this})),console.log(`[${this.id}] Modal provider registered for ${this.modalId}.`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterModalProviderCallback&&(this.unregisterModalProviderCallback(),this.unregisterModalProviderCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}class lRe{constructor(){Me(this,"id","core-global-model-selector");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"selectedModelId",null);Me(this,"isStreaming",!1);Me(this,"isLoadingProviders",!0);Me(this,"globallyEnabledModels",[]);Me(this,"notifyComponentUpdate",null);Me(this,"handleSelectionChange",t=>{var n,r;(n=this.modApiRef)==null||n.emit(Un.selectModelRequest,{modelId:t}),(r=this.modApiRef)==null||r.emit(Nn.setModelIdRequest,{id:t})});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t;const n=gr.getState();this.isLoadingProviders=n.isLoading,this.selectedModelId=n.selectedModelId,this.isStreaming=Hn.getState().status==="streaming",this.isLoadingProviders||(this.globallyEnabledModels=n.getGloballyEnabledModelDefinitions());const r=t.on(zn.statusChanged,o=>{var l;if(typeof o=="object"&&o&&"status"in o){const c=o.status==="streaming";this.isStreaming!==c&&(this.isStreaming=c,(l=this.notifyComponentUpdate)==null||l.call(this))}}),s=t.on(Un.selectedModelChanged,o=>{var l,c;typeof o=="object"&&o&&"modelId"in o&&this.selectedModelId!==o.modelId&&(this.selectedModelId=o.modelId,(l=this.modApiRef)==null||l.emit(Nn.setModelIdRequest,{id:o.modelId}),(c=this.notifyComponentUpdate)==null||c.call(this))}),i=t.on(Un.globallyEnabledModelsUpdated,o=>{var h,m;let l=!1;JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(o.models)&&(this.globallyEnabledModels=o.models,l=!0);const c=gr.getState().isLoading;this.isLoadingProviders!==c&&(this.isLoadingProviders=c,l=!0);const d=gr.getState().selectedModelId;this.selectedModelId!==d&&(this.selectedModelId=d,(h=this.modApiRef)==null||h.emit(Nn.setModelIdRequest,{id:this.selectedModelId}),l=!0),l&&((m=this.notifyComponentUpdate)==null||m.call(this))}),a=t.on(Un.initialDataLoaded,()=>{var d,h;const o=gr.getState();let l=!1;this.isLoadingProviders!==o.isLoading&&(this.isLoadingProviders=o.isLoading,l=!0),this.selectedModelId!==o.selectedModelId&&(this.selectedModelId=o.selectedModelId,(d=this.modApiRef)==null||d.emit(Nn.setModelIdRequest,{id:this.selectedModelId}),l=!0);const c=o.getGloballyEnabledModelDefinitions();JSON.stringify(this.globallyEnabledModels)!==JSON.stringify(c)&&(this.globallyEnabledModels=c,l=!0),l&&((h=this.notifyComponentUpdate)==null||h.call(this))});this.eventUnsubscribers.push(r,s,i,a)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>this.isLoadingProviders?"loading":"ready",triggerRenderer:()=>yt.createElement(F_,{module:this})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const cRe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=C.useState(!1),[s,i]=C.useState(e.getTurnSystemPrompt()),a=e.getEffectiveSystemPrompt(),o=e.getIsStreaming(),l=e.getTurnSystemPrompt();C.useEffect(()=>{n&&i(e.getTurnSystemPrompt())},[n,e]),C.useEffect(()=>{const g=e.getTurnSystemPrompt();s!==g&&i(g)},[e.getTurnSystemPrompt(),s]);const c=C.useCallback(()=>{e.setTurnSystemPrompt(s.trim()),r(!1)},[s,e]),d=C.useCallback(()=>{i(""),e.setTurnSystemPrompt(""),r(!1)},[e]),h=g=>{g&&i(e.getTurnSystemPrompt()),r(g)},m=l.trim().length>0;return p.jsxs(io,{open:n,onOpenChange:h,children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(ao,{asChild:!0,children:p.jsx(At,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:o,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(JY,{className:"h-4 w-4"})})})}),p.jsx(Wn,{side:"top",children:m?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs(oo,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx(Ot,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx(kd,{id:"turn-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,50))||"Default"}${a&&a.length>50?"...":""}`,value:s,onChange:g=>i(g.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(At,{variant:"outline",size:"sm",onClick:d,disabled:!s.trim(),children:"Clear Override"}),p.jsx(At,{size:"sm",onClick:c,children:"Set for Next Turn"})]})]})]})};class uRe{constructor(){Me(this,"id","core-system-prompt");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"turnSystemPromptValue","");Me(this,"effectiveSystemPrompt",null);Me(this,"isStreaming",!1);Me(this,"notifyComponentUpdate",null);Me(this,"getTurnSystemPrompt",()=>this.turnSystemPromptValue);Me(this,"getEffectiveSystemPrompt",()=>this.effectiveSystemPrompt);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"setTurnSystemPrompt",t=>{var n;this.turnSystemPromptValue!==t&&(this.turnSystemPromptValue=t,(n=this.notifyComponentUpdate)==null||n.call(this))});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isStreaming=Hn.getState().status==="streaming",this.updateEffectivePrompt();const n=t.on(zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(ar.contextChanged,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(pl.updated,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)}),i=t.on(en.globalSystemPromptChanged,()=>{var a;this.updateEffectivePrompt(),(a=this.notifyComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(n,r,s,i)}updateEffectivePrompt(){var a;const t=ir.getState(),n=gi.getState(),r=ur.getState(),s=t.selectedItemType==="project"?t.selectedItemId:t.selectedItemType==="conversation"?((a=t.getConversationById(t.selectedItemId))==null?void 0:a.projectId)??null:null,i=n.getEffectiveProjectSettings(s).systemPrompt??r.globalSystemPrompt;this.effectiveSystemPrompt!==i&&(this.effectiveSystemPrompt=i)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>yt.createElement(cRe,{module:this}),getMetadata:()=>{const n=this.turnSystemPromptValue.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{var n;this.turnSystemPromptValue!==""&&(this.turnSystemPromptValue="",(n=this.notifyComponentUpdate)==null||n.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const dRe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getStructuredOutputJson(),[r,s]=C.useState(!1),[i,a]=C.useState(n??""),[o,l]=C.useState(""),[c,d]=C.useState([]),h=C.useCallback(()=>{try{JSON.parse(i),e.setStructuredOutputJson(i.trim()||null),s(!1),ze.success("Structured output applied for next turn.")}catch{ze.error("Invalid JSON format.")}},[i,e]),m=C.useCallback(()=>{a(""),e.setStructuredOutputJson(null),s(!1),ze.info("Structured output cleared.")},[e]),g=C.useCallback(()=>{if(!o.trim()){ze.error("Please provide a name to save to the library.");return}try{JSON.parse(i);const _={id:Date.now().toString(),name:o.trim(),json:i};d(E=>[...E,_]),l(""),ze.success(`"${_.name}" saved to library.`)}catch{ze.error("Cannot save invalid JSON to library.")}},[i,o]),v=C.useCallback(_=>{a(_.json),e.setStructuredOutputJson(_.json),s(!1),ze.success(`Loaded "${_.name}" from library.`)},[e]),b=C.useCallback(_=>{d(E=>E.filter(k=>k.id!==_)),ze.info("Item removed from library.")},[]);C.useEffect(()=>{r&&a(e.getStructuredOutputJson()??"")},[r,e]);const w=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx(Ot,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx(kd,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:i,onChange:_=>a(_.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx(Ot,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(gn,{id:"structured-output-name",value:o,onChange:_=>l(_.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(At,{size:"sm",variant:"outline",onClick:g,disabled:!o.trim()||!i.trim(),className:"h-8",children:[p.jsx(Ff,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(At,{variant:"outline",size:"sm",onClick:m,disabled:!n,children:"Clear Applied Schema"}),p.jsx(At,{size:"sm",onClick:h,disabled:!i,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:c.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):c.map(_=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:_.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(At,{size:"sm",variant:"outline",onClick:()=>v(_),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(At,{size:"icon",variant:"ghost",onClick:()=>b(_.id),className:"h-7 w-7 text-destructive",children:p.jsx(oa,{className:"h-3.5 w-3.5"})})]})]},_.id))})}],x=!!n;return p.jsxs(io,{open:r,onOpenChange:s,children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(ao,{asChild:!0,children:p.jsx(At,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx(J8,{className:"h-4 w-4"})})})}),p.jsx(Wn,{side:"top",children:x?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx(oo,{className:"w-[450px] p-0",align:"start",children:p.jsx(Kc,{tabs:w,defaultValue:"entry"})})]})},fRe=({module:e})=>{const[,t]=C.useState({});return C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]),e.getIsVisible()?p.jsx(dRe,{module:e}):null};class hRe{constructor(){Me(this,"id","core-structured-output");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"structuredOutputJson",null);Me(this,"isVisible",!0);Me(this,"notifyComponentUpdate",null);Me(this,"getStructuredOutputJson",()=>this.structuredOutputJson);Me(this,"getIsVisible",()=>this.isVisible);Me(this,"setStructuredOutputJson",t=>{var n,r;this.structuredOutputJson=t,(n=this.modApiRef)==null||n.emit(Nn.setStructuredOutputJsonRequest,{json:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var s;this.modApiRef=t,this.structuredOutputJson=jl.getState().structuredOutputJson,this.updateVisibility(),(s=this.notifyComponentUpdate)==null||s.call(this);const n=t.on(Un.selectedModelChanged,()=>{var i;this.updateVisibility(),(i=this.notifyComponentUpdate)==null||i.call(this)}),r=t.on(Nn.parameterChanged,i=>{var a;if(typeof i=="object"&&i&&"params"in i){const o=i.params;"structuredOutputJson"in o&&this.structuredOutputJson!==(o.structuredOutputJson??null)&&(this.structuredOutputJson=o.structuredOutputJson??null,(a=this.notifyComponentUpdate)==null||a.call(this))}});this.eventUnsubscribers.push(n,r)}updateVisibility(){var i;const{getSelectedModel:t}=gr.getState(),n=t(),r=(i=n==null?void 0:n.metadata)==null?void 0:i.supported_parameters,s=Array.isArray(r)&&r.includes("structured_output");this.isVisible!==s&&(this.isVisible=s)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>yt.createElement(fRe,{module:this}),getParameters:()=>{if(this.structuredOutputJson)try{return{structured_output:JSON.parse(this.structuredOutputJson)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Nn.setStructuredOutputJsonRequest,{json:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const pRe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.contextLength,r=e.getEstimatedInputTokens(),s=e.getTotalEstimatedTokens(),i=e.getContextPercentage(),a=e.historyTokens,o=e.selectedModelId,l=C.useMemo(()=>i>85?"text-red-600 dark:text-red-500":i>70?"text-orange-500 dark:text-orange-400":i>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[i]);if(!(o!==null&&n>0))return null;const d=`Context: ~${s.toLocaleString()} / ${n.toLocaleString()} tokens (${i}%) [History: ${a}, Input: ${r}]`;return p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(bZ,{className:mt("h-3 w-3 fill-current",l)})})}),p.jsx(Wn,{side:"top",children:d})]})})},sG=4,mRe=e=>{let t=0;return e.forEach(n=>{var r,s,i,a;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(a=(i=(s=n.prompt)==null?void 0:s.metadata)==null?void 0:i.attachedFiles)==null||a.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/sG)};class gRe{constructor(){Me(this,"id","core-usage-display");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"currentInputText","");Me(this,"historyTokens",0);Me(this,"attachedFiles",[]);Me(this,"selectedModelId",null);Me(this,"contextLength",0);Me(this,"notifyComponentUpdate",null);Me(this,"getEstimatedInputTokens",()=>{const t=new TextEncoder().encode(this.currentInputText).length,n=this.attachedFiles.reduce((r,s)=>r+s.size,0);return Math.ceil((t+n)/sG)});Me(this,"getTotalEstimatedTokens",()=>this.historyTokens+this.getEstimatedInputTokens());Me(this,"getContextPercentage",()=>this.contextLength?Math.min(100,Math.round(this.getTotalEstimatedTokens()/this.contextLength*100)):0);Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){this.loadInitialState(),this.updateContextLength();const n=t.on(Nn.inputChanged,o=>{var l;typeof o=="object"&&o&&"value"in o&&(this.currentInputText=o.value,(l=this.notifyComponentUpdate)==null||l.call(this))}),r=t.on(To.attachedFilesChanged,o=>{var l;typeof o=="object"&&o&&"files"in o&&(this.attachedFiles=o.files,(l=this.notifyComponentUpdate)==null||l.call(this))}),s=t.on(Un.selectedModelChanged,o=>{var l;typeof o=="object"&&o&&"modelId"in o&&(this.selectedModelId=o.modelId,this.updateContextLength(),(l=this.notifyComponentUpdate)==null||l.call(this))}),i=t.on(zn.completed,()=>{var o;this.updateHistoryTokens(),(o=this.notifyComponentUpdate)==null||o.call(this)}),a=t.on(ar.contextChanged,()=>{var o;this.updateHistoryTokens(),(o=this.notifyComponentUpdate)==null||o.call(this)});this.eventUnsubscribers.push(n,r,s,i,a),console.log(`[${this.id}] Initialized.`)}loadInitialState(){const t=Mc.getState(),n=gr.getState();this.attachedFiles=t.attachedFilesMetadata,this.selectedModelId=n.selectedModelId,this.updateHistoryTokens()}updateHistoryTokens(){const t=Hn.getState();if(t.currentConversationId){const n=t.interactions.filter(r=>r.status==="COMPLETED");this.historyTokens=mRe(n)}else this.historyTokens=0}updateContextLength(){var c;if(!this.selectedModelId){this.contextLength=0;return}const{dbProviderConfigs:t,dbApiKeys:n}=gr.getState(),{providerId:r,modelId:s}=Mo(this.selectedModelId);if(!r||!s){this.contextLength=0;return}const i=t.find(d=>d.id===r);if(!i){this.contextLength=0;return}const a=n.find(d=>d.id===i.apiKeyId),o=tL(i,s,a==null?void 0:a.value),l=o==null?void 0:o.metadata;this.contextLength=((c=l==null?void 0:l.top_provider)==null?void 0:c.context_length)??(l==null?void 0:l.context_length)??0}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>yt.createElement(pRe,{module:this})}),console.log(`[${this.id}] Registered.`)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}const yRe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getReasoningEnabled(),r=e.getIsStreaming(),s=e.getIsVisible(),i=n===!0,a=C.useCallback(()=>{const o=i?null:!0;e.setReasoningEnabled(o)},[i,e]);return s?p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:i?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:a,disabled:r,"aria-label":i?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(Al,{className:mt("h-4 w-4",i?"text-primary":"text-muted-foreground")})})}),p.jsx(Wn,{side:"top",children:i?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};class bRe{constructor(){Me(this,"id","core-reasoning");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"reasoningEnabled",null);Me(this,"isStreaming",!1);Me(this,"isVisible",!0);Me(this,"notifyComponentUpdate",null);Me(this,"getReasoningEnabled",()=>this.reasoningEnabled);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"getIsVisible",()=>this.isVisible);Me(this,"setReasoningEnabled",t=>{var n,r;this.reasoningEnabled=t,(n=this.modApiRef)==null||n.emit(Nn.setReasoningEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var i;this.modApiRef=t,this.reasoningEnabled=jl.getState().reasoningEnabled,this.isStreaming=Hn.getState().status==="streaming",this.updateVisibility(),(i=this.notifyComponentUpdate)==null||i.call(this);const n=t.on(zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(Un.selectedModelChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(Nn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;"reasoningEnabled"in l&&this.reasoningEnabled!==l.reasoningEnabled&&(this.reasoningEnabled=l.reasoningEnabled??null,(o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,s)}updateVisibility(){var s,i;const{getSelectedModel:t}=gr.getState(),n=t(),r=((i=(s=n==null?void 0:n.metadata)==null?void 0:s.supported_parameters)==null?void 0:i.includes("reasoning"))??!1;this.isVisible!==r&&(this.isVisible=r)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>yt.createElement(yRe,{module:this}),getMetadata:()=>this.reasoningEnabled===!0?{reasoningEnabled:!0}:void 0,clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Nn.setReasoningEnabledRequest,{enabled:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const vRe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getWebSearchEnabled(),r=e.getIsStreaming(),s=e.getIsVisible(),i=n===!0,a=C.useCallback(()=>{const o=i?null:!0;e.setWebSearchEnabled(o)},[i,e]);return s?p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:i?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:a,disabled:r,"aria-label":i?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(Qs,{className:mt("h-4 w-4",i?"text-primary":"text-muted-foreground")})})}),p.jsx(Wn,{side:"top",children:i?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};class wRe{constructor(){Me(this,"id","core-web-search");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"webSearchEnabled",null);Me(this,"isStreaming",!1);Me(this,"isVisible",!0);Me(this,"notifyComponentUpdate",null);Me(this,"getWebSearchEnabled",()=>this.webSearchEnabled);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"getIsVisible",()=>this.isVisible);Me(this,"setWebSearchEnabled",t=>{var n,r;this.webSearchEnabled=t,(n=this.modApiRef)==null||n.emit(Nn.setWebSearchEnabledRequest,{enabled:t}),(r=this.notifyComponentUpdate)==null||r.call(this)});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var i;this.modApiRef=t,this.webSearchEnabled=jl.getState().webSearchEnabled,this.isStreaming=Hn.getState().status==="streaming",this.updateVisibility(),(i=this.notifyComponentUpdate)==null||i.call(this);const n=t.on(zn.statusChanged,a=>{var o;typeof a=="object"&&a&&"status"in a&&this.isStreaming!==(a.status==="streaming")&&(this.isStreaming=a.status==="streaming",(o=this.notifyComponentUpdate)==null||o.call(this))}),r=t.on(Un.selectedModelChanged,()=>{var a;this.updateVisibility(),(a=this.notifyComponentUpdate)==null||a.call(this)}),s=t.on(Nn.parameterChanged,a=>{var o;if(typeof a=="object"&&a&&"params"in a){const l=a.params;"webSearchEnabled"in l&&this.webSearchEnabled!==l.webSearchEnabled&&(this.webSearchEnabled=l.webSearchEnabled??null,(o=this.notifyComponentUpdate)==null||o.call(this))}});this.eventUnsubscribers.push(n,r,s)}updateVisibility(){var i;const{getSelectedModel:t}=gr.getState(),n=t(),r=((i=n==null?void 0:n.metadata)==null?void 0:i.supported_parameters)??[],s=r.includes("web_search")||r.includes("web_search_options");this.isVisible!==s&&(this.isVisible=s)}register(t){if(this.modApiRef=t,this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:()=>yt.createElement(vRe,{module:this}),getParameters:()=>this.webSearchEnabled===!0?{web_search:!0}:void 0,clearOnSubmit:()=>{var n;(n=this.modApiRef)==null||n.emit(Nn.setWebSearchEnabledRequest,{enabled:null})}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const xRe=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r,allRules:s,allTags:i,getRulesForTag:a})=>{const[o,l]=C.useState(""),[c,d]=C.useState(""),h=C.useMemo(()=>{const _=o.toLowerCase();return _?i.filter(E=>{var k;return E.name.toLowerCase().includes(_)||((k=E.description)==null?void 0:k.toLowerCase().includes(_))}):i},[i,o]),m=C.useMemo(()=>{const _=c.toLowerCase();return _?s.filter(E=>E.name.toLowerCase().includes(_)||E.content.toLowerCase().includes(_)||E.type.toLowerCase().includes(_)):s},[s,c]),g=C.useCallback((_,E)=>{n(_,E)},[n]),v=C.useCallback((_,E)=>{r(_,E)},[r]),b=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter tags...",value:o,onChange:_=>l(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Gi,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(_=>{const E=a(_.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Ol,{id:`tag-activate-${_.id}`,checked:e.has(_.id),onCheckedChange:k=>g(_.id,!!k),className:"mt-0.5"}),p.jsxs(Ot,{htmlFor:`tag-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),_.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:_.description}),E.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(k=>k.name).join(", ")]})]})]})},_.id)})})})]}),w=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter rules...",value:c,onChange:_=>d(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Gi,{className:"h-64 border rounded-md p-2 bg-background/50",children:m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:s.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Ol,{id:`rule-activate-${_.id}`,checked:t.has(_.id),onCheckedChange:E=>v(_.id,!!E),className:"mt-0.5"}),p.jsxs(Ot,{htmlFor:`rule-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",_.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",_.content]})]})]})},_.id))})})]}),x=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:w()}];return p.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:p.jsx(Kc,{tabs:x,defaultValue:"tags"})})},_Re=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const[n,r]=C.useState(!1),s=e.getActiveTagIds(),i=e.getActiveRuleIds(),a=e.getIsStreaming(),o=e.getHasRulesOrTags(),l=e.getAllRules(),c=e.getAllTags(),d=e.getRulesForTag,h=C.useCallback((w,x)=>{e.setActiveTagIds(_=>{const E=new Set(_);return x?E.add(w):E.delete(w),E})},[e]),m=C.useCallback((w,x)=>{e.setActiveRuleIds(_=>{const E=new Set(_);return x?E.add(w):E.delete(w),E})},[e]),g=()=>{o?r(w=>!w):e.handleTriggerClick()&&r(!1)},v=s.size>0||i.size>0,b=a;return p.jsxs(io,{open:n,onOpenChange:r,children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:o?p.jsx(ao,{asChild:!0,children:p.jsx(At,{variant:v?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:b,"aria-label":"Configure Rules & Tags for Next Turn",onClick:g,children:p.jsx(R4,{className:"h-4 w-4"})})}):p.jsx(At,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:b,"aria-label":"Add Rules & Tags (Opens Settings)",onClick:g,children:p.jsx(R4,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",children:o?v?`Rules/Tags Active (${s.size} tags, ${i.size} rules)`:"Activate Rules/Tags (Next Turn)":"Add Rules/Tags (Opens Settings)"})]})}),o&&p.jsx(oo,{className:"w-auto p-0",align:"start",children:p.jsx(xRe,{activeTagIds:s,activeRuleIds:i,onToggleTag:h,onToggleRule:m,allRules:l,allTags:c,getRulesForTag:d})})]})},SRe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[s,i]=C.useState((e==null?void 0:e.name)||""),[a,o]=C.useState((e==null?void 0:e.content)||""),[l,c]=C.useState((e==null?void 0:e.type)||"before");C.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),c((e==null?void 0:e.type)||"before")},[e]);const d=C.useCallback(async()=>{if(!s.trim()||!a.trim()){ze.error("Rule Name and Content are required.");return}await n({name:s.trim(),content:a.trim(),type:l})},[s,a,l,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Ot,{htmlFor:"rule-name",children:"Rule Name"}),p.jsx(gn,{id:"rule-name",value:s,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"rule-type",children:"Rule Type"}),p.jsxs(Cc,{value:l,onValueChange:h=>c(h),disabled:t,children:[p.jsx(Tc,{id:"rule-type",children:p.jsx(kc,{placeholder:"Select Type"})}),p.jsxs(Ac,{children:[p.jsx(Is,{value:"system",children:"System Prompt"}),p.jsx(Is,{value:"before",children:"Before User Prompt"}),p.jsx(Is,{value:"after",children:"After User Prompt"})]})]})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"rule-content",children:"Rule Content"}),p.jsx(kd,{id:"rule-content",value:a,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(At,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(qi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(At,{variant:"secondary",size:"sm",onClick:d,disabled:t||!s.trim()||!a.trim(),type:"button",children:[t&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ff,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},ERe=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:s})=>{const i=a=>{window.confirm(`Are you sure you want to delete the rule "${a.name}"? This will also remove it from any tags.`)&&s(a.id,a.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Jf,{children:[p.jsx(km,{children:p.jsxs(ts,{children:[p.jsx(Lr,{children:"Name"}),p.jsx(Lr,{children:"Type"}),p.jsx(Lr,{children:"Content Preview"}),p.jsx(Lr,{className:"text-right",children:"Actions"})]})}),p.jsx(Qf,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(ts,{children:p.jsx(On,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})}),p.jsx(ts,{children:p.jsx(On,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(ts,{children:p.jsx(On,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(a=>{const o=n[a.id];return p.jsxs(ts,{children:[p.jsx(On,{className:"font-medium",children:a.name}),p.jsx(On,{className:"capitalize",children:a.type}),p.jsx(On,{className:"text-xs text-muted-foreground truncate max-w-xs",children:a.content}),p.jsxs(On,{className:"text-right space-x-1",children:[p.jsx(fn,{tooltipText:"Edit Rule",onClick:()=>r(a),disabled:o,icon:p.jsx(Ny,{}),className:"h-8 w-8","aria-label":`Edit rule ${a.name}`}),p.jsx(fn,{tooltipText:"Delete Rule",onClick:()=>i(a),disabled:o,icon:o?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(oa,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${a.name}`})]})]},a.id)})})]})})},CRe=({module:e})=>{const t=e.getAllRules(),n=e.getIsLoadingRules(),[r,s]=C.useState(!1),[i,a]=C.useState(null),[o,l]=C.useState(!1),[c,d]=C.useState({}),h=()=>{a(null),s(!0)},m=w=>{a(w),s(!0)},g=C.useCallback(()=>{s(!1),a(null),l(!1)},[]),v=C.useCallback(async w=>{l(!0);try{i?e.updateRule(i.id,w):e.addRule(w),g()}catch{}finally{l(!1)}},[e,i,g]),b=C.useCallback(async w=>{d(x=>({...x,[w]:!0}));try{e.deleteRule(w),(i==null?void 0:i.id)===w&&g()}catch{}finally{d(x=>({...x,[w]:!1}))}},[e,i,g]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!r&&p.jsxs(At,{onClick:h,variant:"outline",className:"w-full",disabled:n,children:[p.jsx(Pf,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),r&&p.jsx(SRe,{initialData:i??void 0,isSaving:o,onSave:v,onCancel:g}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(ERe,{rules:t,isLoading:n,isDeleting:c,onEdit:m,onDelete:b})]})]})},kRe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[s,i]=C.useState((e==null?void 0:e.name)||""),[a,o]=C.useState((e==null?void 0:e.description)||"");C.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=C.useCallback(async()=>{if(!s.trim()){ze.error("Tag Name is required.");return}await n({name:s.trim(),description:(a==null?void 0:a.trim())||null})},[s,a,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"tag-name",children:"Tag Name"}),p.jsx(gn,{id:"tag-name",value:s,onChange:c=>i(c.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"tag-description",children:"Description (Optional)"}),p.jsx(kd,{id:"tag-description",value:a||"",onChange:c=>o(c.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(At,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(qi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(At,{variant:"secondary",size:"sm",onClick:l,disabled:t||!s.trim(),type:"button",children:[t&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ff,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},TRe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:s,onDelete:i})=>{const a=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Jf,{children:[p.jsx(km,{children:p.jsxs(ts,{children:[p.jsx(Lr,{children:"Name"}),p.jsx(Lr,{children:"Description"}),p.jsx(Lr,{children:"Linked Rules"}),p.jsx(Lr,{className:"text-right",children:"Actions"})]})}),p.jsx(Qf,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(ts,{children:p.jsx(On,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})}),p.jsx(ts,{children:p.jsx(On,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(ts,{children:p.jsx(On,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],c=t.get(o.id)||[];return p.jsxs(ts,{children:[p.jsx(On,{className:"font-medium",children:o.name}),p.jsx(On,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(On,{className:"text-xs",children:c.length>0?c.map(d=>d.name).join(", "):"None"}),p.jsxs(On,{className:"text-right space-x-1",children:[p.jsx(fn,{tooltipText:"Edit Tag & Rules",onClick:()=>s(o),disabled:l,icon:p.jsx(Ny,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(fn,{tooltipText:"Delete Tag",onClick:()=>a(o),disabled:l,icon:l?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(oa,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},ARe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:s=!1})=>{const[i,a]=C.useState(!1),[o,l]=C.useState(""),c=C.useMemo(()=>[...t].sort((v,b)=>v.name.localeCompare(b.name)),[t]),d=C.useMemo(()=>{const v=o.toLowerCase();return v?c.filter(b=>b.name.toLowerCase().includes(v)||b.content.toLowerCase().includes(v)||b.type.toLowerCase().includes(v)):c},[c,o]),h=C.useCallback(v=>{const b=n.has(v);r(e.id,v,!b),l("")},[n,r,e.id]),m=C.useCallback((v,b)=>{b.stopPropagation(),r(e.id,v,!1)},[r,e.id]),g=C.useMemo(()=>c.filter(v=>n.has(v.id)),[c,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs(Ot,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(io,{open:i,onOpenChange:a,children:[p.jsx(ao,{asChild:!0,children:p.jsxs(At,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:s||t.length===0,children:[p.jsx("span",{className:"truncate",children:g.length>0?`${g.length} rule(s) selected`:"Select rules..."}),p.jsx(e1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(oo,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(JH,{shouldFilter:!1,children:[p.jsx(QH,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(eG,{children:[p.jsx(tG,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(nG,{children:d.map(v=>{const b=n.has(v.id);return p.jsxs(rG,{value:v.id,onSelect:()=>h(v.id),className:"cursor-pointer",children:[p.jsx(ni,{className:mt("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:v.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",v.type,")"]})]},v.id)})})]})]})})]}),g.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:g.map(v=>p.jsxs(_p,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:v.name}),p.jsx(At,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>m(v.id,b),disabled:s,"aria-label":`Unlink rule ${v.name}`,children:p.jsx(qi,{className:"h-3 w-3"})})]},v.id))})]})};var RRe="Separator",d8="horizontal",NRe=["horizontal","vertical"],iG=C.forwardRef((e,t)=>{const{decorative:n,orientation:r=d8,...s}=e,i=IRe(r)?r:d8,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(rn.div,{"data-orientation":i,...o,...s,ref:t})});iG.displayName=RRe;function IRe(e){return NRe.includes(e)}var jRe=iG;function ud({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(jRe,{"data-slot":"separator-root",decorative:n,orientation:t,className:mt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const MRe=({module:e})=>{const t=e.getAllTags(),n=e.getAllRules(),r=e.getTagRuleLinks(),s=e.getRulesForTag,i=e.getIsLoadingRules(),[a,o]=C.useState(!1),[l,c]=C.useState(null),[d,h]=C.useState(!1),[m,g]=C.useState({}),v=()=>{c(null),o(!0)},b=R=>{c(R),o(!0)},w=C.useCallback(()=>{o(!1),c(null),h(!1)},[]),x=C.useCallback(async R=>{h(!0);try{l?e.updateTag(l.id,R):e.addTag(R),l||w()}catch{}finally{h(!1)}},[e,l,w]),_=C.useCallback(async R=>{g(M=>({...M,[R]:!0}));try{e.deleteTag(R),(l==null?void 0:l.id)===R&&w()}catch{}finally{g(M=>({...M,[R]:!1}))}},[e,l,w]),E=C.useCallback(async(R,M,I)=>{try{I?e.linkTagToRule(R,M):e.unlinkTagFromRule(R,M)}catch{}},[e]),k=C.useMemo(()=>{const R=new Map;return t.forEach(M=>{R.set(M.id,s(M.id))}),R},[t,s]),T=C.useMemo(()=>l?new Set(r.filter(R=>R.tagId===l.id).map(R=>R.ruleId)):new Set,[l,r]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!a&&p.jsxs(At,{onClick:v,variant:"outline",className:"w-full",disabled:i,children:[p.jsx(Pf,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),a&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(kRe,{initialData:l??void 0,isSaving:d,onSave:x,onCancel:w}),l&&p.jsx(ARe,{tag:l,allRules:n,linkedRuleIds:T,onLinkChange:E,disabled:d})]}),p.jsx(ud,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx(TRe,{tags:t,rulesByTagId:k,isLoading:i,isDeleting:m,onEdit:b,onDelete:_})]})]})},DRe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifySettingsCallback(()=>t({})),()=>e.setNotifySettingsCallback(null)),[e]);const n=C.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(CRe,{module:e})},{value:"tags",label:"Tags",content:p.jsx(MRe,{module:e})}],[e]);return p.jsx(Kc,{tabs:n,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})};class ORe{constructor(){Me(this,"id","core-rules-tags");Me(this,"unregisterPromptControlCallback",null);Me(this,"unregisterSettingsTabCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"modApiRef",null);Me(this,"allRules",[]);Me(this,"allTags",[]);Me(this,"tagRuleLinks",[]);Me(this,"transientActiveTagIds",new Set);Me(this,"transientActiveRuleIds",new Set);Me(this,"isStreaming",!1);Me(this,"hasRulesOrTags",!1);Me(this,"isLoadingRules",!0);Me(this,"notifyComponentUpdate",null);Me(this,"notifySettingsComponentUpdate",null);Me(this,"getAllRules",()=>this.allRules);Me(this,"getAllTags",()=>this.allTags);Me(this,"getTagRuleLinks",()=>this.tagRuleLinks);Me(this,"getRulesForTag",t=>{const n=new Set(this.tagRuleLinks.filter(r=>r.tagId===t).map(r=>r.ruleId));return this.allRules.filter(r=>n.has(r.id))});Me(this,"getRuleById",t=>this.allRules.find(n=>n.id===t));Me(this,"getTagById",t=>this.allTags.find(n=>n.id===t));Me(this,"getRulesByIds",t=>{const n=new Set(t);return this.allRules.filter(r=>n.has(r.id))});Me(this,"addRule",t=>{var n;(n=this.modApiRef)==null||n.emit(hr.addRuleRequest,t)});Me(this,"updateRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(hr.updateRuleRequest,{id:t,updates:n})});Me(this,"deleteRule",t=>{var n;(n=this.modApiRef)==null||n.emit(hr.deleteRuleRequest,{id:t})});Me(this,"addTag",t=>{var n;(n=this.modApiRef)==null||n.emit(hr.addTagRequest,t)});Me(this,"updateTag",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(hr.updateTagRequest,{id:t,updates:n})});Me(this,"deleteTag",t=>{var n;(n=this.modApiRef)==null||n.emit(hr.deleteTagRequest,{id:t})});Me(this,"linkTagToRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(hr.linkTagToRuleRequest,{tagId:t,ruleId:n})});Me(this,"unlinkTagFromRule",(t,n)=>{var r;(r=this.modApiRef)==null||r.emit(hr.unlinkTagFromRuleRequest,{tagId:t,ruleId:n})});Me(this,"handleTriggerClick",()=>!this.hasRulesOrTags&&this.modApiRef?(this.modApiRef.emit(ar.openModalRequest,{modalId:"settingsModal",initialTab:"rules-tags"}),!0):!1);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"getHasRulesOrTags",()=>this.hasRulesOrTags);Me(this,"getIsLoadingRules",()=>this.isLoadingRules);Me(this,"getActiveTagIds",()=>this.transientActiveTagIds);Me(this,"getActiveRuleIds",()=>this.transientActiveRuleIds);Me(this,"setActiveTagIds",t=>{var n;this.transientActiveTagIds=t(this.transientActiveTagIds),(n=this.notifyComponentUpdate)==null||n.call(this)});Me(this,"setActiveRuleIds",t=>{var n;this.transientActiveRuleIds=t(this.transientActiveRuleIds),(n=this.notifyComponentUpdate)==null||n.call(this)});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t});Me(this,"setNotifySettingsCallback",t=>{this.notifySettingsComponentUpdate=t})}async initialize(t){this.modApiRef=t,this.isStreaming=t.getContextSnapshot().isStreaming,t.emit(hr.loadRulesAndTagsRequest,void 0);const n=t.on(zn.statusChanged,s=>{var i;typeof s=="object"&&s&&"status"in s&&this.isStreaming!==(s.status==="streaming")&&(this.isStreaming=s.status==="streaming",(i=this.notifyComponentUpdate)==null||i.call(this))}),r=t.on(hr.dataLoaded,s=>{var i,a;s&&(this.allRules=s.rules||[],this.allTags=s.tags||[],this.tagRuleLinks=(s.links||[]).map(o=>({tagId:o.tagId,ruleId:o.ruleId}))),this.updateHasRulesOrTags(),this.isLoadingRules=!1,(i=this.notifyComponentUpdate)==null||i.call(this),(a=this.notifySettingsComponentUpdate)==null||a.call(this)});this.eventUnsubscribers.push(n,r)}updateHasRulesOrTags(){const t=this.allRules.length>0||this.allTags.length>0;this.hasRulesOrTags!==t&&(this.hasRulesOrTags=t)}register(t){this.modApiRef=t,this.unregisterPromptControlCallback||(this.unregisterPromptControlCallback=t.registerPromptControl({id:this.id,status:()=>this.isLoadingRules?"loading":"ready",triggerRenderer:()=>yt.createElement(_Re,{module:this}),getMetadata:()=>{const n=Array.from(this.transientActiveTagIds),r=Array.from(this.transientActiveRuleIds),s=[],i=new Set(r);if(n.forEach(a=>{this.getRulesForTag(a).forEach(o=>i.add(o.id))}),i.forEach(a=>{const o=this.getRuleById(a);o&&s.push({type:o.type,content:o.content,sourceRuleId:o.id})}),n.length>0||r.length>0||s.length>0)return{activeTagIds:n,activeRuleIds:r,effectiveRulesContent:s}},clearOnSubmit:()=>{var r;let n=!1;this.transientActiveTagIds.size>0&&(this.transientActiveTagIds=new Set,n=!0),this.transientActiveRuleIds.size>0&&(this.transientActiveRuleIds=new Set,n=!0),n&&((r=this.notifyComponentUpdate)==null||r.call(this))}})),this.unregisterSettingsTabCallback||(this.unregisterSettingsTabCallback=t.registerSettingsTab({id:"rules-tags",title:"Rules & Tags",component:()=>yt.createElement(DRe,{module:this}),order:50}))}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterPromptControlCallback&&(this.unregisterPromptControlCallback(),this.unregisterPromptControlCallback=null),this.unregisterSettingsTabCallback&&(this.unregisterSettingsTabCallback(),this.unregisterSettingsTabCallback=null),this.notifyComponentUpdate=null,this.notifySettingsComponentUpdate=null,this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const PRe=({module:e})=>{const[,t]=C.useState({});C.useEffect(()=>(e.setNotifyCallback(()=>t({})),()=>e.setNotifyCallback(null)),[e]);const n=e.getTurnEnabled(),r=e.getIsStreaming(),s=e.getGlobalAutoTitleEnabled()&&e.getIsFirstInteraction(),i=C.useCallback(()=>{const a=!n;e.setTurnEnabled(a)},[n,e]);return s?p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx(At,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:i,disabled:r,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(r5,{className:mt("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(Wn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})}):null};class FRe{constructor(){Me(this,"id","core-auto-title");Me(this,"unregisterCallback",null);Me(this,"eventUnsubscribers",[]);Me(this,"turnAutoTitleEnabled",!1);Me(this,"isStreaming",!1);Me(this,"isFirstInteraction",!1);Me(this,"globalAutoTitleEnabled",!0);Me(this,"notifyComponentUpdate",null);Me(this,"getTurnEnabled",()=>this.turnAutoTitleEnabled);Me(this,"getIsStreaming",()=>this.isStreaming);Me(this,"getIsFirstInteraction",()=>this.isFirstInteraction);Me(this,"getGlobalAutoTitleEnabled",()=>this.globalAutoTitleEnabled);Me(this,"setTurnEnabled",t=>{var n;this.turnAutoTitleEnabled!==t&&(this.turnAutoTitleEnabled=t,(n=this.notifyComponentUpdate)==null||n.call(this))});Me(this,"setNotifyCallback",t=>{this.notifyComponentUpdate=t})}async initialize(t){var a;this.turnAutoTitleEnabled=!1,this.isStreaming=Hn.getState().status==="streaming",this.globalAutoTitleEnabled=ur.getState().autoTitleEnabled,this.checkFirstInteraction(),(a=this.notifyComponentUpdate)==null||a.call(this);const n=t.on(zn.statusChanged,o=>{var l;typeof o=="object"&&o&&"status"in o&&this.isStreaming!==(o.status==="streaming")&&(this.isStreaming=o.status==="streaming",(l=this.notifyComponentUpdate)==null||l.call(this))}),r=t.on(ar.contextChanged,()=>{var l;const o=this.isFirstInteraction;this.checkFirstInteraction(),o!==this.isFirstInteraction&&((l=this.notifyComponentUpdate)==null||l.call(this))}),s=t.on(zn.completed,()=>{var l;const o=this.isFirstInteraction;this.checkFirstInteraction(),o!==this.isFirstInteraction&&((l=this.notifyComponentUpdate)==null||l.call(this))}),i=t.on(en.autoTitleEnabledChanged,o=>{var l;typeof o=="object"&&o&&"enabled"in o&&this.globalAutoTitleEnabled!==o.enabled&&(this.globalAutoTitleEnabled=o.enabled,(l=this.notifyComponentUpdate)==null||l.call(this))});this.eventUnsubscribers.push(n,r,s,i)}checkFirstInteraction(){const t=Hn.getState(),n=t.currentConversationId===null||t.interactions.filter(r=>r.conversationId===t.currentConversationId).length===0;this.isFirstInteraction!==n&&(this.isFirstInteraction=n,!n&&this.turnAutoTitleEnabled&&(this.turnAutoTitleEnabled=!1))}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}const n=()=>yt.createElement(PRe,{module:this});this.unregisterCallback=t.registerPromptControl({id:this.id,status:()=>"ready",triggerRenderer:n,getMetadata:()=>this.turnAutoTitleEnabled?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{var r;this.turnAutoTitleEnabled&&(this.turnAutoTitleEnabled=!1,(r=this.notifyComponentUpdate)==null||r.call(this))}})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.notifyComponentUpdate=null,console.log(`[${this.id}] Destroyed.`)}}function LRe(){const e=new URLSearchParams(window.location.search),t=e.get("q")??void 0,n=e.get("m")??void 0,r=e.getAll("vfs").filter(Boolean),s=e.get("s")??"1";return{query:t,modelId:n,vfsFiles:r.length>0?r:void 0,submit:s}}class $Re{constructor(){Me(this,"id","core-url-parameters");Me(this,"modApiRef",null)}async initialize(t){this.modApiRef=t,console.log(`[${this.id}] Initializing...`),t.on(Td.initializationPhaseCompleted,n=>{n.phase==="all"&&this.processUrlParameters().catch(r=>{console.error(`[${this.id}] Error processing URL parameters:`,r),ze.error("Failed to process URL parameters.")})}),console.log(`[${this.id}] Initialized, awaiting full app load.`)}register(t){}destroy(){this.modApiRef=null}async processUrlParameters(){var r,s;if(!this.modApiRef){console.warn(`[${this.id}] ModAPI not available, cannot process URL parameters.`);return}const t=this.modApiRef,n=LRe();if(!(!n.query&&!n.modelId&&!((r=n.vfsFiles)!=null&&r.length))){ze.info("Processing parameters from URL...");try{const i=await new Promise((a,o)=>{const l=t.on(Qn.conversationAdded,c=>{c.conversation.title.startsWith("From URL:")&&(l(),a(c.conversation.id))});setTimeout(()=>{l(),o(new Error("Timeout waiting for conversation creation event."))},5e3),t.emit(Qn.addConversationRequest,{title:n.query?`From URL: ${n.query.substring(0,30)}...`:"From URL Parameters"})});if(t.emit(Qn.selectItemRequest,{id:i,type:"conversation"}),n.modelId){const a=gr.getState().getAvailableModelListItems();let o=null;const l=n.modelId.toLowerCase();if(n.modelId.includes(":")){const c=a.find(d=>d.id===n.modelId);c&&(o=c.id)}if(!o){const c=a.find(d=>d.name.toLowerCase()===l);c&&(o=c.id)}if(!o){const c=a.find(d=>d.name.toLowerCase().startsWith(l));c&&(o=c.id)}if(!o){const c=a.find(d=>{const h=d.id.toLowerCase().split("/");return h.length>1&&h[1].startsWith(l)});c&&(o=c.id)}if(o){t.emit(Nn.setModelIdRequest,{id:o}),t.emit(Un.selectModelRequest,{modelId:o});const c=a.find(d=>d.id===o);ze.success(`Model set to: ${c==null?void 0:c.name} (${c==null?void 0:c.providerName})`)}else ze.warning(`Model matching "${n.modelId}" not found or not enabled. Using default.`)}if(n.vfsFiles&&n.vfsFiles.length>0){const a="orphan";let o;try{if(o=await t.getVfsInstance(a),!o)throw new Error("Failed to get VFS instance via ModAPI.")}catch(l){ze.error(`Failed to initialize VFS for URL files: ${l instanceof Error?l.message:String(l)}`)}if(o)for(const l of n.vfsFiles)try{const c=await xd(l,{fsInstance:o}),d=await o.promises.stat(l),h=ws(l),m="application/octet-stream",g=v0(h,m);let v={};if(g)v.contentText=new TextDecoder().decode(c);else{let b="";const w=c.byteLength;for(let x=0;x<w;x++)b+=String.fromCharCode(c[x]);v.contentBase64=window.btoa(b)}t.emit(To.addAttachedFileRequest,{source:"vfs",name:h,type:m,size:d.size,path:l,...v}),ze.success(`Attached VFS file: ${h}`)}catch(c){c.code==="ENOENT"?ze.warning(`VFS file not found: ${l}`):ze.warning(`Failed to attach VFS file "${l}": ${c.message}`),console.error(`Error processing VFS file ${l}:`,c)}}if(n.query)if(n.submit==="0")t.emit(Nn.inputChanged,{value:n.query}),ze.info("Query from URL loaded into input area."),window.history.replaceState({},document.title,window.location.pathname);else{let a={},o={};const l=Mc.getState().attachedFilesMetadata;l.length>0&&(o.attachedFiles=[...l]);let c={id:pi(),content:n.query,parameters:a,metadata:o};t.emit(Nn.submitted,{turnData:c});const d=await ox(D0.PROMPT_TURN_FINALIZE,{turnData:c});if(d===!1){ze.warning("Prompt submission from URL cancelled by middleware.");return}const h=d&&typeof d=="object"?d.turnData:c;await rA.submitPrompt(h),window.history.replaceState({},document.title,window.location.pathname)}else(n.modelId||(s=n.vfsFiles)!=null&&s.length)&&(ze.info("Model and/or VFS files from URL applied. Type your message."),window.history.replaceState({},document.title,window.location.pathname))}catch(i){ze.error(`Failed to process URL parameters: ${i instanceof Error?i.message:String(i)}`),console.error("Error processing URL parameters:",i)}}}}const BRe=()=>{const{enableStreamingMarkdown:e,setEnableStreamingMarkdown:t,enableStreamingCodeBlockParsing:n,setEnableStreamingCodeBlockParsing:r,foldStreamingCodeBlocks:s,setFoldStreamingCodeBlocks:i,foldUserMessagesOnCompletion:a,setFoldUserMessagesOnCompletion:o,streamingRenderFPS:l,setStreamingRenderFPS:c,autoScrollInterval:d,setAutoScrollInterval:h,enableAutoScrollOnStream:m,setEnableAutoScrollOnStream:g,resetGeneralSettings:v}=ur(En(P=>({enableStreamingMarkdown:P.enableStreamingMarkdown,setEnableStreamingMarkdown:P.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:P.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:P.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:P.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:P.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:P.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:P.setFoldUserMessagesOnCompletion,streamingRenderFPS:P.streamingRenderFPS,setStreamingRenderFPS:P.setStreamingRenderFPS,autoScrollInterval:P.autoScrollInterval,setAutoScrollInterval:P.setAutoScrollInterval,enableAutoScrollOnStream:P.enableAutoScrollOnStream,setEnableAutoScrollOnStream:P.setEnableAutoScrollOnStream,resetGeneralSettings:P.resetGeneralSettings}))),[b,w]=C.useState(l),[x,_]=C.useState(d),E=C.useCallback(P=>{w(P[0])},[]),k=C.useCallback(P=>{c(P[0])},[c]),T=C.useCallback(P=>{const U=P.target.value,j=U===""?15:parseInt(U.replace(/[^0-9]/g,""),10);if(!isNaN(j)){const V=Math.max(3,Math.min(60,j));c(V),w(V)}},[c]),R=C.useCallback(P=>{_(P[0])},[]),M=C.useCallback(P=>{h(P[0])},[h]),I=C.useCallback(P=>{const U=P.target.value,j=U===""?1e3:parseInt(U.replace(/[^0-9]/g,""),10);if(!isNaN(j)){const V=Math.max(50,j);h(V),_(V)}},[h]);C.useEffect(()=>{w(l)},[l]),C.useEffect(()=>{_(d)},[d]);const O=()=>{window.confirm("Are you sure you want to reset Streaming & Display settings to their defaults?")&&v()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),p.jsx(ia,{id:"streaming-markdown-switch",checked:e??!0,onCheckedChange:t})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),p.jsx(ia,{id:"streaming-codeblock-switch",checked:n??!1,onCheckedChange:r})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),p.jsx(ia,{id:"fold-codeblock-switch",checked:s??!1,onCheckedChange:i})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),p.jsx(ia,{id:"fold-user-message-switch",checked:a??!1,onCheckedChange:o})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"enable-auto-scroll-switch",className:"font-medium",children:"Auto-Scroll While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically scroll to the bottom as new content arrives."})]}),p.jsx(ia,{id:"enable-auto-scroll-switch",checked:m??!0,onCheckedChange:g})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs(Ot,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",b," FPS)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(zi,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[b],onValueChange:E,onValueCommit:k,className:"flex-grow"}),p.jsx(gn,{type:"number",min:3,max:60,step:1,value:b,onChange:T,className:"w-20 h-8 text-xs"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs(Ot,{htmlFor:"auto-scroll-interval-slider",className:"font-medium",children:["Auto-Scroll Interval (",x," ms)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:'How often to scroll to the bottom during streaming (50-5000 ms). Only active if "Auto-Scroll While Streaming" is enabled. (Default: 1000ms)'})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(zi,{id:"auto-scroll-interval-slider",min:50,max:5e3,step:50,value:[x],onValueChange:R,onValueCommit:M,className:"flex-grow",disabled:!m}),p.jsx(gn,{type:"number",min:50,max:5e3,step:50,value:x,onChange:I,className:"w-20 h-8 text-xs",disabled:!m}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]})]})]}),p.jsx(ud,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(At,{variant:"outline",size:"sm",onClick:O,children:[p.jsx(CA,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},zRe=yt.memo(BRe);class URe{constructor(){Me(this,"id","core-settings-general");Me(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"general",title:"General",component:zRe,order:10})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const qRe=({label:e,colorKey:t,value:n,onChange:r})=>{const[s,i]=C.useState(n??"");C.useEffect(()=>{i(n??"")},[n]);const a=()=>{r(t,s.trim()||null)},o=l=>{i(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ot,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(gn,{id:`color-${t}`,type:"text",value:s,onChange:o,onBlur:a,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(gn,{type:"color",value:s!=null&&s.startsWith("#")?s:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},pw=[{name:"Default Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{name:"A11y Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{name:"Atom Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{name:"Atelier Sulphurpool Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{name:"CB",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{name:"Coldark Cold",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{name:"Coldark Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{name:"Coy (No Shadow)",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{name:"Darcula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{name:"Dracula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{name:"Duotone Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{name:"Duotone Earth",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{name:"Duotone Forest",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{name:"Duotone Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{name:"Duotone Sea",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{name:"Duotone Space",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{name:"GH Colors",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{name:"Gruvbox Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{name:"Gruvbox Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{name:"Holi",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{name:"Hopscotch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{name:"Lucario",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{name:"Material Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{name:"Material Oceanic",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{name:"Night Owl",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{name:"Nord",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{name:"One Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{name:"One Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{name:"Pojoaque",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{name:"Shades of Purple",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{name:"Solarized Dark Atom",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{name:"Synthwave '84",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{name:"VS",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{name:"VSC Dark Plus",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{name:"Xonokai",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{name:"Z-Touch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],VRe=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:s,setCustomFontFamily:i,customFontSize:a,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:c,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:m}=ur(En(I=>({theme:I.theme,setTheme:I.setTheme,prismThemeUrl:I.prismThemeUrl,setPrismThemeUrl:I.setPrismThemeUrl,customFontFamily:I.customFontFamily,setCustomFontFamily:I.setCustomFontFamily,customFontSize:I.customFontSize,setCustomFontSize:I.setCustomFontSize,chatMaxWidth:I.chatMaxWidth,setChatMaxWidth:I.setChatMaxWidth,customThemeColors:I.customThemeColors,setCustomThemeColor:I.setCustomThemeColor,resetThemeSettings:I.resetThemeSettings}))),[g,v]=C.useState(a??16),[b,w]=C.useState(pw.some(I=>I.url===n)?"":n??"");C.useEffect(()=>{v(a??16)},[a]),C.useEffect(()=>{pw.some(I=>I.url===n)?w(""):w(n??"")},[n]);const x=C.useCallback(I=>{o(I[0])},[o]),_=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&m()},E=I=>{r(I==="default"?null:I),I==="default"||!pw.some(P=>P.url===I)?w(I==="default"?"":I):w("")},k=I=>{const O=I.target.value.trim();w(O),r(O||null)},T=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],R=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}],M=n===null?"default":n;return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsx(e0,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Ot,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsxs(Cc,{value:e??"system",onValueChange:I=>t(I),children:[p.jsx(Tc,{id:"theme-select",className:"w-[180px]",children:p.jsx(kc,{placeholder:"Select theme"})}),p.jsxs(Ac,{children:[p.jsx(Is,{value:"light",children:"Default Light"}),p.jsx(Is,{value:"dark",children:"Default Dark"}),p.jsx(Is,{value:"system",children:"System"}),p.jsx(Is,{value:"TijuLight",children:"Tiju Light"}),p.jsx(Is,{value:"TijuDark",children:"Tiju Dark"}),p.jsx(Is,{value:"custom",children:"User Custom"})]})]})]})}),p.jsxs(e0,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"custom-font-family",children:"Custom Font Family"}),p.jsx(gn,{id:"custom-font-family",value:s??"",onChange:I=>i(I.target.value||null),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"custom-font-size",children:["Base Font Size (",g,"px)"]}),p.jsx(zi,{id:"custom-font-size",min:12,max:20,step:1,value:[g],onValueChange:I=>v(I[0]),onValueCommit:x}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),p.jsxs(Cc,{value:l??"max-w-7xl",onValueChange:I=>c(I||null),children:[p.jsx(Tc,{id:"chat-max-width",className:"w-full mt-1",children:p.jsx(kc,{placeholder:"Select max width"})}),p.jsx(Ac,{children:T.map(I=>p.jsx(Is,{value:I.value,children:I.label},I.value))})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(e0,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-3",children:[p.jsx(Ot,{htmlFor:"prism-theme-select",children:"Select Theme or Enter URL"}),p.jsxs(Cc,{value:M,onValueChange:E,children:[p.jsx(Tc,{id:"prism-theme-select",className:"w-full",children:p.jsx(kc,{placeholder:"Select code theme..."})}),p.jsxs(Ac,{children:[p.jsx(Is,{value:"default",children:"Default (Matches Theme)"}),pw.map(I=>p.jsx(Is,{value:I.url,children:I.name},I.url))]})]}),p.jsx(gn,{id:"prism-theme-url-custom",type:"url",placeholder:"Or paste custom theme URL here...",value:b,onChange:k,className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),e==="custom"&&p.jsx(e0,{title:"Custom Theme Colors",description:"Define custom colors. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:R.map(({key:I,label:O})=>p.jsx(qRe,{label:O,colorKey:I,value:d==null?void 0:d[I],onChange:h},I))})}),p.jsx(ud,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(At,{variant:"outline",size:"sm",onClick:_,children:[p.jsx(CA,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},HRe=yt.memo(VRe);class GRe{constructor(){Me(this,"id","core-settings-theme");Me(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"theme",title:"Theme",component:HRe,order:20})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const KRe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:s,onUpdate:i,fetchStatus:a,isDeleting:o,allAvailableModelsForView:l})=>{var I,O;const[c,d]=C.useState(!0),h=M0(e.type),m=QF(e.type),g=ff(e.type),v=a==="fetching"||o,b=o||a==="fetching",w=o||a==="fetching",x=C.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),_=e.apiKeyId?t.some(P=>P.id===e.apiKeyId):!1,E=h&&!_,k=C.useCallback(async(P,U)=>{const j=new Set(e.enabledModels??[]);U?j.add(P):j.delete(P);const V=Array.from(j);try{await i(e.id,{enabledModels:V})}catch($){ze.error("Failed to update model status."),console.error("Failed to save model toggle:",$)}},[e.enabledModels,e.id,i]),T=()=>d(P=>!P),R=((I=e.enabledModels)==null?void 0:I.length)??0,M=l.length;return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{children:p.jsx("span",{className:mt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",a==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(Wn,{side:"top",children:a==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),E&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{children:p.jsx(Ic,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(Wn,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(fn,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:p.jsx(Ny,{}),className:"h-8 w-8"}),p.jsx(fn,{tooltipText:"Delete",onClick:r,disabled:w,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(oa,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?_?p.jsx("span",{className:"text-green-400",children:((O=t.find(P=>P.id===e.apiKeyId))==null?void 0:O.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),m&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),g&&p.jsx("div",{className:"pt-1",children:p.jsxs(At,{variant:"outline",size:"sm",onClick:s,disabled:v,className:"text-xs h-7 px-2",children:[a==="fetching"&&p.jsx(Fn,{className:"h-3 w-3 mr-1 animate-spin"}),a==="success"&&p.jsx(ni,{className:"h-3 w-3 mr-1 text-green-500"}),a==="error"&&p.jsx(Ic,{className:"h-3 w-3 mr-1 text-destructive"}),a==="idle"&&p.jsx(r1,{className:"h-3 w-3 mr-1"}),a==="fetching"?"Fetching...":a==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",R," / ",M," enabled)"]}),p.jsx(fn,{tooltipText:c?"Show Models":"Hide Models",onClick:T,"aria-label":c?"Show model list":"Hide model list",icon:c?p.jsx(Po,{}):p.jsx(Nc,{}),className:"h-6 w-6"})]}),!c&&p.jsx(FN,{providerId:e.id,allAvailableModels:l,enabledModelIds:x,onToggleModel:k,isLoading:a==="fetching",disabled:o,listHeightClass:"h-[26rem]"})]})]})},WRe=yt.memo(KRe),ZRe=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:s,onCancel:i,onSave:a,onChange:o})=>{const l=C.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),c=C.useCallback((h,m)=>{const g=new Set(t.enabledModels??[]);m?g.add(h):g.delete(h);const v=Array.from(g);o("enabledModels",v)},[t.enabledModels,o]),d=C.useCallback((h,m)=>{o(h,m)},[o]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsx(oU,{formData:t,onChange:d,apiKeys:n,disabled:s})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(FN,{providerId:e,allAvailableModels:r,enabledModelIds:l,onToggleModel:c,disabled:s,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),p.jsx(ud,{className:"my-4"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(At,{variant:"ghost",size:"sm",onClick:i,disabled:s,type:"button",children:[p.jsx(qi,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),p.jsxs(At,{variant:"secondary",size:"sm",onClick:a,disabled:s,type:"button",children:[s&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Ff,{className:"h-4 w-4 mr-1"})," ",s?"Saving...":"Save Changes"]})]})]})},YRe=yt.memo(ZRe),XRe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:s,fetchStatus:i,onSelectModelForDetails:a})=>{const[o,l]=C.useState(!1),[c,d]=C.useState(!1),[h,m]=C.useState(!1),[g,v]=C.useState({}),b=gr(O=>O.getAllAvailableModelDefsForProvider),[w,x]=C.useState([]),_=C.useMemo(()=>[...b(e.id)].sort((P,U)=>(P.name||P.id).localeCompare(U.name||U.id)),[e.id,b]);C.useEffect(()=>{if(o){const O=b(e.id);x([...O].sort((P,U)=>(P.name||P.id).localeCompare(U.name||U.id))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),k=()=>{l(!1),v({}),d(!1)},T=C.useCallback(async()=>{d(!0);try{const O=g.enabledModels&&g.enabledModels.length>0?g.enabledModels:null,P={name:g.name,type:g.type,isEnabled:g.isEnabled,apiKeyId:g.apiKeyId,baseURL:g.baseURL,autoFetchModels:g.autoFetchModels,enabledModels:O};Object.keys(P).forEach(U=>{P[U]===void 0&&delete P[U]}),await n(e.id,P),l(!1),v({}),ze.success(`Provider "${P.name||e.name}" updated.`)}catch(O){console.error("Failed to save provider update:",O),ze.error("Failed to save provider configuration.")}finally{d(!1)}},[g,n,e.id,e.name]),R=C.useCallback((O,P)=>{v(U=>({...U,[O]:P}))},[]),M=C.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){m(!0);try{await r(e.id)}catch(O){console.error("Failed to delete provider:",O),m(!1)}}},[r,e.id,e.name]),I=C.useCallback(async()=>{if(await s(e.id),o){const O=b(e.id);x([...O].sort((P,U)=>(P.name||P.id).localeCompare(U.name||U.id)))}},[s,e.id,o,b]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(YRe,{providerId:e.id,editData:g,apiKeys:t,allAvailableModels:w,isSaving:c,onCancel:k,onSave:T,onChange:R}):p.jsx(WRe,{provider:e,apiKeys:t,onEdit:E,onDelete:M,onFetchModels:I,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:a,allAvailableModelsForView:_})})},JRe=yt.memo(XRe);function QRe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const L_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Am(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function cI(e){return"nodeType"in e}function pa(e){var t,n;return e?Am(e)?e:cI(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function uI(e){const{Document:t}=pa(e);return e instanceof t}function Sb(e){return Am(e)?!1:e instanceof pa(e).HTMLElement}function aG(e){return e instanceof pa(e).SVGElement}function Rm(e){return e?Am(e)?e.document:cI(e)?uI(e)?e:Sb(e)||aG(e)?e.ownerDocument:document:document:document}const Pl=L_?C.useLayoutEffect:C.useEffect;function dI(e){const t=C.useRef(e);return Pl(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function eNe(){const e=C.useRef(null),t=C.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=C.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ky(e,t){t===void 0&&(t=[e]);const n=C.useRef(e);return Pl(()=>{n.current!==e&&(n.current=e)},t),n}function Eb(e,t){const n=C.useRef();return C.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Yx(e){const t=dI(e),n=C.useRef(null),r=C.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function fA(e){const t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}let Ek={};function Cb(e,t){return C.useMemo(()=>{if(t)return t;const n=Ek[e]==null?0:Ek[e]+1;return Ek[e]=n,e+"-"+n},[e,t])}function oG(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const o=Object.entries(a);for(const[l,c]of o){const d=i[l];d!=null&&(i[l]=d+e*c)}return i},{...t})}}const Sp=oG(1),Ty=oG(-1);function tNe(e){return"clientX"in e&&"clientY"in e}function fI(e){if(!e)return!1;const{KeyboardEvent:t}=pa(e.target);return t&&e instanceof t}function nNe(e){if(!e)return!1;const{TouchEvent:t}=pa(e.target);return t&&e instanceof t}function hA(e){if(nNe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return tNe(e)?{x:e.clientX,y:e.clientY}:null}const Ay=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ay.Translate.toString(e),Ay.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),f8="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function rNe(e){return e.matches(f8)?e:e.querySelector(f8)}const sNe={display:"none"};function iNe(e){let{id:t,value:n}=e;return yt.createElement("div",{id:t,style:sNe},n)}function aNe(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return yt.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function oNe(){const[e,t]=C.useState("");return{announce:C.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const lG=C.createContext(null);function lNe(e){const t=C.useContext(lG);C.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function cNe(){const[e]=C.useState(()=>new Set),t=C.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[C.useCallback(r=>{let{type:s,event:i}=r;e.forEach(a=>{var o;return(o=a[s])==null?void 0:o.call(a,i)})},[e]),t]}const uNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},dNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fNe(e){let{announcements:t=dNe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=uNe}=e;const{announce:i,announcement:a}=oNe(),o=Cb("DndLiveRegion"),[l,c]=C.useState(!1);if(C.useEffect(()=>{c(!0)},[]),lNe(C.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;t.onDragMove&&i(t.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;i(t.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;i(t.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;i(t.onDragCancel({active:m,over:g}))}}),[i,t])),!l)return null;const d=yt.createElement(yt.Fragment,null,yt.createElement(iNe,{id:r,value:s.draggable}),yt.createElement(aNe,{id:o,announcement:a}));return n?Ao.createPortal(d,n):d}var Ps;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ps||(Ps={}));function Xx(){}function h8(e,t){return C.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function hNe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const qo=Object.freeze({x:0,y:0});function cG(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function uG(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function pNe(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function p8(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function dG(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function m8(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const mNe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=m8(t,t.left,t.top),i=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const c=cG(m8(l),s);i.push({id:o,data:{droppableContainer:a,value:c}})}}return i.sort(uG)},gNe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=p8(t),i=[];for(const a of r){const{id:o}=a,l=n.get(o);if(l){const c=p8(l),d=s.reduce((m,g,v)=>m+cG(c[v],g),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:a,value:h}})}}return i.sort(uG)};function yNe(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=s-r,o=i-n;if(r<s&&n<i){const l=t.width*t.height,c=e.width*e.height,d=a*o,h=d/(l+c-d);return Number(h.toFixed(4))}return 0}const bNe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const i of r){const{id:a}=i,o=n.get(a);if(o){const l=yNe(o,t);l>0&&s.push({id:a,data:{droppableContainer:i,value:l}})}}return s.sort(pNe)};function vNe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function fG(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:qo}function wNe(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>({...a,top:a.top+e*o.y,bottom:a.bottom+e*o.y,left:a.left+e*o.x,right:a.right+e*o.x}),{...n})}}const xNe=wNe(1);function _Ne(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function SNe(e,t,n){const r=_Ne(t);if(!r)return e;const{scaleX:s,scaleY:i,x:a,y:o}=r,l=e.left-a-(1-s)*parseFloat(n),c=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?e.width/s:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:c,right:l+d,bottom:c+h,left:l}}const ENe={ignoreTransform:!1};function Nm(e,t){t===void 0&&(t=ENe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:d}=pa(e).getComputedStyle(e);c&&(n=SNe(n,c,d))}const{top:r,left:s,width:i,height:a,bottom:o,right:l}=n;return{top:r,left:s,width:i,height:a,bottom:o,right:l}}function g8(e){return Nm(e,{ignoreTransform:!0})}function CNe(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function kNe(e,t){return t===void 0&&(t=pa(e).getComputedStyle(e)),t.position==="fixed"}function TNe(e,t){t===void 0&&(t=pa(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?n.test(i):!1})}function $_(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(uI(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Sb(s)||aG(s)||n.includes(s))return n;const i=pa(e).getComputedStyle(s);return s!==e&&TNe(s,i)&&n.push(s),kNe(s,i)?n:r(s.parentNode)}return e?r(e):n}function hG(e){const[t]=$_(e,1);return t??null}function Ck(e){return!L_||!e?null:Am(e)?e:cI(e)?uI(e)||e===Rm(e).scrollingElement?window:Sb(e)?e:null:null}function pG(e){return Am(e)?e.scrollX:e.scrollLeft}function mG(e){return Am(e)?e.scrollY:e.scrollTop}function pA(e){return{x:pG(e),y:mG(e)}}var Ys;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ys||(Ys={}));function gG(e){return!L_||!e?!1:e===document.scrollingElement}function yG(e){const t={x:0,y:0},n=gG(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:o,maxScroll:r,minScroll:t}}const ANe={x:.2,y:.2};function RNe(e,t,n,r,s){let{top:i,left:a,right:o,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=ANe);const{isTop:c,isBottom:d,isLeft:h,isRight:m}=yG(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!c&&i<=t.top+b.height?(g.y=Ys.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(g.y=Ys.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!m&&o>=t.right-b.width?(g.x=Ys.Forward,v.x=r*Math.abs((t.right-b.width-o)/b.width)):!h&&a<=t.left+b.width&&(g.x=Ys.Backward,v.x=r*Math.abs((t.left+b.width-a)/b.width)),{direction:g,speed:v}}function NNe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function bG(e){return e.reduce((t,n)=>Sp(t,pA(n)),qo)}function INe(e){return e.reduce((t,n)=>t+pG(n),0)}function jNe(e){return e.reduce((t,n)=>t+mG(n),0)}function MNe(e,t){if(t===void 0&&(t=Nm),!e)return;const{top:n,left:r,bottom:s,right:i}=t(e);hG(e)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const DNe=[["x",["left","right"],INe],["y",["top","bottom"],jNe]];class hI{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=$_(n),s=bG(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,a,o]of DNe)for(const l of a)Object.defineProperty(this,l,{get:()=>{const c=o(r),d=s[i]-c;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class u0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function ONe(e){const{EventTarget:t}=pa(e);return e instanceof t?e:Rm(e)}function kk(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Xa;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Xa||(Xa={}));function y8(e){e.preventDefault()}function PNe(e){e.stopPropagation()}var lr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(lr||(lr={}));const vG={start:[lr.Space,lr.Enter],cancel:[lr.Esc],end:[lr.Space,lr.Enter,lr.Tab]},FNe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case lr.Right:return{...n,x:n.x+25};case lr.Left:return{...n,x:n.x-25};case lr.Down:return{...n,y:n.y+25};case lr.Up:return{...n,y:n.y-25}}};class pI{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new u0(Rm(n)),this.windowListeners=new u0(pa(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xa.Resize,this.handleCancel),this.windowListeners.add(Xa.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xa.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&MNe(r),n(qo)}handleKeyDown(t){if(fI(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=vG,coordinateGetter:a=FNe,scrollBehavior:o="smooth"}=s,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:qo;this.referenceCoordinates||(this.referenceCoordinates=d);const h=a(t,{active:n,context:r.current,currentCoordinates:d});if(h){const m=Ty(h,d),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const w=t.code,{isTop:x,isRight:_,isLeft:E,isBottom:k,maxScroll:T,minScroll:R}=yG(b),M=NNe(b),I={x:Math.min(w===lr.Right?M.right-M.width/2:M.right,Math.max(w===lr.Right?M.left:M.left+M.width/2,h.x)),y:Math.min(w===lr.Down?M.bottom-M.height/2:M.bottom,Math.max(w===lr.Down?M.top:M.top+M.height/2,h.y))},O=w===lr.Right&&!_||w===lr.Left&&!E,P=w===lr.Down&&!k||w===lr.Up&&!x;if(O&&I.x!==h.x){const U=b.scrollLeft+m.x,j=w===lr.Right&&U<=T.x||w===lr.Left&&U>=R.x;if(j&&!m.y){b.scrollTo({left:U,behavior:o});return}j?g.x=b.scrollLeft-U:g.x=w===lr.Right?b.scrollLeft-T.x:b.scrollLeft-R.x,g.x&&b.scrollBy({left:-g.x,behavior:o});break}else if(P&&I.y!==h.y){const U=b.scrollTop+m.y,j=w===lr.Down&&U<=T.y||w===lr.Up&&U>=R.y;if(j&&!m.x){b.scrollTo({top:U,behavior:o});return}j?g.y=b.scrollTop-U:g.y=w===lr.Down?b.scrollTop-T.y:b.scrollTop-R.y,g.y&&b.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(t,Sp(Ty(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}pI.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=vG,onActivation:s}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function b8(e){return!!(e&&"distance"in e)}function v8(e){return!!(e&&"delay"in e)}class mI{constructor(t,n,r){var s;r===void 0&&(r=ONe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:a}=i;this.props=t,this.events=n,this.document=Rm(a),this.documentListeners=new u0(this.document),this.listeners=new u0(r),this.windowListeners=new u0(pa(a)),this.initialCoordinates=(s=hA(i))!=null?s:qo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Xa.Resize,this.handleCancel),this.windowListeners.add(Xa.DragStart,y8),this.windowListeners.add(Xa.VisibilityChange,this.handleCancel),this.windowListeners.add(Xa.ContextMenu,y8),this.documentListeners.add(Xa.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(v8(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(b8(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Xa.Click,PNe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xa.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:o}}=i;if(!s)return;const l=(n=hA(t))!=null?n:qo,c=Ty(s,l);if(!r&&o){if(b8(o)){if(o.tolerance!=null&&kk(c,o.tolerance))return this.handleCancel();if(kk(c,o.distance))return this.handleStart()}if(v8(o)&&kk(c,o.tolerance))return this.handleCancel();this.handlePending(o,c);return}t.cancelable&&t.preventDefault(),a(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===lr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const LNe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gI extends mI{constructor(t){const{event:n}=t,r=Rm(n.target);super(t,LNe,r)}}gI.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const $Ne={move:{name:"mousemove"},end:{name:"mouseup"}};var mA;(function(e){e[e.RightClick=2]="RightClick"})(mA||(mA={}));class BNe extends mI{constructor(t){super(t,$Ne,Rm(t.event.target))}}BNe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===mA.RightClick?!1:(r==null||r({event:n}),!0)}}];const Tk={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class zNe extends mI{constructor(t){super(t,Tk)}static setup(){return window.addEventListener(Tk.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Tk.move.name,t)};function t(){}}}zNe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var d0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(d0||(d0={}));var Jx;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Jx||(Jx={}));function UNe(e){let{acceleration:t,activator:n=d0.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:o=Jx.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:d,delta:h,threshold:m}=e;const g=VNe({delta:h,disabled:!i}),[v,b]=eNe(),w=C.useRef({x:0,y:0}),x=C.useRef({x:0,y:0}),_=C.useMemo(()=>{switch(n){case d0.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case d0.DraggableRect:return s}},[n,s,l]),E=C.useRef(null),k=C.useCallback(()=>{const R=E.current;if(!R)return;const M=w.current.x*x.current.x,I=w.current.y*x.current.y;R.scrollBy(M,I)},[]),T=C.useMemo(()=>o===Jx.TreeOrder?[...c].reverse():c,[o,c]);C.useEffect(()=>{if(!i||!c.length||!_){b();return}for(const R of T){if((r==null?void 0:r(R))===!1)continue;const M=c.indexOf(R),I=d[M];if(!I)continue;const{direction:O,speed:P}=RNe(R,I,_,t,m);for(const U of["x","y"])g[U][O[U]]||(P[U]=0,O[U]=0);if(P.x>0||P.y>0){b(),E.current=R,v(k,a),w.current=P,x.current=O;return}}w.current={x:0,y:0},x.current={x:0,y:0},b()},[t,k,r,b,i,a,JSON.stringify(_),JSON.stringify(g),v,c,T,d,JSON.stringify(m)])}const qNe={x:{[Ys.Backward]:!1,[Ys.Forward]:!1},y:{[Ys.Backward]:!1,[Ys.Forward]:!1}};function VNe(e){let{delta:t,disabled:n}=e;const r=fA(t);return Eb(s=>{if(n||!r||!s)return qNe;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ys.Backward]:s.x[Ys.Backward]||i.x===-1,[Ys.Forward]:s.x[Ys.Forward]||i.x===1},y:{[Ys.Backward]:s.y[Ys.Backward]||i.y===-1,[Ys.Forward]:s.y[Ys.Forward]||i.y===1}}},[n,t,r])}function HNe(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Eb(s=>{var i;return t==null?null:(i=r??s)!=null?i:null},[r,t])}function GNe(e,t){return C.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...i]},[]),[e,t])}var Ry;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ry||(Ry={}));var gA;(function(e){e.Optimized="optimized"})(gA||(gA={}));const w8=new Map;function KNe(e,t){let{dragging:n,dependencies:r,config:s}=t;const[i,a]=C.useState(null),{frequency:o,measure:l,strategy:c}=s,d=C.useRef(e),h=w(),m=ky(h),g=C.useCallback(function(x){x===void 0&&(x=[]),!m.current&&a(_=>_===null?x:_.concat(x.filter(E=>!_.includes(E))))},[m]),v=C.useRef(null),b=Eb(x=>{if(h&&!n)return w8;if(!x||x===w8||d.current!==e||i!=null){const _=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){_.set(E.id,E.rect.current);continue}const k=E.node.current,T=k?new hI(l(k),k):null;E.rect.current=T,T&&_.set(E.id,T)}return _}return x},[e,i,n,h,l]);return C.useEffect(()=>{d.current=e},[e]),C.useEffect(()=>{h||g()},[n,h]),C.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),C.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},o))},[o,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function w(){switch(c){case Ry.Always:return!1;case Ry.BeforeDragging:return n;default:return!n}}}function wG(e,t){return Eb(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function WNe(e,t){return wG(e,t)}function ZNe(e){let{callback:t,disabled:n}=e;const r=dI(t),s=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return C.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function B_(e){let{callback:t,disabled:n}=e;const r=dI(t),s=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return C.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function YNe(e){return new hI(Nm(e),e)}function x8(e,t,n){t===void 0&&(t=YNe);const[r,s]=C.useState(null);function i(){s(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const a=ZNe({callback(l){if(e)for(const c of l){const{type:d,target:h}=c;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=B_({callback:i});return Pl(()=>{i(),e?(o==null||o.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),a==null||a.disconnect())},[e]),r}function XNe(e){const t=wG(e);return fG(e,t)}const _8=[];function JNe(e){const t=C.useRef(e),n=Eb(r=>e?r&&r!==_8&&e&&t.current&&e.parentNode===t.current.parentNode?r:$_(e):_8,[e]);return C.useEffect(()=>{t.current=e},[e]),n}function QNe(e){const[t,n]=C.useState(null),r=C.useRef(e),s=C.useCallback(i=>{const a=Ck(i.target);a&&n(o=>o?(o.set(a,pA(a)),new Map(o)):null)},[]);return C.useEffect(()=>{const i=r.current;if(e!==i){a(i);const o=e.map(l=>{const c=Ck(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,pA(c)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{a(e),a(i)};function a(o){o.forEach(l=>{const c=Ck(l);c==null||c.removeEventListener("scroll",s)})}},[s,e]),C.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>Sp(i,a),qo):bG(e):qo,[e,t])}function S8(e,t){t===void 0&&(t=[]);const n=C.useRef(null);return C.useEffect(()=>{n.current=null},t),C.useEffect(()=>{const r=e!==qo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ty(e,n.current):qo}function eIe(e){C.useEffect(()=>{if(!L_)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function tIe(e,t){return C.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,t)},n},{}),[e,t])}function xG(e){return C.useMemo(()=>e?CNe(e):null,[e])}const E8=[];function nIe(e,t){t===void 0&&(t=Nm);const[n]=e,r=xG(n?pa(n):null),[s,i]=C.useState(E8);function a(){i(()=>e.length?e.map(l=>gG(l)?r:new hI(t(l),l)):E8)}const o=B_({callback:a});return Pl(()=>{o==null||o.disconnect(),a(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),s}function rIe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Sb(t)?t:e}function sIe(e){let{measure:t}=e;const[n,r]=C.useState(null),s=C.useCallback(c=>{for(const{target:d}of c)if(Sb(d)){r(h=>{const m=t(d);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=B_({callback:s}),a=C.useCallback(c=>{const d=rIe(c);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=Yx(a);return C.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const iIe=[{sensor:gI,options:{}},{sensor:pI,options:{}}],aIe={current:{}},jw={draggable:{measure:g8},droppable:{measure:g8,strategy:Ry.WhileDragging,frequency:gA.Optimized},dragOverlay:{measure:Nm}};class f0 extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const oIe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new f0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Xx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:jw,measureDroppableContainers:Xx,windowRect:null,measuringScheduled:!1},lIe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Xx,draggableNodes:new Map,over:null,measureDroppableContainers:Xx},z_=C.createContext(lIe),_G=C.createContext(oIe);function cIe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new f0}}}function uIe(e,t){switch(t.type){case Ps.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ps.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ps.DragEnd:case Ps.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ps.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new f0(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Ps.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new f0(e.droppable.containers);return a.set(n,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case Ps.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new f0(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function dIe(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=C.useContext(z_),i=fA(r),a=fA(n==null?void 0:n.id);return C.useEffect(()=>{if(!t&&!r&&i&&a!=null){if(!fI(i)||document.activeElement===i.target)return;const o=s.get(a);if(!o)return;const{activatorNode:l,node:c}=o;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[l.current,c.current]){if(!d)continue;const h=rNe(d);if(h){h.focus();break}}})}},[r,t,s,a,i]),null}function fIe(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...r}),n):n}function hIe(e){return C.useMemo(()=>({draggable:{...jw.draggable,...e==null?void 0:e.draggable},droppable:{...jw.droppable,...e==null?void 0:e.droppable},dragOverlay:{...jw.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function pIe(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const i=C.useRef(!1),{x:a,y:o}=typeof s=="boolean"?{x:s,y:s}:s;Pl(()=>{if(!a&&!o||!t){i.current=!1;return}if(i.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const d=n(c),h=fG(d,r);if(a||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=hG(c);m&&m.scrollBy({top:h.y,left:h.x})}},[t,a,o,r,n])}const SG=C.createContext({...qo,scaleX:1,scaleY:1});var Pu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Pu||(Pu={}));const mIe=C.memo(function(t){var n,r,s,i;let{id:a,accessibility:o,autoScroll:l=!0,children:c,sensors:d=iIe,collisionDetection:h=bNe,measuring:m,modifiers:g,...v}=t;const b=C.useReducer(uIe,void 0,cIe),[w,x]=b,[_,E]=cNe(),[k,T]=C.useState(Pu.Uninitialized),R=k===Pu.Initialized,{draggable:{active:M,nodes:I,translate:O},droppable:{containers:P}}=w,U=M!=null?I.get(M):null,j=C.useRef({initial:null,translated:null}),V=C.useMemo(()=>{var rt;return M!=null?{id:M,data:(rt=U==null?void 0:U.data)!=null?rt:aIe,rect:j}:null},[M,U]),$=C.useRef(null),[re,J]=C.useState(null),[te,X]=C.useState(null),ie=ky(v,Object.values(v)),Z=Cb("DndDescribedBy",a),ee=C.useMemo(()=>P.getEnabled(),[P]),Q=hIe(m),{droppableRects:he,measureDroppableContainers:Se,measuringScheduled:ce}=KNe(ee,{dragging:R,dependencies:[O.x,O.y],config:Q.droppable}),je=HNe(I,M),De=C.useMemo(()=>te?hA(te):null,[te]),Re=Be(),xe=WNe(je,Q.draggable.measure);pIe({activeNode:M!=null?I.get(M):null,config:Re.layoutShiftCompensation,initialRect:xe,measure:Q.draggable.measure});const Fe=x8(je,Q.draggable.measure,xe),st=x8(je?je.parentElement:null),He=C.useRef({activatorEvent:null,active:null,activeNode:je,collisionRect:null,collisions:null,droppableRects:he,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=P.getNodeFor((n=He.current.over)==null?void 0:n.id),H=sIe({measure:Q.dragOverlay.measure}),ue=(r=H.nodeRef.current)!=null?r:je,ke=R?(s=H.rect)!=null?s:Fe:null,ae=!!(H.nodeRef.current&&H.rect),oe=XNe(ae?null:Fe),ne=xG(ue?pa(ue):null),Ee=JNe(R?Ne??je:null),Le=nIe(Ee),Te=fIe(g,{transform:{x:O.x-oe.x,y:O.y-oe.y,scaleX:1,scaleY:1},activatorEvent:te,active:V,activeNodeRect:Fe,containerNodeRect:st,draggingNodeRect:ke,over:He.current.over,overlayNodeRect:H.rect,scrollableAncestors:Ee,scrollableAncestorRects:Le,windowRect:ne}),Xe=De?Sp(De,O):null,St=QNe(Ee),dt=S8(St),It=S8(St,[Fe]),Vt=Sp(Te,dt),Dt=ke?xNe(ke,Te):null,Kt=V&&Dt?h({active:V,collisionRect:Dt,droppableRects:he,droppableContainers:ee,pointerCoordinates:Xe}):null,be=dG(Kt,"id"),[D,K]=C.useState(null),pe=ae?Te:Sp(Te,It),Oe=vNe(pe,(i=D==null?void 0:D.rect)!=null?i:null,Fe),ve=C.useRef(null),Ae=C.useCallback((rt,ye)=>{let{sensor:we,options:Ue}=ye;if($.current==null)return;const Et=I.get($.current);if(!Et)return;const me=rt.nativeEvent,G=new we({active:$.current,activeNode:Et,event:me,options:Ue,context:He,onAbort(W){if(!I.get(W))return;const{onDragAbort:Ie}=ie.current,Ge={id:W};Ie==null||Ie(Ge),_({type:"onDragAbort",event:Ge})},onPending(W,ge,Ie,Ge){if(!I.get(W))return;const{onDragPending:Wt}=ie.current,yn={id:W,constraint:ge,initialCoordinates:Ie,offset:Ge};Wt==null||Wt(yn),_({type:"onDragPending",event:yn})},onStart(W){const ge=$.current;if(ge==null)return;const Ie=I.get(ge);if(!Ie)return;const{onDragStart:Ge}=ie.current,bt={activatorEvent:me,active:{id:ge,data:Ie.data,rect:j}};Ao.unstable_batchedUpdates(()=>{Ge==null||Ge(bt),T(Pu.Initializing),x({type:Ps.DragStart,initialCoordinates:W,active:ge}),_({type:"onDragStart",event:bt}),J(ve.current),X(me)})},onMove(W){x({type:Ps.DragMove,coordinates:W})},onEnd:q(Ps.DragEnd),onCancel:q(Ps.DragCancel)});ve.current=G;function q(W){return async function(){const{active:Ie,collisions:Ge,over:bt,scrollAdjustedTranslate:Wt}=He.current;let yn=null;if(Ie&&Wt){const{cancelDrop:Ht}=ie.current;yn={activatorEvent:me,active:Ie,collisions:Ge,delta:Wt,over:bt},W===Ps.DragEnd&&typeof Ht=="function"&&await Promise.resolve(Ht(yn))&&(W=Ps.DragCancel)}$.current=null,Ao.unstable_batchedUpdates(()=>{x({type:W}),T(Pu.Uninitialized),K(null),J(null),X(null),ve.current=null;const Ht=W===Ps.DragEnd?"onDragEnd":"onDragCancel";if(yn){const Xt=ie.current[Ht];Xt==null||Xt(yn),_({type:Ht,event:yn})}})}}},[I]),de=C.useCallback((rt,ye)=>(we,Ue)=>{const Et=we.nativeEvent,me=I.get(Ue);if($.current!==null||!me||Et.dndKit||Et.defaultPrevented)return;const G={active:me};rt(we,ye.options,G)===!0&&(Et.dndKit={capturedBy:ye.sensor},$.current=Ue,Ae(we,ye))},[I,Ae]),ht=GNe(d,de);eIe(d),Pl(()=>{Fe&&k===Pu.Initializing&&T(Pu.Initialized)},[Fe,k]),C.useEffect(()=>{const{onDragMove:rt}=ie.current,{active:ye,activatorEvent:we,collisions:Ue,over:Et}=He.current;if(!ye||!we)return;const me={active:ye,activatorEvent:we,collisions:Ue,delta:{x:Vt.x,y:Vt.y},over:Et};Ao.unstable_batchedUpdates(()=>{rt==null||rt(me),_({type:"onDragMove",event:me})})},[Vt.x,Vt.y]),C.useEffect(()=>{const{active:rt,activatorEvent:ye,collisions:we,droppableContainers:Ue,scrollAdjustedTranslate:Et}=He.current;if(!rt||$.current==null||!ye||!Et)return;const{onDragOver:me}=ie.current,G=Ue.get(be),q=G&&G.rect.current?{id:G.id,rect:G.rect.current,data:G.data,disabled:G.disabled}:null,W={active:rt,activatorEvent:ye,collisions:we,delta:{x:Et.x,y:Et.y},over:q};Ao.unstable_batchedUpdates(()=>{K(q),me==null||me(W),_({type:"onDragOver",event:W})})},[be]),Pl(()=>{He.current={activatorEvent:te,active:V,activeNode:je,collisionRect:Dt,collisions:Kt,droppableRects:he,draggableNodes:I,draggingNode:ue,draggingNodeRect:ke,droppableContainers:P,over:D,scrollableAncestors:Ee,scrollAdjustedTranslate:Vt},j.current={initial:ke,translated:Dt}},[V,je,Kt,Dt,I,ue,ke,he,P,D,Ee,Vt]),UNe({...Re,delta:O,draggingRect:Dt,pointerCoordinates:Xe,scrollableAncestors:Ee,scrollableAncestorRects:Le});const wt=C.useMemo(()=>({active:V,activeNode:je,activeNodeRect:Fe,activatorEvent:te,collisions:Kt,containerNodeRect:st,dragOverlay:H,draggableNodes:I,droppableContainers:P,droppableRects:he,over:D,measureDroppableContainers:Se,scrollableAncestors:Ee,scrollableAncestorRects:Le,measuringConfiguration:Q,measuringScheduled:ce,windowRect:ne}),[V,je,Fe,te,Kt,st,H,I,P,he,D,Se,Ee,Le,Q,ce,ne]),L=C.useMemo(()=>({activatorEvent:te,activators:ht,active:V,activeNodeRect:Fe,ariaDescribedById:{draggable:Z},dispatch:x,draggableNodes:I,over:D,measureDroppableContainers:Se}),[te,ht,V,Fe,x,Z,I,D,Se]);return yt.createElement(lG.Provider,{value:E},yt.createElement(z_.Provider,{value:L},yt.createElement(_G.Provider,{value:wt},yt.createElement(SG.Provider,{value:Oe},c)),yt.createElement(dIe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),yt.createElement(fNe,{...o,hiddenTextDescribedById:Z}));function Be(){const rt=(re==null?void 0:re.autoScrollEnabled)===!1,ye=typeof l=="object"?l.enabled===!1:l===!1,we=R&&!rt&&!ye;return typeof l=="object"?{...l,enabled:we}:{enabled:we}}}),gIe=C.createContext(null),C8="button",yIe="Draggable";function bIe(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const i=Cb(yIe),{activators:a,activatorEvent:o,active:l,activeNodeRect:c,ariaDescribedById:d,draggableNodes:h,over:m}=C.useContext(z_),{role:g=C8,roleDescription:v="draggable",tabIndex:b=0}=s??{},w=(l==null?void 0:l.id)===t,x=C.useContext(w?SG:gIe),[_,E]=Yx(),[k,T]=Yx(),R=tIe(a,t),M=ky(n);Pl(()=>(h.set(t,{id:t,key:i,node:_,activatorNode:k,data:M}),()=>{const O=h.get(t);O&&O.key===i&&h.delete(t)}),[h,t]);const I=C.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":w&&g===C8?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,g,b,w,v,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:c,attributes:I,isDragging:w,listeners:r?void 0:R,node:_,over:m,setNodeRef:E,setActivatorNodeRef:T,transform:x}}function vIe(){return C.useContext(_G)}const wIe="Droppable",xIe={timeout:25};function _Ie(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const i=Cb(wIe),{active:a,dispatch:o,over:l,measureDroppableContainers:c}=C.useContext(z_),d=C.useRef({disabled:n}),h=C.useRef(!1),m=C.useRef(null),g=C.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...xIe,...s},x=ky(b??r),_=C.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),g.current=null},w)},[w]),E=B_({callback:_,disabled:v||!a}),k=C.useCallback((I,O)=>{E&&(O&&(E.unobserve(O),h.current=!1),I&&E.observe(I))},[E]),[T,R]=Yx(k),M=ky(t);return C.useEffect(()=>{!E||!T.current||(E.disconnect(),h.current=!1,E.observe(T.current))},[T,E]),C.useEffect(()=>(o({type:Ps.RegisterDroppable,element:{id:r,key:i,disabled:n,node:T,rect:m,data:M}}),()=>o({type:Ps.UnregisterDroppable,key:i,id:r})),[r]),C.useEffect(()=>{n!==d.current.disabled&&(o({type:Ps.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:a,rect:m,isOver:(l==null?void 0:l.id)===r,node:T,over:l,setNodeRef:R}}function h0(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function SIe(e,t){return e.reduce((n,r,s)=>{const i=t.get(r);return i&&(n[s]=i),n},Array(e.length))}function mw(e){return e!==null&&e>=0}function EIe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function CIe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const EG=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const i=h0(t,r,n),a=t[s],o=i[s];return!o||!a?null:{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}},gw={scaleX:1,scaleY:1},kIe=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(s===n){const c=i[a];return c?{x:0,y:n<a?c.top+c.height-(o.top+o.height):c.top-o.top,...gw}:null}const l=TIe(i,s,n);return s>n&&s<=a?{x:0,y:-o.height-l,...gw}:s<n&&s>=a?{x:0,y:o.height+l,...gw}:{x:0,y:0,...gw}};function TIe(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return r?n<t?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const CG="Sortable",kG=yt.createContext({activeIndex:-1,containerId:CG,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:EG,disabled:{draggable:!1,droppable:!1}});function AIe(e){let{children:t,id:n,items:r,strategy:s=EG,disabled:i=!1}=e;const{active:a,dragOverlay:o,droppableRects:l,over:c,measureDroppableContainers:d}=vIe(),h=Cb(CG,n),m=o.rect!==null,g=C.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),v=a!=null,b=a?g.indexOf(a.id):-1,w=c?g.indexOf(c.id):-1,x=C.useRef(g),_=!EIe(g,x.current),E=w!==-1&&b===-1||_,k=CIe(i);Pl(()=>{_&&v&&d(g)},[_,g,v,d]),C.useEffect(()=>{x.current=g},[g]);const T=C.useMemo(()=>({activeIndex:b,containerId:h,disabled:k,disableTransforms:E,items:g,overIndex:w,useDragOverlay:m,sortedRects:SIe(g,l),strategy:s}),[b,h,k.draggable,k.droppable,E,g,w,l,m,s]);return yt.createElement(kG.Provider,{value:T},t)}const RIe=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return h0(n,r,s).indexOf(t)},NIe=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:o,previousContainerId:l,transition:c}=e;return!c||!r||o!==i&&s===a?!1:n?!0:a!==s&&t===l},IIe={duration:200,easing:"ease"},TG="transform",jIe=Ay.Transition.toString({property:TG,duration:0,easing:"linear"}),MIe={roleDescription:"sortable"};function DIe(e){let{disabled:t,index:n,node:r,rect:s}=e;const[i,a]=C.useState(null),o=C.useRef(n);return Pl(()=>{if(!t&&n!==o.current&&r.current){const l=s.current;if(l){const c=Nm(r.current,{ignoreTransform:!0}),d={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(d.x||d.y)&&a(d)}}n!==o.current&&(o.current=n)},[t,n,r,s]),C.useEffect(()=>{i&&a(null)},[i]),i}function OIe(e){let{animateLayoutChanges:t=NIe,attributes:n,disabled:r,data:s,getNewIndex:i=RIe,id:a,strategy:o,resizeObserverConfig:l,transition:c=IIe}=e;const{items:d,containerId:h,activeIndex:m,disabled:g,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:x,strategy:_}=C.useContext(kG),E=PIe(r,g),k=d.indexOf(a),T=C.useMemo(()=>({sortable:{containerId:h,index:k,items:d},...s}),[h,s,k,d]),R=C.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:M,node:I,isOver:O,setNodeRef:P}=_Ie({id:a,data:T,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...l}}),{active:U,activatorEvent:j,activeNodeRect:V,attributes:$,setNodeRef:re,listeners:J,isDragging:te,over:X,setActivatorNodeRef:ie,transform:Z}=bIe({id:a,data:T,attributes:{...MIe,...n},disabled:E.draggable}),ee=QRe(P,re),Q=!!U,he=Q&&!v&&mw(m)&&mw(w),Se=!x&&te,ce=Se&&he?Z:null,De=he?ce??(o??_)({rects:b,activeNodeRect:V,activeIndex:m,overIndex:w,index:k}):null,Re=mw(m)&&mw(w)?i({id:a,items:d,activeIndex:m,overIndex:w}):k,xe=U==null?void 0:U.id,Fe=C.useRef({activeId:xe,items:d,newIndex:Re,containerId:h}),st=d!==Fe.current.items,He=t({active:U,containerId:h,isDragging:te,isSorting:Q,id:a,index:k,items:d,newIndex:Fe.current.newIndex,previousItems:Fe.current.items,previousContainerId:Fe.current.containerId,transition:c,wasDragging:Fe.current.activeId!=null}),Ne=DIe({disabled:!He,index:k,node:I,rect:M});return C.useEffect(()=>{Q&&Fe.current.newIndex!==Re&&(Fe.current.newIndex=Re),h!==Fe.current.containerId&&(Fe.current.containerId=h),d!==Fe.current.items&&(Fe.current.items=d)},[Q,Re,h,d]),C.useEffect(()=>{if(xe===Fe.current.activeId)return;if(xe!=null&&Fe.current.activeId==null){Fe.current.activeId=xe;return}const ue=setTimeout(()=>{Fe.current.activeId=xe},50);return()=>clearTimeout(ue)},[xe]),{active:U,activeIndex:m,attributes:$,data:T,rect:M,index:k,newIndex:Re,items:d,isOver:O,isSorting:Q,isDragging:te,listeners:J,node:I,overIndex:w,over:X,setNodeRef:ee,setActivatorNodeRef:ie,setDroppableNodeRef:P,setDraggableNodeRef:re,transform:Ne??De,transition:H()};function H(){if(Ne||st&&Fe.current.newIndex===k)return jIe;if(!(Se&&!fI(j)||!c)&&(Q||He))return Ay.Transition.toString({...c,property:TG})}}function PIe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Qx(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const FIe=[lr.Down,lr.Right,lr.Up,lr.Left],LIe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:o}}=t;if(FIe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=s.get(h.id);if(m)switch(e.code){case lr.Down:r.top<m.top&&l.push(h);break;case lr.Up:r.top>m.top&&l.push(h);break;case lr.Left:r.left>m.left&&l.push(h);break;case lr.Right:r.left<m.left&&l.push(h);break}});const c=gNe({collisionRect:r,droppableRects:s,droppableContainers:l});let d=dG(c,"id");if(d===(a==null?void 0:a.id)&&c.length>1&&(d=c[1].id),d!=null){const h=i.get(n.id),m=i.get(d),g=m?s.get(m.id):null,v=m==null?void 0:m.node.current;if(v&&g&&h&&m){const w=$_(v).some((R,M)=>o[M]!==R),x=AG(h,m),_=$Ie(h,m),E=w||!x?{x:0,y:0}:{x:_?r.width-g.width:0,y:_?r.height-g.height:0},k={x:g.left,y:g.top};return E.x&&E.y?k:Ty(k,E)}}}};function AG(e,t){return!Qx(e)||!Qx(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function $Ie(e,t){return!Qx(e)||!Qx(t)||!AG(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const BIe=({id:e,modelDetails:t,buttonsDisabled:n,onMoveToTop:r,onMoveUp:s,onMoveDown:i,isFirst:a,isLast:o})=>{var T,R,M;const{attributes:l,listeners:c,setNodeRef:d,transform:h,transition:m,isDragging:g}=OIe({id:e,disabled:!1}),v={transform:Ay.Transform.toString(h),transition:m,zIndex:g?10:void 0},b=new Set(((T=t.metadataSummary)==null?void 0:T.supported_parameters)??[]),w=new Set(((R=t.metadataSummary)==null?void 0:R.input_modalities)??[]),x=b.has("reasoning"),_=b.has("web_search")||b.has("web_search_options"),E=b.has("tools"),k=Array.from(w).some(I=>I!=="text");return p.jsxs("div",{ref:d,style:v,className:mt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",g&&"shadow-lg border-primary bg-card","cursor-grab active:cursor-grabbing"),"aria-label":`Drag to reorder model ${t.name}`,children:[p.jsx("button",{...l,...c,type:"button",className:mt("p-1 flex-shrink-0","hover:text-foreground"),"aria-hidden":"true",tabIndex:-1,children:p.jsx(aY,{className:"h-5 w-5 text-muted-foreground"})}),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsxs(Ot,{className:mt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:[t.name," ",p.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.providerName,")"]})]}),p.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[x&&p.jsx(Al,{className:"h-3 w-3 text-blue-500"}),_&&p.jsx(Qs,{className:"h-3 w-3 text-green-500"}),E&&p.jsx(Sf,{className:"h-3 w-3 text-orange-500"}),k&&p.jsx(_f,{className:"h-3 w-3 text-purple-500"})]})]}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto flex-shrink-0",children:[((M=t.metadataSummary)==null?void 0:M.description)&&p.jsx(qn,{delayDuration:100,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx("span",{className:"p-1 text-muted-foreground hover:text-foreground cursor-default","aria-label":"Model information",children:p.jsx(SA,{className:"h-4 w-4"})})}),p.jsx(Wn,{side:"top",align:"end",className:"max-w-xs break-words",children:p.jsx("p",{children:t.metadataSummary.description})})]})}),p.jsx(fn,{tooltipText:"Move to Top",onClick:()=>r(e),disabled:a||n,icon:p.jsx(pZ,{}),className:"h-6 w-6"}),p.jsx(fn,{tooltipText:"Move Up",onClick:()=>s(e),disabled:a||n,icon:p.jsx(rZ,{}),className:"h-6 w-6"}),p.jsx(fn,{tooltipText:"Move Down",onClick:()=>i(e),disabled:o||n,icon:p.jsx(W8,{}),className:"h-6 w-6"})]})]})},zIe=({setGlobalModelSortOrderFromModule:e})=>{const{dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAvailableModelListItems:s}=gr(En(O=>({dbProviderConfigs:O.dbProviderConfigs,globalModelSortOrder:O.globalModelSortOrder,isLoading:O.isLoading,getAvailableModelListItems:O.getAvailableModelListItems}))),[i,a]=C.useState(""),[o,l]=C.useState(!1),[c,d]=C.useState(()=>new Set(t.map(O=>O.id))),[h,m]=C.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1});C.useEffect(()=>{d(new Set(t.map(O=>O.id)))},[t]);const g=C.useMemo(()=>{const O=s(),P=new Map(O.map(re=>[re.id,re])),U=new Set;t.forEach(re=>{re.isEnabled&&re.enabledModels&&re.enabledModels.forEach(J=>{U.add(n0(re.id,J))})});const j=O.filter(re=>U.has(re.id)),V=[],$=new Set;return n.forEach(re=>{if(U.has(re)){const J=P.get(re);J&&!$.has(re)&&(V.push(J),$.add(re))}}),j.forEach(re=>{$.has(re.id)||V.push(re)}),V},[t,n,s]),v=C.useMemo(()=>{let O=g;if(c.size!==t.length&&(O=O.filter(U=>c.has(U.providerId))),i.trim()){const U=i.toLowerCase();O=O.filter(j=>j.name.toLowerCase().includes(U)||j.providerName.toLowerCase().includes(U)||j.id.toLowerCase().includes(U))}const P=Object.entries(h).filter(([,U])=>U).map(([U])=>U);return P.length>0&&(O=O.filter(U=>{var $,re;const j=new Set((($=U.metadataSummary)==null?void 0:$.supported_parameters)??[]),V=new Set(((re=U.metadataSummary)==null?void 0:re.input_modalities)??[]);return P.every(J=>{switch(J){case"reasoning":return j.has("reasoning");case"webSearch":return j.has("web_search")||j.has("web_search_options");case"tools":return j.has("tools");case"multimodal":return Array.from(V).some(te=>te!=="text");default:return!0}})})),O},[g,i,c,t.length,h]),b=i.trim().length>0||c.size!==t.length||Object.values(h).some(Boolean),w=C.useMemo(()=>v.map(O=>O.id),[v]),x=C.useCallback(O=>{const{active:P,over:U}=O;if(U&&P.id!==U.id){const j=g.map(te=>te.id),V=P.id,$=U.id,re=j.indexOf(V),J=j.indexOf($);if(re!==-1&&J!==-1){const te=h0(j,re,J);e(te)}else console.warn("DND: Could not find dragged items in the full model order. This might happen if the underlying list changed during drag or items are filtered out.")}},[g,e]),_=C.useCallback((O,P)=>{if(b)return;const U=g.map($=>$.id),j=U.indexOf(O);if(j===-1)return;let V;if(P==="top"){if(j===0)return;const $=U.splice(j,1)[0];U.unshift($),V=U}else if(P==="up"){if(j===0)return;V=h0(U,j,j-1)}else{if(j===U.length-1)return;V=h0(U,j,j+1)}e(V)},[g,e,b]),E=hNe(h8(gI),h8(pI,{coordinateGetter:LIe})),k=C.useCallback((O,P)=>{d(U=>{const j=new Set(U);return P?j.add(O):j.delete(O),j})},[]),T=O=>{m(P=>({...P,[O]:!P[O]}))},R=c.size!==t.length?1:0,M=Object.values(h).filter(Boolean).length,I=R+M;return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx(cr,{className:"h-8 w-1/3"}),p.jsx(cr,{className:"h-6 w-1/2"}),p.jsx(cr,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models to define their display order. Filtering affects the view below. Move buttons (up/down/top) are disabled when filters are active."}),p.jsx(ud,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Ot,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:O=>a(O.target.value),className:"pl-8 w-full h-9",disabled:r})]}),p.jsxs(io,{open:o,onOpenChange:l,children:[p.jsx(ao,{asChild:!0,children:p.jsxs(At,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:r||t.length===0,children:[p.jsx(n1,{className:"h-4 w-4 mr-1"}),"Filters",I>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:I})]})}),p.jsx(oo,{className:"w-64 p-0",children:p.jsxs("div",{className:"p-2 space-y-3",children:[p.jsxs("div",{children:[p.jsx(Ot,{className:"text-xs px-2 font-semibold block mb-1",children:"Providers"}),p.jsx(Gi,{className:"h-32 border rounded-md p-1",children:t.map(O=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(Ol,{id:`organizer-provider-filter-${O.id}`,checked:c.has(O.id),onCheckedChange:P=>k(O.id,!!P)}),p.jsxs(Ot,{htmlFor:`organizer-provider-filter-${O.id}`,className:"text-sm font-normal cursor-pointer",children:[O.name," (",O.type,")"]})]},O.id))})]}),p.jsxs("div",{children:[p.jsx(Ot,{className:"text-xs px-2 font-semibold block mb-1",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1 p-1 border rounded-md",children:[p.jsx(fn,{tooltipText:"Reasoning",icon:p.jsx(Al,{}),onClick:()=>T("reasoning"),variant:h.reasoning?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",h.reasoning&&"text-primary"),children:"Reasoning"}),p.jsx(fn,{tooltipText:"Web Search",icon:p.jsx(Qs,{}),onClick:()=>T("webSearch"),variant:h.webSearch?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",h.webSearch&&"text-primary"),children:"Web"}),p.jsx(fn,{tooltipText:"Tools",icon:p.jsx(Sf,{}),onClick:()=>T("tools"),variant:h.tools?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",h.tools&&"text-primary"),children:"Tools"}),p.jsx(fn,{tooltipText:"Multimodal",icon:p.jsx(_f,{}),onClick:()=>T("multimodal"),variant:h.multimodal?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",h.multimodal&&"text-primary"),children:"Multimodal"})]})]})]})})]})]}),p.jsx(Gi,{className:"h-[calc(20*2.75rem+2px)] w-full rounded-md border border-border p-3 bg-background/50",children:v.length>0?p.jsx(mIe,{sensors:E,collisionDetection:mNe,onDragEnd:x,children:p.jsx(AIe,{items:w,strategy:kIe,children:v.map(O=>p.jsx(BIe,{id:O.id,modelDetails:O,onMoveToTop:()=>_(O.id,"top"),onMoveUp:()=>_(O.id,"up"),onMoveDown:()=>_(O.id,"down"),isFirst:g.findIndex(P=>P.id===O.id)===0,isLast:g.findIndex(P=>P.id===O.id)===g.length-1,buttonsDisabled:b},O.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:b?"No models match your filters.":"No models enabled globally. Enable models within provider configurations."})})]})]})},yw=e=>{if(!e)return"N/A";const t=parseFloat(e);return isNaN(t)?"N/A":`$${(t/1e3).toFixed(4)} / 1K tokens`},Ka=(e,t,n=!1,r="secondary")=>t==null||String(t).trim()===""?null:p.jsxs(ts,{children:[p.jsx(On,{className:"font-medium text-xs w-1/3 py-1.5 px-3",children:e}),p.jsx(On,{className:"text-xs py-1.5 px-3 break-all",children:n?p.jsx(_p,{variant:r,className:"text-xs",children:String(t)}):Array.isArray(t)?p.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((s,i)=>p.jsx(_p,{variant:"outline",className:"text-xs",children:String(s)},i))}):String(t)})]}),UIe=({modelId:e})=>{var g,v,b,w,x,_,E,k,T,R,M,I;const{createAiModelConfig:t,dbProviderConfigs:n,dbApiKeys:r,updateProviderConfig:s,isLoading:i}=gr(En(O=>({createAiModelConfig:O.createAiModelConfig,dbProviderConfigs:O.dbProviderConfigs,dbApiKeys:O.dbApiKeys,updateProviderConfig:O.updateProviderConfig,isLoading:O.isLoading}))),a=C.useMemo(()=>{if(!e)return;const{providerId:O,modelId:P}=Mo(e);if(!O||!P)return;const U=n.find(V=>V.id===O);if(!U)return;const j=r.find(V=>V.id===U.apiKeyId);return t(U,P,j==null?void 0:j.value)},[e,n,r,t]),o=a==null?void 0:a.metadata,l=C.useCallback(async()=>{if(!a||!e)return;const{providerId:O,modelId:P}=Mo(e);if(!O||!P)return;const U=n.find(re=>re.id===O);if(!U){ze.error("Provider configuration not found.");return}const j=new Set(U.enabledModels??[]),V=j.has(P);V?j.delete(P):j.add(P);const $=Array.from(j);try{await s(U.id,{enabledModels:$}),ze.success(`Model "${a.name}" ${V?"disabled":"enabled"}.`)}catch{ze.error("Failed to update model status.")}},[a,e,n,s]);if(i)return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsx(cr,{className:"h-8 w-3/4 flex-shrink-0"}),p.jsx(cr,{className:"h-4 w-1/2 flex-shrink-0"}),p.jsxs("div",{className:"flex-grow space-y-2",children:[p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"})]})]});if(!e)return p.jsxs("div",{className:"p-4 text-center text-muted-foreground h-full flex flex-col items-center justify-center",children:[p.jsx(Ic,{className:"mx-auto h-10 w-10 mb-2 text-amber-500"}),p.jsx("p",{className:"text-sm",children:'No model selected. Click a model in the "Configuration" or "Browse Models" tab to view its details.'})]});if(!a||!o)return p.jsxs("div",{className:"p-4 text-center text-destructive h-full flex flex-col items-center justify-center",children:[p.jsx(Ic,{className:"mx-auto h-10 w-10 mb-2"}),p.jsxs("p",{className:"text-sm",children:["Details not available for model: ",e,". It might be misconfigured or no longer available."]})]});const{providerId:c,modelId:d}=Mo(e),h=n.find(O=>O.id===c),m=d!=null&&(h==null?void 0:h.isEnabled)&&((g=h==null?void 0:h.enabledModels)==null?void 0:g.includes(d))===!0;return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[p.jsxs("h4",{className:"text-lg font-semibold text-card-foreground truncate",children:[a.name,p.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",a.providerName,")"]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Ot,{htmlFor:`enable-details-${d}`,className:"text-xs",children:m?"Enabled":"Disabled"}),p.jsx(ia,{id:`enable-details-${d}`,checked:m,onCheckedChange:l,disabled:!(h!=null&&h.isEnabled),"aria-label":`Enable model ${a.name}`})]})]}),o.description&&p.jsx("p",{className:"text-xs text-muted-foreground flex-shrink-0",children:o.description}),p.jsx(Gi,{className:"flex-grow border rounded-md bg-background/30",children:p.jsxs(Jf,{children:[p.jsxs(ake,{className:"py-2 text-xs",children:["Model ID: ",o.id]}),p.jsxs(Qf,{children:[Ka("Context Length",((v=o.top_provider)==null?void 0:v.context_length)??o.context_length),Ka("Max Completion Tokens",(b=o.top_provider)==null?void 0:b.max_completion_tokens),Ka("Input Modalities",(w=o.architecture)==null?void 0:w.input_modalities),Ka("Output Modalities",(x=o.architecture)==null?void 0:x.output_modalities),Ka("Tokenizer",(_=o.architecture)==null?void 0:_.tokenizer,!0),Ka("Instruct Type",(E=o.architecture)==null?void 0:E.instruct_type,!0),Ka("Pricing (Prompt)",yw((k=o.pricing)==null?void 0:k.prompt)),Ka("Pricing (Completion)",yw((T=o.pricing)==null?void 0:T.completion)),Ka("Pricing (Image)",yw((R=o.pricing)==null?void 0:R.image)),Ka("Pricing (Request)",yw((M=o.pricing)==null?void 0:M.request)),Ka("Supported Parameters",o.supported_parameters),Ka("Moderated",(I=o.top_provider)!=null&&I.is_moderated?p.jsx(t1,{className:"h-4 w-4 text-green-500"}):"No")]})]})})]})},qIe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=gr(En(m=>({apiKeys:m.dbApiKeys,addApiKey:m.addApiKey,deleteApiKey:m.deleteApiKey,isLoading:m.isLoading}))),[s,i]=C.useState(!1),[a,o]=C.useState(!1),[l,c]=C.useState({}),d=C.useCallback(async(m,g,v)=>{o(!0);try{await t(m,g,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),h=C.useCallback(async(m,g)=>{if(window.confirm(`Are you sure you want to delete the API key "${g}"? This will unlink it from any providers using it.`)){c(v=>({...v,[m]:!0}));try{await n(m)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{c(v=>({...v,[m]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!s&&p.jsxs(At,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(Pf,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),s&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(tU,{onSave:d,onCancel:()=>i(!1),isSaving:a})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!s?p.jsxs("div",{className:"space-y-2",children:[p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"})]}):(e||[]).length===0&&!s?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Jf,{children:[p.jsx(km,{children:p.jsxs(ts,{children:[p.jsx(Lr,{children:"Name"}),p.jsx(Lr,{children:"Provider Type"}),p.jsx(Lr,{children:"Created"}),p.jsx(Lr,{className:"text-right",children:"Actions"})]})}),p.jsx(Qf,{children:(e||[]).map(m=>{const g=l[m.id];return p.jsxs(ts,{className:g?"opacity-50":"",children:[p.jsx(On,{className:"font-medium",children:m.name||"Unnamed Key"}),p.jsx(On,{children:m.providerId||"Unknown"}),p.jsx(On,{className:"text-xs text-muted-foreground",children:wT(new Date(m.createdAt),"PPp")}),p.jsx(On,{className:"text-right",children:p.jsx(fn,{tooltipText:"Delete Key",onClick:()=>h(m.id,m.name||"Unnamed Key"),disabled:g,"aria-label":`Delete key ${m.name||"Unnamed Key"}`,icon:g?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(oa,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},m.id)})})]})})]})]})},VIe=yt.memo(qIe),HIe=({onSelectModelForDetails:e})=>{const[t,n]=C.useState(null),[r,s]=C.useState(null),i=C.useCallback(P=>{if(P){n(P);const U=P.querySelector("[data-radix-scroll-area-viewport]");if(U)s(U);else{const j=new MutationObserver(()=>{const V=P.querySelector("[data-radix-scroll-area-viewport]");V&&(s(V),j.disconnect())});return j.observe(P,{childList:!0,subtree:!0}),()=>j.disconnect()}}else n(null),s(null)},[]),{getAvailableModelListItems:a,isLoading:o,dbProviderConfigs:l}=gr(En(P=>({getAvailableModelListItems:P.getAvailableModelListItems,isLoading:P.isLoading,dbProviderConfigs:P.dbProviderConfigs}))),[c,d]=C.useState(""),[h,m]=C.useState(!1),[g,v]=C.useState(()=>new Set(l.map(P=>P.id))),[b,w]=C.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),x=C.useMemo(()=>a(),[a]);C.useEffect(()=>{v(new Set(l.map(P=>P.id)))},[l]);const _=C.useMemo(()=>{let P=x;if(g.size!==l.length&&(P=P.filter(j=>g.has(j.providerId))),c.trim()){const j=c.toLowerCase();P=P.filter(V=>V.name.toLowerCase().includes(j)||V.providerName.toLowerCase().includes(j)||V.id.toLowerCase().includes(j))}const U=Object.entries(b).filter(([,j])=>j).map(([j])=>j);return U.length>0&&(P=P.filter(j=>{var re,J;const V=new Set(((re=j.metadataSummary)==null?void 0:re.supported_parameters)??[]),$=new Set(((J=j.metadataSummary)==null?void 0:J.input_modalities)??[]);return U.every(te=>{switch(te){case"reasoning":return V.has("reasoning");case"webSearch":return V.has("web_search")||V.has("web_search_options");case"tools":return V.has("tools");case"multimodal":return Array.from($).some(X=>X!=="text");default:return!0}})})),P.sort((j,V)=>{const $=j.providerName.localeCompare(V.providerName);return $!==0?$:j.name.localeCompare(V.name)})},[x,c,g,l.length,b]),E=PN({count:_.length,getScrollElement:()=>r,estimateSize:()=>48,overscan:10}),k=C.useCallback((P,U)=>{v(j=>{const V=new Set(j);return U?V.add(P):V.delete(P),V})},[]),T=P=>{w(U=>({...U,[P]:!U[P]}))},R=P=>{e(P)},M=g.size!==l.length?1:0,I=Object.values(b).filter(Boolean).length,O=M+I;return o?p.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[p.jsx(cr,{className:"h-9 w-full flex-shrink-0"}),p.jsx(cr,{className:"h-full w-full flex-grow"})]}):p.jsxs("div",{className:"space-y-3 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Qs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(gn,{type:"search",placeholder:"Filter models by name or provider...",value:c,onChange:P=>d(P.target.value),className:"pl-8 w-full h-9",disabled:o})]}),p.jsxs(io,{open:h,onOpenChange:m,children:[p.jsx(ao,{asChild:!0,children:p.jsxs(At,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:o||l.length===0,children:[p.jsx(n1,{className:"h-4 w-4 mr-1"}),"Filters",O>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:O})]})}),p.jsx(oo,{className:"w-64 p-0",children:p.jsxs("div",{className:"p-2 space-y-3",children:[p.jsxs("div",{children:[p.jsx(Ot,{className:"text-xs px-2 font-semibold block mb-1",children:"Providers"}),p.jsx(Gi,{className:"h-32 border rounded-md p-1",children:l.map(P=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(Ol,{id:`model-browser-provider-filter-${P.id}`,checked:g.has(P.id),onCheckedChange:U=>k(P.id,!!U)}),p.jsxs(Ot,{htmlFor:`model-browser-provider-filter-${P.id}`,className:"text-sm font-normal cursor-pointer",children:[P.name," (",P.type,")"]})]},P.id))})]}),p.jsxs("div",{children:[p.jsx(Ot,{className:"text-xs px-2 font-semibold block mb-1",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1 p-1 border rounded-md",children:[p.jsx(fn,{tooltipText:"Reasoning",icon:p.jsx(Al,{}),onClick:()=>T("reasoning"),variant:b.reasoning?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",b.reasoning&&"text-primary"),children:"Reasoning"}),p.jsx(fn,{tooltipText:"Web Search",icon:p.jsx(Qs,{}),onClick:()=>T("webSearch"),variant:b.webSearch?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",b.webSearch&&"text-primary"),children:"Web"}),p.jsx(fn,{tooltipText:"Tools",icon:p.jsx(Sf,{}),onClick:()=>T("tools"),variant:b.tools?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",b.tools&&"text-primary"),children:"Tools"}),p.jsx(fn,{tooltipText:"Multimodal",icon:p.jsx(_f,{}),onClick:()=>T("multimodal"),variant:b.multimodal?"secondary":"outline",className:mt("h-7 w-auto px-2 text-xs",b.multimodal&&"text-primary"),children:"Multimodal"})]})]})]})})]})]}),p.jsxs(Gi,{className:"flex-grow border rounded-md bg-background/50 h-[calc(15*2.5rem+2px)]",ref:i,children:[r&&p.jsx("div",{style:{height:`${E.getTotalSize()}px`,width:"100%",position:"relative"},children:_.length===0&&!o?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 absolute inset-0 flex items-center justify-center",children:"No models match your filters."}):E.getVirtualItems().map(P=>{var j;const U=_[P.index];return U?p.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${P.size}px`,transform:`translateY(${P.start}px)`},className:"p-1",children:p.jsx(qn,{delayDuration:300,children:p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsxs("button",{className:"w-full text-left p-1.5 rounded hover:bg-muted/50 flex flex-col",onClick:()=>R(U.id),children:[p.jsx("span",{className:"text-sm font-medium truncate",children:U.name}),p.jsx("span",{className:"text-xs text-muted-foreground truncate",children:U.providerName})]})}),((j=U.metadataSummary)==null?void 0:j.description)&&p.jsx(Wn,{side:"bottom",align:"start",className:"max-w-xs",children:p.jsx("p",{children:U.metadataSummary.description})})]})})},U.id):null})}),!r&&!o&&p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Initializing list..."})]})]})},GIe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:s,providerFetchStatus:i,dbProviderConfigs:a,apiKeys:o,isLoading:l}=gr(En(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[c,d]=C.useState(!1),h=()=>d(!0),m=C.useCallback(()=>d(!1),[]),g=C.useCallback(async b=>{await s(b)},[s]),v=C.useMemo(()=>a||[],[a]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:c?p.jsx(lU,{apiKeys:o||[],onAddProvider:t,onCancel:m}):p.jsxs(At,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(Pf,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!c?p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx(cr,{className:"h-24 w-full"}),p.jsx(cr,{className:"h-24 w-full"}),p.jsx(cr,{className:"h-24 w-full"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>p.jsx(JRe,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:g,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!c&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},KIe=({setGlobalModelSortOrderFromModule:e})=>{const{selectedModelForDetails:t,setSelectedModelForDetails:n}=gr(En(o=>({selectedModelForDetails:o._selectedModelForDetails,setSelectedModelForDetails:o.setSelectedModelForDetails}))),[r,s]=C.useState("providers-config"),i=C.useCallback(o=>{n(o),o&&s("providers-details-current")},[n,s]),a=C.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(GIe,{onSelectModelForDetails:i})},{value:"providers-order",label:"Model Order",content:p.jsx(zIe,{setGlobalModelSortOrderFromModule:e})},{value:"api-keys",label:"API Keys",content:p.jsx(VIe,{})},{value:"providers-details-current",label:"Selected Model",content:p.jsx(UIe,{modelId:t})},{value:"providers-browse-all",label:"Browse Models",content:p.jsx(HIe,{onSelectModelForDetails:i})}],[t,i,e]);return p.jsx(Kc,{tabs:a,initialValue:r,onValueChange:s,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},WIe=yt.memo(KIe);class ZIe{constructor(){Me(this,"id","core-provider-settings");Me(this,"modApiRef",null);Me(this,"eventUnsubscribers",[]);Me(this,"setGlobalModelSortOrderFromModule",t=>{var n;(n=this.modApiRef)==null||n.emit(Un.setGlobalModelSortOrderRequest,{ids:t})})}async initialize(t){this.modApiRef=t}register(t){this.modApiRef=t,t.registerSettingsTab({id:"providers",title:"Providers & Models",order:20,component:()=>yt.createElement(WIe,{setGlobalModelSortOrderFromModule:this.setGlobalModelSortOrderFromModule})})}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.modApiRef=null}}const YIe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t}=ur(En(n=>({globalSystemPrompt:n.globalSystemPrompt,setGlobalSystemPrompt:n.setGlobalSystemPrompt})));return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(Ot,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx(kd,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:n=>t(n.target.value),rows:6})]})})},XIe=()=>{const{temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:s,setMaxTokens:i,topK:a,setTopK:o,presencePenalty:l,setPresencePenalty:c,frequencyPenalty:d,setFrequencyPenalty:h}=ur(En(R=>({temperature:R.temperature,setTemperature:R.setTemperature,topP:R.topP,setTopP:R.setTopP,maxTokens:R.maxTokens,setMaxTokens:R.setMaxTokens,topK:R.topK,setTopK:R.setTopK,presencePenalty:R.presencePenalty,setPresencePenalty:R.setPresencePenalty,frequencyPenalty:R.frequencyPenalty,setFrequencyPenalty:R.setFrequencyPenalty}))),[m,g]=C.useState(e),[v,b]=C.useState(n??1),[w,x]=C.useState(l??0),[_,E]=C.useState(d??0);C.useEffect(()=>g(e),[e]),C.useEffect(()=>b(n??1),[n]),C.useEffect(()=>x(l??0),[l]),C.useEffect(()=>E(d??0),[d]);const k=C.useCallback((R,M)=>{const I=M.target.value,O=I===""?null:parseInt(I,10);(I===""||!isNaN(O)&&O!==null)&&R(O)},[]),T=C.useCallback((R,M)=>{R(M[0])},[]);return p.jsxs("div",{className:"space-y-6",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"global-temperature",className:"text-sm",children:["Temperature (",m.toFixed(2),")"]}),p.jsx(zi,{id:"global-temperature",min:0,max:1,step:.01,value:[m],onValueChange:R=>g(R[0]),onValueCommit:R=>T(t,R)})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"global-top-p",className:"text-sm",children:["Top P (",v.toFixed(2),")"]}),p.jsx(zi,{id:"global-top-p",min:0,max:1,step:.01,value:[v],onValueChange:R=>b(R[0]),onValueCommit:R=>T(r,R)})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"global-max-tokens",className:"text-sm",children:"Max Tokens"}),p.jsx(gn,{id:"global-max-tokens",type:"number",placeholder:"Default (None)",value:s??"",onChange:R=>k(i,R),min:"1",className:"h-9 text-sm"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"global-top-k",className:"text-sm",children:"Top K"}),p.jsx(gn,{id:"global-top-k",type:"number",placeholder:"Default (None)",value:a??"",onChange:R=>k(o,R),min:"1",className:"h-9 text-sm"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"global-presence-penalty",className:"text-sm",children:["Presence Penalty (",w.toFixed(2),")"]}),p.jsx(zi,{id:"global-presence-penalty",min:-2,max:2,step:.01,value:[w],onValueChange:R=>x(R[0]),onValueCommit:R=>T(c,R)})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Ot,{htmlFor:"global-frequency-penalty",className:"text-sm",children:["Frequency Penalty (",_.toFixed(2),")"]}),p.jsx(zi,{id:"global-frequency-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:R=>E(R[0]),onValueCommit:R=>T(h,R)})]})]})},JIe=()=>{const{toolMaxSteps:e,setToolMaxSteps:t}=ur(En(r=>({toolMaxSteps:r.toolMaxSteps,setToolMaxSteps:r.setToolMaxSteps}))),n=r=>{const s=r.target.value,i=s===""?5:parseInt(s,10);isNaN(i)||t(i)};return p.jsxs("div",{className:"space-y-4",children:[p.jsx(Ot,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(gn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:e,onChange:n,className:"w-24"})]})},QIe=()=>{const{autoTitleEnabled:e,setAutoTitleEnabled:t,autoTitleModelId:n,setAutoTitleModelId:r,autoTitlePromptMaxLength:s,setAutoTitlePromptMaxLength:i,autoTitleIncludeFiles:a,setAutoTitleIncludeFiles:o,autoTitleIncludeRules:l,setAutoTitleIncludeRules:c}=ur(En(h=>({autoTitleEnabled:h.autoTitleEnabled,setAutoTitleEnabled:h.setAutoTitleEnabled,autoTitleModelId:h.autoTitleModelId,setAutoTitleModelId:h.setAutoTitleModelId,autoTitlePromptMaxLength:h.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:h.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:h.autoTitleIncludeFiles,setAutoTitleIncludeFiles:h.setAutoTitleIncludeFiles,autoTitleIncludeRules:h.autoTitleIncludeRules,setAutoTitleIncludeRules:h.setAutoTitleIncludeRules}))),d=h=>{const m=h.target.value,g=m===""?768:parseInt(m,10);isNaN(g)||i(g)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsx(ia,{id:"auto-title-enabled",checked:e,onCheckedChange:t,"aria-labelledby":"auto-title-enabled-label"}),p.jsx(Ot,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),e&&p.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"auto-title-model-selector",children:"Model for Title Generation"}),p.jsx(F_,{value:n,onChange:r,className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Ot,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),p.jsx(gn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:s,onChange:d,className:"w-24"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(ia,{id:"auto-title-include-files",checked:a,onCheckedChange:o,"aria-labelledby":"auto-title-include-files-label"}),p.jsx(Ot,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(ia,{id:"auto-title-include-rules",checked:l,onCheckedChange:c,"aria-labelledby":"auto-title-include-rules-label"}),p.jsx(Ot,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]})},e3e=()=>{const{resetAssistantSettings:e}=ur(En(r=>({resetAssistantSettings:r.resetAssistantSettings}))),t=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&e()},n=C.useMemo(()=>[{value:"prompt",label:"System Prompt",content:p.jsx(YIe,{})},{value:"parameters",label:"Parameters",content:p.jsx(XIe,{})},{value:"tools",label:"Tools",content:p.jsx(JIe,{})},{value:"titles",label:"Auto-Titles",content:p.jsx(QIe,{})}],[]);return p.jsxs("div",{className:"space-y-6 p-1 h-full flex flex-col",children:[p.jsx(Kc,{tabs:n,defaultValue:"prompt",className:"flex-grow",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4 flex-grow overflow-y-auto",scrollable:!0}),p.jsx(ud,{className:"mt-auto"}),p.jsx("div",{className:"flex justify-end pt-4 flex-shrink-0",children:p.jsxs(At,{variant:"outline",size:"sm",onClick:t,children:[p.jsx(CA,{className:"mr-2 h-4 w-4"}),"Reset All Assistant Settings"]})})]})},t3e=yt.memo(e3e);class n3e{constructor(){Me(this,"id","core-settings-assistant");Me(this,"unregisterCallback",null);Me(this,"modApiRef",null);Me(this,"eventUnsubscribers",[]);Me(this,"isVisible",!1)}async initialize(t){this.modApiRef=t,this.isVisible=ur.getState().enableAdvancedSettings;const n=t.on(en.enableAdvancedSettingsChanged,r=>{typeof r=="object"&&r&&"enabled"in r&&this.isVisible!==r.enabled&&(this.isVisible=r.enabled,this.reregisterTab())});this.eventUnsubscribers.push(n)}reregisterTab(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.modApiRef&&this.register(this.modApiRef)}register(t){this.modApiRef=t,this.isVisible?this.unregisterCallback||(this.unregisterCallback=t.registerSettingsTab({id:"assistant",title:"Assistant",component:t3e,order:40})):this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null)}destroy(){this.eventUnsubscribers.forEach(t=>t()),this.eventUnsubscribers=[],this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),this.modApiRef=null,console.log(`[${this.id}] Destroyed.`)}}const r3e=()=>{const{importConversation:e,exportAllConversations:t}=ir(En(j=>({importConversation:j.importConversation,exportAllConversations:j.exportAllConversations}))),n=C.useRef(null),r=C.useRef(null),[s,i]=C.useState(!1),[a,o]=C.useState(!1),[l,c]=C.useState(!1),[d,h]=C.useState(!1),[m,g]=C.useState(!1),[v,b]=C.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[w,x]=C.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),_=()=>{var j;(j=n.current)==null||j.click()},E=()=>{var j;(j=r.current)==null||j.click()},k=C.useCallback(async j=>{var $;const V=($=j.target.files)==null?void 0:$[0];if(V){i(!0);try{await e(V)}catch(re){console.error("Import failed (from component):",re)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),T=C.useCallback(async j=>{var $;const V=($=j.target.files)==null?void 0:$[0];if(V){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}g(!0);try{await hp.importFullConfiguration(V,v)}catch(re){console.error("Full import failed (from component):",re)}finally{r.current&&(r.current.value=""),g(!1)}}},[v]),R=C.useCallback(async()=>{o(!0);try{await t()}catch(j){console.error("Export all failed (from component):",j)}finally{o(!1)}},[t]),M=C.useCallback(async()=>{h(!0);try{await hp.exportFullConfiguration(w)}catch(j){console.error("Full export failed (from component):",j)}finally{h(!1)}},[w]),I=C.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){c(!0);try{await Nt.clearAllData(),ze.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(j){const V="Failed to clear all data";console.error(V,j),ze.error(`${V}: ${j instanceof Error?j.message:String(j)}`),c(!1)}}},[]),O=(j,V)=>{b($=>({...$,[j]:V}))},P=(j,V)=>{x($=>({...$,[j]:V}))},U=(j,V,$,re)=>{const J=j==="import"?v:w,te=j==="import"?O:P,X=j==="import"?m:d;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Ol,{id:`${j}-${V}`,checked:J[V],onCheckedChange:ie=>te(V,!!ie),disabled:X}),p.jsxs(Ot,{htmlFor:`${j}-${V}`,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(re,{className:"h-4 w-4 text-muted-foreground"})," ",$]})]},`${j}-${V}`)};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Ot,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:k,accept:".json",className:"hidden",id:"import-file-input",disabled:s}),p.jsxs(At,{onClick:_,variant:"outline",size:"sm",disabled:s,children:[s?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(nX,{className:"mr-2 h-4 w-4"}),s?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Ot,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(At,{onClick:R,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(yf,{className:"mr-2 h-4 w-4"}),a?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(ud,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Ot,{className:"font-semibold",children:"Import Full Configuration"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",p.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[U("import","importSettings","Settings",Dk),U("import","importApiKeys","API Keys",p0),U("import","importProviderConfigs","Providers",Mw),U("import","importProjects","Projects",T4),U("import","importConversations","Conversations",Mk),U("import","importRulesAndTags","Rules & Tags",Ok),U("import","importMods","Mods",A4),U("import","importSyncRepos","Sync Repos",qu)]}),p.jsx("input",{type:"file",ref:r,onChange:T,accept:".json",className:"hidden",id:"full-import-file-input",disabled:m}),p.jsxs(At,{onClick:E,variant:"outline",size:"sm",disabled:m,className:"mt-2",children:[m?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(GZ,{className:"mr-2 h-4 w-4"}),m?"Importing...":"Select Full Backup File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Ot,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[U("export","importSettings","Settings",Dk),U("export","importApiKeys","API Keys",p0),U("export","importProviderConfigs","Providers",Mw),U("export","importProjects","Projects",T4),U("export","importConversations","Conversations",Mk),U("export","importRulesAndTags","Rules & Tags",Ok),U("export","importMods","Mods",A4),U("export","importSyncRepos","Sync Repos",qu)]}),p.jsxs(At,{onClick:M,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(LZ,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),p.jsx(ud,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(At,{onClick:I,variant:"destructive",disabled:l,children:[l?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(oa,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},s3e=yt.memo(r3e);class i3e{constructor(){Me(this,"id","core-settings-data");Me(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"data",title:"Data",component:s3e,order:70})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const a3e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:s,isLoading:i}=ld(En(R=>({loadedMods:R.loadedMods,addDbMod:R.addDbMod,updateDbMod:R.updateDbMod,deleteDbMod:R.deleteDbMod,dbMods:R.dbMods,isLoading:R.isLoading}))),[a,o]=C.useState(""),[l,c]=C.useState(""),[d,h]=C.useState(""),[m,g]=C.useState(!1),[v,b]=C.useState({}),[w,x]=C.useState({}),_=C.useCallback(async()=>{if(!a.trim()){ze.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){ze.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){ze.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const R={name:a.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((s==null?void 0:s.length)??1)*10};await t(R),o(""),c(""),h(""),ze.info("Mod added. Reload required for changes to take effect.")}catch(R){console.error("Failed to add mod (from component):",R)}finally{g(!1)}},[a,l,d,t,s==null?void 0:s.length]),E=C.useCallback(async R=>{b(M=>({...M,[R.id]:!0}));try{await n(R.id,{enabled:!R.enabled}),ze.info(`Mod "${R.name}" ${R.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(M){console.error("Failed to update mod (from component):",M)}finally{b(M=>({...M,[R.id]:!1}))}},[n]),k=C.useCallback(async R=>{if(window.confirm(`Are you sure you want to delete the mod "${R.name}"? This cannot be undone.`)){x(M=>({...M,[R.id]:!0}));try{await r(R.id),ze.info("Mod deleted. Reload required for changes to take effect.")}catch(M){console.error("Failed to delete mod (from component):",M)}finally{x(M=>({...M,[R.id]:!1}))}}},[r]),T=C.useCallback(R=>{const M=e.find(O=>O.id===R);if(M)if(M.error){const O=M.error instanceof Error?M.error.message:String(M.error);return{status:"Error",error:M.error,tooltip:O}}else return{status:"Loaded"};const I=(s||[]).find(O=>O.id===R);return I?I.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,s]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(zH,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(kA,{className:"h-4 w-4"}),p.jsx(UH,{children:"Security Warning"}),p.jsx(qH,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ot,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(gn,{id:"mod-name",value:a,onChange:R=>o(R.target.value),placeholder:"My Awesome Mod",disabled:m})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ot,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(gn,{id:"mod-url",type:"url",value:l,onChange:R=>c(R.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!d.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ot,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx(kd,{id:"mod-script",value:d,onChange:R=>h(R.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!l.trim()})]}),p.jsxs(At,{onClick:_,disabled:m,children:[m&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(qn,{delayDuration:100,children:p.jsxs(Jf,{children:[p.jsx(km,{children:p.jsxs(ts,{children:[p.jsx(Lr,{children:"Name"}),p.jsx(Lr,{children:"Source"}),p.jsx(Lr,{children:"Status"}),p.jsx(Lr,{className:"text-center",children:"Enabled"}),p.jsx(Lr,{className:"text-right",children:"Actions"})]})}),p.jsx(Qf,{children:i?p.jsxs(p.Fragment,{children:[p.jsx(ts,{children:p.jsx(On,{colSpan:5,children:p.jsx(cr,{className:"h-10 w-full"})})}),p.jsx(ts,{children:p.jsx(On,{colSpan:5,children:p.jsx(cr,{className:"h-10 w-full"})})})]}):(s||[]).length===0?p.jsx(ts,{children:p.jsx(On,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(s||[]).map(R=>{const{status:M,error:I,tooltip:O}=T(R.id),P=R.sourceUrl?new URL(R.sourceUrl).hostname:"Direct Script",U=v[R.id],j=w[R.id],V=U||j,$=M==="Error";return p.jsxs(ts,{children:[p.jsx(On,{className:"font-medium",children:R.name}),p.jsx(On,{className:"text-muted-foreground",children:P}),p.jsxs(On,{children:[p.jsxs(Gn,{children:[p.jsx(Kn,{asChild:!0,children:p.jsx("span",{className:$?"text-destructive font-semibold cursor-help":"",children:M})}),O&&p.jsx(Wn,{className:"max-w-xs break-words",children:p.jsx("p",{children:O})})]}),$&&I&&p.jsx("p",{className:"text-xs text-destructive truncate",children:I instanceof Error?I.message:String(I)})]}),p.jsxs(On,{className:"text-center",children:[p.jsx(ia,{checked:R.enabled??!1,onCheckedChange:()=>E(R),disabled:V,"aria-label":`Enable ${R.name}`}),U&&p.jsx(Fn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(On,{className:"text-right",children:p.jsx(At,{variant:"ghost",size:"icon",onClick:()=>k(R),disabled:V,"aria-label":`Delete ${R.name}`,className:"text-destructive hover:text-destructive/80",children:j?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(oa,{className:"h-4 w-4"})})})]},R.id)})})]})})})]})]})},o3e=yt.memo(a3e);class l3e{constructor(){Me(this,"id","core-settings-mods");Me(this,"unregisterCallback",null)}async initialize(t){}register(t){if(this.unregisterCallback){console.warn(`[${this.id}] Already registered. Skipping.`);return}this.unregisterCallback=t.registerSettingsTab({id:"mods",title:"Mods",component:o3e,order:80})}destroy(){this.unregisterCallback&&(this.unregisterCallback(),this.unregisterCallback=null),console.log(`[${this.id}] Destroyed.`)}}const c3e=[$Re,URe,GRe,ZIe,n3e,i3e,l3e,KEe,jCe,NCe,oRe,lRe,FRe,gRe,bRe,wRe,ske,nAe,ORe,uRe,TAe,eke,hRe,dAe,bAe,EAe];function u3e(){return p.jsxs(qEe,{children:[p.jsx(zEe,{}),p.jsx(BEe,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx(DEe,{controls:c3e})})})]})}CX();aW.createRoot(document.getElementById("root")).render(p.jsx(yt.StrictMode,{children:p.jsx(u3e,{})}));
